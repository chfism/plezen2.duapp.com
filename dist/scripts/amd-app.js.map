{
  "version": 3,
  "file": "/Users/Humphrey/Desktop/My Projects/plezen2.duapp.com/dist/scripts/amd-app.js",
  "sources": [
    "libs/Handlebars.js",
    "../locales/en.js",
    "../locales/zh.js",
    "../locales/lang.js",
    "compiled-templates.js",
    "libs/jQuery.js",
    "../components/spectrum/spectrum.js",
    "../bundles/app/strut.config/config.js",
    "common/EventEmitter.js",
    "common/collections/MultiMap.js",
    "libs/lodash.js",
    "framework/ServiceRegistry.js",
    "libs/backbone.js",
    "libs/etch.js",
    "libs/css.js",
    "styles/etch_extension/EtchOverrides.css!css",
    "../bundles/app/strut.etch_extension/main.js",
    "styles/widgets/fileBrowser.css!css",
    "../bundles/common/tantaman.web.widgets/FileBrowser.js",
    "styles/storage/storageModal.css!css",
    "../bundles/app/strut.storage/view/StorageModal.js",
    "../bundles/app/strut.storage/model/ActionHandlers.js",
    "../bundles/common/tantaman.web.widgets/ErrorModal.js",
    "../bundles/app/strut.storage/view/SaveMenuItem.js",
    "../bundles/common/tantaman.web.storage/StorageProvidersWrapper.js",
    "../bundles/app/strut.storage/model/StorageInterface.js",
    "../bundles/common/tantaman.web.widgets/MenuItem.js",
    "../bundles/app/strut.storage/main.js",
    "framework/ServiceCollection.js",
    "../bundles/common/tantaman.web.widgets/TabbedModal.js",
    "../bundles/app/strut.exporter/ExportImportModal.js",
    "../bundles/app/strut.exporter/main.js",
    "common/collections/LinkedList.js",
    "../bundles/common/tantaman.web.undo_support/Commands.js",
    "../bundles/common/tantaman.web.undo_support/CmdList.js",
    "../bundles/common/tantaman.web.undo_support/CmdListFactory.js",
    "../bundles/common/tantaman.web.widgets/UndoRedoMenuItem.js",
    "../bundles/app/strut.logo_button/main.js",
    "styles/widgets/widgets.css!css",
    "../bundles/common/tantaman.web.widgets/Dropdown.js",
    "../bundles/app/strut.deck/Utils.js",
    "libs/imgup.js",
    "../bundles/common/tantaman.web.widgets/ItemImportModal.js",
    "../bundles/app/strut.themes/ColorChooserModal.js",
    "../bundles/app/strut.themes/BackgroundProvider.js",
    "styles/strut.themes/backgroundClasses.css!css",
    "../bundles/app/strut.themes/AvailableBackgrounds.js",
    "styles/strut.themes/surfaceClasses.css!css",
    "../bundles/app/strut.themes/AvailableSurfaces.js",
    "components/codemirror/codemirror.css!css",
    "../components/codemirror/codemirror.js",
    "../bundles/common/tantaman.web.widgets/CodeEditor.js",
    "../bundles/common/tantaman.web.widgets/Button.js",
    "../bundles/common/tantaman.web.css_manip/CssManip.js",
    "styles/strut.themes/stylesheetEditor.css!css",
    "../components/lexed/lexed.js",
    "../bundles/app/strut.themes/StylesheetPreProcessor.js",
    "../components/codemirror/modes/css.js",
    "../bundles/app/strut.themes/StylesheetProvider.js",
    "../bundles/common/tantaman.web.widgets/PopoverTextbox.js",
    "../bundles/app/strut.themes/ClassEditor.js",
    "../bundles/app/strut.themes/main.js",
    "libs/mousetrap.js",
    "../bundles/app/strut.editor/GlobalEvents.js",
    "../bundles/app/strut.editor/main.js",
    "common/FileUtils.js",
    "../bundles/app/strut.exporter.json/View.js",
    "../bundles/app/strut.exporter.json/main.js",
    "libs/jszip.js",
    "common/Calcium.js",
    "common/Math2.js",
    "../bundles/app/strut.deck/SpatialObject.js",
    "../bundles/app/strut.slide_components/ComponentFactory.js",
    "../bundles/app/strut.deck/ComponentCommands.js",
    "../bundles/app/strut.deck/Slide.js",
    "../bundles/app/strut.deck/SlideCollection.js",
    "../bundles/app/strut.deck/SlideCommands.js",
    "../bundles/app/strut.deck/DeckUpgrade.js",
    "../bundles/app/strut.deck/CustomBackgrounds.js",
    "../bundles/app/strut.deck/Deck.js",
    "../components/marked/marked.js",
    "../bundles/app/strut.presentation_generator.impress/ImpressGenerator.js",
    "../bundles/app/strut.exporter.zip.browser/Archiver.js",
    "../bundles/app/strut.exporter.zip.browser/View.js",
    "../bundles/app/strut.exporter.zip.browser/main.js",
    "../bundles/app/strut.importer.json/main.js",
    "../bundles/common/tantaman.web.widgets/HiddenOpen.js",
    "framework/Iterator.js",
    "../bundles/app/strut.importer/main.js",
    "../bundles/app/strut.exit/main.js",
    "../bundles/app/strut.presentation_generator.impress/main.js",
    "../bundles/app/strut.presentation_generator/main.js",
    "../bundles/common/tantaman.web.saver/Saver.js",
    "../bundles/common/tantaman.web.saver/ExitSaver.js",
    "../bundles/common/tantaman.web.saver/TimedSaver.js",
    "../bundles/common/tantaman.web.saver/main.js",
    "../bundles/app/strut.slide_editor/model/SlideEditorModel.js",
    "libs/jquery-ui.js",
    "libs/jquery.multisortable.js",
    "../bundles/app/strut.slide_snapshot/SlideDrawer.js",
    "styles/slide_snapshot/slideSnapshot.css!css",
    "../bundles/app/strut.slide_snapshot/SlideSnapshot.js",
    "common/Queue.js",
    "common/Throttler.js",
    "../bundles/app/strut.slide_editor/model/WellContextMenuModel.js",
    "styles/slide_editor/wellContextMenu.css!css",
    "../bundles/app/strut.slide_editor/view/WellContextMenu.js",
    "styles/slide_editor/slideWell.css!css",
    "../bundles/app/strut.slide_editor/view/SlideWell.js",
    "styles/slide_editor/operatingTable.css!css",
    "../bundles/app/strut.deck/Component.js",
    "../bundles/app/strut.slide_editor/view/Utils.js",
    "../bundles/app/strut.slide_editor/view/OperatingTable.js",
    "../components/codemirror/modes/xml.js",
    "../components/codemirror/ManagedEditors.js",
    "../components/codemirror/modes/markdown.js",
    "../bundles/app/strut.slide_editor/view/MarkdownEditor.js",
    "../bundles/app/strut.slide_editor/view/SlideEditorView.js",
    "../bundles/common/tantaman.web.widgets/ModeButton.js",
    "../bundles/app/strut.slide_editor/main.js",
    "../bundles/common/tantaman.web/Utils.js",
    "../bundles/app/strut.transition_editor/model/OverviewModel.js",
    "styles/transition_editor/overview.css!css",
    "../bundles/app/strut.transition_editor/view/Overview.js",
    "../bundles/common/tantaman.web.interactions/TouchBridge.js",
    "../bundles/common/tantaman.web.widgets/DeltaDragControl.js",
    "styles/slide_components/ComponentView.css!css",
    "../bundles/app/strut.slide_components/view/ComponentView.js",
    "../bundles/app/strut.slide_components/view/ThreeDRotatableComponentView.js",
    "styles/transition_editor/TransitionSlideSnapshot.css!css",
    "../bundles/app/strut.slide_snapshot/TransitionSlideSnapshot.js",
    "../bundles/app/strut.transition_editor/view/FreeFormTransitionEditorView.js",
    "../bundles/app/strut.transition_editor/view/CannedTransitionsView.js",
    "../bundles/app/strut.transition_editor/main.js",
    "../bundles/app/strut.slide_components/view/ComponentButton.js",
    "../bundles/app/strut.slide_components/view/ImportingComponentButton.js",
    "../bundles/app/strut.slide_components/model/Image.js",
    "../bundles/app/strut.slide_components/model/TextBox.js",
    "../bundles/app/strut.slide_components/model/WebFrame.js",
    "../bundles/app/strut.slide_components/model/Video.js",
    "../bundles/app/strut.slide_components/view/Mixers.js",
    "../bundles/app/strut.slide_components/view/ImageView.js",
    "../bundles/app/strut.slide_components/view/TextBoxView.js",
    "../bundles/app/strut.slide_components/view/WebFrameView.js",
    "../bundles/app/strut.slide_components/view/VideoView.js",
    "../bundles/common/tantaman.web.widgets/Utils.js",
    "../bundles/app/strut.slide_components/view/ShapesDropdown.js",
    "../bundles/app/strut.slide_components/ShapeCollection.js",
    "../bundles/common/tantaman.web.widgets/ManagedColorChooser.js",
    "../bundles/app/strut.slide_components/view/ShapeView.js",
    "../bundles/app/strut.slide_components/model/Shape.js",
    "../bundles/app/strut.slide_components/main.js",
    "../bundles/app/strut.well_context_buttons/AddSlideButton.js",
    "../bundles/app/strut.well_context_buttons/main.js",
    "../bundles/app/strut.logo_button/LogoModel.js",
    "styles/logo_button/logo.css!css",
    "../bundles/app/strut.logo_button/LogoView.js",
    "../bundles/app/strut.presentation_generator/PreviewLauncher.js",
    "../bundles/app/strut.presentation_generator/view/PreviewButton.js",
    "../bundles/app/strut.header/model/ThemeProviderCollection.js",
    "../bundles/app/strut.header/view/ThemeProviderView.js",
    "../bundles/common/tantaman.web.widgets/Tablets.js",
    "../bundles/app/strut.header/view/Tablets.js",
    "styles/header/header.css!css",
    "../bundles/app/strut.header/view/HeaderView.js",
    "../bundles/app/strut.editor/CustomBgStylesheet.js",
    "../bundles/common/tantaman.web.widgets/InputRequestModal.js",
    "../bundles/app/strut.editor/EditorView.js",
    "../bundles/app/strut.header/model/HeaderModel.js",
    "common/Adapter.js",
    "../bundles/common/tantaman.web.interactions/Clipboard.js",
    "../bundles/app/strut.editor/EditorModel.js",
    "../components/q/q.js",
    "../components/lls/dist/LargeLocalStorage.js",
    "../components/lls/dist/contrib/URLCache.js",
    "../bundles/app/strut.startup/main.js",
    "features.js",
    "common/Concurrent.js",
    "StrutLoader.js",
    "../components/bootstrap/bootstrap.js",
    "../components/jq-contextmenu/jquery.ui.position.js",
    "../components/jq-contextmenu/jquery.contextMenu.js",
    "css!components/jq-contextmenu/jquery.contextMenu.css",
    "libs/jquery-ui-touch-punch.js",
    "../preview_export/scripts/dataset-shim.js",
    "main.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChXA,ADiXA;AChXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA,ADqDA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5nRA,AD6nRA;AC5nRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACp1DA,ADq1DA;ACp1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3uIA,AD4uIA;AC3uIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5iDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5gBA,AD6gBA;AC5gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnFA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpGA,ADqGA;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA,ADOA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA,AD6EA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA,AD8BA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA,ADmFA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA,ADwGA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA,AD2GA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA,ADyCA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA,ADoDA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7GA,AD8GA;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxVA,ADyVA;ACxVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA,ADoEA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjLA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7sLA,AD8sLA;AC7sLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA,AD+DA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA,AD2CA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtJA,ADuJA;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpnBA,ADqnBA;ACpnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA,AD0DA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACr1BA,ADs1BA;ACr1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzIA,AD0IA;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC37BA,AD47BA;AC37BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA,AD0GA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA,ADuFA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxGA,ADyGA;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA,AD4BA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5oCA,AD6oCA;AC5oCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnOA,ADoOA;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA,ADyCA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA,AD2EA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA,ADiCA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACr9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxQA,ADyQA;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA,AD0FA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjSA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1VA,AD2VA;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxiBA,ADyiBA;ACxiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA,ADqCA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA,ADiBA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1EA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3JA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/HA,ADgIA;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA,AD0FA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA,AD0DA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA,AD2CA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA,ADoBA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA,AD8CA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA,ADqCA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA,ADiBA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA,ADqCA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA,ADgGA;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA,AD0GA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA,ADeA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA,ADyBA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA,AD8DA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA,ADqEA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrCA;ACAA,ADCA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA,ADgEA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA,ADgDA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA,ADaA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACj5DA,ADk5DA;ACj5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9wDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtKA,ADuKA;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA,ADyCA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA,AD0BA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA,ADeA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnfA,ADofA;ACnfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnqDA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjKA,ADkKA;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "/*\n\nCopyright (C) 2011 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\n// lib/handlebars/browser-prefix.js\n(function() {\n\nvar Handlebars = {};\n\n(function(Handlebars, undefined) {\n;\n// lib/handlebars/base.js\n\nHandlebars.VERSION = \"1.0.0\";\nHandlebars.COMPILER_REVISION = 4;\n\nHandlebars.REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '>= 1.0.0'\n};\n\nHandlebars.helpers  = {};\nHandlebars.partials = {};\n\nvar toString = Object.prototype.toString,\n    functionType = '[object Function]',\n    objectType = '[object Object]';\n\nHandlebars.registerHelper = function(name, fn, inverse) {\n  if (toString.call(name) === objectType) {\n    if (inverse || fn) { throw new Handlebars.Exception('Arg not supported with multiple helpers'); }\n    Handlebars.Utils.extend(this.helpers, name);\n  } else {\n    if (inverse) { fn.not = inverse; }\n    this.helpers[name] = fn;\n  }\n};\n\nHandlebars.registerPartial = function(name, str) {\n  if (toString.call(name) === objectType) {\n    Handlebars.Utils.extend(this.partials,  name);\n  } else {\n    this.partials[name] = str;\n  }\n};\n\nHandlebars.registerHelper('helperMissing', function(arg) {\n  if(arguments.length === 2) {\n    return undefined;\n  } else {\n    throw new Error(\"Missing helper: '\" + arg + \"'\");\n  }\n});\n\nHandlebars.registerHelper('blockHelperMissing', function(context, options) {\n  var inverse = options.inverse || function() {}, fn = options.fn;\n\n  var type = toString.call(context);\n\n  if(type === functionType) { context = context.call(this); }\n\n  if(context === true) {\n    return fn(this);\n  } else if(context === false || context == null) {\n    return inverse(this);\n  } else if(type === \"[object Array]\") {\n    if(context.length > 0) {\n      return Handlebars.helpers.each(context, options);\n    } else {\n      return inverse(this);\n    }\n  } else {\n    return fn(context);\n  }\n});\n\nHandlebars.K = function() {};\n\nHandlebars.createFrame = Object.create || function(object) {\n  Handlebars.K.prototype = object;\n  var obj = new Handlebars.K();\n  Handlebars.K.prototype = null;\n  return obj;\n};\n\nHandlebars.logger = {\n  DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, level: 3,\n\n  methodMap: {0: 'debug', 1: 'info', 2: 'warn', 3: 'error'},\n\n  // can be overridden in the host environment\n  log: function(level, obj) {\n    if (Handlebars.logger.level <= level) {\n      var method = Handlebars.logger.methodMap[level];\n      if (typeof console !== 'undefined' && console[method]) {\n        console[method].call(console, obj);\n      }\n    }\n  }\n};\n\nHandlebars.log = function(level, obj) { Handlebars.logger.log(level, obj); };\n\nHandlebars.registerHelper('each', function(context, options) {\n  var fn = options.fn, inverse = options.inverse;\n  var i = 0, ret = \"\", data;\n\n  var type = toString.call(context);\n  if(type === functionType) { context = context.call(this); }\n\n  if (options.data) {\n    data = Handlebars.createFrame(options.data);\n  }\n\n  if(context && typeof context === 'object') {\n    if(context instanceof Array){\n      for(var j = context.length; i<j; i++) {\n        if (data) { data.index = i; }\n        ret = ret + fn(context[i], { data: data });\n      }\n    } else {\n      for(var key in context) {\n        if(context.hasOwnProperty(key)) {\n          if(data) { data.key = key; }\n          ret = ret + fn(context[key], {data: data});\n          i++;\n        }\n      }\n    }\n  }\n\n  if(i === 0){\n    ret = inverse(this);\n  }\n\n  return ret;\n});\n\nHandlebars.registerHelper('if', function(conditional, options) {\n  var type = toString.call(conditional);\n  if(type === functionType) { conditional = conditional.call(this); }\n\n  if(!conditional || Handlebars.Utils.isEmpty(conditional)) {\n    return options.inverse(this);\n  } else {\n    return options.fn(this);\n  }\n});\n\nHandlebars.registerHelper('unless', function(conditional, options) {\n  return Handlebars.helpers['if'].call(this, conditional, {fn: options.inverse, inverse: options.fn});\n});\n\nHandlebars.registerHelper('with', function(context, options) {\n  var type = toString.call(context);\n  if(type === functionType) { context = context.call(this); }\n\n  if (!Handlebars.Utils.isEmpty(context)) return options.fn(context);\n});\n\nHandlebars.registerHelper('log', function(context, options) {\n  var level = options.data && options.data.level != null ? parseInt(options.data.level, 10) : 1;\n  Handlebars.log(level, context);\n});\n;\n// lib/handlebars/utils.js\n\nvar errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\n\nHandlebars.Exception = function(message) {\n  var tmp = Error.prototype.constructor.apply(this, arguments);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n};\nHandlebars.Exception.prototype = new Error();\n\n// Build out our basic SafeString type\nHandlebars.SafeString = function(string) {\n  this.string = string;\n};\nHandlebars.SafeString.prototype.toString = function() {\n  return this.string.toString();\n};\n\nvar escape = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#x27;\",\n  \"`\": \"&#x60;\"\n};\n\nvar badChars = /[&<>\"'`]/g;\nvar possible = /[&<>\"'`]/;\n\nvar escapeChar = function(chr) {\n  return escape[chr] || \"&amp;\";\n};\n\nHandlebars.Utils = {\n  extend: function(obj, value) {\n    for(var key in value) {\n      if(value.hasOwnProperty(key)) {\n        obj[key] = value[key];\n      }\n    }\n  },\n\n  escapeExpression: function(string) {\n    // don't escape SafeStrings, since they're already safe\n    if (string instanceof Handlebars.SafeString) {\n      return string.toString();\n    } else if (string == null || string === false) {\n      return \"\";\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = string.toString();\n\n    if(!possible.test(string)) { return string; }\n    return string.replace(badChars, escapeChar);\n  },\n\n  isEmpty: function(value) {\n    if (!value && value !== 0) {\n      return true;\n    } else if(toString.call(value) === \"[object Array]\" && value.length === 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n};\n;\n// lib/handlebars/runtime.js\n\nHandlebars.VM = {\n  template: function(templateSpec) {\n    // Just add water\n    var container = {\n      escapeExpression: Handlebars.Utils.escapeExpression,\n      invokePartial: Handlebars.VM.invokePartial,\n      programs: [],\n      program: function(i, fn, data) {\n        var programWrapper = this.programs[i];\n        if(data) {\n          programWrapper = Handlebars.VM.program(i, fn, data);\n        } else if (!programWrapper) {\n          programWrapper = this.programs[i] = Handlebars.VM.program(i, fn);\n        }\n        return programWrapper;\n      },\n      merge: function(param, common) {\n        var ret = param || common;\n\n        if (param && common) {\n          ret = {};\n          Handlebars.Utils.extend(ret, common);\n          Handlebars.Utils.extend(ret, param);\n        }\n        return ret;\n      },\n      programWithDepth: Handlebars.VM.programWithDepth,\n      noop: Handlebars.VM.noop,\n      compilerInfo: null\n    };\n\n    return function(context, options) {\n      options = options || {};\n      var result = templateSpec.call(container, Handlebars, context, options.helpers, options.partials, options.data);\n\n      var compilerInfo = container.compilerInfo || [],\n          compilerRevision = compilerInfo[0] || 1,\n          currentRevision = Handlebars.COMPILER_REVISION;\n\n      if (compilerRevision !== currentRevision) {\n        if (compilerRevision < currentRevision) {\n          var runtimeVersions = Handlebars.REVISION_CHANGES[currentRevision],\n              compilerVersions = Handlebars.REVISION_CHANGES[compilerRevision];\n          throw \"Template was precompiled with an older version of Handlebars than the current runtime. \"+\n                \"Please update your precompiler to a newer version (\"+runtimeVersions+\") or downgrade your runtime to an older version (\"+compilerVersions+\").\";\n        } else {\n          // Use the embedded version info since the runtime doesn't know about this revision yet\n          throw \"Template was precompiled with a newer version of Handlebars than the current runtime. \"+\n                \"Please update your runtime to a newer version (\"+compilerInfo[1]+\").\";\n        }\n      }\n\n      return result;\n    };\n  },\n\n  programWithDepth: function(i, fn, data /*, $depth */) {\n    var args = Array.prototype.slice.call(arguments, 3);\n\n    var program = function(context, options) {\n      options = options || {};\n\n      return fn.apply(this, [context, options.data || data].concat(args));\n    };\n    program.program = i;\n    program.depth = args.length;\n    return program;\n  },\n  program: function(i, fn, data) {\n    var program = function(context, options) {\n      options = options || {};\n\n      return fn(context, options.data || data);\n    };\n    program.program = i;\n    program.depth = 0;\n    return program;\n  },\n  noop: function() { return \"\"; },\n  invokePartial: function(partial, name, context, helpers, partials, data) {\n    var options = { helpers: helpers, partials: partials, data: data };\n\n    if(partial === undefined) {\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be found\");\n    } else if(partial instanceof Function) {\n      return partial(context, options);\n    } else if (!Handlebars.compile) {\n      throw new Handlebars.Exception(\"The partial \" + name + \" could not be compiled when running in runtime-only mode\");\n    } else {\n      partials[name] = Handlebars.compile(partial, {data: data !== undefined});\n      return partials[name](context, options);\n    }\n  }\n};\n\nHandlebars.template = Handlebars.VM.template;\n;\n// lib/handlebars/browser-suffix.js\n\nif (typeof define == 'function' && define.amd) {\n  define('handlebars',Handlebars);\n}\n\n})(Handlebars);\n})();\n",
    "define('../locales/en',{\n    insert_image: 'Insert Image',\n    insert_video: 'Insert Video',\n    insert_website: 'Insert Website',\n    insert_search: 'Search and Insert Image',\n    add_slide: 'Add Slide',\n    remove_slide: 'Remove Slide',\n    slides: 'Slides',\n    overview: 'Overview',\n    open: 'Open',\n    save: 'Save',\n    save_as: 'Save as...',\n    new_: 'New',\n    text: 'Text',\n    image: 'Image',\n    video: 'Video',\n    website: 'Website',\n    search: 'Search',\n    present: 'Present',\n    export: 'Save',\n    import: 'Import...',\n    cut: 'Cut',\n    copy: 'Copy',\n    paste: 'Paste',\n    delete: 'Delete',\n    undo: 'Undo',\n    redo: 'Redo',\n    shapes: 'Shapes',\n    single_slide_bg: 'Single Slide Background',\n    invisible: 'Invisible',\n    reset: 'Reset',\n    go: 'Go',\n    strut_exporter_json: {\n        explain: 'This allows you to save a file on your computer that you can import back into Strut later.',\n        click_below: 'Click below to download'\n    },\n    background: 'Background',\n    surface: 'Surface',\n    invalid_filename: 'Invalid Filename',\n    new_presentation: 'New Presentation',\n    name: 'Name',\n    create_presentation: 'Create Presentation',\n    projectname: 'Name your project',\n    exit: 'Exit',\n    exitconfirm: \"Are you sure to exit? Unsaved document will lost!\",\n    play: \"Play Plezen\",\n    videoprompt: \"Supports webm & YouTube. Try out: http://www.youtube.com/watch?v=vHUsdkmr-SM\",\n    savesuccess: \"Save Success\",\n    oversize: \"Sorry，the maxmium size of picture is 200K for free users\",\n    notsupport: \"Sorry, only pptx file could be imported by free users\",\n    importsuccess: \"Import Success\"\n});\n\n",
    "define('../locales/zh',{\n    insert_image: '添加图片',\n    insert_video: '添加视频',\n    insert_website: '嵌入网页',\n    insert_search: '插入搜索图片',\n    add_slide: '添加Plezen页',\n    remove_slide: '删除Plzen页',\n    slides: 'Plezen页',\n    overview: '全局视图',\n    open: '打开',\n    save: '保存',\n    save_as: '另存为...',\n    new_: '新建',\n    text: '文本',\n    image: '图片',\n    video: '视频',\n    website: '网页',\n    search: '搜索',\n    present: '放映',\n    export: '保存',\n    import: '导入...',\n    cut: '剪切',\n    copy: '复制',\n    paste: '粘贴',\n    delete: '删除',\n    undo: '撤销',\n    redo: '重复',\n    shapes: '图形',\n    single_slide_bg: '单页背景',\n    invisible: '隐藏',\n    reset: '重置',\n    go: '走',\n    strut_exporter_json: {\n        explain: '保存到本地硬盘。',\n        click_below: '点击下载'\n    },\n    background: '背景',\n    surface: '全局背景',\n    invalid_filename: '文件名不可用',\n    new_presentation: '新Plezen',\n    name: '名称',\n    create_presentation: '创建Plezen',\n    projectname: '项目名称',\n    exit: '退出',\n    exitconfirm: \"是否确定退出？未保存的文档将丢失!\",\n    play: \"播放Plezen\",\n    videoprompt: \"支持webm和YouTube. <br> 尝试一下: http://www.youtube.com/watch?v=vHUsdkmr-SM\",\n    savesuccess: \"保存成功\",\n    oversize: \"非常抱歉，免费用户最大单张图片为200K\",\n    notsupport: \"非常抱歉，目前免费用户只开放导入PPTX文件功能\",\n    importsuccess: \"导入成功\"\n});\n\n",
    "//define(['../locales/de',\n//\t\t'../locales/en',\n//\t\t'../locales/es',\n//\t\t'../locales/fr',\n//\t\t'../locales/nl',\n//\t\t'../locales/ru',\n//\t\t'../locales/zh',\n//\t\t'handlebars'],\n//function(de, en, es, fr, nl, ru, zh, handlebars) {\n//\tvar langs = {\n//\t\ten: en,\n//\t\tde: de,\n//\t\tes: es,\n//\t\tfr: fr,\n//\t\tnl: nl,\n//\t\tru: ru,\n//\t\tzh: zh\n//\t};\ndefine('lang',[\n        '../locales/en',\n        '../locales/zh',\n        'handlebars'],\n    function(en, zh, handlebars) {\n        var langs = {\n            en: en,\n            zh: zh\n        };\n\n\tvar lang = window.navigator.language || window.navigator.userLanguage;\n\t//var result = langs[lang.split('-')[0]] || langs.en;\n    var result = langs.zh;\n\thandlebars.registerHelper(\"lang\", function(key) {\n\t\treturn result[key];\n\t});\n\n\treturn result;\n});\n\n",
    "define('compiled-templates',['handlebars'], function(Handlebars) {\n\nthis[\"JST\"] = this[\"JST\"] || {};\n\nthis[\"JST\"][\"strut.etch_extension/align\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a href=\\\"#\\\" \\n\tclass=\\\"btn btn-small etch-\";\n  if (stack1 = helpers.button) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.button; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><i class=\\\"icon-align-\";\n  if (stack1 = helpers.icon) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.icon; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></i></a>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.etch_extension/colorChooser\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<input class=\\\"color-chooser colorpicker etch-\";\n  if (stack1 = helpers.button) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.button; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" />\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.etch_extension/defaultButton\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a href=\\\"#\\\" \\n\tclass=\\\"btn btn-small etch-\";\n  if (stack1 = helpers.button) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.button; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><span>\";\n  if (stack1 = helpers.display) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.display; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</span></a>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.etch_extension/fontFamilySelection\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"btn-group\\\">\\n\t<button class=\\\"btn btn-inverse dropdown-toggle btn-small fontFamilyBtn\\\" data-toggle=\\\"dropdown\\\" title=\\\"Choose the font family\\\"><span class=\\\"text\\\">Lato</span><span class=\\\"caret\\\"></span></button>\\n\t<ul class=\\\"dropdown-menu menuBarOption\\\" data-option=\\\"fontFamily\\\">\\n\t\t<li>\\n                  <a class=\\\"lato\\\" href=\\\"#\\\" data-value=\\\"'Lato', sans-serif\\\">Lato</a>\\n                  <a class=\\\"leaguegothic\\\" href=\\\"#\\\" data-value=\\\"'League Gothic', sans-serif\\\">League Gothic</a>\\n                  <a class=\\\"droidsansmono\\\" href=\\\"#\\\" data-value=\\\"'Droid Sans Mono', monospace\\\">Droid Sans Mono</a>\\n                  <a class=\\\"ubuntu\\\" href=\\\"#\\\" data-value=\\\"'Ubuntu', sans-serif\\\">Ubuntu</a>\\n                  <a class=\\\"abril\\\" href=\\\"#\\\" data-value=\\\"'Abril Fatface', cursive\\\">Abril</a>\\n                  <a class=\\\"hammersmith\\\" href=\\\"#\\\" data-value=\\\"'Hammersmith One', sans-serif\\\">Hammersmith One</a>\\n                  <a class=\\\"fredoka\\\" href=\\\"#\\\" data-value=\\\"'Fredoka One', cursive\\\">Fredoka One</a>\\n                  <a class=\\\"gorditas\\\" href=\\\"#\\\" data-value=\\\"'Gorditas', cursive\\\">Gorditas</a>\\n                  <a class=\\\"pressstart\\\" href=\\\"#\\\" data-value=\\\"'PressStart2P', cursive\\\">Press Start 2P</a>\\n\t\t</li>\\n\t</ul>\\n</div>\";\n  });\n\nthis[\"JST\"][\"strut.etch_extension/fontSizeSelection\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"btn-group\\\">\\n\t<a class=\\\"btn btn-small btn-inverse dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" title=\\\"Choose the font size\\\"><span class=\\\"text fontSizeReadout\\\">72</span>\\n\t\t<span class=\\\"caret\\\"></span></a>\\n\t<ul class=\\\"dropdown-menu menuBarOption\\\" data-option=\\\"fontSize\\\">\\n\t\t<li>\\n                  <a href=\\\"#\\\" data-value=\\\"144\\\">144</a>\\n                  <a href=\\\"#\\\" data-value=\\\"96\\\">96</a>\\n                  <a href=\\\"#\\\" data-value=\\\"72\\\">72</a>\\n\t\t\t<a href=\\\"#\\\" data-value=\\\"64\\\">64</a>\\n                  <a href=\\\"#\\\" data-value=\\\"48\\\">48</a>\\n                  <a href=\\\"#\\\" data-value=\\\"36\\\">36</a>\\n                  <a href=\\\"#\\\" data-value=\\\"24\\\">24</a>\\n                  <a href=\\\"#\\\" data-value=\\\"16\\\">16</a>\\n                  <a href=\\\"#\\\" data-value=\\\"12\\\">12</a>\\n                  <a href=\\\"#\\\" data-value=\\\"8\\\">8</a>\\n\t\t</li>\\n     \t</ul>\\n</div>\";\n  });\n\nthis[\"JST\"][\"strut.header/Header\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"navbar navbar-inverse span12\\\">\\n\t<div class=\\\"navbar-inner\\\">\\n\t\t<ul class=\\\"nav\\\">\\n\t\t\t<li class=\\\"logo-holder\\\">\\n\t\t\t</li>\\n\t\t\t<li class=\\\"divider-vertical\\\">\\n\t\t\t</li>\\n\t\t</ul>\\n\t\t<ul class=\\\"nav\\\">\\n\t\t\t<li class=\\\"create-comp-buttons\\\">\\n\t\t\t\t<div class=\\\"btn-group iconBtns\\\">\\n\t\t\t\t</div>\\n\t\t\t</li>\\n\t\t</ul>\\n\t\t<ul class=\\\"nav theme-buttons\\\">\\n\t\t</ul>\\n\t\t<ul class=\\\"nav pull-right\\\">\\n\t\t\t<li class=\\\"divider-vertical\\\">\\n\t\t\t</li>\\n\t\t\t<li class=\\\"mode-buttons\\\">\\n\t\t\t</li>\\n\t\t</ul>\\n\t</div>\\n</div>\";\n  });\n\nthis[\"JST\"][\"strut.logo_button/Logo\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<a class=\\\"btn logo btn-plast dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n\t<span class=\\\"logo-bg\\\"></span>\\n    <span class=\\\"caret\\\"></span>\\n</a>\\n<ul class=\\\"dropdown-menu\\\">\\n</ul>\";\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.bespoke/BespokeTemplate\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t<style>\\n\t\";\n  if (stack1 = helpers.customStylesheet) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.customStylesheet; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t</style>\\n\t<style>\\n\t\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = ((stack1 = depth0.customBackgrounds),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.bgs)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t</style>\\n\t\";\n  stack2 = self.invokePartial(partials.PerSlideSurfaceStylesheet, 'PerSlideSurfaceStylesheet', depth0, helpers, partials, data);\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t<div id=\\\"main\\\" class=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.isBGClass || depth0.isBGClass),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"isBGClass\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"strut-surface \";\n  if (stack2 = helpers.cannedTransition) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.cannedTransition; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"\\\">\\n\t\t<article class=\\\"innerBg\\\">\\n\t\t\t\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = depth0.slides),stack1 == null || stack1 === false ? stack1 : stack1.models)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(6, program6, data, depth1),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t</article>\\n\t</div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\t\";\n  stack1 = self.invokePartial(partials.CustomBgStylesheet, 'CustomBgStylesheet', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  if (stack1 = helpers.surface) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.surface; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" \";\n  return buffer;\n  }\n\nfunction program6(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n\t\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(7, program7, data, depth0, depth2),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t\t\t\";\n  return buffer;\n  }\nfunction program7(depth0,data,depth1,depth3) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t\t\t\t<section class=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  stack2 = ((stack1 = helpers.determineBG || depth1.determineBG),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineBG\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" slideContainer strut-slide-\";\n  if (stack2 = helpers.index) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.index; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"\\\" style=\\\"width: 1024px; height: 768px;\\\" data-bespoke-state=\\\"strut-slide-\";\n  if (stack2 = helpers.index) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.index; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2);\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  stack2 = ((stack1 = helpers.determineSurface || depth1.determineSurface),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineSurface\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\">\\n\t\t\t\t\t\t<div class=\\\"themedArea\\\">\\n              \t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  stack2 = ((stack1 = helpers.marked || depth0.marked),stack1 ? stack1.call(depth0, depth0.markdown, options) : helperMissing.call(depth0, \"marked\", depth0.markdown, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n              \t\t\t</div>\\n\t\t\t\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  if (stack2 = helpers.components) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.components; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.components) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t\t\t</section>\\n\t\t\t\t\";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t\t\t\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  stack2 = ((stack1 = helpers.renderComponent || depth0.renderComponent),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, \"renderComponent\", depth0, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t\t\t\t\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.handouts/HandoutsTemplate\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, options, self=this, helperMissing=helpers.helperMissing, functionType=\"function\", blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, stack2;\n  buffer += \"\\n<style type=\\\"text/css\\\">\\n\";\n  if (stack1 = helpers.customStylesheet) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.customStylesheet; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</style>\\n\\n<div class=\\\"notes-handout\\\">\\n\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = depth0.slides),stack1 == null || stack1 === false ? stack1 : stack1.models)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(2, program2, data, depth1),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(3, program3, data, depth0, depth2),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n<div class=\\\"notes\\\">\\n\tNotes:\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\nfunction program3(depth0,data,depth1,depth3) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n<div class=\\\"slide-and-notes\\\">\\n<div class=\\\"slide \";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.determineBG || depth1.determineBG),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineBG\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" slideContainer\\\" style=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.slideBGImg || depth1.slideBGImg),stack1 ? stack1.call(depth0, depth1, options) : helperMissing.call(depth0, \"slideBGImg\", depth1, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\">\\n<div class=\\\"reveal themedArea\\\">\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.marked || depth0.marked),stack1 ? stack1.call(depth0, depth0.markdown, options) : helperMissing.call(depth0, \"marked\", depth0.markdown, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</div>\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  if (stack2 = helpers.components) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.components; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.components) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.renderComponent || depth0.renderComponent),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, \"renderComponent\", depth0, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/ComponentContainer\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, stack2, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"rotate(\";\n  if (stack1 = helpers.rotate) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.rotate; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"rad)\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"skewX(\";\n  if (stack1 = helpers.skewX) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.skewX; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"rad)\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"skewY(\";\n  if (stack1 = helpers.skewY) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.skewY; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"rad)\";\n  return buffer;\n  }\n\nfunction program9(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.width), options) : helperMissing.call(depth0, \"round\", ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.width), options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"px\";\n  return buffer;\n  }\n\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.height), options) : helperMissing.call(depth0, \"round\", ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.height), options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"px\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"componentContainer \";\n  if (stack1 = helpers.customClasses) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.customClasses; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" style=\\\"top: \";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, depth0['y'], options) : helperMissing.call(depth0, \"round\", depth0['y'], options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"px; left: \";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, depth0['x'], options) : helperMissing.call(depth0, \"round\", depth0['x'], options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"px; -webkit-transform: \";\n  stack2 = helpers['if'].call(depth0, depth0.rotate, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewX, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewY, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"; -moz-transform: \";\n  stack2 = helpers['if'].call(depth0, depth0.rotate, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewX, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewY, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"; transform: \";\n  stack2 = helpers['if'].call(depth0, depth0.rotate, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewX, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.skewY, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"; width: \";\n  stack2 = helpers['if'].call(depth0, depth0.scale, {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"; height: \";\n  stack2 = helpers['if'].call(depth0, depth0.scale, {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \";\\\">\\n\";\n  stack2 = self.invokePartial(partials.TransformContainer, 'TransformContainer', depth0, helpers, partials, data);\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/Image\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = self.invokePartial(partials.ComponentContainer, 'ComponentContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<img src=\\\"\"\n    + escapeExpression(((stack1 = depth1.uri),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></img>\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/ImpressTemplate\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n\t<script>\\n\t\tif(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { // Detect mobile browsers & use memory optimized styling if on mobile (hide all but the previous & next slides). Can prevent crashes when presentation contains many images and/or 3d elements.\\n\t\t  \tvar root = document.documentElement;\\n\t\t\troot.className += ' mobile';\\n\t\t} else {\\n\t\t\tvar root = document.documentElement;\\n\t\t\troot.className += ' desktop';\\n\t\t}\\n\\n\t\tfunction getPreviousSibling(element){\\n\t\t\tvar p = element;\\n\t\t\tdo p = p.previousSibling;\\n\t\t\twhile (p && p.nodeType != 1);\\n\t\t\treturn p;\\n\t\t}\\n\t\t\\n\t\tdocument.addEventListener('impress:stepleave',function(event){\\n\t\t\tprev = document.getElementsByClassName('prev')[0];\\n\t\t\tif(typeof prev != 'undefined')\\n\t\t\t\tprev.classList.remove('prev'); // Remove prev class from old prev slide\\n\t\t\tcurrent = document.getElementsByClassName('active')[0]; // Get current slide\\n\t\t\tprev = getPreviousSibling(current); // Get prev slide\\n\t\t\tprev.className += ' prev'; // Mark prev slide with class\\n\t\t});\\n\t</script>\\n\\n\t<style>\\n\t\t.step { display:none; } /* Start by not showing slides to prevent mobile Crash at the start */\\n\t\t.desktop .step { display:block; } /* Desktops should be able to handle all slides */\\n\t\t.step.active,.step.present,.step.active + .step,.step.prev { display:block; } /* Limit mobile to only show the current slide, the next slide, and the previous slide */\\n\t</style>\\n\";\n  }\n\nfunction program3(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n<style type=\\\"text/css\\\">\\n\";\n  if (stack1 = helpers.customStylesheet) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.customStylesheet; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</style>\\n<style>\\n\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = ((stack1 = depth0.customBackgrounds),stack1 == null || stack1 === false ? stack1 : stack1.attributes)),stack1 == null || stack1 === false ? stack1 : stack1.bgs)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</style>\\n\";\n  stack2 = self.invokePartial(partials.PerSlideSurfaceStylesheet, 'PerSlideSurfaceStylesheet', depth0, helpers, partials, data);\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n<!-- This is a work around / hack to get the user's browser to download the fonts \\n if they decide to save the presentation. -->\\n<div style=\\\"visibility: hidden; width: 0px; height: 0px\\\">\\n<img src=\\\"css/Lato-Bold.woff\\\" />\\n<img src=\\\"css/HammersmithOne.woff\\\" />\\n<img src=\\\"css/Droid-Sans-Mono.woff\\\" />\\n<img src=\\\"css/Gorditas-Regular.woff\\\" />\\n<img src=\\\"css/FredokaOne-Regular.woff\\\" />\\n<img src=\\\"css/Ubuntu.woff\\\" />\\n<img src=\\\"css/Ubuntu-Bold.woff\\\" />\\n<img src=\\\"css/PressStart2P-Regular.woff\\\" />\\n<img src=\\\"css/Lato-BoldItalic.woff\\\" />\\n<img src=\\\"css/AbrilFatface-Regular.woff\\\" />\\n<img src=\\\"css/Lato-Regular.woff\\\" />\\n</div>\\n\\n<div class=\\\"fallback-message\\\">\\n    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>\\n    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>\\n</div>\\n\\n<div class=\\\"bg \";\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  stack2 = ((stack1 = helpers.isBGClass || depth0.isBGClass),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"isBGClass\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"strut-surface\\\">\\n<div class=\\\"bg innerBg\\\">\\n<div id=\\\"impress\\\">\\n\t\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = depth0.slides),stack1 == null || stack1 === false ? stack1 : stack1.models)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(8, program8, data, depth1),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t<div id=\\\"overview\\\" class=\\\"step\\\" data-state=\\\"strut-slide-overview\\\" data-x=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.scaleX || depth0.scaleX),stack1 ? stack1.call(depth0, depth0.overviewX, options) : helperMissing.call(depth0, \"scaleX\", depth0.overviewX, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\" data-y=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.scaleY || depth0.scaleY),stack1 ? stack1.call(depth0, depth0.overviewY, options) : helperMissing.call(depth0, \"scaleY\", depth0.overviewY, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\" data-scale=\\\"9\\\"></div>\\n\t\";\n  return buffer;\n  }\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\";\n  stack1 = self.invokePartial(partials.CustomBgStylesheet, 'CustomBgStylesheet', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  if (stack1 = helpers.surface) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.surface; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" \";\n  return buffer;\n  }\n\nfunction program8(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(9, program9, data, depth0, depth2),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t\t</div>\\n\t\";\n  return buffer;\n  }\nfunction program9(depth0,data,depth1,depth3) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t\t<div class=\\\"step\\\" data-state=\\\"strut-slide-\";\n  if (stack1 = helpers.index) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.index; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1);\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.determineSurface || depth1.determineSurface),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineSurface\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\" data-x=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.scaleX || depth0.scaleX),stack1 ? stack1.call(depth0, depth0['x'], options) : helperMissing.call(depth0, \"scaleX\", depth0['x'], options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\" data-y=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.scaleY || depth0.scaleY),stack1 ? stack1.call(depth0, depth0['y'], options) : helperMissing.call(depth0, \"scaleY\", depth0['y'], options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\" \";\n  stack2 = helpers['if'].call(depth0, depth0.rotateX, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"  \";\n  stack2 = helpers['if'].call(depth0, depth0.rotateY, {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.rotateZ, {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0['z'], {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" \";\n  stack2 = helpers['if'].call(depth0, depth0.impScale, {hash:{},inverse:self.noop,fn:self.program(20, program20, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \">\\n\t\t\t<div class=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.determineBG || depth1.determineBG),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineBG\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" slideContainer strut-slide-\";\n  if (stack2 = helpers.index) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.index; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"\\\" style=\\\"width: 1024px; height: 768px;\\\">\\n\t\t\t<div class=\\\"themedArea\\\">\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.marked || depth0.marked),stack1 ? stack1.call(depth0, depth0.markdown, options) : helperMissing.call(depth0, \"marked\", depth0.markdown, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t</div>\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(22, program22, data),data:data};\n  if (stack2 = helpers.components) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.components; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.components) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t</div>\\n\t\t\";\n  return buffer;\n  }\nfunction program10(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"data-rotate-x=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.toDeg || depth0.toDeg),stack1 ? stack1.call(depth0, depth0.rotateX, options) : helperMissing.call(depth0, \"toDeg\", depth0.rotateX, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\"\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"data-rotate-y=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.toDeg || depth0.toDeg),stack1 ? stack1.call(depth0, depth0.rotateY, options) : helperMissing.call(depth0, \"toDeg\", depth0.rotateY, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\"\";\n  return buffer;\n  }\n\nfunction program16(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"data-rotate-z=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.toDeg || depth0.toDeg),stack1 ? stack1.call(depth0, depth0.rotateZ, options) : helperMissing.call(depth0, \"toDeg\", depth0.rotateZ, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\"\";\n  return buffer;\n  }\n\nfunction program18(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-z=\\\"\";\n  if (stack1 = helpers['z']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['z']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program20(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"data-scale=\\\"\";\n  if (stack1 = helpers.impScale) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.impScale; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"\";\n  return buffer;\n  }\n\nfunction program22(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.renderComponent || depth0.renderComponent),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, \"renderComponent\", depth0, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.mobileVersion) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.mobileVersion; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.mobileVersion) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(3, program3, data, depth0),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n<div class=\\\"hint\\\">\\n    <p>Use a spacebar or arrow keys to navigate</p>\\n</div>\\n</div>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/SVGContainer\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, stack2, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\n\n  buffer += \"<div class=\\\"componentContainer\\\" style=\\\"top: \";\n  if (stack1 = helpers['y']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['y']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"px; left: \";\n  if (stack1 = helpers['x']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['x']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"px; width: \"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px; height: \"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"px;\\\">\\n\";\n  stack2 = self.invokePartial(partials.TransformContainer, 'TransformContainer', depth0, helpers, partials, data);\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/SVGImage\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  stack1 = self.invokePartial(partials.SVGContainer, 'SVGContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<img src=\\\"\";\n  if (stack1 = helpers.src) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.src; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" style=\\\"width: 100%; height: 100%\\\"></img>\\n</div>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/Shape\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var stack1, options, self=this, functionType=\"function\", blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n\";\n  stack1 = self.invokePartial(partials.ComponentContainer, 'ComponentContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  if (stack1 = helpers.shapeSvg) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.shapeSvg; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.shapeSvg) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/TextBox\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = self.invokePartial(partials.ComponentContainer, 'ComponentContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<div style=\\\"font-size: \";\n  if (stack1 = helpers.size) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.size; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"px;\\\" class=\\\"antialias\\\">\\n\";\n  if (stack1 = helpers.text) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.text; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</div>\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/TransformContainer\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"scale(\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1['x']), options) : helperMissing.call(depth0, \"round\", ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1['x']), options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \", \";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.round || depth0.round),stack1 ? stack1.call(depth0, ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1['y']), options) : helperMissing.call(depth0, \"round\", ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1['y']), options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \")\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"transformContainer\\\" style=\\\"-webkit-transform: \";\n  stack1 = helpers['if'].call(depth0, depth0.scale, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \";\\n-moz-transform: \";\n  stack1 = helpers['if'].call(depth0, depth0.scale, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \";\\ntransform: \";\n  stack1 = helpers['if'].call(depth0, depth0.scale, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/Video\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = self.invokePartial(partials.ComponentContainer, 'ComponentContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<video controls>\\n\t<source src=\\\"\";\n  if (stack1 = helpers.src) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.src; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" type=\\\"\";\n  if (stack1 = helpers.srcType) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.srcType; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" preload=\\\"metadata\\\"></source>\\n</video>\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/WebFrame\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var stack1, options, self=this, functionType=\"function\", escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\";\n  stack1 = self.invokePartial(partials.ComponentContainer, 'ComponentContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<iframe width=\\\"960\\\" height=\\\"768\\\" src=\\\"\";\n  if (stack1 = helpers.src) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.src; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></iframe>\\n</div>\\n</div>\\n\";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/Youtube\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, stack2, self=this, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  stack1 = self.invokePartial(partials.SVGContainer, 'SVGContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<object width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"><param name=\\\"movie\\\" value=\\\"http://www.youtube.com/v/\";\n  if (stack2 = helpers.shortSrc) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.shortSrc; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"&hl=en&fs=1\\\"><param name=\\\"allowFullScreen\\\" value=\\\"true\\\"><embed src=\\\"http://www.youtube.com/v/\";\n  if (stack2 = helpers.shortSrc) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.shortSrc; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"&hl=en&fs=1\\\" type=\\\"application/x-shockwave-flash\\\" allowfullscreen=\\\"true\\\" width=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.width)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" height=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.scale),stack1 == null || stack1 === false ? stack1 : stack1.height)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"></object>\\n</div>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.impress/YoutubeContainer\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\n\n  buffer += \"<div class=\\\"componentContainer\\\" style=\\\"top: \";\n  if (stack1 = helpers['y']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['y']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"px; left: \";\n  if (stack1 = helpers['x']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['x']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"px;\\\">\\n\";\n  stack1 = self.invokePartial(partials.TransformContainer, 'TransformContainer', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator.reveal/RevealTemplate\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); partials = this.merge(partials, Handlebars.partials); data = data || {};\n  var buffer = \"\", stack1, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data,depth1) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n  <style type=\\\"text/css\\\">\\n    \";\n  if (stack1 = helpers.customStylesheet) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.customStylesheet; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </style>\\n  \";\n  stack1 = self.invokePartial(partials.PerSlideSurfaceStylesheet, 'PerSlideSurfaceStylesheet', depth0, helpers, partials, data);\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  \\n    <div class=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.isBGClass || depth0.isBGClass),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"isBGClass\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"reveal strut-surface\\\">\\n      <div class=\\\"bg innerBg\\\">\\n      <div class=\\\"slides\\\">\\n        \";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = depth0.slides),stack1 == null || stack1 === false ? stack1 : stack1.models)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.programWithDepth(4, program4, data, depth1),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n      </div>\\n      </div>\\n    </div>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  if (stack1 = helpers.surface) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.surface; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" \";\n  return buffer;\n  }\n\nfunction program4(depth0,data,depth2) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n        \";\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(5, program5, data, depth0, depth2),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  return buffer;\n  }\nfunction program5(depth0,data,depth1,depth3) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n          <section class=\\\"\";\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  stack2 = ((stack1 = helpers.determineBG || depth1.determineBG),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineBG\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \" slideContainer strut-slide-\";\n  if (stack2 = helpers.index) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.index; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"\\\" style=\\\"width: 1024px; height: 768px;\\\" data-state=\\\"strut-slide-\";\n  if (stack2 = helpers.index) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.index; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2);\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  stack2 = ((stack1 = helpers.determineSurface || depth1.determineSurface),stack1 ? stack1.call(depth0, depth1, depth3, options) : helperMissing.call(depth0, \"determineSurface\", depth1, depth3, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\\">\\n            <div class=\\\"themedArea\\\">\\n            \";\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  stack2 = ((stack1 = helpers.marked || depth0.marked),stack1 ? stack1.call(depth0, depth0.markdown, options) : helperMissing.call(depth0, \"marked\", depth0.markdown, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n            </div>\\n            \";\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  if (stack2 = helpers.components) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.components; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.components) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n          </section>\\n        \";\n  return buffer;\n  }\nfunction program6(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n              \";\n  options = {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data};\n  stack2 = ((stack1 = helpers.renderComponent || depth0.renderComponent),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, \"renderComponent\", depth0, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n            \";\n  return buffer;\n  }\n\n  options = {hash:{},inverse:self.noop,fn:self.programWithDepth(1, program1, data, depth0),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator/Button\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.chosen),stack1 == null || stack1 === false ? stack1 : stack1.shortname)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\"\n    + escapeExpression(((stack1 = ((stack1 = depth0.chosen),stack1 == null || stack1 === false ? stack1 : stack1.displayName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n\";\n  return buffer;\n  }\n\n  buffer += \"<button class=\\\"btn btn-success act\\\"><i class=\\\"icon-play icon-white\\\"/><span class=\\\"chosen\\\">\\n\";\n  stack2 = helpers['if'].call(depth0, ((stack1 = depth0.chosen),stack1 == null || stack1 === false ? stack1 : stack1.shortname), {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</span></button>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.presentation_generator/CustomBgStylesheet\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, stack2, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t.\";\n  if (stack1 = helpers.klass) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.klass; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" {\\n\t\tbackground: \";\n  if (stack1 = helpers.style) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.style; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \";\\n\t}\\n\";\n  return buffer;\n  }\n\n  stack2 = ((stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}));\n  if(stack2 || stack2 === 0) { return stack2; }\n  else { return ''; }\n  });\n\nthis[\"JST\"][\"strut.presentation_generator/PerSlideSurfaceStylesheet\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, self=this, helperMissing=helpers.helperMissing, functionType=\"function\", escapeExpression=this.escapeExpression, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t.strut-surface {\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.getBGImgStyle || depth0.getBGImgStyle),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"getBGImgStyle\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t}\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t.slideContainer {\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.getBGImgStyle || depth0.getBGImgStyle),stack1 ? stack1.call(depth0, depth0.background, options) : helperMissing.call(depth0, \"getBGImgStyle\", depth0.background, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t}\\n\";\n  return buffer;\n  }\n\nfunction program6(depth0,data) {\n  \n  var buffer = \"\", stack1, options;\n  buffer += \"\\n\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data};\n  if (stack1 = helpers.attributes) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.attributes; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.attributes) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};\n  stack2 = ((stack1 = helpers.isBGImg || depth0.isBGImg),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"isBGImg\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};\n  stack2 = ((stack1 = helpers.isBGImg || depth0.isBGImg),stack1 ? stack1.call(depth0, depth0.background, options) : helperMissing.call(depth0, \"isBGImg\", depth0.background, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t.strut-surface > .strut-slide-\"\n    + escapeExpression(((stack1 = ((stack1 = data),stack1 == null || stack1 === false ? stack1 : stack1.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" {\\n\t\t\t/*this only works for bg images or custom bgs*/\\n\t\t\t/*for bg classes we'll have to introduce a data api*/\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.getBGImgStyle || depth0.getBGImgStyle),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"getBGImgStyle\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t}\\n\t\t\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\t\t.slideContainer.strut-slide-\"\n    + escapeExpression(((stack1 = ((stack1 = data),stack1 == null || stack1 === false ? stack1 : stack1.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \" {\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data};\n  stack2 = ((stack1 = helpers.getBGImgStyle || depth0.getBGImgStyle),stack1 ? stack1.call(depth0, depth0.background, options) : helperMissing.call(depth0, \"getBGImgStyle\", depth0.background, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t}\\n\t\t\";\n  return buffer;\n  }\n\n  buffer += \"<style>\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.isBGImg || depth0.isBGImg),stack1 ? stack1.call(depth0, depth0.surface, options) : helperMissing.call(depth0, \"isBGImg\", depth0.surface, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data};\n  stack2 = ((stack1 = helpers.isBGImg || depth0.isBGImg),stack1 ? stack1.call(depth0, depth0.background, options) : helperMissing.call(depth0, \"isBGImg\", depth0.background, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  stack2 = ((stack1 = ((stack1 = ((stack1 = depth0.slides),stack1 == null || stack1 === false ? stack1 : stack1.models)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</style>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.slide_components/Component\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"content-scale\\\">\\n<div class=\\\"content\\\"></div>\\n</div>\\n<span class=\\\"topLabel label\\\"> \\n\t<span class=\\\"skewx\\\" data-delta=\\\"skewX\\\">↔</span>\\n\t<span class=\\\"align\\\" data-option=\\\"x\\\">↹</span>\\n</span>\\n<span class=\\\"leftLabel label\\\"> \\n\t<span class=\\\"align\\\" data-option=\\\"y\\\">↹</span>\\n\t<span class=\\\"skewy\\\" data-delta=\\\"skewY\\\">↔</span>\\n</span>\\n<span class=\\\"rightLabel label rotate\\\" data-delta=\\\"rotate\\\">↻</span>\\n<span class=\\\"scale label\\\" data-delta=\\\"scale\\\">↔</span>\\n<span class=\\\"close-btn-red-20 removeBtn\\\" title=\\\"Remove\\\"></span>\\n<div class=\\\"positioningCtrls form-inline\\\">\\n\t<span class=\\\"label leftposition\\\">→</span>\\n\t<input class=\\\"position\\\" type=\\\"text\\\" data-option=\\\"x\\\" value=\\\"\";\n  if (stack1 = helpers['x']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['x']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n\t<span class=\\\"label bottomposition\\\">↑</span>\\n\t<input class=\\\"position\\\" type=\\\"text\\\" data-option=\\\"y\\\" value=\\\"\";\n  if (stack1 = helpers['y']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['y']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n</div>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.slide_components/ShapesDropdown\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2;\n  buffer += \"\\n<li><a class=\\\"shape\\\" data-index=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = data),stack1 == null || stack1 === false ? stack1 : stack1.index)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\"><img src=\\\"\";\n  if (stack2 = helpers.src) { stack2 = stack2.call(depth0, {hash:{},data:data}); }\n  else { stack2 = depth0.src; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  buffer += escapeExpression(stack2)\n    + \"\\\" width=\\\"100%\\\" height=\\\"100%\\\"></img></a></li>\\n\";\n  return buffer;\n  }\n\n  buffer += \"<a class=\\\"btn btn-plast dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n\t<i class=\\\"icon-star icon-white\\\"></i>\\n\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.lang || depth0.lang),stack1 ? stack1.call(depth0, depth0.title, options) : helperMissing.call(depth0, \"lang\", depth0.title, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"</a>\\n<ul class=\\\"dropdown-menu horizontalDropdown\\\" role=\\\"menu\\\" style=\\\"min-width: 127px; width: 127px\\\">\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.shapes) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.shapes; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.shapes) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</ul>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.slide_editor/Button\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"btn-group iconBtns\\\">\\n\t<a class=\\\"btn btn-plast\\\">\\n\t\t<i class=\\\"icon-th-list icon-white\\\"></i>\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.lang || depth0.lang),stack1 ? stack1.call(depth0, \"slides\", options) : helperMissing.call(depth0, \"lang\", \"slides\", options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.slide_editor/Tablets\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"tablets-content\\\">\\n</div>\\n<div class=\\\"tablets-toggle btn btn-plast\\\">\\n\t<span class=\\\"caret whiteCaret\\\"></span>\\n</div>\";\n  });\n\nthis[\"JST\"][\"strut.slide_snapshot/SlideDrawer\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, self=this, helperMissing=helpers.helperMissing, functionType=\"function\", blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, stack2, options;\n  buffer += \"\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.renderComponent || depth0.renderComponent),stack1 ? stack1.call(depth0, depth0, \"Video WebFrame\", options) : helperMissing.call(depth0, \"renderComponent\", depth0, \"Video WebFrame\", options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"themedArea\\\">\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.marked || depth0.marked),stack1 ? stack1.call(depth0, depth0.markdown, options) : helperMissing.call(depth0, \"marked\", depth0.markdown, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</div>\\n\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.components) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.components; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.components) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.slide_snapshot/SlideSnapshot\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"overlay\\\"></div>\\n<div class=\\\"slideDrawer slideContainer\\\"></div>\\n<span class=\\\"close-btn-red-20 removeBtn\\\" title=\\\"Remove\\\"></span>\\n<span class=\\\"badge badge-inverse\\\"> </span>\";\n  });\n\nthis[\"JST\"][\"strut.slide_snapshot/TransitionSlideSnapshot\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"content-container\\\">\\n\t<div class=\\\"content\\\">\\n\t\t<div class=\\\"slideDrawer slideContainer\\\"></div>\\n\t\t<div class=\\\"back\\\"></div>\\n\t\t<div class=\\\"top\\\"></div><div class=\\\"bottom\\\"></div><div class=\\\"left\\\"></div><div class=\\\"right\\\"></div>\\n\t</div>\\n</div>\\n\\n<div class=\\\"topLabel form-inline\\\">\\n\t<span class=\\\"label rotates\\\" data-delta=\\\"rotateY\\\">↻Y</span>\\n\t<input type=\\\"text\\\" data-option=\\\"rotateY\\\" value=\\\"\";\n  if (stack1 = helpers.rotateY) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.rotateY; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></input>\\n</div>\\n<div class=\\\"leftLabel form-inline\\\">\\n\t<span class=\\\"label rotates\\\" data-delta=\\\"rotateX\\\">↻X</span>\\n\t<input type=\\\"text\\\" data-option=\\\"rotateX\\\" value=\\\"\";\n  if (stack1 = helpers.rotateX) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.rotateX; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></input>\\n</div>\\n<div class=\\\"rightLabel form-inline\\\">\\n\t<span class=\\\"label rotates\\\" data-delta=\\\"rotateZ\\\">↻Z</span>\\n\t<input type=\\\"text\\\" data-option=\\\"rotateZ\\\" value=\\\"\";\n  if (stack1 = helpers.rotateZ) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.rotateZ; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></input>\\n</div>\\n<div class=\\\"positioningCtrls form-inline\\\">\\n\t<span class=\\\"label layer\\\">z</span>\\n\t<input class=\\\"position\\\" type=\\\"text\\\" data-option=\\\"z\\\" value=\\\"\";\n  if (stack1 = helpers['z']) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0['z']; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n\t<span class=\\\"label scales\\\">↔</span>\\n\t<input class=\\\"position\\\" type=\\\"text\\\" data-option=\\\"scale\\\" value=\\\"\";\n  if (stack1 = helpers.impScale) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.impScale; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n</div>\\n<span class=\\\"badge badge-inverse\\\"> </span>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.splash/Splash\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div></div>\";\n  });\n\nthis[\"JST\"][\"strut.storage/ProviderTab\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div></div>\";\n  });\n\nthis[\"JST\"][\"strut.storage/StorageModal\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\t\t<li class=\\\"providerTab\\\"><a data-provider=\\\"\";\n  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (stack1 = helpers.name) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.name; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</a></li>\\n\t\t\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3 class=\\\"title\\\">\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<ul class=\\\"nav nav-tabs\\\">\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.tabs) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.tabs; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.tabs) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t</ul>\\n\t<div class=\\\"tabContent\\\">\\n\t</div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#\\\" class=\\\"btn btn-primary ok btn-inverse\\\">Ok</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.themes/BackgroundChooserDropdown\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\t\t<li><a class=\\\"\";\n  if (stack1 = helpers.klass) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.klass; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" thumbnail\\\" alt=\\\"\";\n  if (stack1 = helpers.description) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.description; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-class=\\\"\";\n  if (stack1 = helpers.klass) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.klass; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></a></li>\\n\t\t\t\";\n  return buffer;\n  }\n\n  buffer += \"<a class=\\\"btn btn-plast dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n\t<i class=\\\"icon-tint icon-white\\\"></i>\\n\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.lang || depth0.lang),stack1 ? stack1.call(depth0, depth0.title, options) : helperMissing.call(depth0, \"lang\", depth0.title, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"</a>\\n<ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n\t<li class=\\\"dropdown-submenu\\\">\\n\t\t<a tabindex=\\\"-1\\\" href=\\\"#\\\">All Slides</a>\\n\t\t<ul class=\\\"dropdown-menu horizontalDropdown allSlides\\\" style=\\\"min-width: 127px; width: 127px\\\">\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.backgrounds) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.backgrounds; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.backgrounds) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t<li><a class=\\\"transparentPattern thumbnail\\\" data-class=\\\"bg-transparent\\\"></a></li>\\n\t\t\t<li><a class=\\\"bg-img thumbnail\\\" data-class=\\\"bg-img\\\"><i class=\\\"icon-picture\\\"></i></a></li>\\n\t\t\t<li><a class=\\\"bg-custom thumbnail\\\" data-class=\\\"bg-custom\\\"><i class=\\\"icon-pencil\\\"></i></a></li>\\n\t\t</ul>\\n\t</li>\\n\t<li class=\\\"dropdown-submenu\\\">\\n\t\t<a tabindex=\\\"-1\\\" href=\\\"#\\\">Selected Slide</a>\\n\t\t<ul class=\\\"dropdown-menu horizontalDropdown\\\" style=\\\"min-width: 127px; width: 127px\\\">\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.backgrounds) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.backgrounds; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.backgrounds) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t<li><a class=\\\"transparentPattern thumbnail\\\" data-class=\\\"bg-transparent\\\"></a></li>\\n\t\t\t<li><a class=\\\"nobg thumbnail\\\" data-class=\\\"bg-default\\\"></a></li>\\n\t\t\t<li><a class=\\\"bg-img thumbnail\\\" data-class=\\\"bg-img\\\"><i class=\\\"icon-picture\\\"></i></a></li>\\n\t\t\t<li><a class=\\\"bg-custom thumbnail\\\" data-class=\\\"bg-custom\\\"><i class=\\\"icon-pencil\\\"></i></a></li>\\n\t\t</ul>\\n\t</li>\\n</ul>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.themes/ColorChooserModal\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  \n\n\n  return \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3 class=\\\"title\\\">Custom Color</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<input type='text' class=\\\"color-chooser pull-right\\\" />\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#\\\" class=\\\"btn btn-primary ok btn-inverse\\\">Ok</a>\\n</div>\";\n  });\n\nthis[\"JST\"][\"strut.themes/SurfaceChooserDropdown\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\t\t<li><a class=\\\"\";\n  if (stack1 = helpers.klass) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.klass; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" thumbnail\\\" alt=\\\"\";\n  if (stack1 = helpers.description) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.description; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" data-class=\\\"\";\n  if (stack1 = helpers.klass) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.klass; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></a></li>\\n\t\t\t\";\n  return buffer;\n  }\n\n  buffer += \"<a class=\\\"btn btn-plast dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n\t<i class=\\\"icon-tint icon-white\\\"></i>\\n\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.lang || depth0.lang),stack1 ? stack1.call(depth0, depth0.title, options) : helperMissing.call(depth0, \"lang\", depth0.title, options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"</a>\\n<ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n\t<li class=\\\"dropdown-submenu\\\">\\n\t\t<a tabindex=\\\"-1\\\" href=\\\"#\\\">All Slides</a>\\n\t\t<ul class=\\\"dropdown-menu horizontalDropdown allSlides\\\" style=\\\"min-width: 127px; width: 127px\\\">\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.backgrounds) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.backgrounds; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.backgrounds) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t<li><a class=\\\"nobg thumbnail\\\" data-class=\\\"bg-default\\\"></a></li>\\n\t\t\t<li><a class=\\\"bg-img thumbnail\\\" data-class=\\\"bg-img\\\"><i class=\\\"icon-picture\\\"></i></a></li>\\n\t\t\t<li><a class=\\\"bg-custom thumbnail\\\" data-class=\\\"bg-custom\\\"><i class=\\\"icon-pencil\\\"></i></a></li>\\n\t\t</ul>\\n\t</li>\\n\t<li class=\\\"dropdown-submenu\\\">\\n\t\t<a tabindex=\\\"-1\\\" href=\\\"#\\\">Selected Slide</a>\\n\t\t<ul class=\\\"dropdown-menu horizontalDropdown\\\" style=\\\"min-width: 127px; width: 127px\\\">\\n\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack2 = helpers.backgrounds) { stack2 = stack2.call(depth0, options); }\n  else { stack2 = depth0.backgrounds; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }\n  if (!helpers.backgrounds) { stack2 = blockHelperMissing.call(depth0, stack2, options); }\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t\t\t<li><a class=\\\"nobg thumbnail\\\" data-class=\\\"bg-default\\\"></a></li>\\n\t\t\t<li><a class=\\\"bg-img thumbnail\\\" data-class=\\\"bg-img\\\"><i class=\\\"icon-picture\\\"></i></a></li>\\n\t\t\t<li><a class=\\\"bg-custom thumbnail\\\" data-class=\\\"bg-custom\\\"><i class=\\\"icon-pencil\\\"></i></a></li>\\n\t\t</ul>\\n\t</li>\\n</ul>\\n\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.transition_editor/Button\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, options, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"btn-group iconBtns\\\">\\n\t<a class=\\\"btn btn-plast\\\">\\n\t\t<i class=\\\"icon-th-large icon-white\\\"></i>\\n\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  stack2 = ((stack1 = helpers.lang || depth0.lang),stack1 ? stack1.call(depth0, \"overview\", options) : helperMissing.call(depth0, \"lang\", \"overview\", options));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"strut.transition_editor/CannedTransitions\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t<li class=\\\"span4\\\">\\n\t\t<a href=\\\"#\\\" data-name=\\\"\";\n  if (stack1 = helpers.name) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.name; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"thumbnail\";\n  stack1 = helpers['if'].call(depth0, depth0.active, {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n\t\t\t<img src=\\\"\";\n  if (stack1 = helpers.img) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.img; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" style=\\\"\";\n  if (stack1 = helpers.style) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.style; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></img>\\n\t\t</a>\\n\t</li>\\n\t\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  \n  return \" active\";\n  }\n\n  buffer += \"<ul class=\\\"thumbnails\\\">\\n\t\";\n  stack2 = ((stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</ul>\\n<span class=\\\"bespoke-link\\\">\\n\t<a href=\\\"https://github.com/markdalgleish/bespoke.js\\\" target=\\\"_blank\\\">Bespoke.js</a>\\n</span>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/CodeEditor\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3>\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<textarea class=\\\"codeInput\\\">\";\n  if (stack1 = helpers.placeholder) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.placeholder; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</textarea>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#\\\" class=\\\"btn btn-primary ok btn-inverse\\\">Save</a>\\n\t<a href=\\\"#\\\" class=\\\"btn btn-danger cancel\\\">Cancel</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/FileBrowser\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\";\n  buffer += \"\\n\t<li data-fileName=\\\"\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \"\\\"><a>\"\n    + escapeExpression((typeof depth0 === functionType ? depth0.apply(depth0) : depth0))\n    + \" <button class=\\\"close pull-right\\\">×</button></a></li>\\n\t\";\n  return buffer;\n  }\n\n  buffer += \"<input type=\\\"text\\\" class=\\\"fileName\\\"></input>\\n<ul class=\\\"nav nav-pills nav-stacked\\\">\\n\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.files) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.files; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.files) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</ul>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/InputRequestModal\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3 class=\\\"title\\\">\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<div class=\\\"errors\\\"></div>\\n\t<form class=\\\"form-inline\\\">\\n\t\t<label>\";\n  if (stack1 = helpers.prompt) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.prompt; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \":&nbsp;</label><input type=\\\"text\\\" />\\n\t</form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#!\\\" class=\\\"btn btn-primary ok btn-inverse\\\">Ok</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/ItemImportModal\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"<div data-option=\\\"browse\\\" class=\\\"btn\\\">Browse</div>\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"<div data-option=\\\"search\\\" class=\\\"btn\\\">Search</div>\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"<div class=\\\"droparea\\\">Drag & Drop</div>\";\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n          <img class=\\\"preview\\\" width=\\\"166\\\" height=\\\"140\\\" style=\\\"padding:2px;margin: 0 auto; position: relative; z-index: 1; display:inline-block\\\" src=\\\"\";\n  if (stack1 = helpers.path) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.path; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3>\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<div class=\\\"alert alert-error dispNone\\\">\\n  \t\t<button class=\\\"close\\\" data-dismiss=\\\"alert\\\">×</button>\\n  \t\tThe image URL you entered appears to be incorrect\\n\t</div>\\n\t<h4>URL/File/Keyword:</h4><div class=\\\"form-inline\\\">\\n\t<input type=\\\"text\\\" name=\\\"itemUrl\\\"></input>\\n\t&nbsp;\";\n  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};\n  if (stack1 = helpers.browsable) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.browsable; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.browsable) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t     \";\n  options = {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data};\n  if (stack1 = helpers.searchable) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.searchable; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.searchable) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\t</div>\\n    \t<input type=\\\"file\\\" style=\\\"display:none\\\"></input>\\n    \t<h4>Preview:</h4>\\n\t<ul class=\\\"thumbnails\\\">\\n\t\t<li class=\\\"span4\\\">\\n\t\t\t<div class=\\\"thumbnail\\\" style=\\\"width: 368px; height: 276px; position: relative;overflow-y:auto;\\\">\\n\t\t\t\t\";\n  options = {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data};\n  if (stack1 = helpers.browsable) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.browsable; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.browsable) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  options = {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data};\n  if (stack1 = helpers.pics) { stack1 = stack1.call(depth0, options); }\n  else { stack1 = depth0.pics; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  if (!helpers.pics) { stack1 = blockHelperMissing.call(depth0, stack1, options); }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n      </div>\\n\t\t\t<div class=\\\"progressprogressloading dispNone\\\" style=\\\"height:60px;padding-left:80px\\\">\\n  \t\t\t\t<img src=\\\"../../img/extend/loading.gif\\\">\\n\t\t\t</div>\\n\t\t</li>\\n\t</ul>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#\\\" class=\\\"btn btn-primary ok btn-inverse\\\">\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/List\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, functionType=\"function\", self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"\\n\t<li></li>\\n\t\";\n  }\n\n  buffer += \"<ul>\\n\t\";\n  stack2 = ((stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n</ul>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/PopoverTextbox\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \" <input type=\\\"textbox\\\" placeholder=\\\"custom1 custom2\\\"></input>\\n<div>\\n<a class=\\\"btn btn-plast ok\\\">Ok</a>\\n<a class=\\\"btn btn-danger cancel\\\">Cancel</a>\\n</div>\";\n  return buffer;\n  });\n\nthis[\"JST\"][\"tantaman.web.widgets/TabbedModal\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, stack2, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, blockHelperMissing=helpers.blockHelperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n\t\t\t<li class=\\\"providerTab\\\" data-provider=\\\"\";\n  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><a>\";\n  if (stack1 = helpers.name) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.name; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</a></li>\\n\t\t\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"modal-header\\\">\\n\t<button class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\n\t<h3 class=\\\"title\\\">\";\n  if (stack1 = helpers.title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }\n  else { stack1 = depth0.title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }\n  buffer += escapeExpression(stack1)\n    + \"</h3>\\n</div>\\n<div class=\\\"modal-body\\\" style=\\\"overflow: hidden\\\">\\n\t<ul class=\\\"nav nav-tabs\\\">\\n\t\t\";\n  stack2 = ((stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0)),blockHelperMissing.call(depth0, stack1, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data}));\n  if(stack2 || stack2 === 0) { buffer += stack2; }\n  buffer += \"\\n\t</ul>\\n\t<div class=\\\"tabContent\\\">\\n\t</div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n\t<a href=\\\"#!\\\" class=\\\"btn btn-primary ok btn-inverse\\\">Ok</a>\\n</div>\";\n  return buffer;\n  });\n\nreturn this[\"JST\"];\n\n});\n",
    "/*!\n * jQuery JavaScript Library v2.0.3\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2013-07-03T13:30Z\n */\n(function( window, undefined ) {\n\n// Can't do this because several apps including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n// Support: Firefox 18+\n//\"use strict\";\n\tvar\n\t// A central reference to the root jQuery(document)\n\t\trootjQuery,\n\n\t// The deferred used on DOM ready\n\t\treadyList,\n\n\t// Support: IE9\n\t// For `typeof xmlNode.method` instead of `xmlNode.method !== undefined`\n\t\tcore_strundefined = typeof undefined,\n\n\t// Use the correct document accordingly with window argument (sandbox)\n\t\tlocation = window.location,\n\t\tdocument = window.document,\n\t\tdocElem = document.documentElement,\n\n\t// Map over jQuery in case of overwrite\n\t\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t\t_$ = window.$,\n\n\t// [[Class]] -> type pairs\n\t\tclass2type = {},\n\n\t// List of deleted data cache ids, so we can reuse them\n\t\tcore_deletedIds = [],\n\n\t\tcore_version = \"2.0.3\",\n\n\t// Save a reference to some core methods\n\t\tcore_concat = core_deletedIds.concat,\n\t\tcore_push = core_deletedIds.push,\n\t\tcore_slice = core_deletedIds.slice,\n\t\tcore_indexOf = core_deletedIds.indexOf,\n\t\tcore_toString = class2type.toString,\n\t\tcore_hasOwn = class2type.hasOwnProperty,\n\t\tcore_trim = core_version.trim,\n\n\t// Define a local copy of jQuery\n\t\tjQuery = function( selector, context ) {\n\t\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t\treturn new jQuery.fn.init( selector, context, rootjQuery );\n\t\t},\n\n\t// Used for matching numbers\n\t\tcore_pnum = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,\n\n\t// Used for splitting on whitespace\n\t\tcore_rnotwhite = /\\S+/g,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\t// Match a standalone tag\n\t\trsingleTag = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n\n\t// Matches dashed string for camelizing\n\t\trmsPrefix = /^-ms-/,\n\t\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\t\tfcamelCase = function( all, letter ) {\n\t\t\treturn letter.toUpperCase();\n\t\t},\n\n\t// The ready event handler and self cleanup method\n\t\tcompleted = function() {\n\t\t\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\t\t\twindow.removeEventListener( \"load\", completed, false );\n\t\t\tjQuery.ready();\n\t\t};\n\n\tjQuery.fn = jQuery.prototype = {\n\t\t// The current version of jQuery being used\n\t\tjquery: core_version,\n\n\t\tconstructor: jQuery,\n\t\tinit: function( selector, context, rootjQuery ) {\n\t\t\tvar match, elem;\n\n\t\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\t\tif ( !selector ) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// Handle HTML strings\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\tif ( selector.charAt(0) === \"<\" && selector.charAt( selector.length - 1 ) === \">\" && selector.length >= 3 ) {\n\t\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t\t} else {\n\t\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t\t}\n\n\t\t\t\t// Match html or make sure no context is specified for #id\n\t\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\t\tif ( match[1] ) {\n\t\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t\t// scripts is true for back-compat\n\t\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t) );\n\n\t\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.context = document;\n\t\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\n\t\t\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t\t\t// HANDLE: $(expr, context)\n\t\t\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t\t} else {\n\t\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t\t}\n\n\t\t\t\t// HANDLE: $(DOMElement)\n\t\t\t} else if ( selector.nodeType ) {\n\t\t\t\tthis.context = this[0] = selector;\n\t\t\t\tthis.length = 1;\n\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(function)\n\t\t\t\t// Shortcut for document ready\n\t\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\t\treturn rootjQuery.ready( selector );\n\t\t\t}\n\n\t\t\tif ( selector.selector !== undefined ) {\n\t\t\t\tthis.selector = selector.selector;\n\t\t\t\tthis.context = selector.context;\n\t\t\t}\n\n\t\t\treturn jQuery.makeArray( selector, this );\n\t\t},\n\n\t\t// Start with an empty selector\n\t\tselector: \"\",\n\n\t\t// The default length of a jQuery object is 0\n\t\tlength: 0,\n\n\t\ttoArray: function() {\n\t\t\treturn core_slice.call( this );\n\t\t},\n\n\t\t// Get the Nth element in the matched element set OR\n\t\t// Get the whole matched element set as a clean array\n\t\tget: function( num ) {\n\t\t\treturn num == null ?\n\n\t\t\t\t// Return a 'clean' array\n\t\t\t\tthis.toArray() :\n\n\t\t\t\t// Return just the object\n\t\t\t\t( num < 0 ? this[ this.length + num ] : this[ num ] );\n\t\t},\n\n\t\t// Take an array of elements and push it onto the stack\n\t\t// (returning the new matched element set)\n\t\tpushStack: function( elems ) {\n\n\t\t\t// Build a new jQuery matched element set\n\t\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t\t// Add the old object onto the stack (as a reference)\n\t\t\tret.prevObject = this;\n\t\t\tret.context = this.context;\n\n\t\t\t// Return the newly-formed element set\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Execute a callback for every element in the matched set.\n\t\t// (You can seed the arguments with an array of args, but this is\n\t\t// only used internally.)\n\t\teach: function( callback, args ) {\n\t\t\treturn jQuery.each( this, callback, args );\n\t\t},\n\n\t\tready: function( fn ) {\n\t\t\t// Add the callback\n\t\t\tjQuery.ready.promise().done( fn );\n\n\t\t\treturn this;\n\t\t},\n\n\t\tslice: function() {\n\t\t\treturn this.pushStack( core_slice.apply( this, arguments ) );\n\t\t},\n\n\t\tfirst: function() {\n\t\t\treturn this.eq( 0 );\n\t\t},\n\n\t\tlast: function() {\n\t\t\treturn this.eq( -1 );\n\t\t},\n\n\t\teq: function( i ) {\n\t\t\tvar len = this.length,\n\t\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t\t},\n\n\t\tmap: function( callback ) {\n\t\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\t\treturn callback.call( elem, i, elem );\n\t\t\t}));\n\t\t},\n\n\t\tend: function() {\n\t\t\treturn this.prevObject || this.constructor(null);\n\t\t},\n\n\t\t// For internal use only.\n\t\t// Behaves like an Array's method, not like a jQuery method.\n\t\tpush: core_push,\n\t\tsort: [].sort,\n\t\tsplice: [].splice\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\n\tjQuery.fn.init.prototype = jQuery.fn;\n\n\tjQuery.extend = jQuery.fn.extend = function() {\n\t\tvar options, name, src, copy, copyIsArray, clone,\n\t\t\ttarget = arguments[0] || {},\n\t\t\ti = 1,\n\t\t\tlength = arguments.length,\n\t\t\tdeep = false;\n\n\t\t// Handle a deep copy situation\n\t\tif ( typeof target === \"boolean\" ) {\n\t\t\tdeep = target;\n\t\t\ttarget = arguments[1] || {};\n\t\t\t// skip the boolean and the target\n\t\t\ti = 2;\n\t\t}\n\n\t\t// Handle case when target is a string or something (possible in deep copy)\n\t\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\t\ttarget = {};\n\t\t}\n\n\t\t// extend jQuery itself if only one argument is passed\n\t\tif ( length === i ) {\n\t\t\ttarget = this;\n\t\t\t--i;\n\t\t}\n\n\t\tfor ( ; i < length; i++ ) {\n\t\t\t// Only deal with non-null/undefined values\n\t\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t\t// Extend the base object\n\t\t\t\tfor ( name in options ) {\n\t\t\t\t\tsrc = target[ name ];\n\t\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t\t// Prevent never-ending loop\n\t\t\t\t\tif ( target === copy ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Return the modified object\n\t\treturn target;\n\t};\n\n\tjQuery.extend({\n\t\t// Unique for each copy of jQuery on the page\n\t\texpando: \"jQuery\" + ( core_version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t\tnoConflict: function( deep ) {\n\t\t\tif ( window.$ === jQuery ) {\n\t\t\t\twindow.$ = _$;\n\t\t\t}\n\n\t\t\tif ( deep && window.jQuery === jQuery ) {\n\t\t\t\twindow.jQuery = _jQuery;\n\t\t\t}\n\n\t\t\treturn jQuery;\n\t\t},\n\n\t\t// Is the DOM ready to be used? Set to true once it occurs.\n\t\tisReady: false,\n\n\t\t// A counter to track how many items to wait for before\n\t\t// the ready event fires. See #6781\n\t\treadyWait: 1,\n\n\t\t// Hold (or release) the ready event\n\t\tholdReady: function( hold ) {\n\t\t\tif ( hold ) {\n\t\t\t\tjQuery.readyWait++;\n\t\t\t} else {\n\t\t\t\tjQuery.ready( true );\n\t\t\t}\n\t\t},\n\n\t\t// Handle when the DOM is ready\n\t\tready: function( wait ) {\n\n\t\t\t// Abort if there are pending holds or we're already ready\n\t\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remember that the DOM is ready\n\t\t\tjQuery.isReady = true;\n\n\t\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If there are functions bound, to execute\n\t\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t\t// Trigger any bound ready events\n\t\t\tif ( jQuery.fn.trigger ) {\n\t\t\t\tjQuery( document ).trigger(\"ready\").off(\"ready\");\n\t\t\t}\n\t\t},\n\n\t\t// See test/unit/core.js for details concerning isFunction.\n\t\t// Since version 1.3, DOM methods and functions like alert\n\t\t// aren't supported. They return false on IE (#2968).\n\t\tisFunction: function( obj ) {\n\t\t\treturn jQuery.type(obj) === \"function\";\n\t\t},\n\n\t\tisArray: Array.isArray,\n\n\t\tisWindow: function( obj ) {\n\t\t\treturn obj != null && obj === obj.window;\n\t\t},\n\n\t\tisNumeric: function( obj ) {\n\t\t\treturn !isNaN( parseFloat(obj) ) && isFinite( obj );\n\t\t},\n\n\t\ttype: function( obj ) {\n\t\t\tif ( obj == null ) {\n\t\t\t\treturn String( obj );\n\t\t\t}\n\t\t\t// Support: Safari <= 5.1 (functionish RegExp)\n\t\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\t\tclass2type[ core_toString.call(obj) ] || \"object\" :\n\t\t\t\ttypeof obj;\n\t\t},\n\n\t\tisPlainObject: function( obj ) {\n\t\t\t// Not plain objects:\n\t\t\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t\t\t// - DOM nodes\n\t\t\t// - window\n\t\t\tif ( jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Support: Firefox <20\n\t\t\t// The try/catch suppresses exceptions thrown when attempting to access\n\t\t\t// the \"constructor\" property of certain host objects, ie. |window.location|\n\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=814622\n\t\t\ttry {\n\t\t\t\tif ( obj.constructor &&\n\t\t\t\t\t!core_hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If the function hasn't returned already, we're confident that\n\t\t\t// |obj| is a plain object, created by {} or constructed with new Object\n\t\t\treturn true;\n\t\t},\n\n\t\tisEmptyObject: function( obj ) {\n\t\t\tvar name;\n\t\t\tfor ( name in obj ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\terror: function( msg ) {\n\t\t\tthrow new Error( msg );\n\t\t},\n\n\t\t// data: string of html\n\t\t// context (optional): If specified, the fragment will be created in this context, defaults to document\n\t\t// keepScripts (optional): If true, will include scripts passed in the html string\n\t\tparseHTML: function( data, context, keepScripts ) {\n\t\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ( typeof context === \"boolean\" ) {\n\t\t\t\tkeepScripts = context;\n\t\t\t\tcontext = false;\n\t\t\t}\n\t\t\tcontext = context || document;\n\n\t\t\tvar parsed = rsingleTag.exec( data ),\n\t\t\t\tscripts = !keepScripts && [];\n\n\t\t\t// Single tag\n\t\t\tif ( parsed ) {\n\t\t\t\treturn [ context.createElement( parsed[1] ) ];\n\t\t\t}\n\n\t\t\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\n\t\t\tif ( scripts ) {\n\t\t\t\tjQuery( scripts ).remove();\n\t\t\t}\n\n\t\t\treturn jQuery.merge( [], parsed.childNodes );\n\t\t},\n\n\t\tparseJSON: JSON.parse,\n\n\t\t// Cross-browser xml parsing\n\t\tparseXML: function( data ) {\n\t\t\tvar xml, tmp;\n\t\t\tif ( !data || typeof data !== \"string\" ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Support: IE9\n\t\t\ttry {\n\t\t\t\ttmp = new DOMParser();\n\t\t\t\txml = tmp.parseFromString( data , \"text/xml\" );\n\t\t\t} catch ( e ) {\n\t\t\t\txml = undefined;\n\t\t\t}\n\n\t\t\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\t\t\tjQuery.error( \"Invalid XML: \" + data );\n\t\t\t}\n\t\t\treturn xml;\n\t\t},\n\n\t\tnoop: function() {},\n\n\t\t// Evaluates a script in a global context\n\t\tglobalEval: function( code ) {\n\t\t\tvar script,\n\t\t\t\tindirect = eval;\n\n\t\t\tcode = jQuery.trim( code );\n\n\t\t\tif ( code ) {\n\t\t\t\t// If the code includes a valid, prologue position\n\t\t\t\t// strict mode pragma, execute code by injecting a\n\t\t\t\t// script tag into the document.\n\t\t\t\tif ( code.indexOf(\"use strict\") === 1 ) {\n\t\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\t\tscript.text = code;\n\t\t\t\t\tdocument.head.appendChild( script ).parentNode.removeChild( script );\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, avoid the DOM node creation, insertion\n\t\t\t\t\t// and removal by using an indirect global eval\n\t\t\t\t\tindirect( code );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Convert dashed to camelCase; used by the css and data modules\n\t\t// Microsoft forgot to hump their vendor prefix (#9572)\n\t\tcamelCase: function( string ) {\n\t\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t\t},\n\n\t\tnodeName: function( elem, name ) {\n\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t\t},\n\n\t\t// args is for internal usage only\n\t\teach: function( obj, callback, args ) {\n\t\t\tvar value,\n\t\t\t\ti = 0,\n\t\t\t\tlength = obj.length,\n\t\t\t\tisArray = isArraylike( obj );\n\n\t\t\tif ( args ) {\n\t\t\t\tif ( isArray ) {\n\t\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// A special, fast, case for the most common use of each\n\t\t\t} else {\n\t\t\t\tif ( isArray ) {\n\t\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn obj;\n\t\t},\n\n\t\ttrim: function( text ) {\n\t\t\treturn text == null ? \"\" : core_trim.call( text );\n\t\t},\n\n\t\t// results is for internal usage only\n\t\tmakeArray: function( arr, results ) {\n\t\t\tvar ret = results || [];\n\n\t\t\tif ( arr != null ) {\n\t\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t\t\t[ arr ] : arr\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcore_push.call( ret, arr );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tinArray: function( elem, arr, i ) {\n\t\t\treturn arr == null ? -1 : core_indexOf.call( arr, elem, i );\n\t\t},\n\n\t\tmerge: function( first, second ) {\n\t\t\tvar l = second.length,\n\t\t\t\ti = first.length,\n\t\t\t\tj = 0;\n\n\t\t\tif ( typeof l === \"number\" ) {\n\t\t\t\tfor ( ; j < l; j++ ) {\n\t\t\t\t\tfirst[ i++ ] = second[ j ];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( second[j] !== undefined ) {\n\t\t\t\t\tfirst[ i++ ] = second[ j++ ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst.length = i;\n\n\t\t\treturn first;\n\t\t},\n\n\t\tgrep: function( elems, callback, inv ) {\n\t\t\tvar retVal,\n\t\t\t\tret = [],\n\t\t\t\ti = 0,\n\t\t\t\tlength = elems.length;\n\t\t\tinv = !!inv;\n\n\t\t\t// Go through the array, only saving the items\n\t\t\t// that pass the validator function\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tretVal = !!callback( elems[ i ], i );\n\t\t\t\tif ( inv !== retVal ) {\n\t\t\t\t\tret.push( elems[ i ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// arg is for internal usage only\n\t\tmap: function( elems, callback, arg ) {\n\t\t\tvar value,\n\t\t\t\ti = 0,\n\t\t\t\tlength = elems.length,\n\t\t\t\tisArray = isArraylike( elems ),\n\t\t\t\tret = [];\n\n\t\t\t// Go through the array, translating each of the items to their\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\t\tif ( value != null ) {\n\t\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Go through every key on the object,\n\t\t\t} else {\n\t\t\t\tfor ( i in elems ) {\n\t\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\t\tif ( value != null ) {\n\t\t\t\t\t\tret[ ret.length ] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Flatten any nested arrays\n\t\t\treturn core_concat.apply( [], ret );\n\t\t},\n\n\t\t// A global GUID counter for objects\n\t\tguid: 1,\n\n\t\t// Bind a function to a context, optionally partially applying any\n\t\t// arguments.\n\t\tproxy: function( fn, context ) {\n\t\t\tvar tmp, args, proxy;\n\n\t\t\tif ( typeof context === \"string\" ) {\n\t\t\t\ttmp = fn[ context ];\n\t\t\t\tcontext = fn;\n\t\t\t\tfn = tmp;\n\t\t\t}\n\n\t\t\t// Quick check to determine if target is callable, in the spec\n\t\t\t// this throws a TypeError, but we will just return undefined.\n\t\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Simulated bind\n\t\t\targs = core_slice.call( arguments, 2 );\n\t\t\tproxy = function() {\n\t\t\t\treturn fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );\n\t\t\t};\n\n\t\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\t\treturn proxy;\n\t\t},\n\n\t\t// Multifunctional method to get and set values of a collection\n\t\t// The value/s can optionally be executed if it's a function\n\t\taccess: function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\t\t\tvar i = 0,\n\t\t\t\tlength = elems.length,\n\t\t\t\tbulk = key == null;\n\n\t\t\t// Sets many values\n\t\t\tif ( jQuery.type( key ) === \"object\" ) {\n\t\t\t\tchainable = true;\n\t\t\t\tfor ( i in key ) {\n\t\t\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t\t\t}\n\n\t\t\t\t// Sets one value\n\t\t\t} else if ( value !== undefined ) {\n\t\t\t\tchainable = true;\n\n\t\t\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\t\t\traw = true;\n\t\t\t\t}\n\n\t\t\t\tif ( bulk ) {\n\t\t\t\t\t// Bulk operations run against the entire set\n\t\t\t\t\tif ( raw ) {\n\t\t\t\t\t\tfn.call( elems, value );\n\t\t\t\t\t\tfn = null;\n\n\t\t\t\t\t\t// ...except when executing function values\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbulk = fn;\n\t\t\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( fn ) {\n\t\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn chainable ?\n\t\t\t\telems :\n\n\t\t\t\t// Gets\n\t\t\t\tbulk ?\n\t\t\t\t\tfn.call( elems ) :\n\t\t\t\t\tlength ? fn( elems[0], key ) : emptyGet;\n\t\t},\n\n\t\tnow: Date.now,\n\n\t\t// A method for quickly swapping in/out CSS properties to get correct calculations.\n\t\t// Note: this method belongs to the css module but it's needed here for the support module.\n\t\t// If support gets modularized, this method should be moved back to the css module.\n\t\tswap: function( elem, options, callback, args ) {\n\t\t\tvar ret, name,\n\t\t\t\told = {};\n\n\t\t\t// Remember the old values, and insert the new ones\n\t\t\tfor ( name in options ) {\n\t\t\t\told[ name ] = elem.style[ name ];\n\t\t\t\telem.style[ name ] = options[ name ];\n\t\t\t}\n\n\t\t\tret = callback.apply( elem, args || [] );\n\n\t\t\t// Revert the old values\n\t\t\tfor ( name in options ) {\n\t\t\t\telem.style[ name ] = old[ name ];\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\t});\n\n\tjQuery.ready.promise = function( obj ) {\n\t\tif ( !readyList ) {\n\n\t\t\treadyList = jQuery.Deferred();\n\n\t\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t\t// we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\t\tsetTimeout( jQuery.ready );\n\n\t\t\t} else {\n\n\t\t\t\t// Use the handy event callback\n\t\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t\t// A fallback to window.onload, that will always work\n\t\t\t\twindow.addEventListener( \"load\", completed, false );\n\t\t\t}\n\t\t}\n\t\treturn readyList.promise( obj );\n\t};\n\n// Populate the class2type map\n\tjQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n\t});\n\n\tfunction isArraylike( obj ) {\n\t\tvar length = obj.length,\n\t\t\ttype = jQuery.type( obj );\n\n\t\tif ( jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( obj.nodeType === 1 && length ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn type === \"array\" || type !== \"function\" &&\n\t\t\t( length === 0 ||\n\t\t\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj );\n\t}\n\n// All jQuery objects should point back to these\n\trootjQuery = jQuery(document);\n\t/*!\n\t * Sizzle CSS Selector Engine v1.9.4-pre\n\t * http://sizzlejs.com/\n\t *\n\t * Copyright 2013 jQuery Foundation, Inc. and other contributors\n\t * Released under the MIT license\n\t * http://jquery.org/license\n\t *\n\t * Date: 2013-06-03\n\t */\n\t(function( window, undefined ) {\n\n\t\tvar i,\n\t\t\tsupport,\n\t\t\tcachedruns,\n\t\t\tExpr,\n\t\t\tgetText,\n\t\t\tisXML,\n\t\t\tcompile,\n\t\t\toutermostContext,\n\t\t\tsortInput,\n\n\t\t// Local document vars\n\t\t\tsetDocument,\n\t\t\tdocument,\n\t\t\tdocElem,\n\t\t\tdocumentIsHTML,\n\t\t\trbuggyQSA,\n\t\t\trbuggyMatches,\n\t\t\tmatches,\n\t\t\tcontains,\n\n\t\t// Instance-specific data\n\t\t\texpando = \"sizzle\" + -(new Date()),\n\t\t\tpreferredDoc = window.document,\n\t\t\tdirruns = 0,\n\t\t\tdone = 0,\n\t\t\tclassCache = createCache(),\n\t\t\ttokenCache = createCache(),\n\t\t\tcompilerCache = createCache(),\n\t\t\thasDuplicate = false,\n\t\t\tsortOrder = function( a, b ) {\n\t\t\t\tif ( a === b ) {\n\t\t\t\t\thasDuplicate = true;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t},\n\n\t\t// General-purpose constants\n\t\t\tstrundefined = typeof undefined,\n\t\t\tMAX_NEGATIVE = 1 << 31,\n\n\t\t// Instance methods\n\t\t\thasOwn = ({}).hasOwnProperty,\n\t\t\tarr = [],\n\t\t\tpop = arr.pop,\n\t\t\tpush_native = arr.push,\n\t\t\tpush = arr.push,\n\t\t\tslice = arr.slice,\n\t\t// Use a stripped-down indexOf if we can't use a native one\n\t\t\tindexOf = arr.indexOf || function( elem ) {\n\t\t\t\tvar i = 0,\n\t\t\t\t\tlen = this.length;\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tif ( this[i] === elem ) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t},\n\n\t\t\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t\t// Regular expressions\n\n\t\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\t\t\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t\t// http://www.w3.org/TR/css3-syntax/#characters\n\t\t\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t\t// Loosely modeled on CSS identifier characters\n\t\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\t\t\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t\t// Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors\n\t\t\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")\" + whitespace +\n\t\t\t\t\"*(?:([*^$|!~]?=)\" + whitespace + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + identifier + \")|)|)\" + whitespace + \"*\\\\]\",\n\n\t\t// Prefer arguments quoted,\n\t\t//   then not containing pseudos/brackets,\n\t\t//   then attribute selectors/non-parenthetical expressions,\n\t\t//   then anything else\n\t\t// These preferences are here to reduce the number of selectors\n\t\t//   needing tokenize in the PSEUDO preFilter\n\t\t\tpseudos = \":(\" + characterEncoding + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes.replace( 3, 8 ) + \")*)|.*)\\\\)|)\",\n\n\t\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\t\t\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\t\t\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\t\t\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\t\t\trsibling = new RegExp( whitespace + \"*[+~]\" ),\n\t\t\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\t\t\trpseudo = new RegExp( pseudos ),\n\t\t\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\t\t\tmatchExpr = {\n\t\t\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t\t\t// For use in libraries implementing .is()\n\t\t\t\t// We use this for POS matching in `select`\n\t\t\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t\t\t},\n\n\t\t\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\t\t\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\t\t\trinputs = /^(?:input|select|textarea|button)$/i,\n\t\t\trheader = /^h\\d$/i,\n\n\t\t\trescape = /'|\\\\/g,\n\n\t\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\t\t\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\t\t\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\t\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t\t\t// NaN means non-codepoint\n\t\t\t\t// Support: Firefox\n\t\t\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\t\t\treturn high !== high || escapedWhitespace ?\n\t\t\t\t\tescaped :\n\t\t\t\t\t// BMP codepoint\n\t\t\t\t\thigh < 0 ?\n\t\t\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t\t\t};\n\n// Optimize for push.apply( _, NodeList )\n\t\ttry {\n\t\t\tpush.apply(\n\t\t\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\t\t\tpreferredDoc.childNodes\n\t\t\t);\n\t\t\t// Support: Android<4.0\n\t\t\t// Detect silently failing push.apply\n\t\t\tarr[ preferredDoc.childNodes.length ].nodeType;\n\t\t} catch ( e ) {\n\t\t\tpush = { apply: arr.length ?\n\n\t\t\t\t// Leverage slice if possible\n\t\t\t\tfunction( target, els ) {\n\t\t\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t\t\t} :\n\n\t\t\t\t// Support: IE<9\n\t\t\t\t// Otherwise append directly\n\t\t\t\tfunction( target, els ) {\n\t\t\t\t\tvar j = target.length,\n\t\t\t\t\t\ti = 0;\n\t\t\t\t\t// Can't trust NodeList.length\n\t\t\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\t\t\ttarget.length = j - 1;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfunction Sizzle( selector, context, results, seed ) {\n\t\t\tvar match, elem, m, nodeType,\n\t\t\t// QSA vars\n\t\t\t\ti, groups, old, nid, newContext, newSelector;\n\n\t\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\t\tsetDocument( context );\n\t\t\t}\n\n\t\t\tcontext = context || document;\n\t\t\tresults = results || [];\n\n\t\t\tif ( !selector || typeof selector !== \"string\" ) {\n\t\t\t\treturn results;\n\t\t\t}\n\n\t\t\tif ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tif ( documentIsHTML && !seed ) {\n\n\t\t\t\t// Shortcuts\n\t\t\t\tif ( (match = rquickExpr.exec( selector )) ) {\n\t\t\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\t\t\tif ( (m = match[1]) ) {\n\t\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Context is not a document\n\t\t\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\t\treturn results;\n\n\t\t\t\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {\n\t\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// QSA path\n\t\t\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\t\t\t\t\tnid = old = expando;\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = nodeType === 9 && selector;\n\n\t\t\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t\t\t// IE 8 doesn't work on object elements\n\t\t\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\t\t\ti = groups.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewContext = rsibling.test( selector ) && context.parentNode || context;\n\t\t\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( newSelector ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t} catch(qsaError) {\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// All others\n\t\t\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n\t\t}\n\n\t\t/**\n\t\t * Create key-value caches of limited size\n\t\t * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n\t\t *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n\t\t *\tdeleting the oldest entry\n\t\t */\n\t\tfunction createCache() {\n\t\t\tvar keys = [];\n\n\t\t\tfunction cache( key, value ) {\n\t\t\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\t\t\tif ( keys.push( key += \" \" ) > Expr.cacheLength ) {\n\t\t\t\t\t// Only keep the most recent entries\n\t\t\t\t\tdelete cache[ keys.shift() ];\n\t\t\t\t}\n\t\t\t\treturn (cache[ key ] = value);\n\t\t\t}\n\t\t\treturn cache;\n\t\t}\n\n\t\t/**\n\t\t * Mark a function for special use by Sizzle\n\t\t * @param {Function} fn The function to mark\n\t\t */\n\t\tfunction markFunction( fn ) {\n\t\t\tfn[ expando ] = true;\n\t\t\treturn fn;\n\t\t}\n\n\t\t/**\n\t\t * Support testing using an element\n\t\t * @param {Function} fn Passed the created div and expects a boolean result\n\t\t */\n\t\tfunction assert( fn ) {\n\t\t\tvar div = document.createElement(\"div\");\n\n\t\t\ttry {\n\t\t\t\treturn !!fn( div );\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t} finally {\n\t\t\t\t// Remove from its parent by default\n\t\t\t\tif ( div.parentNode ) {\n\t\t\t\t\tdiv.parentNode.removeChild( div );\n\t\t\t\t}\n\t\t\t\t// release memory in IE\n\t\t\t\tdiv = null;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Adds the same handler for all of the specified attrs\n\t\t * @param {String} attrs Pipe-separated list of attributes\n\t\t * @param {Function} handler The method that will be applied\n\t\t */\n\t\tfunction addHandle( attrs, handler ) {\n\t\t\tvar arr = attrs.split(\"|\"),\n\t\t\t\ti = attrs.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Checks document order of two siblings\n\t\t * @param {Element} a\n\t\t * @param {Element} b\n\t\t * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n\t\t */\n\t\tfunction siblingCheck( a, b ) {\n\t\t\tvar cur = b && a,\n\t\t\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t\t\t// Use IE sourceIndex if available on both nodes\n\t\t\tif ( diff ) {\n\t\t\t\treturn diff;\n\t\t\t}\n\n\t\t\t// Check if b follows a\n\t\t\tif ( cur ) {\n\t\t\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\t\t\tif ( cur === b ) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a ? 1 : -1;\n\t\t}\n\n\t\t/**\n\t\t * Returns a function to use in pseudos for input types\n\t\t * @param {String} type\n\t\t */\n\t\tfunction createInputPseudo( type ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\t\treturn name === \"input\" && elem.type === type;\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Returns a function to use in pseudos for buttons\n\t\t * @param {String} type\n\t\t */\n\t\tfunction createButtonPseudo( type ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Returns a function to use in pseudos for positionals\n\t\t * @param {Function} fn\n\t\t */\n\t\tfunction createPositionalPseudo( fn ) {\n\t\t\treturn markFunction(function( argument ) {\n\t\t\t\targument = +argument;\n\t\t\t\treturn markFunction(function( seed, matches ) {\n\t\t\t\t\tvar j,\n\t\t\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\t\t\ti = matchIndexes.length;\n\n\t\t\t\t\t// Match elements found at the specified indexes\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Detect xml\n\t\t * @param {Element|Object} elem An element or a document\n\t\t */\n\t\tisXML = Sizzle.isXML = function( elem ) {\n\t\t\t// documentElement is verified for cases where it doesn't yet exist\n\t\t\t// (such as loading iframes in IE - #4833)\n\t\t\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\t\t\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n\t\t};\n\n// Expose support vars for convenience\n\t\tsupport = Sizzle.support = {};\n\n\t\t/**\n\t\t * Sets document-related variables once based on the current document\n\t\t * @param {Element|Object} [doc] An element or document object to use to set the document\n\t\t * @returns {Object} Returns the current document\n\t\t */\n\t\tsetDocument = Sizzle.setDocument = function( node ) {\n\t\t\tvar doc = node ? node.ownerDocument || node : preferredDoc,\n\t\t\t\tparent = doc.defaultView;\n\n\t\t\t// If no document and documentElement is available, return\n\t\t\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\t\t\treturn document;\n\t\t\t}\n\n\t\t\t// Set our document\n\t\t\tdocument = doc;\n\t\t\tdocElem = doc.documentElement;\n\n\t\t\t// Support tests\n\t\t\tdocumentIsHTML = !isXML( doc );\n\n\t\t\t// Support: IE>8\n\t\t\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\n\t\t\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\n\t\t\t// IE6-8 do not support the defaultView property so parent will be undefined\n\t\t\tif ( parent && parent.attachEvent && parent !== parent.top ) {\n\t\t\t\tparent.attachEvent( \"onbeforeunload\", function() {\n\t\t\t\t\tsetDocument();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/* Attributes\n\t\t\t ---------------------------------------------------------------------- */\n\n\t\t\t// Support: IE<8\n\t\t\t// Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)\n\t\t\tsupport.attributes = assert(function( div ) {\n\t\t\t\tdiv.className = \"i\";\n\t\t\t\treturn !div.getAttribute(\"className\");\n\t\t\t});\n\n\t\t\t/* getElement(s)By*\n\t\t\t ---------------------------------------------------------------------- */\n\n\t\t\t// Check if getElementsByTagName(\"*\") returns only elements\n\t\t\tsupport.getElementsByTagName = assert(function( div ) {\n\t\t\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\t\t\treturn !div.getElementsByTagName(\"*\").length;\n\t\t\t});\n\n\t\t\t// Check if getElementsByClassName can be trusted\n\t\t\tsupport.getElementsByClassName = assert(function( div ) {\n\t\t\t\tdiv.innerHTML = \"<div class='a'></div><div class='a i'></div>\";\n\n\t\t\t\t// Support: Safari<4\n\t\t\t\t// Catch class over-caching\n\t\t\t\tdiv.firstChild.className = \"i\";\n\t\t\t\t// Support: Opera<10\n\t\t\t\t// Catch gEBCN failure to find non-leading classes\n\t\t\t\treturn div.getElementsByClassName(\"i\").length === 2;\n\t\t\t});\n\n\t\t\t// Support: IE<10\n\t\t\t// Check if getElementById returns elements by name\n\t\t\t// The broken getElementById methods don't pick up programatically-set names,\n\t\t\t// so use a roundabout getElementsByName test\n\t\t\tsupport.getById = assert(function( div ) {\n\t\t\t\tdocElem.appendChild( div ).id = expando;\n\t\t\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\n\t\t\t});\n\n\t\t\t// ID find and filter\n\t\t\tif ( support.getById ) {\n\t\t\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\t\t\tif ( typeof context.getElementById !== strundefined && documentIsHTML ) {\n\t\t\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\t\t\treturn m && m.parentNode ? [m] : [];\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// Support: IE6/7\n\t\t\t\t// getElementById is not reliable as a find shortcut\n\t\t\t\tdelete Expr.find[\"ID\"];\n\n\t\t\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\tvar node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode(\"id\");\n\t\t\t\t\t\treturn node && node.value === attrId;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Tag\n\t\t\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\t\t\tfunction( tag, context ) {\n\t\t\t\t\tif ( typeof context.getElementsByTagName !== strundefined ) {\n\t\t\t\t\t\treturn context.getElementsByTagName( tag );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction( tag, context ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\ttmp = [],\n\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t\t\t// Filter out possible comments\n\t\t\t\t\tif ( tag === \"*\" ) {\n\t\t\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn tmp;\n\t\t\t\t\t}\n\t\t\t\t\treturn results;\n\t\t\t\t};\n\n\t\t\t// Class\n\t\t\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\t\t\tif ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {\n\t\t\t\t\treturn context.getElementsByClassName( className );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/* QSA/matchesSelector\n\t\t\t ---------------------------------------------------------------------- */\n\n\t\t\t// QSA and matchesSelector support\n\n\t\t\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\t\t\trbuggyMatches = [];\n\n\t\t\t// qSa(:focus) reports false when true (Chrome 21)\n\t\t\t// We allow this because of a bug in IE8/9 that throws an error\n\t\t\t// whenever `document.activeElement` is accessed on an iframe\n\t\t\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t\t\t// See http://bugs.jquery.com/ticket/13378\n\t\t\trbuggyQSA = [];\n\n\t\t\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\n\t\t\t\t// Build QSA regex\n\t\t\t\t// Regex strategy adopted from Diego Perini\n\t\t\t\tassert(function( div ) {\n\t\t\t\t\t// Select is set to empty string on purpose\n\t\t\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t\t\t// setting a boolean content attribute,\n\t\t\t\t\t// since its presence should be enough\n\t\t\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\t\t\tdiv.innerHTML = \"<select><option selected=''></option></select>\";\n\n\t\t\t\t\t// Support: IE8\n\t\t\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t\t\t// IE8 throws error here and will not see later tests\n\t\t\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tassert(function( div ) {\n\n\t\t\t\t\t// Support: Opera 10-12/IE8\n\t\t\t\t\t// ^= $= *= and empty values\n\t\t\t\t\t// Should not select anything\n\t\t\t\t\t// Support: Windows 8 Native Apps\n\t\t\t\t\t// The type attribute is restricted during .innerHTML assignment\n\t\t\t\t\tvar input = doc.createElement(\"input\");\n\t\t\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\t\t\tdiv.appendChild( input ).setAttribute( \"t\", \"\" );\n\n\t\t\t\t\tif ( div.querySelectorAll(\"[t^='']\").length ) {\n\t\t\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t\t\t// IE8 throws error here and will not see later tests\n\t\t\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\t\t\trbuggyQSA.push(\",.*:\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||\n\t\t\t\tdocElem.mozMatchesSelector ||\n\t\t\t\tdocElem.oMatchesSelector ||\n\t\t\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\t\t\tassert(function( div ) {\n\t\t\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t\t\t// on a disconnected node (IE 9)\n\t\t\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t\t\t// This should fail with an exception\n\t\t\t\t\t// Gecko does not error, returns false instead\n\t\t\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\t\t\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t\t\t/* Contains\n\t\t\t ---------------------------------------------------------------------- */\n\n\t\t\t// Element contains another\n\t\t\t// Purposefully does not implement inclusive descendent\n\t\t\t// As in, an element does not contain itself\n\t\t\tcontains = rnative.test( docElem.contains ) || docElem.compareDocumentPosition ?\n\t\t\t\tfunction( a, b ) {\n\t\t\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\t\t\tbup = b && b.parentNode;\n\t\t\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\t\t\tadown.contains ?\n\t\t\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t\t\t\t));\n\t\t\t\t} :\n\t\t\t\tfunction( a, b ) {\n\t\t\t\t\tif ( b ) {\n\t\t\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t/* Sorting\n\t\t\t ---------------------------------------------------------------------- */\n\n\t\t\t// Document order sorting\n\t\t\tsortOrder = docElem.compareDocumentPosition ?\n\t\t\t\tfunction( a, b ) {\n\n\t\t\t\t\t// Flag for duplicate removal\n\t\t\t\t\tif ( a === b ) {\n\t\t\t\t\t\thasDuplicate = true;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b );\n\n\t\t\t\t\tif ( compare ) {\n\t\t\t\t\t\t// Disconnected nodes\n\t\t\t\t\t\tif ( compare & 1 ||\n\t\t\t\t\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t\t\t\t\t// Choose the first element that is related to our preferred document\n\t\t\t\t\t\t\tif ( a === doc || contains(preferredDoc, a) ) {\n\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( b === doc || contains(preferredDoc, b) ) {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Maintain original order\n\t\t\t\t\t\t\treturn sortInput ?\n\t\t\t\t\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t\t\t\t\t0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn compare & 4 ? -1 : 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Not directly comparable, sort on existence of method\n\t\t\t\t\treturn a.compareDocumentPosition ? -1 : 1;\n\t\t\t\t} :\n\t\t\t\tfunction( a, b ) {\n\t\t\t\t\tvar cur,\n\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\taup = a.parentNode,\n\t\t\t\t\t\tbup = b.parentNode,\n\t\t\t\t\t\tap = [ a ],\n\t\t\t\t\t\tbp = [ b ];\n\n\t\t\t\t\t// Exit early if the nodes are identical\n\t\t\t\t\tif ( a === b ) {\n\t\t\t\t\t\thasDuplicate = true;\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t\t// Parentless nodes are either documents or disconnected\n\t\t\t\t\t} else if ( !aup || !bup ) {\n\t\t\t\t\t\treturn a === doc ? -1 :\n\t\t\t\t\t\t\tb === doc ? 1 :\n\t\t\t\t\t\t\t\taup ? -1 :\n\t\t\t\t\t\t\t\t\tbup ? 1 :\n\t\t\t\t\t\t\t\t\t\tsortInput ?\n\t\t\t\t\t\t\t\t\t\t\t( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :\n\t\t\t\t\t\t\t\t\t\t\t0;\n\n\t\t\t\t\t\t// If the nodes are siblings, we can do a quick check\n\t\t\t\t\t} else if ( aup === bup ) {\n\t\t\t\t\t\treturn siblingCheck( a, b );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\t\t\t\tcur = a;\n\t\t\t\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\t\t\t\tap.unshift( cur );\n\t\t\t\t\t}\n\t\t\t\t\tcur = b;\n\t\t\t\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\t\t\t\tbp.unshift( cur );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Walk down the tree looking for a discrepancy\n\t\t\t\t\twhile ( ap[i] === bp[i] ) {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn i ?\n\t\t\t\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\t\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t\t\t\t// Otherwise nodes in our document sort first\n\t\t\t\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\t\t\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t\t\t\t\t\t0;\n\t\t\t\t};\n\n\t\t\treturn doc;\n\t\t};\n\n\t\tSizzle.matches = function( expr, elements ) {\n\t\t\treturn Sizzle( expr, null, null, elements );\n\t\t};\n\n\t\tSizzle.matchesSelector = function( elem, expr ) {\n\t\t\t// Set document vars if needed\n\t\t\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\t\t\tsetDocument( elem );\n\t\t\t}\n\n\t\t\t// Make sure that attribute selectors are quoted\n\t\t\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\t\t\tif ( support.matchesSelector && documentIsHTML &&\n\t\t\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\t\t\ttry {\n\t\t\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {}\n\t\t\t}\n\n\t\t\treturn Sizzle( expr, document, null, [elem] ).length > 0;\n\t\t};\n\n\t\tSizzle.contains = function( context, elem ) {\n\t\t\t// Set document vars if needed\n\t\t\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\t\t\tsetDocument( context );\n\t\t\t}\n\t\t\treturn contains( context, elem );\n\t\t};\n\n\t\tSizzle.attr = function( elem, name ) {\n\t\t\t// Set document vars if needed\n\t\t\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\t\t\tsetDocument( elem );\n\t\t\t}\n\n\t\t\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\t\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\t\t\tundefined;\n\n\t\t\treturn val === undefined ?\n\t\t\t\tsupport.attributes || !documentIsHTML ?\n\t\t\t\t\telem.getAttribute( name ) :\n\t\t\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\t\t\tval.value :\n\t\t\t\t\t\tnull :\n\t\t\t\tval;\n\t\t};\n\n\t\tSizzle.error = function( msg ) {\n\t\t\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n\t\t};\n\n\t\t/**\n\t\t * Document sorting and removing duplicates\n\t\t * @param {ArrayLike} results\n\t\t */\n\t\tSizzle.uniqueSort = function( results ) {\n\t\t\tvar elem,\n\t\t\t\tduplicates = [],\n\t\t\t\tj = 0,\n\t\t\t\ti = 0;\n\n\t\t\t// Unless we *know* we can detect duplicates, assume their presence\n\t\t\thasDuplicate = !support.detectDuplicates;\n\t\t\tsortInput = !support.sortStable && results.slice( 0 );\n\t\t\tresults.sort( sortOrder );\n\n\t\t\tif ( hasDuplicate ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\t\t\tj = duplicates.push( i );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn results;\n\t\t};\n\n\t\t/**\n\t\t * Utility function for retrieving the text value of an array of DOM nodes\n\t\t * @param {Array|Element} elem\n\t\t */\n\t\tgetText = Sizzle.getText = function( elem ) {\n\t\t\tvar node,\n\t\t\t\tret = \"\",\n\t\t\t\ti = 0,\n\t\t\t\tnodeType = elem.nodeType;\n\n\t\t\tif ( !nodeType ) {\n\t\t\t\t// If no nodeType, this is expected to be an array\n\t\t\t\tfor ( ; (node = elem[i]); i++ ) {\n\t\t\t\t\t// Do not traverse comment nodes\n\t\t\t\t\tret += getText( node );\n\t\t\t\t}\n\t\t\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t\t\t// Use textContent for elements\n\t\t\t\t// innerText usage removed for consistency of new lines (see #11153)\n\t\t\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\t\t\treturn elem.textContent;\n\t\t\t\t} else {\n\t\t\t\t\t// Traverse its children\n\t\t\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\t\t\tret += getText( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\t\t\treturn elem.nodeValue;\n\t\t\t}\n\t\t\t// Do not include comment or processing instruction nodes\n\n\t\t\treturn ret;\n\t\t};\n\n\t\tExpr = Sizzle.selectors = {\n\n\t\t\t// Can be adjusted by the user\n\t\t\tcacheLength: 50,\n\n\t\t\tcreatePseudo: markFunction,\n\n\t\t\tmatch: matchExpr,\n\n\t\t\tattrHandle: {},\n\n\t\t\tfind: {},\n\n\t\t\trelative: {\n\t\t\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\t\t\" \": { dir: \"parentNode\" },\n\t\t\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\t\t\"~\": { dir: \"previousSibling\" }\n\t\t\t},\n\n\t\t\tpreFilter: {\n\t\t\t\t\"ATTR\": function( match ) {\n\t\t\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\t\t\tmatch[3] = ( match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn match.slice( 0, 4 );\n\t\t\t\t},\n\n\t\t\t\t\"CHILD\": function( match ) {\n\t\t\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t\t 1 type (only|nth|...)\n\t\t\t\t\t 2 what (child|of-type)\n\t\t\t\t\t 3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t\t 4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t\t 5 sign of xn-component\n\t\t\t\t\t 6 x of xn-component\n\t\t\t\t\t 7 sign of y-component\n\t\t\t\t\t 8 y of y-component\n\t\t\t\t\t */\n\t\t\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t\t\t// nth-* requires argument\n\t\t\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t\t\t\t// other types prohibit arguments\n\t\t\t\t\t} else if ( match[3] ) {\n\t\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn match;\n\t\t\t\t},\n\n\t\t\t\t\"PSEUDO\": function( match ) {\n\t\t\t\t\tvar excess,\n\t\t\t\t\t\tunquoted = !match[5] && match[2];\n\n\t\t\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Accept quoted arguments as-is\n\t\t\t\t\tif ( match[3] && match[4] !== undefined ) {\n\t\t\t\t\t\tmatch[2] = match[4];\n\n\t\t\t\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t\t\t// excess is a negative index\n\t\t\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\t\t\treturn match.slice( 0, 3 );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tfilter: {\n\n\t\t\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\t\t\tfunction() { return true; } :\n\t\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t\"CLASS\": function( className ) {\n\t\t\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\t\t\treturn pattern ||\n\t\t\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\t\t\tif ( result == null ) {\n\t\t\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( !operator ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult += \"\";\n\n\t\t\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\t\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\t\t\t\t\t\t\toperator === \"~=\" ? ( \" \" + result + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\t\t\t\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse;\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\t\t\tofType = what === \"of-type\";\n\n\t\t\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t\t\t} :\n\n\t\t\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t\t\t// pseudo-class names are case-insensitive\n\t\t\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\t\t\tvar args,\n\t\t\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t\t\t// The user may use createPseudo to indicate that\n\t\t\t\t\t// arguments are needed to create the filter function\n\t\t\t\t\t// just as Sizzle does\n\t\t\t\t\tif ( fn[ expando ] ) {\n\t\t\t\t\t\treturn fn( argument );\n\t\t\t\t\t}\n\n\t\t\t\t\t// But maintain support for old signatures\n\t\t\t\t\tif ( fn.length > 1 ) {\n\t\t\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\t\tidx = indexOf.call( seed, matched[i] );\n\t\t\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn fn;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpseudos: {\n\t\t\t\t// Potentially complex pseudos\n\t\t\t\t\"not\": markFunction(function( selector ) {\n\t\t\t\t\t// Trim the selector passed to compile\n\t\t\t\t\t// to avoid treating leading and trailing\n\t\t\t\t\t// spaces as combinators\n\t\t\t\t\tvar input = [],\n\t\t\t\t\t\tresults = [],\n\t\t\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\t\t\treturn matcher[ expando ] ?\n\t\t\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\t\t\tvar elem,\n\t\t\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t\t\treturn !results.pop();\n\t\t\t\t\t\t};\n\t\t\t\t}),\n\n\t\t\t\t\"has\": markFunction(function( selector ) {\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t\t\t};\n\t\t\t\t}),\n\n\t\t\t\t\"contains\": markFunction(function( text ) {\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t\t\t};\n\t\t\t\t}),\n\n\t\t\t\t// \"Whether an element is represented by a :lang() selector\n\t\t\t\t// is based solely on the element's language value\n\t\t\t\t// being equal to the identifier C,\n\t\t\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t\t\t// The identifier C does not have to be a valid language name.\"\n\t\t\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t\t\t// lang value must be a valid identifier\n\t\t\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t\t\t}\n\t\t\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\t\t\treturn function( elem ) {\n\t\t\t\t\t\tvar elemLang;\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t}),\n\n\t\t\t\t// Miscellaneous\n\t\t\t\t\"target\": function( elem ) {\n\t\t\t\t\tvar hash = window.location && window.location.hash;\n\t\t\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t\t\t},\n\n\t\t\t\t\"root\": function( elem ) {\n\t\t\t\t\treturn elem === docElem;\n\t\t\t\t},\n\n\t\t\t\t\"focus\": function( elem ) {\n\t\t\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t\t\t},\n\n\t\t\t\t// Boolean properties\n\t\t\t\t\"enabled\": function( elem ) {\n\t\t\t\t\treturn elem.disabled === false;\n\t\t\t\t},\n\n\t\t\t\t\"disabled\": function( elem ) {\n\t\t\t\t\treturn elem.disabled === true;\n\t\t\t\t},\n\n\t\t\t\t\"checked\": function( elem ) {\n\t\t\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t\t\t},\n\n\t\t\t\t\"selected\": function( elem ) {\n\t\t\t\t\t// Accessing this property makes selected-by-default\n\t\t\t\t\t// options in Safari work properly\n\t\t\t\t\tif ( elem.parentNode ) {\n\t\t\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn elem.selected === true;\n\t\t\t\t},\n\n\t\t\t\t// Contents\n\t\t\t\t\"empty\": function( elem ) {\n\t\t\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t\t\t// :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),\n\t\t\t\t\t//   not comment, processing instructions, or others\n\t\t\t\t\t// Thanks to Diego Perini for the nodeName shortcut\n\t\t\t\t\t//   Greater than \"@\" means alpha characters (specifically not starting with \"#\" or \"?\")\n\t\t\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\t\t\tif ( elem.nodeName > \"@\" || elem.nodeType === 3 || elem.nodeType === 4 ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\n\t\t\t\t\"parent\": function( elem ) {\n\t\t\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t\t\t},\n\n\t\t\t\t// Element/input types\n\t\t\t\t\"header\": function( elem ) {\n\t\t\t\t\treturn rheader.test( elem.nodeName );\n\t\t\t\t},\n\n\t\t\t\t\"input\": function( elem ) {\n\t\t\t\t\treturn rinputs.test( elem.nodeName );\n\t\t\t\t},\n\n\t\t\t\t\"button\": function( elem ) {\n\t\t\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t\t\t},\n\n\t\t\t\t\"text\": function( elem ) {\n\t\t\t\t\tvar attr;\n\t\t\t\t\t// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)\n\t\t\t\t\t// use getAttribute instead to test this case\n\t\t\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\t\t\telem.type === \"text\" &&\n\t\t\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === elem.type );\n\t\t\t\t},\n\n\t\t\t\t// Position-in-collection\n\t\t\t\t\"first\": createPositionalPseudo(function() {\n\t\t\t\t\treturn [ 0 ];\n\t\t\t\t}),\n\n\t\t\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\t\t\treturn [ length - 1 ];\n\t\t\t\t}),\n\n\t\t\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t\t\t}),\n\n\t\t\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\t\t\tvar i = 0;\n\t\t\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\t\t\tmatchIndexes.push( i );\n\t\t\t\t\t}\n\t\t\t\t\treturn matchIndexes;\n\t\t\t\t}),\n\n\t\t\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\t\t\tvar i = 1;\n\t\t\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\t\t\tmatchIndexes.push( i );\n\t\t\t\t\t}\n\t\t\t\t\treturn matchIndexes;\n\t\t\t\t}),\n\n\t\t\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\t\t\tmatchIndexes.push( i );\n\t\t\t\t\t}\n\t\t\t\t\treturn matchIndexes;\n\t\t\t\t}),\n\n\t\t\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\t\t\tmatchIndexes.push( i );\n\t\t\t\t\t}\n\t\t\t\t\treturn matchIndexes;\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\n\t\tExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\n\t\tfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\t\t\tExpr.pseudos[ i ] = createInputPseudo( i );\n\t\t}\n\t\tfor ( i in { submit: true, reset: true } ) {\n\t\t\tExpr.pseudos[ i ] = createButtonPseudo( i );\n\t\t}\n\n// Easy API for creating new setFilters\n\t\tfunction setFilters() {}\n\t\tsetFilters.prototype = Expr.filters = Expr.pseudos;\n\t\tExpr.setFilters = new setFilters();\n\n\t\tfunction tokenize( selector, parseOnly ) {\n\t\t\tvar matched, match, tokens, type,\n\t\t\t\tsoFar, groups, preFilters,\n\t\t\t\tcached = tokenCache[ selector + \" \" ];\n\n\t\t\tif ( cached ) {\n\t\t\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t\t\t}\n\n\t\t\tsoFar = selector;\n\t\t\tgroups = [];\n\t\t\tpreFilters = Expr.preFilter;\n\n\t\t\twhile ( soFar ) {\n\n\t\t\t\t// Comma and first run\n\t\t\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\t\t\tif ( match ) {\n\t\t\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t\t\t}\n\t\t\t\t\tgroups.push( tokens = [] );\n\t\t\t\t}\n\n\t\t\t\tmatched = false;\n\n\t\t\t\t// Combinators\n\t\t\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\t\t\tmatched = match.shift();\n\t\t\t\t\ttokens.push({\n\t\t\t\t\t\tvalue: matched,\n\t\t\t\t\t\t// Cast descendant combinators to space\n\t\t\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t\t\t});\n\t\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t\t}\n\n\t\t\t\t// Filters\n\t\t\t\tfor ( type in Expr.filter ) {\n\t\t\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\t\t\tmatched = match.shift();\n\t\t\t\t\t\ttokens.push({\n\t\t\t\t\t\t\tvalue: matched,\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\tmatches: match\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !matched ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Return the length of the invalid excess\n\t\t\t// if we're just parsing\n\t\t\t// Otherwise, throw an error or return tokens\n\t\t\treturn parseOnly ?\n\t\t\t\tsoFar.length :\n\t\t\t\tsoFar ?\n\t\t\t\t\tSizzle.error( selector ) :\n\t\t\t\t\t// Cache the tokens\n\t\t\t\t\ttokenCache( selector, groups ).slice( 0 );\n\t\t}\n\n\t\tfunction toSelector( tokens ) {\n\t\t\tvar i = 0,\n\t\t\t\tlen = tokens.length,\n\t\t\t\tselector = \"\";\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tselector += tokens[i].value;\n\t\t\t}\n\t\t\treturn selector;\n\t\t}\n\n\t\tfunction addCombinator( matcher, combinator, base ) {\n\t\t\tvar dir = combinator.dir,\n\t\t\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\t\t\tdoneName = done++;\n\n\t\t\treturn combinator.first ?\n\t\t\t\t// Check against closest ancestor/preceding element\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} :\n\n\t\t\t\t// Check against all ancestor/preceding elements\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar data, cache, outerCache,\n\t\t\t\t\t\tdirkey = dirruns + \" \" + doneName;\n\n\t\t\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\t\t\tif ( xml ) {\n\t\t\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\t\t\tif ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {\n\t\t\t\t\t\t\t\t\tif ( (data = cache[1]) === true || data === cachedruns ) {\n\t\t\t\t\t\t\t\t\t\treturn data === true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcache = outerCache[ dir ] = [ dirkey ];\n\t\t\t\t\t\t\t\t\tcache[1] = matcher( elem, context, xml ) || cachedruns;\n\t\t\t\t\t\t\t\t\tif ( cache[1] === true ) {\n\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t}\n\n\t\tfunction elementMatcher( matchers ) {\n\t\t\treturn matchers.length > 1 ?\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar i = matchers.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t} :\n\t\t\t\tmatchers[0];\n\t\t}\n\n\t\tfunction condense( unmatched, map, filter, context, xml ) {\n\t\t\tvar elem,\n\t\t\t\tnewUnmatched = [],\n\t\t\t\ti = 0,\n\t\t\t\tlen = unmatched.length,\n\t\t\t\tmapped = map != null;\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\t\t\tif ( mapped ) {\n\t\t\t\t\t\t\tmap.push( i );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newUnmatched;\n\t\t}\n\n\t\tfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\t\t\tif ( postFilter && !postFilter[ expando ] ) {\n\t\t\t\tpostFilter = setMatcher( postFilter );\n\t\t\t}\n\t\t\tif ( postFinder && !postFinder[ expando ] ) {\n\t\t\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t\t\t}\n\t\t\treturn markFunction(function( seed, results, context, xml ) {\n\t\t\t\tvar temp, i, elem,\n\t\t\t\t\tpreMap = [],\n\t\t\t\t\tpostMap = [],\n\t\t\t\t\tpreexisting = results.length,\n\n\t\t\t\t// Get initial elements from seed or context\n\t\t\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\t\t\telems,\n\n\t\t\t\t\tmatcherOut = matcher ?\n\t\t\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t\t\t[] :\n\n\t\t\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\t\t\tresults :\n\t\t\t\t\t\tmatcherIn;\n\n\t\t\t\t// Find primary matches\n\t\t\t\tif ( matcher ) {\n\t\t\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t\t\t}\n\n\t\t\t\t// Apply postFilter\n\t\t\t\tif ( postFilter ) {\n\t\t\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\t\t\ti = temp.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\t\t\ttemp = [];\n\t\t\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t\t\t(temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add elements to results, through postFinder if defined\n\t\t\t\t} else {\n\t\t\t\t\tmatcherOut = condense(\n\t\t\t\t\t\tmatcherOut === results ?\n\t\t\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\t\t\tmatcherOut\n\t\t\t\t\t);\n\t\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction matcherFromTokens( tokens ) {\n\t\t\tvar checkContext, matcher, j,\n\t\t\t\tlen = tokens.length,\n\t\t\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\t\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\t\t\ti = leadingRelative ? 1 : 0,\n\n\t\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\t\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\t\t\treturn elem === checkContext;\n\t\t\t\t}, implicitRelative, true ),\n\t\t\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\t\t\treturn indexOf.call( checkContext, elem ) > -1;\n\t\t\t\t}, implicitRelative, true ),\n\t\t\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\t\t\treturn ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t\t} ];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t\t\t} else {\n\t\t\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t\t\t// Return special upon seeing a positional matcher\n\t\t\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\t\t\tj = ++i;\n\t\t\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn setMatcher(\n\t\t\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\t\t\tmatcher,\n\t\t\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tmatchers.push( matcher );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn elementMatcher( matchers );\n\t\t}\n\n\t\tfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\t\t\t// A counter to specify which element is currently being matched\n\t\t\tvar matcherCachedRuns = 0,\n\t\t\t\tbySet = setMatchers.length > 0,\n\t\t\t\tbyElement = elementMatchers.length > 0,\n\t\t\t\tsuperMatcher = function( seed, context, xml, results, expandContext ) {\n\t\t\t\t\tvar elem, j, matcher,\n\t\t\t\t\t\tsetMatched = [],\n\t\t\t\t\t\tmatchedCount = 0,\n\t\t\t\t\t\ti = \"0\",\n\t\t\t\t\t\tunmatched = seed && [],\n\t\t\t\t\t\toutermost = expandContext != null,\n\t\t\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t\t// We must always have either seed elements or context\n\t\t\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", expandContext && context.parentNode || context ),\n\t\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);\n\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\toutermostContext = context !== document && context;\n\t\t\t\t\t\tcachedruns = matcherCachedRuns;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\t\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\t\t\tj = 0;\n\t\t\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t\t\t\tcachedruns = ++matcherCachedRuns;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\t\t\tif ( bySet ) {\n\t\t\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply set filters to unmatched elements\n\t\t\t\t\tmatchedCount += i;\n\t\t\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\t\t\tj = 0;\n\t\t\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add matches to results\n\t\t\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Override manipulation of globals by nested matchers\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t\toutermostContext = contextBackup;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn unmatched;\n\t\t\t\t};\n\n\t\t\treturn bySet ?\n\t\t\t\tmarkFunction( superMatcher ) :\n\t\t\t\tsuperMatcher;\n\t\t}\n\n\t\tcompile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {\n\t\t\tvar i,\n\t\t\t\tsetMatchers = [],\n\t\t\t\telementMatchers = [],\n\t\t\t\tcached = compilerCache[ selector + \" \" ];\n\n\t\t\tif ( !cached ) {\n\t\t\t\t// Generate a function of recursive functions that can be used to check each element\n\t\t\t\tif ( !group ) {\n\t\t\t\t\tgroup = tokenize( selector );\n\t\t\t\t}\n\t\t\t\ti = group.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tcached = matcherFromTokens( group[i] );\n\t\t\t\t\tif ( cached[ expando ] ) {\n\t\t\t\t\t\tsetMatchers.push( cached );\n\t\t\t\t\t} else {\n\t\t\t\t\t\telementMatchers.push( cached );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Cache the compiled function\n\t\t\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\t\t\t}\n\t\t\treturn cached;\n\t\t};\n\n\t\tfunction multipleContexts( selector, contexts, results ) {\n\t\t\tvar i = 0,\n\t\t\t\tlen = contexts.length;\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tSizzle( selector, contexts[i], results );\n\t\t\t}\n\t\t\treturn results;\n\t\t}\n\n\t\tfunction select( selector, context, results, seed ) {\n\t\t\tvar i, tokens, token, type, find,\n\t\t\t\tmatch = tokenize( selector );\n\n\t\t\tif ( !seed ) {\n\t\t\t\t// Try to minimize operations if there is only one group\n\t\t\t\tif ( match.length === 1 ) {\n\n\t\t\t\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\t\t\t\ttokens = match[0] = match[0].slice( 0 );\n\t\t\t\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\t\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\t\t\t\tif ( !context ) {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fetch a seed set for right-to-left matching\n\t\t\t\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\ttoken = tokens[i];\n\n\t\t\t\t\t\t// Abort if we hit a combinator\n\t\t\t\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\t\t\t\tif ( (seed = find(\n\t\t\t\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\t\t\t\trsibling.test( tokens[0].type ) && context.parentNode || context\n\t\t\t\t\t\t\t)) ) {\n\n\t\t\t\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Compile and execute a filtering function\n\t\t\t// Provide `match` to avoid retokenization if we modified the selector above\n\t\t\tcompile( selector, match )(\n\t\t\t\tseed,\n\t\t\t\tcontext,\n\t\t\t\t!documentIsHTML,\n\t\t\t\tresults,\n\t\t\t\trsibling.test( selector )\n\t\t\t);\n\t\t\treturn results;\n\t\t}\n\n// One-time assignments\n\n// Sort stability\n\t\tsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome<14\n// Always assume duplicates if they aren't passed to the comparison function\n\t\tsupport.detectDuplicates = hasDuplicate;\n\n// Initialize against the default document\n\t\tsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\n\t\tsupport.sortDetached = assert(function( div1 ) {\n\t\t\t// Should return 1, but returns 4 (following)\n\t\t\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n\t\t});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\n\t\tif ( !assert(function( div ) {\n\t\t\tdiv.innerHTML = \"<a href='#'></a>\";\n\t\t\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n\t\t}) ) {\n\t\t\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\t\t\tif ( !isXML ) {\n\t\t\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\n\t\tif ( !support.attributes || !assert(function( div ) {\n\t\t\tdiv.innerHTML = \"<input/>\";\n\t\t\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\t\t\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n\t\t}) ) {\n\t\t\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\t\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\t\t\treturn elem.defaultValue;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\n\t\tif ( !assert(function( div ) {\n\t\t\treturn div.getAttribute(\"disabled\") == null;\n\t\t}) ) {\n\t\t\taddHandle( booleans, function( elem, name, isXML ) {\n\t\t\t\tvar val;\n\t\t\t\tif ( !isXML ) {\n\t\t\t\t\treturn (val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\t\tval.value :\n\t\t\t\t\t\telem[ name ] === true ? name.toLowerCase() : null;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tjQuery.find = Sizzle;\n\t\tjQuery.expr = Sizzle.selectors;\n\t\tjQuery.expr[\":\"] = jQuery.expr.pseudos;\n\t\tjQuery.unique = Sizzle.uniqueSort;\n\t\tjQuery.text = Sizzle.getText;\n\t\tjQuery.isXMLDoc = Sizzle.isXML;\n\t\tjQuery.contains = Sizzle.contains;\n\n\n\t})( window );\n// String to Object options format cache\n\tvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\n\tfunction createOptions( options ) {\n\t\tvar object = optionsCache[ options ] = {};\n\t\tjQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {\n\t\t\tobject[ flag ] = true;\n\t\t});\n\t\treturn object;\n\t}\n\n\t/*\n\t * Create a callback list using the following parameters:\n\t *\n\t *\toptions: an optional list of space-separated options that will change how\n\t *\t\t\tthe callback list behaves or a more traditional option object\n\t *\n\t * By default a callback list will act like an event callback list and can be\n\t * \"fired\" multiple times.\n\t *\n\t * Possible options:\n\t *\n\t *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n\t *\n\t *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n\t *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n\t *\t\t\t\t\tvalues (like a Deferred)\n\t *\n\t *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n\t *\n\t *\tstopOnFalse:\tinterrupt callings when a callback returns false\n\t *\n\t */\n\tjQuery.Callbacks = function( options ) {\n\n\t\t// Convert options from String-formatted to Object-formatted if needed\n\t\t// (we check in cache first)\n\t\toptions = typeof options === \"string\" ?\n\t\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\t\tjQuery.extend( {}, options );\n\n\t\tvar // Last fire value (for non-forgettable lists)\n\t\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\t\tfired,\n\t\t// Flag to know if list is currently firing\n\t\t\tfiring,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\t\tfiringStart,\n\t\t// End of the loop when firing\n\t\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\t\tfiringIndex,\n\t\t// Actual callback list\n\t\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\t\tfire = function( data ) {\n\t\t\t\tmemory = options.memory && data;\n\t\t\t\tfired = true;\n\t\t\t\tfiringIndex = firingStart || 0;\n\t\t\t\tfiringStart = 0;\n\t\t\t\tfiringLength = list.length;\n\t\t\t\tfiring = true;\n\t\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfiring = false;\n\t\t\t\tif ( list ) {\n\t\t\t\t\tif ( stack ) {\n\t\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tlist = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t// Actual Callbacks object\n\t\t\tself = {\n\t\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\t\tadd: function() {\n\t\t\t\t\tif ( list ) {\n\t\t\t\t\t\t// First, we save the current length\n\t\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})( arguments );\n\t\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t\t// current firing batch?\n\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t\t\t// we should call right away\n\t\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Remove a callback from the list\n\t\t\t\tremove: function() {\n\t\t\t\t\tif ( list ) {\n\t\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\t\tvar index;\n\t\t\t\t\t\t\twhile( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Check if a given callback is in the list.\n\t\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\t\thas: function( fn ) {\n\t\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t\t},\n\t\t\t\t// Remove all callbacks from the list\n\t\t\t\tempty: function() {\n\t\t\t\t\tlist = [];\n\t\t\t\t\tfiringLength = 0;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Have the list do nothing anymore\n\t\t\t\tdisable: function() {\n\t\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Is it disabled?\n\t\t\t\tdisabled: function() {\n\t\t\t\t\treturn !list;\n\t\t\t\t},\n\t\t\t\t// Lock the list in its current state\n\t\t\t\tlock: function() {\n\t\t\t\t\tstack = undefined;\n\t\t\t\t\tif ( !memory ) {\n\t\t\t\t\t\tself.disable();\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Is it locked?\n\t\t\t\tlocked: function() {\n\t\t\t\t\treturn !stack;\n\t\t\t\t},\n\t\t\t\t// Call all callbacks with the given context and arguments\n\t\t\t\tfireWith: function( context, args ) {\n\t\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\t\targs = args || [];\n\t\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfire( args );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// Call all the callbacks with the given arguments\n\t\t\t\tfire: function() {\n\t\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t// To know if the callbacks have already been called at least once\n\t\t\t\tfired: function() {\n\t\t\t\t\treturn !!fired;\n\t\t\t\t}\n\t\t\t};\n\n\t\treturn self;\n\t};\n\tjQuery.extend({\n\n\t\tDeferred: function( func ) {\n\t\t\tvar tuples = [\n\t\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t\t],\n\t\t\t\tstate = \"pending\",\n\t\t\t\tpromise = {\n\t\t\t\t\tstate: function() {\n\t\t\t\t\t\treturn state;\n\t\t\t\t\t},\n\t\t\t\t\talways: function() {\n\t\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t},\n\t\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\t\tvar action = tuple[ 0 ],\n\t\t\t\t\t\t\t\t\tfn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewDefer[ action + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfns = null;\n\t\t\t\t\t\t}).promise();\n\t\t\t\t\t},\n\t\t\t\t\t// Get a promise for this deferred\n\t\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdeferred = {};\n\n\t\t\t// Keep pipe for back-compat\n\t\t\tpromise.pipe = promise.then;\n\n\t\t\t// Add list-specific methods\n\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\tvar list = tuple[ 2 ],\n\t\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t\t// Handle state\n\t\t\t\tif ( stateString ) {\n\t\t\t\t\tlist.add(function() {\n\t\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\t\tstate = stateString;\n\n\t\t\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t\t}\n\n\t\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t};\n\t\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t\t});\n\n\t\t\t// Make the deferred a promise\n\t\t\tpromise.promise( deferred );\n\n\t\t\t// Call given func if any\n\t\t\tif ( func ) {\n\t\t\t\tfunc.call( deferred, deferred );\n\t\t\t}\n\n\t\t\t// All done!\n\t\t\treturn deferred;\n\t\t},\n\n\t\t// Deferred helper\n\t\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\t\tvar i = 0,\n\t\t\t\tresolveValues = core_slice.call( arguments ),\n\t\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\t\treturn function( value ) {\n\t\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;\n\t\t\t\t\t\tif( values === progressValues ) {\n\t\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\t\tif ( length > 1 ) {\n\t\t\t\tprogressValues = new Array( length );\n\t\t\t\tprogressContexts = new Array( length );\n\t\t\t\tresolveContexts = new Array( length );\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t--remaining;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if we're not waiting on anything, resolve the master\n\t\t\tif ( !remaining ) {\n\t\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t\t}\n\n\t\t\treturn deferred.promise();\n\t\t}\n\t});\n\tjQuery.support = (function( support ) {\n\t\tvar input = document.createElement(\"input\"),\n\t\t\tfragment = document.createDocumentFragment(),\n\t\t\tdiv = document.createElement(\"div\"),\n\t\t\tselect = document.createElement(\"select\"),\n\t\t\topt = select.appendChild( document.createElement(\"option\") );\n\n\t\t// Finish early in limited environments\n\t\tif ( !input.type ) {\n\t\t\treturn support;\n\t\t}\n\n\t\tinput.type = \"checkbox\";\n\n\t\t// Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3\n\t\t// Check the default checkbox/radio value (\"\" on old WebKit; \"on\" elsewhere)\n\t\tsupport.checkOn = input.value !== \"\";\n\n\t\t// Must access the parent to make an option select properly\n\t\t// Support: IE9, IE10\n\t\tsupport.optSelected = opt.selected;\n\n\t\t// Will be defined later\n\t\tsupport.reliableMarginRight = true;\n\t\tsupport.boxSizingReliable = true;\n\t\tsupport.pixelPosition = false;\n\n\t\t// Make sure checked status is properly cloned\n\t\t// Support: IE9, IE10\n\t\tinput.checked = true;\n\t\tsupport.noCloneChecked = input.cloneNode( true ).checked;\n\n\t\t// Make sure that the options inside disabled selects aren't marked as disabled\n\t\t// (WebKit marks them as disabled)\n\t\tselect.disabled = true;\n\t\tsupport.optDisabled = !opt.disabled;\n\n\t\t// Check if an input maintains its value after becoming a radio\n\t\t// Support: IE9, IE10\n\t\tinput = document.createElement(\"input\");\n\t\tinput.value = \"t\";\n\t\tinput.type = \"radio\";\n\t\tsupport.radioValue = input.value === \"t\";\n\n\t\t// #11217 - WebKit loses check when the name is after the checked attribute\n\t\tinput.setAttribute( \"checked\", \"t\" );\n\t\tinput.setAttribute( \"name\", \"t\" );\n\n\t\tfragment.appendChild( input );\n\n\t\t// Support: Safari 5.1, Android 4.x, Android 2.3\n\t\t// old WebKit doesn't clone checked state correctly in fragments\n\t\tsupport.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t\t// Support: Firefox, Chrome, Safari\n\t\t// Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)\n\t\tsupport.focusinBubbles = \"onfocusin\" in window;\n\n\t\tdiv.style.backgroundClip = \"content-box\";\n\t\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\t\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\t\t// Run tests that need a body at doc ready\n\t\tjQuery(function() {\n\t\t\tvar container, marginDiv,\n\t\t\t// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).\n\t\t\t\tdivReset = \"padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box\",\n\t\t\t\tbody = document.getElementsByTagName(\"body\")[ 0 ];\n\n\t\t\tif ( !body ) {\n\t\t\t\t// Return for frameset docs that don't have a body\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontainer = document.createElement(\"div\");\n\t\t\tcontainer.style.cssText = \"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\";\n\n\t\t\t// Check box-sizing and margin behavior.\n\t\t\tbody.appendChild( container ).appendChild( div );\n\t\t\tdiv.innerHTML = \"\";\n\t\t\t// Support: Firefox, Android 2.3 (Prefixed box-sizing versions).\n\t\t\tdiv.style.cssText = \"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%\";\n\n\t\t\t// Workaround failing boxSizing test due to offsetWidth returning wrong value\n\t\t\t// with some non-1 values of body zoom, ticket #13543\n\t\t\tjQuery.swap( body, body.style.zoom != null ? { zoom: 1 } : {}, function() {\n\t\t\t\tsupport.boxSizing = div.offsetWidth === 4;\n\t\t\t});\n\n\t\t\t// Use window.getComputedStyle because jsdom on node.js will break without it.\n\t\t\tif ( window.getComputedStyle ) {\n\t\t\t\tsupport.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== \"1%\";\n\t\t\t\tsupport.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: \"4px\" } ).width === \"4px\";\n\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\tmarginDiv = div.appendChild( document.createElement(\"div\") );\n\t\t\t\tmarginDiv.style.cssText = div.style.cssText = divReset;\n\t\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\t\tdiv.style.width = \"1px\";\n\n\t\t\t\tsupport.reliableMarginRight =\n\t\t\t\t\t!parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );\n\t\t\t}\n\n\t\t\tbody.removeChild( container );\n\t\t});\n\n\t\treturn support;\n\t})( {} );\n\n\t/*\n\t Implementation Summary\n\n\t 1. Enforce API surface and semantic compatibility with 1.9.x branch\n\t 2. Improve the module's maintainability by reducing the storage\n\t paths to a single mechanism.\n\t 3. Use the same single mechanism to support \"private\" and \"user\" data.\n\t 4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n\t 5. Avoid exposing implementation details on user objects (eg. expando properties)\n\t 6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\t */\n\tvar data_user, data_priv,\n\t\trbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n\t\trmultiDash = /([A-Z])/g;\n\n\tfunction Data() {\n\t\t// Support: Android < 4,\n\t\t// Old WebKit does not have Object.preventExtensions/freeze method,\n\t\t// return new empty object instead with no [[set]] accessor\n\t\tObject.defineProperty( this.cache = {}, 0, {\n\t\t\tget: function() {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t});\n\n\t\tthis.expando = jQuery.expando + Math.random();\n\t}\n\n\tData.uid = 1;\n\n\tData.accepts = function( owner ) {\n\t\t// Accepts only:\n\t\t//  - Node\n\t\t//    - Node.ELEMENT_NODE\n\t\t//    - Node.DOCUMENT_NODE\n\t\t//  - Object\n\t\t//    - Any\n\t\treturn owner.nodeType ?\n\t\t\towner.nodeType === 1 || owner.nodeType === 9 : true;\n\t};\n\n\tData.prototype = {\n\t\tkey: function( owner ) {\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return the key for a frozen object.\n\t\t\tif ( !Data.accepts( owner ) ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tvar descriptor = {},\n\t\t\t// Check if the owner object already has a cache key\n\t\t\t\tunlock = owner[ this.expando ];\n\n\t\t\t// If not, create one\n\t\t\tif ( !unlock ) {\n\t\t\t\tunlock = Data.uid++;\n\n\t\t\t\t// Secure it in a non-enumerable, non-writable property\n\t\t\t\ttry {\n\t\t\t\t\tdescriptor[ this.expando ] = { value: unlock };\n\t\t\t\t\tObject.defineProperties( owner, descriptor );\n\n\t\t\t\t\t// Support: Android < 4\n\t\t\t\t\t// Fallback to a less secure definition\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\tdescriptor[ this.expando ] = unlock;\n\t\t\t\t\tjQuery.extend( owner, descriptor );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure the cache object\n\t\t\tif ( !this.cache[ unlock ] ) {\n\t\t\t\tthis.cache[ unlock ] = {};\n\t\t\t}\n\n\t\t\treturn unlock;\n\t\t},\n\t\tset: function( owner, data, value ) {\n\t\t\tvar prop,\n\t\t\t// There may be an unlock assigned to this node,\n\t\t\t// if there is no entry for this \"owner\", create one inline\n\t\t\t// and set the unlock as though an owner entry had always existed\n\t\t\t\tunlock = this.key( owner ),\n\t\t\t\tcache = this.cache[ unlock ];\n\n\t\t\t// Handle: [ owner, key, value ] args\n\t\t\tif ( typeof data === \"string\" ) {\n\t\t\t\tcache[ data ] = value;\n\n\t\t\t\t// Handle: [ owner, { properties } ] args\n\t\t\t} else {\n\t\t\t\t// Fresh assignments by object are shallow copied\n\t\t\t\tif ( jQuery.isEmptyObject( cache ) ) {\n\t\t\t\t\tjQuery.extend( this.cache[ unlock ], data );\n\t\t\t\t\t// Otherwise, copy the properties one-by-one to the cache object\n\t\t\t\t} else {\n\t\t\t\t\tfor ( prop in data ) {\n\t\t\t\t\t\tcache[ prop ] = data[ prop ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cache;\n\t\t},\n\t\tget: function( owner, key ) {\n\t\t\t// Either a valid cache is found, or will be created.\n\t\t\t// New caches will be created and the unlock returned,\n\t\t\t// allowing direct access to the newly created\n\t\t\t// empty data object. A valid owner object must be provided.\n\t\t\tvar cache = this.cache[ this.key( owner ) ];\n\n\t\t\treturn key === undefined ?\n\t\t\t\tcache : cache[ key ];\n\t\t},\n\t\taccess: function( owner, key, value ) {\n\t\t\tvar stored;\n\t\t\t// In cases where either:\n\t\t\t//\n\t\t\t//   1. No key was specified\n\t\t\t//   2. A string key was specified, but no value provided\n\t\t\t//\n\t\t\t// Take the \"read\" path and allow the get method to determine\n\t\t\t// which value to return, respectively either:\n\t\t\t//\n\t\t\t//   1. The entire cache object\n\t\t\t//   2. The data stored at the key\n\t\t\t//\n\t\t\tif ( key === undefined ||\n\t\t\t\t((key && typeof key === \"string\") && value === undefined) ) {\n\n\t\t\t\tstored = this.get( owner, key );\n\n\t\t\t\treturn stored !== undefined ?\n\t\t\t\t\tstored : this.get( owner, jQuery.camelCase(key) );\n\t\t\t}\n\n\t\t\t// [*]When the key is not a string, or both a key and value\n\t\t\t// are specified, set or extend (existing objects) with either:\n\t\t\t//\n\t\t\t//   1. An object of properties\n\t\t\t//   2. A key and value\n\t\t\t//\n\t\t\tthis.set( owner, key, value );\n\n\t\t\t// Since the \"set\" path can have two possible entry points\n\t\t\t// return the expected data based on which path was taken[*]\n\t\t\treturn value !== undefined ? value : key;\n\t\t},\n\t\tremove: function( owner, key ) {\n\t\t\tvar i, name, camel,\n\t\t\t\tunlock = this.key( owner ),\n\t\t\t\tcache = this.cache[ unlock ];\n\n\t\t\tif ( key === undefined ) {\n\t\t\t\tthis.cache[ unlock ] = {};\n\n\t\t\t} else {\n\t\t\t\t// Support array or space separated string of keys\n\t\t\t\tif ( jQuery.isArray( key ) ) {\n\t\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\t\tname = key.concat( key.map( jQuery.camelCase ) );\n\t\t\t\t} else {\n\t\t\t\t\tcamel = jQuery.camelCase( key );\n\t\t\t\t\t// Try the string as a key before any manipulation\n\t\t\t\t\tif ( key in cache ) {\n\t\t\t\t\t\tname = [ key, camel ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\t\t\tname = camel;\n\t\t\t\t\t\tname = name in cache ?\n\t\t\t\t\t\t\t[ name ] : ( name.match( core_rnotwhite ) || [] );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ti = name.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tdelete cache[ name[ i ] ];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thasData: function( owner ) {\n\t\t\treturn !jQuery.isEmptyObject(\n\t\t\t\tthis.cache[ owner[ this.expando ] ] || {}\n\t\t\t);\n\t\t},\n\t\tdiscard: function( owner ) {\n\t\t\tif ( owner[ this.expando ] ) {\n\t\t\t\tdelete this.cache[ owner[ this.expando ] ];\n\t\t\t}\n\t\t}\n\t};\n\n// These may be used throughout the jQuery core codebase\n\tdata_user = new Data();\n\tdata_priv = new Data();\n\n\n\tjQuery.extend({\n\t\tacceptData: Data.accepts,\n\n\t\thasData: function( elem ) {\n\t\t\treturn data_user.hasData( elem ) || data_priv.hasData( elem );\n\t\t},\n\n\t\tdata: function( elem, name, data ) {\n\t\t\treturn data_user.access( elem, name, data );\n\t\t},\n\n\t\tremoveData: function( elem, name ) {\n\t\t\tdata_user.remove( elem, name );\n\t\t},\n\n\t\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t\t// with direct calls to data_priv methods, these can be deprecated.\n\t\t_data: function( elem, name, data ) {\n\t\t\treturn data_priv.access( elem, name, data );\n\t\t},\n\n\t\t_removeData: function( elem, name ) {\n\t\t\tdata_priv.remove( elem, name );\n\t\t}\n\t});\n\n\tjQuery.fn.extend({\n\t\tdata: function( key, value ) {\n\t\t\tvar attrs, name,\n\t\t\t\telem = this[ 0 ],\n\t\t\t\ti = 0,\n\t\t\t\tdata = null;\n\n\t\t\t// Gets all values\n\t\t\tif ( key === undefined ) {\n\t\t\t\tif ( this.length ) {\n\t\t\t\t\tdata = data_user.get( elem );\n\n\t\t\t\t\tif ( elem.nodeType === 1 && !data_priv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\t\tattrs = elem.attributes;\n\t\t\t\t\t\tfor ( ; i < attrs.length; i++ ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata_priv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t}\n\n\t\t\t// Sets multiple values\n\t\t\tif ( typeof key === \"object\" ) {\n\t\t\t\treturn this.each(function() {\n\t\t\t\t\tdata_user.set( this, key );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn jQuery.access( this, function( value ) {\n\t\t\t\tvar data,\n\t\t\t\t\tcamelKey = jQuery.camelCase( key );\n\n\t\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\t\tif ( elem && value === undefined ) {\n\t\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t\t// with the key as-is\n\t\t\t\t\tdata = data_user.get( elem, key );\n\t\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t\t// with the key camelized\n\t\t\t\t\tdata = data_user.get( elem, camelKey );\n\t\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\t\tdata = dataAttr( elem, camelKey, undefined );\n\t\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t}\n\n\t\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Set the data...\n\t\t\t\tthis.each(function() {\n\t\t\t\t\t// First, attempt to store a copy or reference of any\n\t\t\t\t\t// data that might've been store with a camelCased key.\n\t\t\t\t\tvar data = data_user.get( this, camelKey );\n\n\t\t\t\t\t// For HTML5 data-* attribute interop, we have to\n\t\t\t\t\t// store property names with dashes in a camelCase form.\n\t\t\t\t\t// This might not apply to all properties...*\n\t\t\t\t\tdata_user.set( this, camelKey, value );\n\n\t\t\t\t\t// *... In the case of properties that might _actually_\n\t\t\t\t\t// have dashes, we need to also store a copy of that\n\t\t\t\t\t// unchanged property.\n\t\t\t\t\tif ( key.indexOf(\"-\") !== -1 && data !== undefined ) {\n\t\t\t\t\t\tdata_user.set( this, key, value );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, null, value, arguments.length > 1, null, true );\n\t\t},\n\n\t\tremoveData: function( key ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tdata_user.remove( this, key );\n\t\t\t});\n\t\t}\n\t});\n\n\tfunction dataAttr( elem, key, data ) {\n\t\tvar name;\n\n\t\t// If nothing was found internally, try to fetch any\n\t\t// data from the HTML5 data-* attribute\n\t\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\t\tname = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\t\t\tdata = elem.getAttribute( name );\n\n\t\t\tif ( typeof data === \"string\" ) {\n\t\t\t\ttry {\n\t\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\t\t\t\t\trbrace.test( data ) ? JSON.parse( data ) :\n\t\t\t\t\t\t\t\t\t\tdata;\n\t\t\t\t} catch( e ) {}\n\n\t\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\t\tdata_user.set( elem, key, data );\n\t\t\t} else {\n\t\t\t\tdata = undefined;\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\tjQuery.extend({\n\t\tqueue: function( elem, type, data ) {\n\t\t\tvar queue;\n\n\t\t\tif ( elem ) {\n\t\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\t\tqueue = data_priv.get( elem, type );\n\n\t\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\t\tqueue = data_priv.access( elem, type, jQuery.makeArray(data) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tqueue.push( data );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn queue || [];\n\t\t\t}\n\t\t},\n\n\t\tdequeue: function( elem, type ) {\n\t\t\ttype = type || \"fx\";\n\n\t\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\t\tstartLength = queue.length,\n\t\t\t\tfn = queue.shift(),\n\t\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\t\tnext = function() {\n\t\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t\t};\n\n\t\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\t\tif ( fn === \"inprogress\" ) {\n\t\t\t\tfn = queue.shift();\n\t\t\t\tstartLength--;\n\t\t\t}\n\n\t\t\tif ( fn ) {\n\n\t\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t\t// automatically dequeued\n\t\t\t\tif ( type === \"fx\" ) {\n\t\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t\t}\n\n\t\t\t\t// clear up the last queue stop function\n\t\t\t\tdelete hooks.stop;\n\t\t\t\tfn.call( elem, next, hooks );\n\t\t\t}\n\n\t\t\tif ( !startLength && hooks ) {\n\t\t\t\thooks.empty.fire();\n\t\t\t}\n\t\t},\n\n\t\t// not intended for public consumption - generates a queueHooks object, or returns the current one\n\t\t_queueHooks: function( elem, type ) {\n\t\t\tvar key = type + \"queueHooks\";\n\t\t\treturn data_priv.get( elem, key ) || data_priv.access( elem, key, {\n\t\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\t\tdata_priv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t});\n\n\tjQuery.fn.extend({\n\t\tqueue: function( type, data ) {\n\t\t\tvar setter = 2;\n\n\t\t\tif ( typeof type !== \"string\" ) {\n\t\t\t\tdata = type;\n\t\t\t\ttype = \"fx\";\n\t\t\t\tsetter--;\n\t\t\t}\n\n\t\t\tif ( arguments.length < setter ) {\n\t\t\t\treturn jQuery.queue( this[0], type );\n\t\t\t}\n\n\t\t\treturn data === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each(function() {\n\t\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t\t// ensure a hooks for this queue\n\t\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tdequeue: function( type ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t});\n\t\t},\n\t\t// Based off of the plugin by Clint Helfers, with permission.\n\t\t// http://blindsignals.com/index.php/2009/07/jquery-delay/\n\t\tdelay: function( time, type ) {\n\t\t\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\t\t\ttype = type || \"fx\";\n\n\t\t\treturn this.queue( type, function( next, hooks ) {\n\t\t\t\tvar timeout = setTimeout( next, time );\n\t\t\t\thooks.stop = function() {\n\t\t\t\t\tclearTimeout( timeout );\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tclearQueue: function( type ) {\n\t\t\treturn this.queue( type || \"fx\", [] );\n\t\t},\n\t\t// Get a promise resolved when queues of a certain type\n\t\t// are emptied (fx is the type by default)\n\t\tpromise: function( type, obj ) {\n\t\t\tvar tmp,\n\t\t\t\tcount = 1,\n\t\t\t\tdefer = jQuery.Deferred(),\n\t\t\t\telements = this,\n\t\t\t\ti = this.length,\n\t\t\t\tresolve = function() {\n\t\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\tif ( typeof type !== \"string\" ) {\n\t\t\t\tobj = type;\n\t\t\t\ttype = undefined;\n\t\t\t}\n\t\t\ttype = type || \"fx\";\n\n\t\t\twhile( i-- ) {\n\t\t\t\ttmp = data_priv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\t\tcount++;\n\t\t\t\t\ttmp.empty.add( resolve );\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve();\n\t\t\treturn defer.promise( obj );\n\t\t}\n\t});\n\tvar nodeHook, boolHook,\n\t\trclass = /[\\t\\r\\n\\f]/g,\n\t\trreturn = /\\r/g,\n\t\trfocusable = /^(?:input|select|textarea|button)$/i;\n\n\tjQuery.fn.extend({\n\t\tattr: function( name, value ) {\n\t\t\treturn jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t\t},\n\n\t\tremoveAttr: function( name ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.removeAttr( this, name );\n\t\t\t});\n\t\t},\n\n\t\tprop: function( name, value ) {\n\t\t\treturn jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t\t},\n\n\t\tremoveProp: function( name ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t\t});\n\t\t},\n\n\t\taddClass: function( value ) {\n\t\t\tvar classes, elem, cur, clazz, j,\n\t\t\t\ti = 0,\n\t\t\t\tlen = this.length,\n\t\t\t\tproceed = typeof value === \"string\" && value;\n\n\t\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\t\treturn this.each(function( j ) {\n\t\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( proceed ) {\n\t\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\telem = this[ i ];\n\t\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\t\" \"\n\t\t\t\t\t\t);\n\n\t\t\t\t\tif ( cur ) {\n\t\t\t\t\t\tj = 0;\n\t\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telem.className = jQuery.trim( cur );\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tremoveClass: function( value ) {\n\t\t\tvar classes, elem, cur, clazz, j,\n\t\t\t\ti = 0,\n\t\t\t\tlen = this.length,\n\t\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value;\n\n\t\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\t\treturn this.each(function( j ) {\n\t\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t\t});\n\t\t\t}\n\t\t\tif ( proceed ) {\n\t\t\t\tclasses = ( value || \"\" ).match( core_rnotwhite ) || [];\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\telem = this[ i ];\n\t\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t);\n\n\t\t\t\t\tif ( cur ) {\n\t\t\t\t\t\tj = 0;\n\t\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telem.className = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\ttoggleClass: function( value, stateVal ) {\n\t\t\tvar type = typeof value;\n\n\t\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t\t}\n\n\t\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\t\treturn this.each(function( i ) {\n\t\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( type === \"string\" ) {\n\t\t\t\t\t// toggle individual class names\n\t\t\t\t\tvar className,\n\t\t\t\t\t\ti = 0,\n\t\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\t\tclassNames = value.match( core_rnotwhite ) || [];\n\n\t\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t\t// check each className given, space separated list\n\t\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Toggle whole class name\n\t\t\t\t} else if ( type === core_strundefined || type === \"boolean\" ) {\n\t\t\t\t\tif ( this.className ) {\n\t\t\t\t\t\t// store className if set\n\t\t\t\t\t\tdata_priv.set( this, \"__className__\", this.className );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the element has a class name or if we're passed \"false\",\n\t\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\t\tthis.className = this.className || value === false ? \"\" : data_priv.get( this, \"__className__\" ) || \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\thasClass: function( selector ) {\n\t\t\tvar className = \" \" + selector + \" \",\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tval: function( value ) {\n\t\t\tvar hooks, ret, isFunction,\n\t\t\t\telem = this[0];\n\n\t\t\tif ( !arguments.length ) {\n\t\t\t\tif ( elem ) {\n\t\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t}\n\n\t\t\t\t\tret = elem.value;\n\n\t\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t\t// handle most common string cases\n\t\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t\t// handle cases where value is null/undef or number\n\t\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tvar val;\n\n\t\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t\t} else {\n\t\t\t\t\tval = value;\n\t\t\t\t}\n\n\t\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\t\tif ( val == null ) {\n\t\t\t\t\tval = \"\";\n\t\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\t\tval += \"\";\n\t\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\t\tval = jQuery.map(val, function ( value ) {\n\t\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\t\tthis.value = val;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tjQuery.extend({\n\t\tvalHooks: {\n\t\t\toption: {\n\t\t\t\tget: function( elem ) {\n\t\t\t\t\t// attributes.value is undefined in Blackberry 4.7 but\n\t\t\t\t\t// uses .value. See #6932\n\t\t\t\t\tvar val = elem.attributes.value;\n\t\t\t\t\treturn !val || val.specified ? elem.value : elem.text;\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect: {\n\t\t\t\tget: function( elem ) {\n\t\t\t\t\tvar value, option,\n\t\t\t\t\t\toptions = elem.options,\n\t\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\t\tmax :\n\t\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t\t// Loop through all the selected options\n\t\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t\t// IE6-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( jQuery.support.optDisabled ? !option.disabled : option.getAttribute(\"disabled\") === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn values;\n\t\t\t\t},\n\n\t\t\t\tset: function( elem, value ) {\n\t\t\t\t\tvar optionSet, option,\n\t\t\t\t\t\toptions = elem.options,\n\t\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\t\ti = options.length;\n\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\toption = options[ i ];\n\t\t\t\t\t\tif ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {\n\t\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// force browsers to behave consistently when non-matching value is set\n\t\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t\t}\n\t\t\t\t\treturn values;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tattr: function( elem, name, value ) {\n\t\t\tvar hooks, ret,\n\t\t\t\tnType = elem.nodeType;\n\n\t\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Fallback to prop when attributes are not supported\n\t\t\tif ( typeof elem.getAttribute === core_strundefined ) {\n\t\t\t\treturn jQuery.prop( elem, name, value );\n\t\t\t}\n\n\t\t\t// All attributes are lowercase\n\t\t\t// Grab necessary hook if one is defined\n\t\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\t\tname = name.toLowerCase();\n\t\t\t\thooks = jQuery.attrHooks[ name ] ||\n\t\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\n\t\t\t}\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\tif ( value === null ) {\n\t\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t\t} else if ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\n\t\t\t\t} else {\n\t\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t} else if ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\tret = jQuery.find.attr( elem, name );\n\n\t\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\t\treturn ret == null ?\n\t\t\t\t\tundefined :\n\t\t\t\t\tret;\n\t\t\t}\n\t\t},\n\n\t\tremoveAttr: function( elem, value ) {\n\t\t\tvar name, propName,\n\t\t\t\ti = 0,\n\t\t\t\tattrNames = value && value.match( core_rnotwhite );\n\n\t\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\n\t\t\t\t\t\t// Set corresponding property to false\n\t\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t\t}\n\n\t\t\t\t\telem.removeAttribute( name );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tattrHooks: {\n\t\t\ttype: {\n\t\t\t\tset: function( elem, value ) {\n\t\t\t\t\tif ( !jQuery.support.radioValue && value === \"radio\" && jQuery.nodeName(elem, \"input\") ) {\n\t\t\t\t\t\t// Setting the type on a radio button after the value resets the value in IE6-9\n\t\t\t\t\t\t// Reset value to default in case type is set after value during creation\n\t\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tpropFix: {\n\t\t\t\"for\": \"htmlFor\",\n\t\t\t\"class\": \"className\"\n\t\t},\n\n\t\tprop: function( elem, name, value ) {\n\t\t\tvar ret, hooks, notxml,\n\t\t\t\tnType = elem.nodeType;\n\n\t\t\t// don't get/set properties on text, comment and attribute nodes\n\t\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\t\tif ( notxml ) {\n\t\t\t\t// Fix name and attach hooks\n\t\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\t\thooks = jQuery.propHooks[ name ];\n\t\t\t}\n\n\t\t\tif ( value !== undefined ) {\n\t\t\t\treturn hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?\n\t\t\t\t\tret :\n\t\t\t\t\t( elem[ name ] = value );\n\n\t\t\t} else {\n\t\t\t\treturn hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ?\n\t\t\t\t\tret :\n\t\t\t\t\telem[ name ];\n\t\t\t}\n\t\t},\n\n\t\tpropHooks: {\n\t\t\ttabIndex: {\n\t\t\t\tget: function( elem ) {\n\t\t\t\t\treturn elem.hasAttribute( \"tabindex\" ) || rfocusable.test( elem.nodeName ) || elem.href ?\n\t\t\t\t\t\telem.tabIndex :\n\t\t\t\t\t\t-1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n// Hooks for boolean attributes\n\tboolHook = {\n\t\tset: function( elem, value, name ) {\n\t\t\tif ( value === false ) {\n\t\t\t\t// Remove boolean attributes when set to false\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, name );\n\t\t\t}\n\t\t\treturn name;\n\t\t}\n\t};\n\tjQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\t\tvar getter = jQuery.expr.attrHandle[ name ] || jQuery.find.attr;\n\n\t\tjQuery.expr.attrHandle[ name ] = function( elem, name, isXML ) {\n\t\t\tvar fn = jQuery.expr.attrHandle[ name ],\n\t\t\t\tret = isXML ?\n\t\t\t\t\tundefined :\n\t\t\t\t\t/* jshint eqeqeq: false */\n\t\t\t\t\t// Temporarily disable this handler to check existence\n\t\t\t\t\t(jQuery.expr.attrHandle[ name ] = undefined) !=\n\t\t\t\t\t\tgetter( elem, name, isXML ) ?\n\n\t\t\t\t\t\tname.toLowerCase() :\n\t\t\t\t\t\tnull;\n\n\t\t\t// Restore handler\n\t\t\tjQuery.expr.attrHandle[ name ] = fn;\n\n\t\t\treturn ret;\n\t\t};\n\t});\n\n// Support: IE9+\n// Selectedness for an option in an optgroup can be inaccurate\n\tif ( !jQuery.support.optSelected ) {\n\t\tjQuery.propHooks.selected = {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar parent = elem.parentNode;\n\t\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\t}\n\n\tjQuery.each([\n\t\t\"tabIndex\",\n\t\t\"readOnly\",\n\t\t\"maxLength\",\n\t\t\"cellSpacing\",\n\t\t\"cellPadding\",\n\t\t\"rowSpan\",\n\t\t\"colSpan\",\n\t\t\"useMap\",\n\t\t\"frameBorder\",\n\t\t\"contentEditable\"\n\t], function() {\n\t\tjQuery.propFix[ this.toLowerCase() ] = this;\n\t});\n\n// Radios and checkboxes getter/setter\n\tjQuery.each([ \"radio\", \"checkbox\" ], function() {\n\t\tjQuery.valHooks[ this ] = {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif ( !jQuery.support.checkOn ) {\n\t\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\t\t// Support: Webkit\n\t\t\t\t// \"\" is returned instead of \"on\" if a value isn't specified\n\t\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t\t};\n\t\t}\n\t});\n\tvar rkeyEvent = /^key/,\n\t\trmouseEvent = /^(?:mouse|contextmenu)|click/,\n\t\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\t\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\n\tfunction returnTrue() {\n\t\treturn true;\n\t}\n\n\tfunction returnFalse() {\n\t\treturn false;\n\t}\n\n\tfunction safeActiveElement() {\n\t\ttry {\n\t\t\treturn document.activeElement;\n\t\t} catch ( err ) { }\n\t}\n\n\t/*\n\t * Helper functions for managing events -- not part of the public interface.\n\t * Props to Dean Edwards' addEvent library for many of the ideas.\n\t */\n\tjQuery.event = {\n\n\t\tglobal: {},\n\n\t\tadd: function( elem, types, handler, data, selector ) {\n\n\t\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\t\tevents, t, handleObj,\n\t\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\t\telemData = data_priv.get( elem );\n\n\t\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\t\tif ( !elemData ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\t\tif ( handler.handler ) {\n\t\t\t\thandleObjIn = handler;\n\t\t\t\thandler = handleObjIn.handler;\n\t\t\t\tselector = handleObjIn.selector;\n\t\t\t}\n\n\t\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\t\tif ( !handler.guid ) {\n\t\t\t\thandler.guid = jQuery.guid++;\n\t\t\t}\n\n\t\t\t// Init the element's event structure and main handler, if this is the first\n\t\t\tif ( !(events = elemData.events) ) {\n\t\t\t\tevents = elemData.events = {};\n\t\t\t}\n\t\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\t\treturn typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?\n\t\t\t\t\t\tjQuery.event.dispatch.apply( eventHandle.elem, arguments ) :\n\t\t\t\t\t\tundefined;\n\t\t\t\t};\n\t\t\t\t// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events\n\t\t\t\teventHandle.elem = elem;\n\t\t\t}\n\n\t\t\t// Handle multiple events separated by a space\n\t\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\t\tt = types.length;\n\t\t\twhile ( t-- ) {\n\t\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\t\ttype = origType = tmp[1];\n\t\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\t\tif ( !type ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t\t// Update special based on newly reset type\n\t\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t\t// handleObj is passed to all event handlers\n\t\t\t\thandleObj = jQuery.extend({\n\t\t\t\t\ttype: type,\n\t\t\t\t\torigType: origType,\n\t\t\t\t\tdata: data,\n\t\t\t\t\thandler: handler,\n\t\t\t\t\tguid: handler.guid,\n\t\t\t\t\tselector: selector,\n\t\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t\t}, handleObjIn );\n\n\t\t\t\t// Init the event handler queue if we're the first\n\t\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( special.add ) {\n\t\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Add to the element's handler list, delegates in front\n\t\t\t\tif ( selector ) {\n\t\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t\t} else {\n\t\t\t\t\thandlers.push( handleObj );\n\t\t\t\t}\n\n\t\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\t\tjQuery.event.global[ type ] = true;\n\t\t\t}\n\n\t\t\t// Nullify elem to prevent memory leaks in IE\n\t\t\telem = null;\n\t\t},\n\n\t\t// Detach an event or set of events from an element\n\t\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\t\tvar j, origCount, tmp,\n\t\t\t\tevents, t, handleObj,\n\t\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\t\telemData = data_priv.hasData( elem ) && data_priv.get( elem );\n\n\t\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Once for each type.namespace in types; type may be omitted\n\t\t\ttypes = ( types || \"\" ).match( core_rnotwhite ) || [\"\"];\n\t\t\tt = types.length;\n\t\t\twhile ( t-- ) {\n\t\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\t\ttype = origType = tmp[1];\n\t\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\t\tif ( !type ) {\n\t\t\t\t\tfor ( type in events ) {\n\t\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\t\thandlers = events[ type ] || [];\n\t\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t\t// Remove matching events\n\t\t\t\torigCount = j = handlers.length;\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete events[ type ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove the expando if it's no longer used\n\t\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\t\tdelete elemData.handle;\n\t\t\t\tdata_priv.remove( elem, \"events\" );\n\t\t\t}\n\t\t},\n\n\t\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\t\teventPath = [ elem || document ],\n\t\t\t\ttype = core_hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\t\tnamespaces = core_hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\t\tcur = tmp = elem = elem || document;\n\n\t\t\t// Don't do events on text and comment nodes\n\t\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\t\tnamespaces = type.split(\".\");\n\t\t\t\ttype = namespaces.shift();\n\t\t\t\tnamespaces.sort();\n\t\t\t}\n\t\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\t\tevent = event[ jQuery.expando ] ?\n\t\t\t\tevent :\n\t\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\t\tevent.namespace = namespaces.join(\".\");\n\t\t\tevent.namespace_re = event.namespace ?\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\t\tnull;\n\n\t\t\t// Clean up the event in case it is being reused\n\t\t\tevent.result = undefined;\n\t\t\tif ( !event.target ) {\n\t\t\t\tevent.target = elem;\n\t\t\t}\n\n\t\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\t\tdata = data == null ?\n\t\t\t\t[ event ] :\n\t\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t\t// Allow special events to draw outside the lines\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\tbubbleType = special.delegateType || type;\n\t\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\t\tcur = cur.parentNode;\n\t\t\t\t}\n\t\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\t\teventPath.push( cur );\n\t\t\t\t\ttmp = cur;\n\t\t\t\t}\n\n\t\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fire handlers on the event path\n\t\t\ti = 0;\n\t\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\t\tevent.type = i > 1 ?\n\t\t\t\t\tbubbleType :\n\t\t\t\t\tspecial.bindType || type;\n\n\t\t\t\t// jQuery handler\n\t\t\t\thandle = ( data_priv.get( cur, \"events\" ) || {} )[ event.type ] && data_priv.get( cur, \"handle\" );\n\t\t\t\tif ( handle ) {\n\t\t\t\t\thandle.apply( cur, data );\n\t\t\t\t}\n\n\t\t\t\t// Native handler\n\t\t\t\thandle = ontype && cur[ ontype ];\n\t\t\t\tif ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t\tevent.type = type;\n\n\t\t\t// If nobody prevented the default action, do it now\n\t\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\t\tif ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&\n\t\t\t\t\tjQuery.acceptData( elem ) ) {\n\n\t\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\t\telem[ type ]();\n\t\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn event.result;\n\t\t},\n\n\t\tdispatch: function( event ) {\n\n\t\t\t// Make a writable jQuery.Event from the native event object\n\t\t\tevent = jQuery.event.fix( event );\n\n\t\t\tvar i, j, ret, matched, handleObj,\n\t\t\t\thandlerQueue = [],\n\t\t\t\targs = core_slice.call( arguments ),\n\t\t\t\thandlers = ( data_priv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\t\targs[0] = event;\n\t\t\tevent.delegateTarget = this;\n\n\t\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Determine handlers\n\t\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\t\ti = 0;\n\t\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t\t// Triggered event must either 1) have no namespace, or\n\t\t\t\t\t// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Call the postDispatch hook for the mapped type\n\t\t\tif ( special.postDispatch ) {\n\t\t\t\tspecial.postDispatch.call( this, event );\n\t\t\t}\n\n\t\t\treturn event.result;\n\t\t},\n\n\t\thandlers: function( event, handlers ) {\n\t\t\tvar i, matches, sel, handleObj,\n\t\t\t\thandlerQueue = [],\n\t\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\t\tcur = event.target;\n\n\t\t\t// Find delegate handlers\n\t\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\n\t\t\t\t\t\tmatches = [];\n\t\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the remaining (directly-bound) handlers\n\t\t\tif ( delegateCount < handlers.length ) {\n\t\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t\t}\n\n\t\t\treturn handlerQueue;\n\t\t},\n\n\t\t// Includes some event props shared by KeyEvent and MouseEvent\n\t\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\t\tfixHooks: {},\n\n\t\tkeyHooks: {\n\t\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\t\tfilter: function( event, original ) {\n\n\t\t\t\t// Add which for key events\n\t\t\t\tif ( event.which == null ) {\n\t\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t\t}\n\n\t\t\t\treturn event;\n\t\t\t}\n\t\t},\n\n\t\tmouseHooks: {\n\t\t\tprops: \"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\t\tfilter: function( event, original ) {\n\t\t\t\tvar eventDoc, doc, body,\n\t\t\t\t\tbutton = original.button;\n\n\t\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t\t}\n\n\t\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t\t// Note: button is not normalized, so don't use it\n\t\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t\t}\n\n\t\t\t\treturn event;\n\t\t\t}\n\t\t},\n\n\t\tfix: function( event ) {\n\t\t\tif ( event[ jQuery.expando ] ) {\n\t\t\t\treturn event;\n\t\t\t}\n\n\t\t\t// Create a writable copy of the event object and normalize some properties\n\t\t\tvar i, prop, copy,\n\t\t\t\ttype = event.type,\n\t\t\t\toriginalEvent = event,\n\t\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\t\tif ( !fixHook ) {\n\t\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t\t\t{};\n\t\t\t}\n\t\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\t\tevent = new jQuery.Event( originalEvent );\n\n\t\t\ti = copy.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tprop = copy[ i ];\n\t\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t\t}\n\n\t\t\t// Support: Cordova 2.5 (WebKit) (#13255)\n\t\t\t// All events should have a target; Cordova deviceready doesn't\n\t\t\tif ( !event.target ) {\n\t\t\t\tevent.target = document;\n\t\t\t}\n\n\t\t\t// Support: Safari 6.0+, Chrome < 28\n\t\t\t// Target should not be a text node (#504, #13143)\n\t\t\tif ( event.target.nodeType === 3 ) {\n\t\t\t\tevent.target = event.target.parentNode;\n\t\t\t}\n\n\t\t\treturn fixHook.filter? fixHook.filter( event, originalEvent ) : event;\n\t\t},\n\n\t\tspecial: {\n\t\t\tload: {\n\t\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\t\tnoBubble: true\n\t\t\t},\n\t\t\tfocus: {\n\t\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\t\ttrigger: function() {\n\t\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelegateType: \"focusin\"\n\t\t\t},\n\t\t\tblur: {\n\t\t\t\ttrigger: function() {\n\t\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\t\tthis.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdelegateType: \"focusout\"\n\t\t\t},\n\t\t\tclick: {\n\t\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\t\ttrigger: function() {\n\t\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\t\tthis.click();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t\t_default: function( event ) {\n\t\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tbeforeunload: {\n\t\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t\t// Support: Firefox 20+\n\t\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\t\tif ( event.result !== undefined ) {\n\t\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsimulate: function( type, elem, event, bubble ) {\n\t\t\t// Piggyback on a donor event to simulate a different one.\n\t\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t\t// simulated event prevents default then we do the same on the donor.\n\t\t\tvar e = jQuery.extend(\n\t\t\t\tnew jQuery.Event(),\n\t\t\t\tevent,\n\t\t\t\t{\n\t\t\t\t\ttype: type,\n\t\t\t\t\tisSimulated: true,\n\t\t\t\t\toriginalEvent: {}\n\t\t\t\t}\n\t\t\t);\n\t\t\tif ( bubble ) {\n\t\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t\t} else {\n\t\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t\t}\n\t\t\tif ( e.isDefaultPrevented() ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t};\n\n\tjQuery.removeEvent = function( elem, type, handle ) {\n\t\tif ( elem.removeEventListener ) {\n\t\t\telem.removeEventListener( type, handle, false );\n\t\t}\n\t};\n\n\tjQuery.Event = function( src, props ) {\n\t\t// Allow instantiation without the 'new' keyword\n\t\tif ( !(this instanceof jQuery.Event) ) {\n\t\t\treturn new jQuery.Event( src, props );\n\t\t}\n\n\t\t// Event object\n\t\tif ( src && src.type ) {\n\t\t\tthis.originalEvent = src;\n\t\t\tthis.type = src.type;\n\n\t\t\t// Events bubbling up the document may have been marked as prevented\n\t\t\t// by a handler lower down the tree; reflect the correct value.\n\t\t\tthis.isDefaultPrevented = ( src.defaultPrevented ||\n\t\t\t\tsrc.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;\n\n\t\t\t// Event type\n\t\t} else {\n\t\t\tthis.type = src;\n\t\t}\n\n\t\t// Put explicitly provided properties onto the event object\n\t\tif ( props ) {\n\t\t\tjQuery.extend( this, props );\n\t\t}\n\n\t\t// Create a timestamp if incoming event doesn't have one\n\t\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t\t// Mark it as fixed\n\t\tthis[ jQuery.expando ] = true;\n\t};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\n\tjQuery.Event.prototype = {\n\t\tisDefaultPrevented: returnFalse,\n\t\tisPropagationStopped: returnFalse,\n\t\tisImmediatePropagationStopped: returnFalse,\n\n\t\tpreventDefault: function() {\n\t\t\tvar e = this.originalEvent;\n\n\t\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\t\tif ( e && e.preventDefault ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\tstopPropagation: function() {\n\t\t\tvar e = this.originalEvent;\n\n\t\t\tthis.isPropagationStopped = returnTrue;\n\n\t\t\tif ( e && e.stopPropagation ) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tstopImmediatePropagation: function() {\n\t\t\tthis.isImmediatePropagationStopped = returnTrue;\n\t\t\tthis.stopPropagation();\n\t\t}\n\t};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// Support: Chrome 15+\n\tjQuery.each({\n\t\tmouseenter: \"mouseover\",\n\t\tmouseleave: \"mouseout\"\n\t}, function( orig, fix ) {\n\t\tjQuery.event.special[ orig ] = {\n\t\t\tdelegateType: fix,\n\t\t\tbindType: fix,\n\n\t\t\thandle: function( event ) {\n\t\t\t\tvar ret,\n\t\t\t\t\ttarget = this,\n\t\t\t\t\trelated = event.relatedTarget,\n\t\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\t\tevent.type = fix;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t};\n\t});\n\n// Create \"bubbling\" focus and blur events\n// Support: Firefox, Chrome, Safari\n\tif ( !jQuery.support.focusinBubbles ) {\n\t\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t\t// Attach a single capturing handler while someone wants focusin/focusout\n\t\t\tvar attaches = 0,\n\t\t\t\thandler = function( event ) {\n\t\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t\t};\n\n\t\t\tjQuery.event.special[ fix ] = {\n\t\t\t\tsetup: function() {\n\t\t\t\t\tif ( attaches++ === 0 ) {\n\t\t\t\t\t\tdocument.addEventListener( orig, handler, true );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tteardown: function() {\n\t\t\t\t\tif ( --attaches === 0 ) {\n\t\t\t\t\t\tdocument.removeEventListener( orig, handler, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\n\tjQuery.fn.extend({\n\n\t\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\t\tvar origFn, type;\n\n\t\t\t// Types can be a map of types/handlers\n\t\t\tif ( typeof types === \"object\" ) {\n\t\t\t\t// ( types-Object, selector, data )\n\t\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t\t// ( types-Object, data )\n\t\t\t\t\tdata = data || selector;\n\t\t\t\t\tselector = undefined;\n\t\t\t\t}\n\t\t\t\tfor ( type in types ) {\n\t\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif ( data == null && fn == null ) {\n\t\t\t\t// ( types, fn )\n\t\t\t\tfn = selector;\n\t\t\t\tdata = selector = undefined;\n\t\t\t} else if ( fn == null ) {\n\t\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t\t// ( types, selector, fn )\n\t\t\t\t\tfn = data;\n\t\t\t\t\tdata = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// ( types, data, fn )\n\t\t\t\t\tfn = data;\n\t\t\t\t\tdata = selector;\n\t\t\t\t\tselector = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( fn === false ) {\n\t\t\t\tfn = returnFalse;\n\t\t\t} else if ( !fn ) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tif ( one === 1 ) {\n\t\t\t\torigFn = fn;\n\t\t\t\tfn = function( event ) {\n\t\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\t\tjQuery().off( event );\n\t\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t\t};\n\t\t\t\t// Use same guid so caller can remove using origFn\n\t\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t\t}\n\t\t\treturn this.each( function() {\n\t\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t\t});\n\t\t},\n\t\tone: function( types, selector, data, fn ) {\n\t\t\treturn this.on( types, selector, data, fn, 1 );\n\t\t},\n\t\toff: function( types, selector, fn ) {\n\t\t\tvar handleObj, type;\n\t\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\t\thandleObj = types.handleObj;\n\t\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\t\thandleObj.selector,\n\t\t\t\t\thandleObj.handler\n\t\t\t\t);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tif ( typeof types === \"object\" ) {\n\t\t\t\t// ( types-object [, selector] )\n\t\t\t\tfor ( type in types ) {\n\t\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t\t// ( types [, fn] )\n\t\t\t\tfn = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tif ( fn === false ) {\n\t\t\t\tfn = returnFalse;\n\t\t\t}\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t\t});\n\t\t},\n\n\t\ttrigger: function( type, data ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tjQuery.event.trigger( type, data, this );\n\t\t\t});\n\t\t},\n\t\ttriggerHandler: function( type, data ) {\n\t\t\tvar elem = this[0];\n\t\t\tif ( elem ) {\n\t\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t\t}\n\t\t}\n\t});\n\tvar isSimple = /^.[^:#\\[\\.,]*$/,\n\t\trparentsprev = /^(?:parents|prev(?:Until|All))/,\n\t\trneedsContext = jQuery.expr.match.needsContext,\n\t// methods guaranteed to produce a unique set when starting from a unique set\n\t\tguaranteedUnique = {\n\t\t\tchildren: true,\n\t\t\tcontents: true,\n\t\t\tnext: true,\n\t\t\tprev: true\n\t\t};\n\n\tjQuery.fn.extend({\n\t\tfind: function( selector ) {\n\t\t\tvar i,\n\t\t\t\tret = [],\n\t\t\t\tself = this,\n\t\t\t\tlen = self.length;\n\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) );\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t\t}\n\n\t\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\n\t\t\treturn ret;\n\t\t},\n\n\t\thas: function( target ) {\n\t\t\tvar targets = jQuery( target, this ),\n\t\t\t\tl = targets.length;\n\n\t\t\treturn this.filter(function() {\n\t\t\t\tvar i = 0;\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tnot: function( selector ) {\n\t\t\treturn this.pushStack( winnow(this, selector || [], true) );\n\t\t},\n\n\t\tfilter: function( selector ) {\n\t\t\treturn this.pushStack( winnow(this, selector || [], false) );\n\t\t},\n\n\t\tis: function( selector ) {\n\t\t\treturn !!winnow(\n\t\t\t\tthis,\n\n\t\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\t\tjQuery( selector ) :\n\t\t\t\t\tselector || [],\n\t\t\t\tfalse\n\t\t\t).length;\n\t\t},\n\n\t\tclosest: function( selectors, context ) {\n\t\t\tvar cur,\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length,\n\t\t\t\tmatched = [],\n\t\t\t\tpos = ( rneedsContext.test( selectors ) || typeof selectors !== \"string\" ) ?\n\t\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t\t0;\n\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && (pos ?\n\t\t\t\t\t\tpos.index(cur) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector(cur, selectors)) ) {\n\n\t\t\t\t\t\tcur = matched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );\n\t\t},\n\n\t\t// Determine the position of an element within\n\t\t// the matched set of elements\n\t\tindex: function( elem ) {\n\n\t\t\t// No argument, return index in parent\n\t\t\tif ( !elem ) {\n\t\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t\t}\n\n\t\t\t// index in selector\n\t\t\tif ( typeof elem === \"string\" ) {\n\t\t\t\treturn core_indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t\t}\n\n\t\t\t// Locate the position of the desired element\n\t\t\treturn core_indexOf.call( this,\n\n\t\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t\t);\n\t\t},\n\n\t\tadd: function( selector, context ) {\n\t\t\tvar set = typeof selector === \"string\" ?\n\t\t\t\t\tjQuery( selector, context ) :\n\t\t\t\t\tjQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),\n\t\t\t\tall = jQuery.merge( this.get(), set );\n\n\t\t\treturn this.pushStack( jQuery.unique(all) );\n\t\t},\n\n\t\taddBack: function( selector ) {\n\t\t\treturn this.add( selector == null ?\n\t\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t\t);\n\t\t}\n\t});\n\n\tfunction sibling( cur, dir ) {\n\t\twhile ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}\n\n\t\treturn cur;\n\t}\n\n\tjQuery.each({\n\t\tparent: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t\t},\n\t\tparents: function( elem ) {\n\t\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t\t},\n\t\tparentsUntil: function( elem, i, until ) {\n\t\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t\t},\n\t\tnext: function( elem ) {\n\t\t\treturn sibling( elem, \"nextSibling\" );\n\t\t},\n\t\tprev: function( elem ) {\n\t\t\treturn sibling( elem, \"previousSibling\" );\n\t\t},\n\t\tnextAll: function( elem ) {\n\t\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t\t},\n\t\tprevAll: function( elem ) {\n\t\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t\t},\n\t\tnextUntil: function( elem, i, until ) {\n\t\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t\t},\n\t\tprevUntil: function( elem, i, until ) {\n\t\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t\t},\n\t\tsiblings: function( elem ) {\n\t\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t\t},\n\t\tchildren: function( elem ) {\n\t\t\treturn jQuery.sibling( elem.firstChild );\n\t\t},\n\t\tcontents: function( elem ) {\n\t\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t\t}\n\t}, function( name, fn ) {\n\t\tjQuery.fn[ name ] = function( until, selector ) {\n\t\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\t\tselector = until;\n\t\t\t}\n\n\t\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t\t}\n\n\t\t\tif ( this.length > 1 ) {\n\t\t\t\t// Remove duplicates\n\t\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\t\tjQuery.unique( matched );\n\t\t\t\t}\n\n\t\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\t\tmatched.reverse();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.pushStack( matched );\n\t\t};\n\t});\n\n\tjQuery.extend({\n\t\tfilter: function( expr, elems, not ) {\n\t\t\tvar elem = elems[ 0 ];\n\n\t\t\tif ( not ) {\n\t\t\t\texpr = \":not(\" + expr + \")\";\n\t\t\t}\n\n\t\t\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\t\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\t\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\t\t\treturn elem.nodeType === 1;\n\t\t\t\t}));\n\t\t},\n\n\t\tdir: function( elem, dir, until ) {\n\t\t\tvar matched = [],\n\t\t\t\ttruncate = until !== undefined;\n\n\t\t\twhile ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {\n\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmatched.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn matched;\n\t\t},\n\n\t\tsibling: function( n, elem ) {\n\t\t\tvar matched = [];\n\n\t\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\t\tmatched.push( n );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn matched;\n\t\t}\n\t});\n\n// Implement the identical functionality for filter and not\n\tfunction winnow( elements, qualifier, not ) {\n\t\tif ( jQuery.isFunction( qualifier ) ) {\n\t\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\t\t/* jshint -W018 */\n\t\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t\t});\n\n\t\t}\n\n\t\tif ( qualifier.nodeType ) {\n\t\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\t\treturn ( elem === qualifier ) !== not;\n\t\t\t});\n\n\t\t}\n\n\t\tif ( typeof qualifier === \"string\" ) {\n\t\t\tif ( isSimple.test( qualifier ) ) {\n\t\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t\t}\n\n\t\t\tqualifier = jQuery.filter( qualifier, elements );\n\t\t}\n\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( core_indexOf.call( qualifier, elem ) >= 0 ) !== not;\n\t\t});\n\t}\n\tvar rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\t\trtagName = /<([\\w:]+)/,\n\t\trhtml = /<|&#?\\w+;/,\n\t\trnoInnerhtml = /<(?:script|style|link)/i,\n\t\tmanipulation_rcheckableType = /^(?:checkbox|radio)$/i,\n\t// checked=\"checked\" or checked\n\t\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\t\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\t\trscriptTypeMasked = /^true\\/(.*)/,\n\t\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\t\twrapMap = {\n\n\t\t\t// Support: IE 9\n\t\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\t\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\t\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t\t_default: [ 0, \"\", \"\" ]\n\t\t};\n\n// Support: IE 9\n\twrapMap.optgroup = wrapMap.option;\n\n\twrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\n\twrapMap.th = wrapMap.td;\n\n\tjQuery.fn.extend({\n\t\ttext: function( value ) {\n\t\t\treturn jQuery.access( this, function( value ) {\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\tjQuery.text( this ) :\n\t\t\t\t\tthis.empty().append( ( this[ 0 ] && this[ 0 ].ownerDocument || document ).createTextNode( value ) );\n\t\t\t}, null, value, arguments.length );\n\t\t},\n\n\t\tappend: function() {\n\t\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\t\ttarget.appendChild( elem );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tprepend: function() {\n\t\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tbefore: function() {\n\t\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\t\tif ( this.parentNode ) {\n\t\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tafter: function() {\n\t\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\t\tif ( this.parentNode ) {\n\t\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// keepData is for internal use only--do not document\n\t\tremove: function( selector, keepData ) {\n\t\t\tvar elem,\n\t\t\t\telems = selector ? jQuery.filter( selector, this ) : this,\n\t\t\t\ti = 0;\n\n\t\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t\t}\n\n\t\t\t\tif ( elem.parentNode ) {\n\t\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tempty: function() {\n\t\t\tvar elem,\n\t\t\t\ti = 0;\n\n\t\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t\t// Prevent memory leaks\n\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t\t// Remove any remaining nodes\n\t\t\t\t\telem.textContent = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\t\treturn this.map( function () {\n\t\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t\t});\n\t\t},\n\n\t\thtml: function( value ) {\n\t\t\treturn jQuery.access( this, function( value ) {\n\t\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\t\ti = 0,\n\t\t\t\t\tl = this.length;\n\n\t\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\t\treturn elem.innerHTML;\n\t\t\t\t}\n\n\t\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telem = 0;\n\n\t\t\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t\t} catch( e ) {}\n\t\t\t\t}\n\n\t\t\t\tif ( elem ) {\n\t\t\t\t\tthis.empty().append( value );\n\t\t\t\t}\n\t\t\t}, null, value, arguments.length );\n\t\t},\n\n\t\treplaceWith: function() {\n\t\t\tvar\n\t\t\t// Snapshot the DOM in case .domManip sweeps something relevant into its fragment\n\t\t\t\targs = jQuery.map( this, function( elem ) {\n\t\t\t\t\treturn [ elem.nextSibling, elem.parentNode ];\n\t\t\t\t}),\n\t\t\t\ti = 0;\n\n\t\t\t// Make the changes, replacing each context element with the new content\n\t\t\tthis.domManip( arguments, function( elem ) {\n\t\t\t\tvar next = args[ i++ ],\n\t\t\t\t\tparent = args[ i++ ];\n\n\t\t\t\tif ( parent ) {\n\t\t\t\t\t// Don't use the snapshot next if it has moved (#13810)\n\t\t\t\t\tif ( next && next.parentNode !== parent ) {\n\t\t\t\t\t\tnext = this.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\tjQuery( this ).remove();\n\t\t\t\t\tparent.insertBefore( elem, next );\n\t\t\t\t}\n\t\t\t\t// Allow new content to include elements from the context set\n\t\t\t}, true );\n\n\t\t\t// Force removal if there was no new content (e.g., from empty arguments)\n\t\t\treturn i ? this : this.remove();\n\t\t},\n\n\t\tdetach: function( selector ) {\n\t\t\treturn this.remove( selector, true );\n\t\t},\n\n\t\tdomManip: function( args, callback, allowIntersection ) {\n\n\t\t\t// Flatten any nested arrays\n\t\t\targs = core_concat.apply( [], args );\n\n\t\t\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length,\n\t\t\t\tset = this,\n\t\t\t\tiNoClone = l - 1,\n\t\t\t\tvalue = args[ 0 ],\n\t\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\t\tif ( isFunction || !( l <= 1 || typeof value !== \"string\" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {\n\t\t\t\treturn this.each(function( index ) {\n\t\t\t\t\tvar self = set.eq( index );\n\t\t\t\t\tif ( isFunction ) {\n\t\t\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t\t\t}\n\t\t\t\t\tself.domManip( args, callback, allowIntersection );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( l ) {\n\t\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, !allowIntersection && this );\n\t\t\t\tfirst = fragment.firstChild;\n\n\t\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\t\tfragment = first;\n\t\t\t\t}\n\n\t\t\t\tif ( first ) {\n\t\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t\t\t// jQuery.merge because core_push.apply(_, arraylike) throws\n\t\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcallback.call( this[ i ], node, i );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t\t// Reenable scripts\n\t\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t\t!data_priv.access( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t\t// Hope ajax is available...\n\t\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tjQuery.globalEval( node.textContent.replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\t});\n\n\tjQuery.each({\n\t\tappendTo: \"append\",\n\t\tprependTo: \"prepend\",\n\t\tinsertBefore: \"before\",\n\t\tinsertAfter: \"after\",\n\t\treplaceAll: \"replaceWith\"\n\t}, function( name, original ) {\n\t\tjQuery.fn[ name ] = function( selector ) {\n\t\t\tvar elems,\n\t\t\t\tret = [],\n\t\t\t\tinsert = jQuery( selector ),\n\t\t\t\tlast = insert.length - 1,\n\t\t\t\ti = 0;\n\n\t\t\tfor ( ; i <= last; i++ ) {\n\t\t\t\telems = i === last ? this : this.clone( true );\n\t\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t\t// Support: QtWebKit\n\t\t\t\t// .get() because core_push.apply(_, arraylike) throws\n\t\t\t\tcore_push.apply( ret, elems.get() );\n\t\t\t}\n\n\t\t\treturn this.pushStack( ret );\n\t\t};\n\t});\n\n\tjQuery.extend({\n\t\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\t\tvar i, l, srcElements, destElements,\n\t\t\t\tclone = elem.cloneNode( true ),\n\t\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Support: IE >= 9\n\t\t\t// Fix Cloning issues\n\t\t\tif ( !jQuery.support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) && !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\t\tdestElements = getAll( clone );\n\t\t\t\tsrcElements = getAll( elem );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Copy the events from the original to the clone\n\t\t\tif ( dataAndEvents ) {\n\t\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Preserve script evaluation history\n\t\t\tdestElements = getAll( clone, \"script\" );\n\t\t\tif ( destElements.length > 0 ) {\n\t\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t\t}\n\n\t\t\t// Return the cloned set\n\t\t\treturn clone;\n\t\t},\n\n\t\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\t\tvar elem, tmp, tag, wrap, contains, j,\n\t\t\t\ti = 0,\n\t\t\t\tl = elems.length,\n\t\t\t\tfragment = context.createDocumentFragment(),\n\t\t\t\tnodes = [];\n\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\telem = elems[ i ];\n\n\t\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t\t// Add nodes directly\n\t\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t// jQuery.merge because core_push.apply(_, arraylike) throws\n\t\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t\t\t// Convert non-html into a text node\n\t\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\t\ttag = ( rtagName.exec( elem ) || [\"\", \"\"] )[ 1 ].toLowerCase();\n\t\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\t\t\ttmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[ 2 ];\n\n\t\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\t\tj = wrap[ 0 ];\n\t\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t// jQuery.merge because core_push.apply(_, arraylike) throws\n\t\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t\t// Remember the top-level container\n\t\t\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t\t\t// Fixes #12346\n\t\t\t\t\t\t// Support: Webkit, IE\n\t\t\t\t\t\ttmp.textContent = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove wrapper from fragment\n\t\t\tfragment.textContent = \"\";\n\n\t\t\ti = 0;\n\t\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t\t// that element, do not do anything\n\t\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t\t// Append to fragment\n\t\t\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t\t\t// Preserve script evaluation history\n\t\t\t\tif ( contains ) {\n\t\t\t\t\tsetGlobalEval( tmp );\n\t\t\t\t}\n\n\t\t\t\t// Capture executables\n\t\t\t\tif ( scripts ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t},\n\n\t\tcleanData: function( elems ) {\n\t\t\tvar data, elem, events, type, key, j,\n\t\t\t\tspecial = jQuery.event.special,\n\t\t\t\ti = 0;\n\n\t\t\tfor ( ; (elem = elems[ i ]) !== undefined; i++ ) {\n\t\t\t\tif ( Data.accepts( elem ) ) {\n\t\t\t\t\tkey = elem[ data_priv.expando ];\n\n\t\t\t\t\tif ( key && (data = data_priv.cache[ key ]) ) {\n\t\t\t\t\t\tevents = Object.keys( data.events || {} );\n\t\t\t\t\t\tif ( events.length ) {\n\t\t\t\t\t\t\tfor ( j = 0; (type = events[j]) !== undefined; j++ ) {\n\t\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( data_priv.cache[ key ] ) {\n\t\t\t\t\t\t\t// Discard any remaining `private` data\n\t\t\t\t\t\t\tdelete data_priv.cache[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Discard any remaining `user` data\n\t\t\t\tdelete data_user.cache[ elem[ data_user.expando ] ];\n\t\t\t}\n\t\t},\n\n\t\t_evalUrl: function( url ) {\n\t\t\treturn jQuery.ajax({\n\t\t\t\turl: url,\n\t\t\t\ttype: \"GET\",\n\t\t\t\tdataType: \"script\",\n\t\t\t\tasync: false,\n\t\t\t\tglobal: false,\n\t\t\t\t\"throws\": true\n\t\t\t});\n\t\t}\n\t});\n\n// Support: 1.x compatibility\n// Manipulating tables requires a tbody\n\tfunction manipulationTarget( elem, content ) {\n\t\treturn jQuery.nodeName( elem, \"table\" ) &&\n\t\t\tjQuery.nodeName( content.nodeType === 1 ? content : content.firstChild, \"tr\" ) ?\n\n\t\t\telem.getElementsByTagName(\"tbody\")[0] ||\n\t\t\t\telem.appendChild( elem.ownerDocument.createElement(\"tbody\") ) :\n\t\t\telem;\n\t}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\n\tfunction disableScript( elem ) {\n\t\telem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\n\t\treturn elem;\n\t}\n\tfunction restoreScript( elem ) {\n\t\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\t\tif ( match ) {\n\t\t\telem.type = match[ 1 ];\n\t\t} else {\n\t\t\telem.removeAttribute(\"type\");\n\t\t}\n\n\t\treturn elem;\n\t}\n\n// Mark scripts as having already been evaluated\n\tfunction setGlobalEval( elems, refElements ) {\n\t\tvar l = elems.length,\n\t\t\ti = 0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tdata_priv.set(\n\t\t\t\telems[ i ], \"globalEval\", !refElements || data_priv.get( refElements[ i ], \"globalEval\" )\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction cloneCopyEvent( src, dest ) {\n\t\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\t\tif ( dest.nodeType !== 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 1. Copy private data: events, handlers, etc.\n\t\tif ( data_priv.hasData( src ) ) {\n\t\t\tpdataOld = data_priv.access( src );\n\t\t\tpdataCur = data_priv.set( dest, pdataOld );\n\t\t\tevents = pdataOld.events;\n\n\t\t\tif ( events ) {\n\t\t\t\tdelete pdataCur.handle;\n\t\t\t\tpdataCur.events = {};\n\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 2. Copy user data\n\t\tif ( data_user.hasData( src ) ) {\n\t\t\tudataOld = data_user.access( src );\n\t\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\t\tdata_user.set( dest, udataCur );\n\t\t}\n\t}\n\n\n\tfunction getAll( context, tag ) {\n\t\tvar ret = context.getElementsByTagName ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\tcontext.querySelectorAll ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\t\t[];\n\n\t\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\t\tjQuery.merge( [ context ], ret ) :\n\t\t\tret;\n\t}\n\n// Support: IE >= 9\n\tfunction fixInput( src, dest ) {\n\t\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\t\tif ( nodeName === \"input\" && manipulation_rcheckableType.test( src.type ) ) {\n\t\t\tdest.checked = src.checked;\n\n\t\t\t// Fails to return the selected option to the default selected state when cloning options\n\t\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\t\tdest.defaultValue = src.defaultValue;\n\t\t}\n\t}\n\tjQuery.fn.extend({\n\t\twrapAll: function( html ) {\n\t\t\tvar wrap;\n\n\t\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\t\treturn this.each(function( i ) {\n\t\t\t\t\tjQuery( this ).wrapAll( html.call(this, i) );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( this[ 0 ] ) {\n\n\t\t\t\t// The elements to wrap the target around\n\t\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\twrap.map(function() {\n\t\t\t\t\tvar elem = this;\n\n\t\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn elem;\n\t\t\t\t}).append( this );\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\twrapInner: function( html ) {\n\t\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\t\treturn this.each(function( i ) {\n\t\t\t\t\tjQuery( this ).wrapInner( html.call(this, i) );\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\tvar self = jQuery( this ),\n\t\t\t\t\tcontents = self.contents();\n\n\t\t\t\tif ( contents.length ) {\n\t\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t\t} else {\n\t\t\t\t\tself.append( html );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\twrap: function( html ) {\n\t\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t\t});\n\t\t},\n\n\t\tunwrap: function() {\n\t\t\treturn this.parent().each(function() {\n\t\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t\t}\n\t\t\t}).end();\n\t\t}\n\t});\n\tvar curCSS, iframe,\n\t// swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\t\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\t\trmargin = /^margin/,\n\t\trnumsplit = new RegExp( \"^(\" + core_pnum + \")(.*)$\", \"i\" ),\n\t\trnumnonpx = new RegExp( \"^(\" + core_pnum + \")(?!px)[a-z%]+$\", \"i\" ),\n\t\trrelNum = new RegExp( \"^([+-])=(\" + core_pnum + \")\", \"i\" ),\n\t\telemdisplay = { BODY: \"block\" },\n\n\t\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\t\tcssNormalTransform = {\n\t\t\tletterSpacing: 0,\n\t\t\tfontWeight: 400\n\t\t},\n\n\t\tcssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ],\n\t\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// return a css property mapped to a potentially vendor prefixed property\n\tfunction vendorPropName( style, name ) {\n\n\t\t// shortcut for names that are not vendor prefixed\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\n\t\t// check for vendor prefixed names\n\t\tvar capName = name.charAt(0).toUpperCase() + name.slice(1),\n\t\t\torigName = name,\n\t\t\ti = cssPrefixes.length;\n\n\t\twhile ( i-- ) {\n\t\t\tname = cssPrefixes[ i ] + capName;\n\t\t\tif ( name in style ) {\n\t\t\t\treturn name;\n\t\t\t}\n\t\t}\n\n\t\treturn origName;\n\t}\n\n\tfunction isHidden( elem, el ) {\n\t\t// isHidden might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n\t}\n\n// NOTE: we've included the \"window\" in window.getComputedStyle\n// because jsdom on node.js will break without it.\n\tfunction getStyles( elem ) {\n\t\treturn window.getComputedStyle( elem, null );\n\t}\n\n\tfunction showHide( elements, show ) {\n\t\tvar display, elem, hidden,\n\t\t\tvalues = [],\n\t\t\tindex = 0,\n\t\t\tlength = elements.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\telem = elements[ index ];\n\t\t\tif ( !elem.style ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvalues[ index ] = data_priv.get( elem, \"olddisplay\" );\n\t\t\tdisplay = elem.style.display;\n\t\t\tif ( show ) {\n\t\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t\t// being hidden by cascaded rules or not\n\t\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\n\t\t\t\t// Set elements which have been overridden with display: none\n\t\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t\t// for such an element\n\t\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\t\tvalues[ index ] = data_priv.access( elem, \"olddisplay\", css_defaultDisplay(elem.nodeName) );\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\thidden = isHidden( elem );\n\n\t\t\t\t\tif ( display && display !== \"none\" || !hidden ) {\n\t\t\t\t\t\tdata_priv.set( elem, \"olddisplay\", hidden ? display : jQuery.css(elem, \"display\") );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the display of most of the elements in a second loop\n\t\t// to avoid the constant reflow\n\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\telem = elements[ index ];\n\t\t\tif ( !elem.style ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t\t}\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\tjQuery.fn.extend({\n\t\tcss: function( name, value ) {\n\t\t\treturn jQuery.access( this, function( elem, name, value ) {\n\t\t\t\tvar styles, len,\n\t\t\t\t\tmap = {},\n\t\t\t\t\ti = 0;\n\n\t\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\t\tstyles = getStyles( elem );\n\t\t\t\t\tlen = name.length;\n\n\t\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn map;\n\t\t\t\t}\n\n\t\t\t\treturn value !== undefined ?\n\t\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\t\tjQuery.css( elem, name );\n\t\t\t}, name, value, arguments.length > 1 );\n\t\t},\n\t\tshow: function() {\n\t\t\treturn showHide( this, true );\n\t\t},\n\t\thide: function() {\n\t\t\treturn showHide( this );\n\t\t},\n\t\ttoggle: function( state ) {\n\t\t\tif ( typeof state === \"boolean\" ) {\n\t\t\t\treturn state ? this.show() : this.hide();\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( isHidden( this ) ) {\n\t\t\t\t\tjQuery( this ).show();\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( this ).hide();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tjQuery.extend({\n\t\t// Add in style property hooks for overriding the default\n\t\t// behavior of getting and setting a style property\n\t\tcssHooks: {\n\t\t\topacity: {\n\t\t\t\tget: function( elem, computed ) {\n\t\t\t\t\tif ( computed ) {\n\t\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Don't automatically add \"px\" to these possibly-unitless properties\n\t\tcssNumber: {\n\t\t\t\"columnCount\": true,\n\t\t\t\"fillOpacity\": true,\n\t\t\t\"fontWeight\": true,\n\t\t\t\"lineHeight\": true,\n\t\t\t\"opacity\": true,\n\t\t\t\"order\": true,\n\t\t\t\"orphans\": true,\n\t\t\t\"widows\": true,\n\t\t\t\"zIndex\": true,\n\t\t\t\"zoom\": true\n\t\t},\n\n\t\t// Add in properties whose names you wish to fix before\n\t\t// setting or getting the value\n\t\tcssProps: {\n\t\t\t// normalize float css property\n\t\t\t\"float\": \"cssFloat\"\n\t\t},\n\n\t\t// Get and set the style property on a DOM Node\n\t\tstyle: function( elem, name, value, extra ) {\n\t\t\t// Don't set styles on text and comment nodes\n\t\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure that we're working with the right name\n\t\t\tvar ret, type, hooks,\n\t\t\t\torigName = jQuery.camelCase( name ),\n\t\t\t\tstyle = elem.style;\n\n\t\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t\t// gets hook for the prefixed version\n\t\t\t// followed by the unprefixed version\n\t\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t\t// Check if we're setting a value\n\t\t\tif ( value !== undefined ) {\n\t\t\t\ttype = typeof value;\n\n\t\t\t\t// convert relative number strings (+= or -=) to relative numbers. #7345\n\t\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t\t// Fixes bug #9237\n\t\t\t\t\ttype = \"number\";\n\t\t\t\t}\n\n\t\t\t\t// Make sure that NaN and null values aren't set. See: #7116\n\t\t\t\tif ( value == null || type === \"number\" && isNaN( value ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If a number was passed in, add 'px' to the (except for certain CSS properties)\n\t\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\t\tvalue += \"px\";\n\t\t\t\t}\n\n\t\t\t\t// Fixes #8908, it can be done more correctly by specifying setters in cssHooks,\n\t\t\t\t// but it would mean to define eight (for every problematic property) identical functions\n\t\t\t\tif ( !jQuery.support.clearCloneStyle && value === \"\" && name.indexOf(\"background\") === 0 ) {\n\t\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t\t}\n\n\t\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\t// Otherwise just get the value from the style object\n\t\t\t\treturn style[ name ];\n\t\t\t}\n\t\t},\n\n\t\tcss: function( elem, name, extra, styles ) {\n\t\t\tvar val, num, hooks,\n\t\t\t\torigName = jQuery.camelCase( name );\n\n\t\t\t// Make sure that we're working with the right name\n\t\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t\t// gets hook for the prefixed version\n\t\t\t// followed by the unprefixed version\n\t\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t\t// If a hook was provided get the computed value from there\n\t\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\t\tval = hooks.get( elem, true, extra );\n\t\t\t}\n\n\t\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\t\tif ( val === undefined ) {\n\t\t\t\tval = curCSS( elem, name, styles );\n\t\t\t}\n\n\t\t\t//convert \"normal\" to computed value\n\t\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\t\tval = cssNormalTransform[ name ];\n\t\t\t}\n\n\t\t\t// Return, converting to number if forced or a qualifier was provided and val looks numeric\n\t\t\tif ( extra === \"\" || extra ) {\n\t\t\t\tnum = parseFloat( val );\n\t\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t\t}\n\t\t\treturn val;\n\t\t}\n\t});\n\n\tcurCSS = function( elem, name, _computed ) {\n\t\tvar width, minWidth, maxWidth,\n\t\t\tcomputed = _computed || getStyles( elem ),\n\n\t\t// Support: IE9\n\t\t// getPropertyValue is only needed for .css('filter') in IE9, see #12537\n\t\t\tret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,\n\t\t\tstyle = elem.style;\n\n\t\tif ( computed ) {\n\n\t\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\tret = jQuery.style( elem, name );\n\t\t\t}\n\n\t\t\t// Support: Safari 5.1\n\t\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t\t// Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t\t// Remember the original values\n\t\t\t\twidth = style.width;\n\t\t\t\tminWidth = style.minWidth;\n\t\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t\t// Put in the new values to get a computed value out\n\t\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\t\tret = computed.width;\n\n\t\t\t\t// Revert the changed values\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.minWidth = minWidth;\n\t\t\t\tstyle.maxWidth = maxWidth;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n\n\n\tfunction setPositiveNumber( elem, value, subtract ) {\n\t\tvar matches = rnumsplit.exec( value );\n\t\treturn matches ?\n\t\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\t\tvalue;\n\t}\n\n\tfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\t\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t\t\t// If we already have the right measurement, avoid augmentation\n\t\t\t\t4 :\n\t\t\t\t// Otherwise initialize for horizontal or vertical properties\n\t\t\t\tname === \"width\" ? 1 : 0,\n\n\t\t\tval = 0;\n\n\t\tfor ( ; i < 4; i += 2 ) {\n\t\t\t// both box models exclude margin, so add it if we want it\n\t\t\tif ( extra === \"margin\" ) {\n\t\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\tif ( isBorderBox ) {\n\t\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\t\tif ( extra === \"content\" ) {\n\t\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t\t}\n\n\t\t\t\t// at this point, extra isn't border nor margin, so remove border\n\t\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// at this point, extra isn't content, so add padding\n\t\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t\t// at this point, extra isn't content nor padding, so add border\n\t\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn val;\n\t}\n\n\tfunction getWidthOrHeight( elem, name, extra ) {\n\n\t\t// Start with offset property, which is equivalent to the border-box value\n\t\tvar valueIsBorderBox = true,\n\t\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\t\tstyles = getStyles( elem ),\n\t\t\tisBorderBox = jQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t\t// some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\t\tif ( val <= 0 || val == null ) {\n\t\t\t// Fall back to computed then uncomputed css if necessary\n\t\t\tval = curCSS( elem, name, styles );\n\t\t\tif ( val < 0 || val == null ) {\n\t\t\t\tval = elem.style[ name ];\n\t\t\t}\n\n\t\t\t// Computed unit is not pixels. Stop here and return.\n\t\t\tif ( rnumnonpx.test(val) ) {\n\t\t\t\treturn val;\n\t\t\t}\n\n\t\t\t// we need the check for style in case a browser which returns unreliable values\n\t\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\t\tvalueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );\n\n\t\t\t// Normalize \"\", auto, and prepare for extra\n\t\t\tval = parseFloat( val ) || 0;\n\t\t}\n\n\t\t// use the active box-sizing model to add/subtract irrelevant styles\n\t\treturn ( val +\n\t\t\taugmentWidthOrHeight(\n\t\t\t\telem,\n\t\t\t\tname,\n\t\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\t\tvalueIsBorderBox,\n\t\t\t\tstyles\n\t\t\t)\n\t\t\t) + \"px\";\n\t}\n\n// Try to determine the default display value of an element\n\tfunction css_defaultDisplay( nodeName ) {\n\t\tvar doc = document,\n\t\t\tdisplay = elemdisplay[ nodeName ];\n\n\t\tif ( !display ) {\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t\t// If the simple way fails, read from inside an iframe\n\t\t\tif ( display === \"none\" || !display ) {\n\t\t\t\t// Use the already-created iframe if possible\n\t\t\t\tiframe = ( iframe ||\n\t\t\t\t\tjQuery(\"<iframe frameborder='0' width='0' height='0'/>\")\n\t\t\t\t\t\t.css( \"cssText\", \"display:block !important\" )\n\t\t\t\t\t).appendTo( doc.documentElement );\n\n\t\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\t\tdoc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;\n\t\t\t\tdoc.write(\"<!doctype html><html><body>\");\n\t\t\t\tdoc.close();\n\n\t\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\t\tiframe.detach();\n\t\t\t}\n\n\t\t\t// Store the correct default display\n\t\t\telemdisplay[ nodeName ] = display;\n\t\t}\n\n\t\treturn display;\n\t}\n\n// Called ONLY from within css_defaultDisplay\n\tfunction actualDisplay( name, doc ) {\n\t\tvar elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\t\t\tdisplay = jQuery.css( elem[0], \"display\" );\n\t\telem.remove();\n\t\treturn display;\n\t}\n\n\tjQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\t\tjQuery.cssHooks[ name ] = {\n\t\t\tget: function( elem, computed, extra ) {\n\t\t\t\tif ( computed ) {\n\t\t\t\t\t// certain elements can have dimension info if we invisibly show them\n\t\t\t\t\t// however, it must have a current display style that would benefit from this\n\t\t\t\t\treturn elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, \"display\" ) ) ?\n\t\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tset: function( elem, value, extra ) {\n\t\t\t\tvar styles = extra && getStyles( elem );\n\t\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\t\telem,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tjQuery.support.boxSizing && jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\t\tstyles\n\t\t\t\t\t) : 0\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t});\n\n// These hooks cannot be added until DOM ready because the support test\n// for it is not run until after DOM ready\n\tjQuery(function() {\n\t\t// Support: Android 2.3\n\t\tif ( !jQuery.support.reliableMarginRight ) {\n\t\t\tjQuery.cssHooks.marginRight = {\n\t\t\t\tget: function( elem, computed ) {\n\t\t\t\t\tif ( computed ) {\n\t\t\t\t\t\t// Support: Android 2.3\n\t\t\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t\t\t// Work around by temporarily setting element display to inline-block\n\t\t\t\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n\t\t// getComputedStyle returns percent when specified for top/left/bottom/right\n\t\t// rather than make the css module depend on the offset module, we just check for it here\n\t\tif ( !jQuery.support.pixelPosition && jQuery.fn.position ) {\n\t\t\tjQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\t\t\t\tjQuery.cssHooks[ prop ] = {\n\t\t\t\t\tget: function( elem, computed ) {\n\t\t\t\t\t\tif ( computed ) {\n\t\t\t\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t\t\t\t// if curCSS returns percentage, fallback to offset\n\t\t\t\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\t\t\t\tcomputed;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t});\n\n\tif ( jQuery.expr && jQuery.expr.filters ) {\n\t\tjQuery.expr.filters.hidden = function( elem ) {\n\t\t\t// Support: Opera <= 12.12\n\t\t\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\t\t\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;\n\t\t};\n\n\t\tjQuery.expr.filters.visible = function( elem ) {\n\t\t\treturn !jQuery.expr.filters.hidden( elem );\n\t\t};\n\t}\n\n// These hooks are used by animate to expand properties\n\tjQuery.each({\n\t\tmargin: \"\",\n\t\tpadding: \"\",\n\t\tborder: \"Width\"\n\t}, function( prefix, suffix ) {\n\t\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\t\texpand: function( value ) {\n\t\t\t\tvar i = 0,\n\t\t\t\t\texpanded = {},\n\n\t\t\t\t// assumes a single number if not a string\n\t\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t\t}\n\n\t\t\t\treturn expanded;\n\t\t\t}\n\t\t};\n\n\t\tif ( !rmargin.test( prefix ) ) {\n\t\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t\t}\n\t});\n\tvar r20 = /%20/g,\n\t\trbracket = /\\[\\]$/,\n\t\trCRLF = /\\r?\\n/g,\n\t\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\t\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\n\tjQuery.fn.extend({\n\t\tserialize: function() {\n\t\t\treturn jQuery.param( this.serializeArray() );\n\t\t},\n\t\tserializeArray: function() {\n\t\t\treturn this.map(function(){\n\t\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t\t})\n\t\t\t\t.filter(function(){\n\t\t\t\t\tvar type = this.type;\n\t\t\t\t\t// Use .is(\":disabled\") so that fieldset[disabled] works\n\t\t\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t\t\t( this.checked || !manipulation_rcheckableType.test( type ) );\n\t\t\t\t})\n\t\t\t\t.map(function( i, elem ){\n\t\t\t\t\tvar val = jQuery( this ).val();\n\n\t\t\t\t\treturn val == null ?\n\t\t\t\t\t\tnull :\n\t\t\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\t\t\tjQuery.map( val, function( val ){\n\t\t\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t}).get();\n\t\t}\n\t});\n\n//Serialize an array of form elements or a set of\n//key/values into a query string\n\tjQuery.param = function( a, traditional ) {\n\t\tvar prefix,\n\t\t\ts = [],\n\t\t\tadd = function( key, value ) {\n\t\t\t\t// If value is a function, invoke it and return its value\n\t\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t\t};\n\n\t\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\t\tif ( traditional === undefined ) {\n\t\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t\t}\n\n\t\t// If an array was passed in, assume that it is an array of form elements.\n\t\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t\t// Serialize the form elements\n\t\t\tjQuery.each( a, function() {\n\t\t\t\tadd( this.name, this.value );\n\t\t\t});\n\n\t\t} else {\n\t\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t\t// did it), otherwise encode params recursively.\n\t\t\tfor ( prefix in a ) {\n\t\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t\t}\n\t\t}\n\n\t\t// Return the resulting serialization\n\t\treturn s.join( \"&\" ).replace( r20, \"+\" );\n\t};\n\n\tfunction buildParams( prefix, obj, traditional, add ) {\n\t\tvar name;\n\n\t\tif ( jQuery.isArray( obj ) ) {\n\t\t\t// Serialize array item.\n\t\t\tjQuery.each( obj, function( i, v ) {\n\t\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\t\tadd( prefix, v );\n\n\t\t\t\t} else {\n\t\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t\t// Serialize object item.\n\t\t\tfor ( name in obj ) {\n\t\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t\t}\n\n\t\t} else {\n\t\t\t// Serialize scalar item.\n\t\t\tadd( prefix, obj );\n\t\t}\n\t}\n\tjQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t\t// Handle event binding\n\t\tjQuery.fn[ name ] = function( data, fn ) {\n\t\t\treturn arguments.length > 0 ?\n\t\t\t\tthis.on( name, null, data, fn ) :\n\t\t\t\tthis.trigger( name );\n\t\t};\n\t});\n\n\tjQuery.fn.extend({\n\t\thover: function( fnOver, fnOut ) {\n\t\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t\t},\n\n\t\tbind: function( types, data, fn ) {\n\t\t\treturn this.on( types, null, data, fn );\n\t\t},\n\t\tunbind: function( types, fn ) {\n\t\t\treturn this.off( types, null, fn );\n\t\t},\n\n\t\tdelegate: function( selector, types, data, fn ) {\n\t\t\treturn this.on( types, selector, data, fn );\n\t\t},\n\t\tundelegate: function( selector, types, fn ) {\n\t\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t\t}\n\t});\n\tvar\n\t// Document location\n\t\tajaxLocParts,\n\t\tajaxLocation,\n\n\t\tajax_nonce = jQuery.now(),\n\n\t\tajax_rquery = /\\?/,\n\t\trhash = /#.*$/,\n\t\trts = /([?&])_=[^&]*/,\n\t\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\t// #7653, #8125, #8152: local protocol detection\n\t\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\t\trnoContent = /^(?:GET|HEAD)$/,\n\t\trprotocol = /^\\/\\//,\n\t\trurl = /^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t// Keep a copy of the old load method\n\t\t_load = jQuery.fn.load,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\t\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\t\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\t\tallTypes = \"*/\".concat(\"*\");\n\n// #8138, IE may throw an exception when accessing\n// a field from window.location if document.domain has been set\n\ttry {\n\t\tajaxLocation = location.href;\n\t} catch( e ) {\n\t\t// Use the href attribute of an A element\n\t\t// since IE will modify it given document.location\n\t\tajaxLocation = document.createElement( \"a\" );\n\t\tajaxLocation.href = \"\";\n\t\tajaxLocation = ajaxLocation.href;\n\t}\n\n// Segment location into parts\n\tajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\n\tfunction addToPrefiltersOrTransports( structure ) {\n\n\t\t// dataTypeExpression is optional and defaults to \"*\"\n\t\treturn function( dataTypeExpression, func ) {\n\n\t\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\t\tfunc = dataTypeExpression;\n\t\t\t\tdataTypeExpression = \"*\";\n\t\t\t}\n\n\t\t\tvar dataType,\n\t\t\t\ti = 0,\n\t\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];\n\n\t\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t\t// For each dataType in the dataTypeExpression\n\t\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t\t// Prepend if requested\n\t\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t\t\t// Otherwise append\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n// Base inspection function for prefilters and transports\n\tfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\t\tvar inspected = {},\n\t\t\tseekingTransport = ( structure === transports );\n\n\t\tfunction inspect( dataType ) {\n\t\t\tvar selected;\n\t\t\tinspected[ dataType ] = true;\n\t\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\t\tif( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\t\treturn false;\n\t\t\t\t} else if ( seekingTransport ) {\n\t\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn selected;\n\t\t}\n\n\t\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n\t}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\n\tfunction ajaxExtend( target, src ) {\n\t\tvar key, deep,\n\t\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\t\tfor ( key in src ) {\n\t\t\tif ( src[ key ] !== undefined ) {\n\t\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t\t}\n\t\t}\n\t\tif ( deep ) {\n\t\t\tjQuery.extend( true, target, deep );\n\t\t}\n\n\t\treturn target;\n\t}\n\n\tjQuery.fn.load = function( url, params, callback ) {\n\t\tif ( typeof url !== \"string\" && _load ) {\n\t\t\treturn _load.apply( this, arguments );\n\t\t}\n\n\t\tvar selector, type, response,\n\t\t\tself = this,\n\t\t\toff = url.indexOf(\" \");\n\n\t\tif ( off >= 0 ) {\n\t\t\tselector = url.slice( off );\n\t\t\turl = url.slice( 0, off );\n\t\t}\n\n\t\t// If it's a function\n\t\tif ( jQuery.isFunction( params ) ) {\n\n\t\t\t// We assume that it's the callback\n\t\t\tcallback = params;\n\t\t\tparams = undefined;\n\n\t\t\t// Otherwise, build a param string\n\t\t} else if ( params && typeof params === \"object\" ) {\n\t\t\ttype = \"POST\";\n\t\t}\n\n\t\t// If we have elements to modify, make the request\n\t\tif ( self.length > 0 ) {\n\t\t\tjQuery.ajax({\n\t\t\t\turl: url,\n\n\t\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\t\ttype: type,\n\t\t\t\tdataType: \"html\",\n\t\t\t\tdata: params\n\t\t\t}).done(function( responseText ) {\n\n\t\t\t\t\t// Save response for use in complete callback\n\t\t\t\t\tresponse = arguments;\n\n\t\t\t\t\tself.html( selector ?\n\n\t\t\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t\t\t// Otherwise use the full result\n\t\t\t\t\t\tresponseText );\n\n\t\t\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t};\n\n// Attach a bunch of functions for handling common AJAX events\n\tjQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ){\n\t\tjQuery.fn[ type ] = function( fn ){\n\t\t\treturn this.on( type, fn );\n\t\t};\n\t});\n\n\tjQuery.extend({\n\n\t\t// Counter for holding the number of active queries\n\t\tactive: 0,\n\n\t\t// Last-Modified header cache for next request\n\t\tlastModified: {},\n\t\tetag: {},\n\n\t\tajaxSettings: {\n\t\t\turl: ajaxLocation,\n\t\t\ttype: \"GET\",\n\t\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\t\tglobal: true,\n\t\t\tprocessData: true,\n\t\t\tasync: true,\n\t\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t\t/*\n\t\t\t timeout: 0,\n\t\t\t data: null,\n\t\t\t dataType: null,\n\t\t\t username: null,\n\t\t\t password: null,\n\t\t\t cache: null,\n\t\t\t throws: false,\n\t\t\t traditional: false,\n\t\t\t headers: {},\n\t\t\t */\n\n\t\t\taccepts: {\n\t\t\t\t\"*\": allTypes,\n\t\t\t\ttext: \"text/plain\",\n\t\t\t\thtml: \"text/html\",\n\t\t\t\txml: \"application/xml, text/xml\",\n\t\t\t\tjson: \"application/json, text/javascript\"\n\t\t\t},\n\n\t\t\tcontents: {\n\t\t\t\txml: /xml/,\n\t\t\t\thtml: /html/,\n\t\t\t\tjson: /json/\n\t\t\t},\n\n\t\t\tresponseFields: {\n\t\t\t\txml: \"responseXML\",\n\t\t\t\ttext: \"responseText\",\n\t\t\t\tjson: \"responseJSON\"\n\t\t\t},\n\n\t\t\t// Data converters\n\t\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\t\tconverters: {\n\n\t\t\t\t// Convert anything to text\n\t\t\t\t\"* text\": String,\n\n\t\t\t\t// Text to html (true = no transformation)\n\t\t\t\t\"text html\": true,\n\n\t\t\t\t// Evaluate text as a json expression\n\t\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t\t// Parse text as xml\n\t\t\t\t\"text xml\": jQuery.parseXML\n\t\t\t},\n\n\t\t\t// For options that shouldn't be deep extended:\n\t\t\t// you can add your own custom options here if\n\t\t\t// and when you create one that shouldn't be\n\t\t\t// deep extended (see ajaxExtend)\n\t\t\tflatOptions: {\n\t\t\t\turl: true,\n\t\t\t\tcontext: true\n\t\t\t}\n\t\t},\n\n\t\t// Creates a full fledged settings object into target\n\t\t// with both ajaxSettings and settings fields.\n\t\t// If target is omitted, writes into ajaxSettings.\n\t\tajaxSetup: function( target, settings ) {\n\t\t\treturn settings ?\n\n\t\t\t\t// Building a settings object\n\t\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t\t// Extending ajaxSettings\n\t\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t\t},\n\n\t\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\t\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t\t// Main method\n\t\tajax: function( url, options ) {\n\n\t\t\t// If url is an object, simulate pre-1.5 signature\n\t\t\tif ( typeof url === \"object\" ) {\n\t\t\t\toptions = url;\n\t\t\t\turl = undefined;\n\t\t\t}\n\n\t\t\t// Force options to be an object\n\t\t\toptions = options || {};\n\n\t\t\tvar transport,\n\t\t\t// URL without anti-cache param\n\t\t\t\tcacheURL,\n\t\t\t// Response headers\n\t\t\t\tresponseHeadersString,\n\t\t\t\tresponseHeaders,\n\t\t\t// timeout handle\n\t\t\t\ttimeoutTimer,\n\t\t\t// Cross-domain detection vars\n\t\t\t\tparts,\n\t\t\t// To know if global events are to be dispatched\n\t\t\t\tfireGlobals,\n\t\t\t// Loop variable\n\t\t\t\ti,\n\t\t\t// Create the final options object\n\t\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\t\tdeferred = jQuery.Deferred(),\n\t\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\t\trequestHeaders = {},\n\t\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\t\tjqXHR = {\n\t\t\t\t\treadyState: 0,\n\n\t\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\t\tvar match;\n\t\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t\t},\n\n\t\t\t\t\t// Raw string\n\t\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t\t},\n\n\t\t\t\t\t// Caches the header\n\t\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t},\n\n\t\t\t\t\t// Overrides response content-type header\n\t\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t},\n\n\t\t\t\t\t// Status-dependent callbacks\n\t\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\t\tvar code;\n\t\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t},\n\n\t\t\t\t\t// Cancel the request\n\t\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t// Attach deferreds\n\t\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\t\tjqXHR.success = jqXHR.done;\n\t\t\tjqXHR.error = jqXHR.fail;\n\n\t\t\t// Remove hash character (#7531: and string promotion)\n\t\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t\t// We also use the url parameter if available\n\t\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" )\n\t\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t\t// Alias method option to type as per ticket #12004\n\t\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t\t// Extract dataTypes list\n\t\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( core_rnotwhite ) || [\"\"];\n\n\t\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\t\tif ( s.crossDomain == null ) {\n\t\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\n\t\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert data if not already a string\n\t\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t\t}\n\n\t\t\t// Apply prefilters\n\t\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t\t// If request was aborted inside a prefilter, stop there\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// We can fire global events as of now if asked to\n\t\t\tfireGlobals = s.global;\n\n\t\t\t// Watch for a new set of requests\n\t\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t\t}\n\n\t\t\t// Uppercase the type\n\t\t\ts.type = s.type.toUpperCase();\n\n\t\t\t// Determine if request has content\n\t\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t\t// and/or If-None-Match header later on\n\t\t\tcacheURL = s.url;\n\n\t\t\t// More options handling for requests with no content\n\t\t\tif ( !s.hasContent ) {\n\n\t\t\t\t// If data is available, append data to url\n\t\t\t\tif ( s.data ) {\n\t\t\t\t\tcacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\t\tdelete s.data;\n\t\t\t\t}\n\n\t\t\t\t// Add anti-cache in url if needed\n\t\t\t\tif ( s.cache === false ) {\n\t\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + ajax_nonce++ ) :\n\n\t\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\t\tcacheURL + ( ajax_rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ajax_nonce++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\tif ( s.ifModified ) {\n\t\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t\t}\n\t\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set the correct header, if data is being sent\n\t\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t\t}\n\n\t\t\t// Set the Accepts header for the server, depending on the dataType\n\t\t\tjqXHR.setRequestHeader(\n\t\t\t\t\"Accept\",\n\t\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\t\ts.accepts[ \"*\" ]\n\t\t\t);\n\n\t\t\t// Check for headers option\n\t\t\tfor ( i in s.headers ) {\n\t\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t\t}\n\n\t\t\t// Allow custom headers/mimetypes and early abort\n\t\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t\t// Abort if not done already and return\n\t\t\t\treturn jqXHR.abort();\n\t\t\t}\n\n\t\t\t// aborting is no longer a cancellation\n\t\t\tstrAbort = \"abort\";\n\n\t\t\t// Install callbacks on deferreds\n\t\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t\t}\n\n\t\t\t// Get transport\n\t\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t\t// If no transport, we auto-abort\n\t\t\tif ( !transport ) {\n\t\t\t\tdone( -1, \"No Transport\" );\n\t\t\t} else {\n\t\t\t\tjqXHR.readyState = 1;\n\n\t\t\t\t// Send global event\n\t\t\t\tif ( fireGlobals ) {\n\t\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t\t}\n\t\t\t\t// Timeout\n\t\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t\t}, s.timeout );\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tstate = 1;\n\t\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Propagate exception as error if not done\n\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\tdone( -1, e );\n\t\t\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Callback for when everything is done\n\t\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t\t// Called once\n\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// State is \"done\" now\n\t\t\t\tstate = 2;\n\n\t\t\t\t// Clear timeout if it exists\n\t\t\t\tif ( timeoutTimer ) {\n\t\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t\t}\n\n\t\t\t\t// Dereference transport for early garbage collection\n\t\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\t\ttransport = undefined;\n\n\t\t\t\t// Cache response headers\n\t\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t\t// Set readyState\n\t\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t\t// Determine if successful\n\t\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t\t// Get response data\n\t\t\t\tif ( responses ) {\n\t\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t\t}\n\n\t\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t\t// If successful, handle type chaining\n\t\t\t\tif ( isSuccess ) {\n\n\t\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// if no content\n\t\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t\t\t// if not modified\n\t\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t\t\t// If we have data, let's convert it\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\t\terror = response.error;\n\t\t\t\t\t\tisSuccess = !error;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// We extract error from statusText\n\t\t\t\t\t// then normalize statusText and status for non-aborts\n\t\t\t\t\terror = statusText;\n\t\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Set data for the fake xhr object\n\t\t\t\tjqXHR.status = status;\n\t\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t\t// Success/Error\n\t\t\t\tif ( isSuccess ) {\n\t\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t\t}\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tjqXHR.statusCode( statusCode );\n\t\t\t\tstatusCode = undefined;\n\n\t\t\t\tif ( fireGlobals ) {\n\t\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t\t}\n\n\t\t\t\t// Complete\n\t\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\t\tif ( fireGlobals ) {\n\t\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t\t// Handle the global AJAX counter\n\t\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn jqXHR;\n\t\t},\n\n\t\tgetJSON: function( url, data, callback ) {\n\t\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t\t},\n\n\t\tgetScript: function( url, callback ) {\n\t\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t\t}\n\t});\n\n\tjQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\t\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t\t// shift arguments if data argument was omitted\n\t\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\t\ttype = type || callback;\n\t\t\t\tcallback = data;\n\t\t\t\tdata = undefined;\n\t\t\t}\n\n\t\t\treturn jQuery.ajax({\n\t\t\t\turl: url,\n\t\t\t\ttype: method,\n\t\t\t\tdataType: type,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: callback\n\t\t\t});\n\t\t};\n\t});\n\n\t/* Handles responses to an ajax request:\n\t * - finds the right dataType (mediates between content-type and expected dataType)\n\t * - returns the corresponding response\n\t */\n\tfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\t\tvar ct, type, finalDataType, firstDataType,\n\t\t\tcontents = s.contents,\n\t\t\tdataTypes = s.dataTypes;\n\n\t\t// Remove auto dataType and get content-type in the process\n\t\twhile( dataTypes[ 0 ] === \"*\" ) {\n\t\t\tdataTypes.shift();\n\t\t\tif ( ct === undefined ) {\n\t\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t\t}\n\t\t}\n\n\t\t// Check if we're dealing with a known content-type\n\t\tif ( ct ) {\n\t\t\tfor ( type in contents ) {\n\t\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\t\tdataTypes.unshift( type );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check to see if we have a response for the expected dataType\n\t\tif ( dataTypes[ 0 ] in responses ) {\n\t\t\tfinalDataType = dataTypes[ 0 ];\n\t\t} else {\n\t\t\t// Try convertible dataTypes\n\t\t\tfor ( type in responses ) {\n\t\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\t\tfinalDataType = type;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif ( !firstDataType ) {\n\t\t\t\t\tfirstDataType = type;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Or just use first one\n\t\t\tfinalDataType = finalDataType || firstDataType;\n\t\t}\n\n\t\t// If we found a dataType\n\t\t// We add the dataType to the list if needed\n\t\t// and return the corresponding response\n\t\tif ( finalDataType ) {\n\t\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\t\tdataTypes.unshift( finalDataType );\n\t\t\t}\n\t\t\treturn responses[ finalDataType ];\n\t\t}\n\t}\n\n\t/* Chain conversions given the request and the original response\n\t * Also sets the responseXXX fields on the jqXHR instance\n\t */\n\tfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\t\tvar conv2, current, conv, tmp, prev,\n\t\t\tconverters = {},\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\t\tdataTypes = s.dataTypes.slice();\n\n\t\t// Create converters map with lowercased keys\n\t\tif ( dataTypes[ 1 ] ) {\n\t\t\tfor ( conv in s.converters ) {\n\t\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t\t}\n\t\t}\n\n\t\tcurrent = dataTypes.shift();\n\n\t\t// Convert to each sequential dataType\n\t\twhile ( current ) {\n\n\t\t\tif ( s.responseFields[ current ] ) {\n\t\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t\t}\n\n\t\t\t// Apply the dataFilter if provided\n\t\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t\tcurrent = dataTypes.shift();\n\n\t\t\tif ( current ) {\n\n\t\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\t\tcurrent = prev;\n\n\t\t\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t\t// Seek a direct converter\n\t\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t\t// If none found, seek a pair\n\t\t\t\t\tif ( !conv ) {\n\t\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\t\tif ( conv && s[ \"throws\" ] ) {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { state: \"success\", data: response };\n\t}\n// Install script dataType\n\tjQuery.ajaxSetup({\n\t\taccepts: {\n\t\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t\t},\n\t\tcontents: {\n\t\t\tscript: /(?:java|ecma)script/\n\t\t},\n\t\tconverters: {\n\t\t\t\"text script\": function( text ) {\n\t\t\t\tjQuery.globalEval( text );\n\t\t\t\treturn text;\n\t\t\t}\n\t\t}\n\t});\n\n// Handle cache's special case and crossDomain\n\tjQuery.ajaxPrefilter( \"script\", function( s ) {\n\t\tif ( s.cache === undefined ) {\n\t\t\ts.cache = false;\n\t\t}\n\t\tif ( s.crossDomain ) {\n\t\t\ts.type = \"GET\";\n\t\t}\n\t});\n\n// Bind script tag hack transport\n\tjQuery.ajaxTransport( \"script\", function( s ) {\n\t\t// This transport only deals with cross domain requests\n\t\tif ( s.crossDomain ) {\n\t\t\tvar script, callback;\n\t\t\treturn {\n\t\t\t\tsend: function( _, complete ) {\n\t\t\t\t\tscript = jQuery(\"<script>\").prop({\n\t\t\t\t\t\tasync: true,\n\t\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\t\tsrc: s.url\n\t\t\t\t\t}).on(\n\t\t\t\t\t\t\t\"load error\",\n\t\t\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t\t},\n\t\t\t\tabort: function() {\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\tvar oldCallbacks = [],\n\t\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\n\tjQuery.ajaxSetup({\n\t\tjsonp: \"callback\",\n\t\tjsonpCallback: function() {\n\t\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( ajax_nonce++ ) );\n\t\t\tthis[ callback ] = true;\n\t\t\treturn callback;\n\t\t}\n\t});\n\n// Detect, normalize options and install callbacks for jsonp requests\n\tjQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\t\tvar callbackName, overwritten, responseContainer,\n\t\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\t\"url\" :\n\t\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t\t\t);\n\n\t\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\t\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t\t// Get callback name, remembering preexisting value associated with it\n\t\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\t\ts.jsonpCallback() :\n\t\t\t\ts.jsonpCallback;\n\n\t\t\t// Insert callback into url or form data\n\t\t\tif ( jsonProp ) {\n\t\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t\t} else if ( s.jsonp !== false ) {\n\t\t\t\ts.url += ( ajax_rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t\t}\n\n\t\t\t// Use data converter to retrieve json after script execution\n\t\t\ts.converters[\"script json\"] = function() {\n\t\t\t\tif ( !responseContainer ) {\n\t\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t\t}\n\t\t\t\treturn responseContainer[ 0 ];\n\t\t\t};\n\n\t\t\t// force json dataType\n\t\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t\t// Install callback\n\t\t\toverwritten = window[ callbackName ];\n\t\t\twindow[ callbackName ] = function() {\n\t\t\t\tresponseContainer = arguments;\n\t\t\t};\n\n\t\t\t// Clean-up function (fires after converters)\n\t\t\tjqXHR.always(function() {\n\t\t\t\t// Restore preexisting value\n\t\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t\t// Save back as free\n\t\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t\t// save the callback name for future use\n\t\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t\t}\n\n\t\t\t\t// Call if it was a function and we have a response\n\t\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\tresponseContainer = overwritten = undefined;\n\t\t\t});\n\n\t\t\t// Delegate to script\n\t\t\treturn \"script\";\n\t\t}\n\t});\n\tjQuery.ajaxSettings.xhr = function() {\n\t\ttry {\n\t\t\treturn new XMLHttpRequest();\n\t\t} catch( e ) {}\n\t};\n\n\tvar xhrSupported = jQuery.ajaxSettings.xhr(),\n\t\txhrSuccessStatus = {\n\t\t\t// file protocol always yields status code 0, assume 200\n\t\t\t0: 200,\n\t\t\t// Support: IE9\n\t\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t\t1223: 204\n\t\t},\n\t// Support: IE9\n\t// We need to keep track of outbound xhr and abort them manually\n\t// because IE is not smart enough to do it all by itself\n\t\txhrId = 0,\n\t\txhrCallbacks = {};\n\n\tif ( window.ActiveXObject ) {\n\t\tjQuery( window ).on( \"unload\", function() {\n\t\t\tfor( var key in xhrCallbacks ) {\n\t\t\t\txhrCallbacks[ key ]();\n\t\t\t}\n\t\t\txhrCallbacks = undefined;\n\t\t});\n\t}\n\n\tjQuery.support.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\n\tjQuery.support.ajax = xhrSupported = !!xhrSupported;\n\n\tjQuery.ajaxTransport(function( options ) {\n\t\tvar callback;\n\t\t// Cross domain only allowed if supported through XMLHttpRequest\n\t\tif ( jQuery.support.cors || xhrSupported && !options.crossDomain ) {\n\t\t\treturn {\n\t\t\t\tsend: function( headers, complete ) {\n\t\t\t\t\tvar i, id,\n\t\t\t\t\t\txhr = options.xhr();\n\t\t\t\t\txhr.open( options.type, options.url, options.async, options.username, options.password );\n\t\t\t\t\t// Apply custom fields if provided\n\t\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Override mime type if needed\n\t\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t\t}\n\t\t\t\t\t// X-Requested-With header\n\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\t\tif ( !options.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t\t}\n\t\t\t\t\t// Set headers\n\t\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\t// Callback\n\t\t\t\t\tcallback = function( type ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\n\t\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = null;\n\t\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\t\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t\t// file protocol always yields status 0, assume 404\n\t\t\t\t\t\t\t\t\t\txhr.status || 404,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText,\n\t\t\t\t\t\t\t\t\t\t// Support: IE9\n\t\t\t\t\t\t\t\t\t\t// #11426: When requesting binary data, IE9 will throw an exception\n\t\t\t\t\t\t\t\t\t\t// on any attempt to access responseText\n\t\t\t\t\t\t\t\t\t\ttypeof xhr.responseText === \"string\" ? {\n\t\t\t\t\t\t\t\t\t\t\ttext: xhr.responseText\n\t\t\t\t\t\t\t\t\t\t} : undefined,\n\t\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\t// Listen to events\n\t\t\t\t\txhr.onload = callback();\n\t\t\t\t\txhr.onerror = callback(\"error\");\n\t\t\t\t\t// Create the abort callback\n\t\t\t\t\tcallback = xhrCallbacks[( id = xhrId++ )] = callback(\"abort\");\n\t\t\t\t\t// Do send the request\n\t\t\t\t\t// This may raise an exception which is actually\n\t\t\t\t\t// handled in jQuery.ajax (so no try/catch here)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t},\n\t\t\t\tabort: function() {\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\tvar fxNow, timerId,\n\t\trfxtypes = /^(?:toggle|show|hide)$/,\n\t\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + core_pnum + \")([a-z%]*)$\", \"i\" ),\n\t\trrun = /queueHooks$/,\n\t\tanimationPrefilters = [ defaultPrefilter ],\n\t\ttweeners = {\n\t\t\t\"*\": [function( prop, value ) {\n\t\t\t\tvar tween = this.createTween( prop, value ),\n\t\t\t\t\ttarget = tween.cur(),\n\t\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\t\tunit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t\t\t// Starting value computation is required for potential unit mismatches\n\t\t\t\t\tstart = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +target ) &&\n\t\t\t\t\t\trfxnum.exec( jQuery.css( tween.elem, prop ) ),\n\t\t\t\t\tscale = 1,\n\t\t\t\t\tmaxIterations = 20;\n\n\t\t\t\tif ( start && start[ 3 ] !== unit ) {\n\t\t\t\t\t// Trust units reported by jQuery.css\n\t\t\t\t\tunit = unit || start[ 3 ];\n\n\t\t\t\t\t// Make sure we update the tween properties later on\n\t\t\t\t\tparts = parts || [];\n\n\t\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\t\tstart = +target || 1;\n\n\t\t\t\t\tdo {\n\t\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*\n\t\t\t\t\t\t// Use a string for doubling factor so we don't accidentally see scale as unchanged below\n\t\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t\t// Adjust and apply\n\t\t\t\t\t\tstart = start / scale;\n\t\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t\t\t\t\t// And breaking the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t\t}\n\n\t\t\t\t// Update tween properties\n\t\t\t\tif ( parts ) {\n\t\t\t\t\tstart = tween.start = +start || +target || 0;\n\t\t\t\t\ttween.unit = unit;\n\t\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\t\ttween.end = parts[ 1 ] ?\n\t\t\t\t\t\tstart + ( parts[ 1 ] + 1 ) * parts[ 2 ] :\n\t\t\t\t\t\t+parts[ 2 ];\n\t\t\t\t}\n\n\t\t\t\treturn tween;\n\t\t\t}]\n\t\t};\n\n// Animations created synchronously will run synchronously\n\tfunction createFxNow() {\n\t\tsetTimeout(function() {\n\t\t\tfxNow = undefined;\n\t\t});\n\t\treturn ( fxNow = jQuery.now() );\n\t}\n\n\tfunction createTween( value, prop, animation ) {\n\t\tvar tween,\n\t\t\tcollection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\t\tindex = 0,\n\t\t\tlength = collection.length;\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tif ( (tween = collection[ index ].call( animation, prop, value )) ) {\n\n\t\t\t\t// we're done with this property\n\t\t\t\treturn tween;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction Animation( elem, properties, options ) {\n\t\tvar result,\n\t\t\tstopped,\n\t\t\tindex = 0,\n\t\t\tlength = animationPrefilters.length,\n\t\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t\t// don't match elem in the :animated selector\n\t\t\t\tdelete tick.elem;\n\t\t\t}),\n\t\t\ttick = function() {\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)\n\t\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\t\tpercent = 1 - temp,\n\t\t\t\t\tindex = 0,\n\t\t\t\t\tlength = animation.tweens.length;\n\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t\t}\n\n\t\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\t\tif ( percent < 1 && length ) {\n\t\t\t\t\treturn remaining;\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimation = deferred.promise({\n\t\t\t\telem: elem,\n\t\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\t\toriginalProperties: properties,\n\t\t\t\toriginalOptions: options,\n\t\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\t\tduration: options.duration,\n\t\t\t\ttweens: [],\n\t\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\t\treturn tween;\n\t\t\t\t},\n\t\t\t\tstop: function( gotoEnd ) {\n\t\t\t\t\tvar index = 0,\n\t\t\t\t\t// if we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\t\tif ( stopped ) {\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t\tstopped = true;\n\t\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t\t}\n\n\t\t\t\t\t// resolve when we played the last frame\n\t\t\t\t\t// otherwise, reject\n\t\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t}),\n\t\t\tprops = animation.props;\n\n\t\tpropFilter( props, animation.opts.specialEasing );\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\t\tif ( result ) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\tjQuery.map( props, createTween, animation );\n\n\t\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\t\tanimation.opts.start.call( elem, animation );\n\t\t}\n\n\t\tjQuery.fx.timer(\n\t\t\tjQuery.extend( tick, {\n\t\t\t\telem: elem,\n\t\t\t\tanim: animation,\n\t\t\t\tqueue: animation.opts.queue\n\t\t\t})\n\t\t);\n\n\t\t// attach callbacks from options\n\t\treturn animation.progress( animation.opts.progress )\n\t\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t\t.fail( animation.opts.fail )\n\t\t\t.always( animation.opts.always );\n\t}\n\n\tfunction propFilter( props, specialEasing ) {\n\t\tvar index, name, easing, value, hooks;\n\n\t\t// camelCase, specialEasing and expand cssHook pass\n\t\tfor ( index in props ) {\n\t\t\tname = jQuery.camelCase( index );\n\t\t\teasing = specialEasing[ name ];\n\t\t\tvalue = props[ index ];\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\teasing = value[ 1 ];\n\t\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t\t}\n\n\t\t\tif ( index !== name ) {\n\t\t\t\tprops[ name ] = value;\n\t\t\t\tdelete props[ index ];\n\t\t\t}\n\n\t\t\thooks = jQuery.cssHooks[ name ];\n\t\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\t\tvalue = hooks.expand( value );\n\t\t\t\tdelete props[ name ];\n\n\t\t\t\t// not quite $.extend, this wont overwrite keys already present.\n\t\t\t\t// also - reusing 'index' from above because we have the correct \"name\"\n\t\t\t\tfor ( index in value ) {\n\t\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tspecialEasing[ name ] = easing;\n\t\t\t}\n\t\t}\n\t}\n\n\tjQuery.Animation = jQuery.extend( Animation, {\n\n\t\ttweener: function( props, callback ) {\n\t\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\t\tcallback = props;\n\t\t\t\tprops = [ \"*\" ];\n\t\t\t} else {\n\t\t\t\tprops = props.split(\" \");\n\t\t\t}\n\n\t\t\tvar prop,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = props.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tprop = props[ index ];\n\t\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\t\ttweeners[ prop ].unshift( callback );\n\t\t\t}\n\t\t},\n\n\t\tprefilter: function( callback, prepend ) {\n\t\t\tif ( prepend ) {\n\t\t\t\tanimationPrefilters.unshift( callback );\n\t\t\t} else {\n\t\t\t\tanimationPrefilters.push( callback );\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction defaultPrefilter( elem, props, opts ) {\n\t\t/* jshint validthis: true */\n\t\tvar prop, value, toggle, tween, hooks, oldfire,\n\t\t\tanim = this,\n\t\t\torig = {},\n\t\t\tstyle = elem.style,\n\t\t\thidden = elem.nodeType && isHidden( elem ),\n\t\t\tdataShow = data_priv.get( elem, \"fxshow\" );\n\n\t\t// handle queue: false promises\n\t\tif ( !opts.queue ) {\n\t\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\t\tif ( hooks.unqueued == null ) {\n\t\t\t\thooks.unqueued = 0;\n\t\t\t\toldfire = hooks.empty.fire;\n\t\t\t\thooks.empty.fire = function() {\n\t\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\t\toldfire();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\thooks.unqueued++;\n\n\t\t\tanim.always(function() {\n\t\t\t\t// doing this makes sure that the complete handler will be called\n\t\t\t\t// before this completes\n\t\t\t\tanim.always(function() {\n\t\t\t\t\thooks.unqueued--;\n\t\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\t\thooks.empty.fire();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// height/width overflow pass\n\t\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t\t// Make sure that nothing sneaks out\n\t\t\t// Record all 3 overflow attributes because IE9-10 do not\n\t\t\t// change the overflow attribute when overflowX and\n\t\t\t// overflowY are set to the same value\n\t\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t\t// Set display property to inline-block for height/width\n\t\t\t// animations on inline elements that are having width/height animated\n\t\t\tif ( jQuery.css( elem, \"display\" ) === \"inline\" &&\n\t\t\t\tjQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\n\t\tif ( opts.overflow ) {\n\t\t\tstyle.overflow = \"hidden\";\n\t\t\tanim.always(function() {\n\t\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t\t});\n\t\t}\n\n\n\t\t// show/hide pass\n\t\tfor ( prop in props ) {\n\t\t\tvalue = props[ prop ];\n\t\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\t\tdelete props[ prop ];\n\t\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t\t// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\n\t\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\t\thidden = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t\t}\n\t\t}\n\n\t\tif ( !jQuery.isEmptyObject( orig ) ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = data_priv.access( elem, \"fxshow\", {} );\n\t\t\t}\n\n\t\t\t// store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\t\t\tif ( hidden ) {\n\t\t\t\tjQuery( elem ).show();\n\t\t\t} else {\n\t\t\t\tanim.done(function() {\n\t\t\t\t\tjQuery( elem ).hide();\n\t\t\t\t});\n\t\t\t}\n\t\t\tanim.done(function() {\n\t\t\t\tvar prop;\n\n\t\t\t\tdata_priv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor ( prop in orig ) {\n\t\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\n\t\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\t\tif ( hidden ) {\n\t\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction Tween( elem, options, prop, end, easing ) {\n\t\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n\t}\n\tjQuery.Tween = Tween;\n\n\tTween.prototype = {\n\t\tconstructor: Tween,\n\t\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\t\tthis.elem = elem;\n\t\t\tthis.prop = prop;\n\t\t\tthis.easing = easing || \"swing\";\n\t\t\tthis.options = options;\n\t\t\tthis.start = this.now = this.cur();\n\t\t\tthis.end = end;\n\t\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t\t},\n\t\tcur: function() {\n\t\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\t\treturn hooks && hooks.get ?\n\t\t\t\thooks.get( this ) :\n\t\t\t\tTween.propHooks._default.get( this );\n\t\t},\n\t\trun: function( percent ) {\n\t\t\tvar eased,\n\t\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\t\tif ( this.options.duration ) {\n\t\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.pos = eased = percent;\n\t\t\t}\n\t\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\t\tif ( this.options.step ) {\n\t\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t\t}\n\n\t\t\tif ( hooks && hooks.set ) {\n\t\t\t\thooks.set( this );\n\t\t\t} else {\n\t\t\t\tTween.propHooks._default.set( this );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t};\n\n\tTween.prototype.init.prototype = Tween.prototype;\n\n\tTween.propHooks = {\n\t\t_default: {\n\t\t\tget: function( tween ) {\n\t\t\t\tvar result;\n\n\t\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t\t}\n\n\t\t\t\t// passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t\t// attempt a parseFloat and fallback to a string if the parse fails\n\t\t\t\t// so, simple values such as \"10px\" are parsed to Float.\n\t\t\t\t// complex values such as \"rotate(1rad)\" are returned as is.\n\t\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t\t},\n\t\t\tset: function( tween ) {\n\t\t\t\t// use step hook for back compat - use cssHook if its there - use .style if its\n\t\t\t\t// available and use plain properties where available\n\t\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t\t} else {\n\t\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n// Support: IE9\n// Panic based approach to setting things on disconnected nodes\n\n\tTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\t\tset: function( tween ) {\n\t\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t};\n\n\tjQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\t\tvar cssFn = jQuery.fn[ name ];\n\t\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\t\tcssFn.apply( this, arguments ) :\n\t\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t\t};\n\t});\n\n\tjQuery.fn.extend({\n\t\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t\t// show any hidden elements after setting opacity to 0\n\t\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t\t// animate to the value specified\n\t\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t\t},\n\t\tanimate: function( prop, speed, easing, callback ) {\n\t\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\t\tdoAnimation = function() {\n\t\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\t\tif ( empty || data_priv.get( this, \"finish\" ) ) {\n\t\t\t\t\t\tanim.stop( true );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\t\treturn empty || optall.queue === false ?\n\t\t\t\tthis.each( doAnimation ) :\n\t\t\t\tthis.queue( optall.queue, doAnimation );\n\t\t},\n\t\tstop: function( type, clearQueue, gotoEnd ) {\n\t\t\tvar stopQueue = function( hooks ) {\n\t\t\t\tvar stop = hooks.stop;\n\t\t\t\tdelete hooks.stop;\n\t\t\t\tstop( gotoEnd );\n\t\t\t};\n\n\t\t\tif ( typeof type !== \"string\" ) {\n\t\t\t\tgotoEnd = clearQueue;\n\t\t\t\tclearQueue = type;\n\t\t\t\ttype = undefined;\n\t\t\t}\n\t\t\tif ( clearQueue && type !== false ) {\n\t\t\t\tthis.queue( type || \"fx\", [] );\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\tvar dequeue = true,\n\t\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\t\ttimers = jQuery.timers,\n\t\t\t\t\tdata = data_priv.get( this );\n\n\t\t\t\tif ( index ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( index in data ) {\n\t\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\t\tdequeue = false;\n\t\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// start the next in the queue if the last step wasn't forced\n\t\t\t\t// timers currently will call their complete callbacks, which will dequeue\n\t\t\t\t// but only if they were gotoEnd\n\t\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tfinish: function( type ) {\n\t\t\tif ( type !== false ) {\n\t\t\t\ttype = type || \"fx\";\n\t\t\t}\n\t\t\treturn this.each(function() {\n\t\t\t\tvar index,\n\t\t\t\t\tdata = data_priv.get( this ),\n\t\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\t\ttimers = jQuery.timers,\n\t\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t\t// enable finishing flag on private data\n\t\t\t\tdata.finish = true;\n\n\t\t\t\t// empty the queue first\n\t\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\t\thooks.stop.call( this, true );\n\t\t\t\t}\n\n\t\t\t\t// look for any active animations, and finish them\n\t\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// look for any animations in the old queue and finish them\n\t\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// turn off finishing flag\n\t\t\t\tdelete data.finish;\n\t\t\t});\n\t\t}\n\t});\n\n// Generate parameters to create a standard animation\n\tfunction genFx( type, includeWidth ) {\n\t\tvar which,\n\t\t\tattrs = { height: type },\n\t\t\ti = 0;\n\n\t\t// if we include width, step value is 1 to do all cssExpand values,\n\t\t// if we don't include width, step value is 2 to skip over Left and Right\n\t\tincludeWidth = includeWidth? 1 : 0;\n\t\tfor( ; i < 4 ; i += 2 - includeWidth ) {\n\t\t\twhich = cssExpand[ i ];\n\t\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t\t}\n\n\t\tif ( includeWidth ) {\n\t\t\tattrs.opacity = attrs.width = type;\n\t\t}\n\n\t\treturn attrs;\n\t}\n\n// Generate shortcuts for custom animations\n\tjQuery.each({\n\t\tslideDown: genFx(\"show\"),\n\t\tslideUp: genFx(\"hide\"),\n\t\tslideToggle: genFx(\"toggle\"),\n\t\tfadeIn: { opacity: \"show\" },\n\t\tfadeOut: { opacity: \"hide\" },\n\t\tfadeToggle: { opacity: \"toggle\" }\n\t}, function( name, props ) {\n\t\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\t\treturn this.animate( props, speed, easing, callback );\n\t\t};\n\t});\n\n\tjQuery.speed = function( speed, easing, fn ) {\n\t\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\t\tcomplete: fn || !fn && easing ||\n\t\t\t\tjQuery.isFunction( speed ) && speed,\n\t\t\tduration: speed,\n\t\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t\t};\n\n\t\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t\t// normalize opt.queue - true/undefined/null -> \"fx\"\n\t\tif ( opt.queue == null || opt.queue === true ) {\n\t\t\topt.queue = \"fx\";\n\t\t}\n\n\t\t// Queueing\n\t\topt.old = opt.complete;\n\n\t\topt.complete = function() {\n\t\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\t\topt.old.call( this );\n\t\t\t}\n\n\t\t\tif ( opt.queue ) {\n\t\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t\t}\n\t\t};\n\n\t\treturn opt;\n\t};\n\n\tjQuery.easing = {\n\t\tlinear: function( p ) {\n\t\t\treturn p;\n\t\t},\n\t\tswing: function( p ) {\n\t\t\treturn 0.5 - Math.cos( p*Math.PI ) / 2;\n\t\t}\n\t};\n\n\tjQuery.timers = [];\n\tjQuery.fx = Tween.prototype.init;\n\tjQuery.fx.tick = function() {\n\t\tvar timer,\n\t\t\ttimers = jQuery.timers,\n\t\t\ti = 0;\n\n\t\tfxNow = jQuery.now();\n\n\t\tfor ( ; i < timers.length; i++ ) {\n\t\t\ttimer = timers[ i ];\n\t\t\t// Checks the timer has not already been removed\n\t\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\t\ttimers.splice( i--, 1 );\n\t\t\t}\n\t\t}\n\n\t\tif ( !timers.length ) {\n\t\t\tjQuery.fx.stop();\n\t\t}\n\t\tfxNow = undefined;\n\t};\n\n\tjQuery.fx.timer = function( timer ) {\n\t\tif ( timer() && jQuery.timers.push( timer ) ) {\n\t\t\tjQuery.fx.start();\n\t\t}\n\t};\n\n\tjQuery.fx.interval = 13;\n\n\tjQuery.fx.start = function() {\n\t\tif ( !timerId ) {\n\t\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t\t}\n\t};\n\n\tjQuery.fx.stop = function() {\n\t\tclearInterval( timerId );\n\t\ttimerId = null;\n\t};\n\n\tjQuery.fx.speeds = {\n\t\tslow: 600,\n\t\tfast: 200,\n\t\t// Default speed\n\t\t_default: 400\n\t};\n\n// Back Compat <1.8 extension point\n\tjQuery.fx.step = {};\n\n\tif ( jQuery.expr && jQuery.expr.filters ) {\n\t\tjQuery.expr.filters.animated = function( elem ) {\n\t\t\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\t\t\treturn elem === fn.elem;\n\t\t\t}).length;\n\t\t};\n\t}\n\tjQuery.fn.offset = function( options ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each(function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t});\n\t\t}\n\n\t\tvar docElem, win,\n\t\t\telem = this[ 0 ],\n\t\t\tbox = { top: 0, left: 0 },\n\t\t\tdoc = elem && elem.ownerDocument;\n\n\t\tif ( !doc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocElem = doc.documentElement;\n\n\t\t// Make sure it's not a disconnected DOM node\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\t\treturn box;\n\t\t}\n\n\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\t// BlackBerry 5, iOS 3 (original iPhone)\n\t\tif ( typeof elem.getBoundingClientRect !== core_strundefined ) {\n\t\t\tbox = elem.getBoundingClientRect();\n\t\t}\n\t\twin = getWindow( doc );\n\t\treturn {\n\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n\t};\n\n\tjQuery.offset = {\n\n\t\tsetOffset: function( elem, options, i ) {\n\t\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\t\tcurElem = jQuery( elem ),\n\t\t\t\tprops = {};\n\n\t\t\t// Set position first, in-case top/left are set even on static elem\n\t\t\tif ( position === \"static\" ) {\n\t\t\t\telem.style.position = \"relative\";\n\t\t\t}\n\n\t\t\tcurOffset = curElem.offset();\n\t\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) && ( curCSSTop + curCSSLeft ).indexOf(\"auto\") > -1;\n\n\t\t\t// Need to be able to calculate position if either top or left is auto and position is either absolute or fixed\n\t\t\tif ( calculatePosition ) {\n\t\t\t\tcurPosition = curElem.position();\n\t\t\t\tcurTop = curPosition.top;\n\t\t\t\tcurLeft = curPosition.left;\n\n\t\t\t} else {\n\t\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t\t}\n\n\t\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\t\toptions = options.call( elem, i, curOffset );\n\t\t\t}\n\n\t\t\tif ( options.top != null ) {\n\t\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t\t}\n\t\t\tif ( options.left != null ) {\n\t\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t\t}\n\n\t\t\tif ( \"using\" in options ) {\n\t\t\t\toptions.using.call( elem, props );\n\n\t\t\t} else {\n\t\t\t\tcurElem.css( props );\n\t\t\t}\n\t\t}\n\t};\n\n\n\tjQuery.fn.extend({\n\n\t\tposition: function() {\n\t\t\tif ( !this[ 0 ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar offsetParent, offset,\n\t\t\t\telem = this[ 0 ],\n\t\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent\n\t\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t\t// We assume that getBoundingClientRect is available when computed position is fixed\n\t\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t\t} else {\n\t\t\t\t// Get *real* offsetParent\n\t\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t\t// Get correct offsets\n\t\t\t\toffset = this.offset();\n\t\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t\t}\n\n\t\t\t\t// Add offsetParent borders\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t\t}\n\n\t\t\t// Subtract parent offsets and element margins\n\t\t\treturn {\n\t\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t\t};\n\t\t},\n\n\t\toffsetParent: function() {\n\t\t\treturn this.map(function() {\n\t\t\t\tvar offsetParent = this.offsetParent || docElem;\n\n\t\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\") === \"static\" ) ) {\n\t\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t\t}\n\n\t\t\t\treturn offsetParent || docElem;\n\t\t\t});\n\t\t}\n\t});\n\n\n// Create scrollLeft and scrollTop methods\n\tjQuery.each( {scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\"}, function( method, prop ) {\n\t\tvar top = \"pageYOffset\" === prop;\n\n\t\tjQuery.fn[ method ] = function( val ) {\n\t\t\treturn jQuery.access( this, function( elem, method, val ) {\n\t\t\t\tvar win = getWindow( elem );\n\n\t\t\t\tif ( val === undefined ) {\n\t\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t\t}\n\n\t\t\t\tif ( win ) {\n\t\t\t\t\twin.scrollTo(\n\t\t\t\t\t\t!top ? val : window.pageXOffset,\n\t\t\t\t\t\ttop ? val : window.pageYOffset\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\t\t\t\t\telem[ method ] = val;\n\t\t\t\t}\n\t\t\t}, method, val, arguments.length, null );\n\t\t};\n\t});\n\n\tfunction getWindow( elem ) {\n\t\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n\t}\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\n\tjQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\t\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t\t// margin is only for outerHeight, outerWidth\n\t\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\t\treturn jQuery.access( this, function( elem, type, value ) {\n\t\t\t\t\tvar doc;\n\n\t\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get document width or height\n\t\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t\t// whichever is greatest\n\t\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value === undefined ?\n\t\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t\t};\n\t\t});\n\t});\n// Limit scope pollution from any deprecated API\n// (function() {\n\n// The number of elements contained in the matched element set\n\tjQuery.fn.size = function() {\n\t\treturn this.length;\n\t};\n\n\tjQuery.fn.andSelf = jQuery.fn.addBack;\n\n// })();\n\tif ( typeof module === \"object\" && module && typeof module.exports === \"object\" ) {\n\t\t// Expose jQuery as module.exports in loaders that implement the Node\n\t\t// module pattern (including browserify). Do not create the global, since\n\t\t// the user will be storing it themselves locally, and globals are frowned\n\t\t// upon in the Node module world.\n\t\tmodule.exports = jQuery;\n\t} else {\n\t\t// Register as a named AMD module, since jQuery can be concatenated with other\n\t\t// files that may use define, but not via a proper concatenation script that\n\t\t// understands anonymous AMD modules. A named AMD is safest and most robust\n\t\t// way to register. Lowercase jquery is used because AMD module names are\n\t\t// derived from file names, and jQuery is normally delivered in a lowercase\n\t\t// file name. Do this after creating the global so that if an AMD module wants\n\t\t// to call noConflict to hide this version of jQuery, it will work.\n\t\tif ( typeof define === \"function\" && define.amd ) {\n\t\t\tdefine( \"jquery\", [], function () { return jQuery; } );\n\t\t}\n\t}\n\n// If there is a window object, that at least has a document property,\n// define jQuery and $ identifiers\n\tif ( typeof window === \"object\" && typeof window.document === \"object\" ) {\n\t\twindow.jQuery = window.$ = jQuery;\n\t}\n\n})( window );\n",
    "// Spectrum Colorpicker v1.1.0\n// https://github.com/bgrins/spectrum\n// Author: Brian Grinstead\n// License: MIT\n\n(function (window, $, undefined) {\n    var defaultOpts = {\n\n        // Callbacks\n        beforeShow: noop,\n        move: noop,\n        change: noop,\n        show: noop,\n        hide: noop,\n\n        // Options\n        color: false,\n        flat: false,\n        showInput: false,\n        showButtons: true,\n        clickoutFiresChange: false,\n        showInitial: false,\n        showPalette: false,\n        showPaletteOnly: false,\n        showSelectionPalette: true,\n        localStorageKey: false,\n        appendTo: \"body\",\n        maxSelectionSize: 7,\n        cancelText: \"cancel\",\n        chooseText: \"choose\",\n        preferredFormat: false,\n        className: \"\",\n        showAlpha: false,\n        theme: \"sp-light\",\n        palette: ['fff', '000'],\n        selectionPalette: [],\n        disabled: false\n    },\n    spectrums = [],\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\n    rgbaSupport = (function() {\n        function contains( str, substr ) {\n            return !!~('' + str).indexOf(substr);\n        }\n\n        var elem = document.createElement('div');\n        var style = elem.style;\n        style.cssText = 'background-color:rgba(0,0,0,.5)';\n        return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\n    })(),\n    replaceInput = [\n        \"<div class='sp-replacer'>\",\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\n            \"<div class='sp-dd'>&#9660;</div>\",\n        \"</div>\"\n    ].join(''),\n    markup = (function () {\n\n        // IE does not support gradients with multiple stops, so we need to simulate\n        //  that for the rainbow slider with 8 divs that each have a single gradient\n        var gradientFix = \"\";\n        if (IE) {\n            for (var i = 1; i <= 6; i++) {\n                gradientFix += \"<div class='sp-\" + i + \"'></div>\";\n            }\n        }\n\n        return [\n            \"<div class='sp-container sp-hidden'>\",\n                \"<div class='sp-palette-container'>\",\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\n                \"</div>\",\n                \"<div class='sp-picker-container'>\",\n                    \"<div class='sp-top sp-cf'>\",\n                        \"<div class='sp-fill'></div>\",\n                        \"<div class='sp-top-inner'>\",\n                            \"<div class='sp-color'>\",\n                                \"<div class='sp-sat'>\",\n                                    \"<div class='sp-val'>\",\n                                        \"<div class='sp-dragger'></div>\",\n                                    \"</div>\",\n                                \"</div>\",\n                            \"</div>\",\n                            \"<div class='sp-hue'>\",\n                                \"<div class='sp-slider'></div>\",\n                                gradientFix,\n                            \"</div>\",\n                        \"</div>\",\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\n                    \"</div>\",\n                    \"<div class='sp-input-container sp-cf'>\",\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\n                    \"</div>\",\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\n                    // \"<div class='sp-button-container sp-cf'>\",\n                        // \"<a class='sp-cancel' href='#'></a>\",\n                        // \"<button class='sp-choose'></button>\",\n                    // \"</div>\",\n                \"</div>\",\n            \"</div>\"\n        ].join(\"\");\n    })();\n\n    var log = function() { };\n    if (window.console) {\n      if (Function.prototype.bind) {\n        log = Function.prototype.bind.call(console.log, console);\n      }\n      else {\n        log = function() {\n          Function.prototype.apply.call(console.log, console, arguments);\n        };\n      }\n    }\n\n    function paletteTemplate (p, color, className) {\n        var html = [];\n        for (var i = 0; i < p.length; i++) {\n            var tiny = tinycolor(p[i]);\n            var c = tiny.toHsl().l < 0.5 ? \"sp-thumb-el sp-thumb-dark\" : \"sp-thumb-el sp-thumb-light\";\n            c += (tinycolor.equals(color, p[i])) ? \" sp-thumb-active\" : \"\";\n\n            var swatchStyle = rgbaSupport ? (\"background-color:\" + tiny.toRgbString()) : \"filter:\" + tiny.toFilter();\n            html.push('<span title=\"' + tiny.toRgbString() + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\n        }\n        return \"<div class='sp-cf \" + className + \"'>\" + html.join('') + \"</div>\";\n    }\n\n    function hideAll() {\n        for (var i = 0; i < spectrums.length; i++) {\n            if (spectrums[i]) {\n                spectrums[i].hide();\n            }\n        }\n    }\n\n    function instanceOptions(o, callbackContext) {\n        var opts = $.extend({}, defaultOpts, o);\n        opts.callbacks = {\n            'move': bind(opts.move, callbackContext),\n            'change': bind(opts.change, callbackContext),\n            'show': bind(opts.show, callbackContext),\n            'hide': bind(opts.hide, callbackContext),\n            'beforeShow': bind(opts.beforeShow, callbackContext)\n        };\n\n        return opts;\n    }\n\n    function spectrum(element, o) {\n\n        var opts = instanceOptions(o, element),\n            flat = opts.flat,\n            showSelectionPalette = opts.showSelectionPalette,\n            localStorageKey = opts.localStorageKey,\n            theme = opts.theme,\n            callbacks = opts.callbacks,\n            resize = throttle(reflow, 10),\n            visible = false,\n            dragWidth = 0,\n            dragHeight = 0,\n            dragHelperHeight = 0,\n            slideHeight = 0,\n            slideWidth = 0,\n            alphaWidth = 0,\n            alphaSlideHelperWidth = 0,\n            slideHelperHeight = 0,\n            currentHue = 0,\n            currentSaturation = 0,\n            currentValue = 0,\n            currentAlpha = 1,\n            palette = opts.palette.slice(0),\n            paletteArray = $.isArray(palette[0]) ? palette : [palette],\n            selectionPalette = opts.selectionPalette.slice(0),\n            maxSelectionSize = opts.maxSelectionSize,\n            draggingClass = \"sp-dragging\";\n\n        var doc = element.ownerDocument,\n            body = doc.body,\n            boundElement = $(element),\n            disabled = false,\n            container = $(markup, doc).addClass(theme),\n            dragger = container.find(\".sp-color\"),\n            dragHelper = container.find(\".sp-dragger\"),\n            slider = container.find(\".sp-hue\"),\n            slideHelper = container.find(\".sp-slider\"),\n            alphaSliderInner = container.find(\".sp-alpha-inner\"),\n            alphaSlider = container.find(\".sp-alpha\"),\n            alphaSlideHelper = container.find(\".sp-alpha-handle\"),\n            textInput = container.find(\".sp-input\"),\n            paletteContainer = container.find(\".sp-palette\"),\n            initialColorContainer = container.find(\".sp-initial\"),\n            cancelButton = container.find(\".sp-cancel\"),\n            chooseButton = container.find(\".sp-choose\"),\n            isInput = boundElement.is(\"input\"),\n            shouldReplace = isInput && !flat,\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className) : $([]),\n            offsetElement = (shouldReplace) ? replacer : boundElement,\n            previewElement = replacer.find(\".sp-preview-inner\"),\n            initialColor = opts.color || (isInput && boundElement.val()),\n            colorOnShow = false,\n            preferredFormat = opts.preferredFormat,\n            currentPreferredFormat = preferredFormat,\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange;\n\n\n        function applyOptions() {\n\n            container.toggleClass(\"sp-flat\", flat);\n            container.toggleClass(\"sp-input-disabled\", !opts.showInput);\n            container.toggleClass(\"sp-alpha-enabled\", opts.showAlpha);\n            container.toggleClass(\"sp-buttons-disabled\", !opts.showButtons || flat);\n            container.toggleClass(\"sp-palette-disabled\", !opts.showPalette);\n            container.toggleClass(\"sp-palette-only\", opts.showPaletteOnly);\n            container.toggleClass(\"sp-initial-disabled\", !opts.showInitial);\n            container.addClass(opts.className);\n\n            reflow();\n        }\n\n        function initialize() {\n\n            if (IE) {\n                container.find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n            }\n\n            applyOptions();\n\n            if (shouldReplace) {\n                boundElement.after(replacer).hide();\n            }\n\n            if (flat) {\n                boundElement.after(container).hide();\n            }\n            else {\n\n                var appendTo = opts.appendTo === \"parent\" ? boundElement.parent() : $(opts.appendTo);\n                if (appendTo.length !== 1) {\n                    appendTo = $(\"body\");\n                }\n\n                appendTo.append(container);\n            }\n\n            if (localStorageKey && window.localStorage) {\n\n                // Migrate old palettes over to new format.  May want to remove this eventually.\n                try {\n                    var oldPalette = window.localStorage[localStorageKey].split(\",#\");\n                    if (oldPalette.length > 1) {\n                        delete window.localStorage[localStorageKey];\n                        $.each(oldPalette, function(i, c) {\n                             addColorToSelectionPalette(c);\n                        });\n                    }\n                }\n                catch(e) { }\n\n                try {\n                    selectionPalette = window.localStorage[localStorageKey].split(\";\");\n                }\n                catch (e) { }\n            }\n\n            offsetElement.bind(\"click.spectrum touchstart.spectrum\", function (e) {\n                if (!disabled) {\n                    toggle();\n                }\n\n                e.stopPropagation();\n\n                if (!$(e.target).is(\"input\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if(boundElement.is(\":disabled\") || (opts.disabled === true)) {\n                disable();\n            }\n\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n            container.click(stopPropagation);\n\n            // Handle user typed input\n            textInput.change(setFromTextInput);\n            textInput.bind(\"paste\", function () {\n                setTimeout(setFromTextInput, 1);\n            });\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\n\n            cancelButton.text(opts.cancelText);\n            cancelButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                hide(\"cancel\");\n            });\n\n            chooseButton.text(opts.chooseText);\n            chooseButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                if (isValid()) {\n                    updateOriginalInput(true);\n                    hide();\n                }\n            });\n\n            draggable(alphaSlider, function (dragX, dragY, e) {\n                currentAlpha = (dragX / alphaWidth);\n                if (e.shiftKey) {\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\n                }\n\n                move();\n            });\n\n            draggable(slider, function (dragX, dragY) {\n                currentHue = parseFloat(dragY / slideHeight);\n                move();\n            }, dragStart, dragStop);\n\n            draggable(dragger, function (dragX, dragY) {\n                currentSaturation = parseFloat(dragX / dragWidth);\n                currentValue = parseFloat((dragHeight - dragY) / dragHeight);\n                move();\n            }, dragStart, dragStop);\n\n            if (!!initialColor) {\n                set(initialColor);\n\n                // In case color was black - update the preview UI and set the format\n                // since the set function will not run (default color is black).\n                updateUI();\n                currentPreferredFormat = preferredFormat || tinycolor(initialColor).format;\n\n                addColorToSelectionPalette(initialColor);\n            }\n            else {\n                updateUI();\n            }\n\n            if (flat) {\n                show();\n            }\n\n            function palletElementClick(e) {\n                if (e.data && e.data.ignore) {\n                    set($(this).data(\"color\"));\n                    move();\n                }\n                else {\n                    set($(this).data(\"color\"));\n                    updateOriginalInput(true);\n                    move();\n                    hide();\n                }\n\n                return false;\n            }\n\n            var paletteEvent = IE ? \"mousedown.spectrum\" : \"click.spectrum touchstart.spectrum\";\n            paletteContainer.delegate(\".sp-thumb-el\", paletteEvent, palletElementClick);\n            initialColorContainer.delegate(\".sp-thumb-el:nth-child(1)\", paletteEvent, { ignore: true }, palletElementClick);\n        }\n\n        function addColorToSelectionPalette(color) {\n            if (showSelectionPalette) {\n                var colorRgb = tinycolor(color).toRgbString();\n                if ($.inArray(colorRgb, selectionPalette) === -1) {\n                    selectionPalette.push(colorRgb);\n                    while(selectionPalette.length > maxSelectionSize) {\n                        selectionPalette.shift();\n                    }\n                }\n\n                if (localStorageKey && window.localStorage) {\n                    try {\n                        window.localStorage[localStorageKey] = selectionPalette.join(\";\");\n                    }\n                    catch(e) { }\n                }\n            }\n        }\n\n        function getUniqueSelectionPalette() {\n            var unique = [];\n            var p = selectionPalette;\n            var paletteLookup = {};\n            var rgb;\n\n            if (opts.showPalette) {\n\n                for (var i = 0; i < paletteArray.length; i++) {\n                    for (var j = 0; j < paletteArray[i].length; j++) {\n                        rgb = tinycolor(paletteArray[i][j]).toRgbString();\n                        paletteLookup[rgb] = true;\n                    }\n                }\n\n                for (i = 0; i < p.length; i++) {\n                    rgb = tinycolor(p[i]).toRgbString();\n\n                    if (!paletteLookup.hasOwnProperty(rgb)) {\n                        unique.push(p[i]);\n                        paletteLookup[rgb] = true;\n                    }\n                }\n            }\n\n            return unique.reverse().slice(0, opts.maxSelectionSize);\n        }\n\n        function drawPalette() {\n\n            var currentColor = get();\n\n            var html = $.map(paletteArray, function (palette, i) {\n                return paletteTemplate(palette, currentColor, \"sp-palette-row sp-palette-row-\" + i);\n            });\n\n            if (selectionPalette) {\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, \"sp-palette-row sp-palette-row-selection\"));\n            }\n\n            paletteContainer.html(html.join(\"\"));\n        }\n\n        function drawInitial() {\n            if (opts.showInitial) {\n                var initial = colorOnShow;\n                var current = get();\n                initialColorContainer.html(paletteTemplate([initial, current], current, \"sp-palette-row-initial\"));\n            }\n        }\n\n        function dragStart() {\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n                reflow();\n            }\n            container.addClass(draggingClass);\n        }\n\n        function dragStop() {\n            container.removeClass(draggingClass);\n        }\n\n        function setFromTextInput() {\n            var tiny = tinycolor(textInput.val());\n            if (tiny.ok) {\n                set(tiny);\n            }\n            else {\n                textInput.addClass(\"sp-validation-error\");\n            }\n        }\n\n        function toggle() {\n            if (visible) {\n                hide();\n            }\n            else {\n                show();\n            }\n        }\n\n        function show() {\n            var event = $.Event('beforeShow.spectrum');\n\n            if (visible) {\n                reflow();\n                return;\n            }\n\n            boundElement.trigger(event, [ get() ]);\n\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\n                return;\n            }\n\n            hideAll();\n            visible = true;\n\n            $(doc).bind(\"click.spectrum\", hide);\n            $(window).bind(\"resize.spectrum\", resize);\n            replacer.addClass(\"sp-active\");\n            container.removeClass(\"sp-hidden\");\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n            reflow();\n            updateUI();\n\n            colorOnShow = get();\n\n            drawInitial();\n            callbacks.show(colorOnShow);\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\n        }\n\n        function hide(e) {\n\n            // Return on right click\n            if (e && e.type == \"click\" && e.button == 2) { return; }\n\n            // Return if hiding is unnecessary\n            if (!visible || flat) { return; }\n            visible = false;\n\n            $(doc).unbind(\"click.spectrum\", hide);\n            $(window).unbind(\"resize.spectrum\", resize);\n\n            replacer.removeClass(\"sp-active\");\n            container.addClass(\"sp-hidden\");\n\n            var colorHasChanged = !tinycolor.equals(get(), colorOnShow);\n\n            if (colorHasChanged) {\n                if (clickoutFiresChange && e !== \"cancel\") {\n                    updateOriginalInput(true);\n                }\n                else {\n                    revert();\n                }\n            }\n\n            callbacks.hide(get());\n            boundElement.trigger('hide.spectrum', [ get() ]);\n        }\n\n        function revert() {\n            set(colorOnShow, true);\n        }\n\n        function set(color, ignoreFormatChange) {\n            if (tinycolor.equals(color, get())) {\n                return;\n            }\n\n            var newColor = tinycolor(color);\n            var newHsv = newColor.toHsv();\n\n            currentHue = newHsv.h;\n            currentSaturation = newHsv.s;\n            currentValue = newHsv.v;\n            currentAlpha = newHsv.a;\n\n            updateUI();\n\n            if (newColor.ok && !ignoreFormatChange) {\n                currentPreferredFormat = preferredFormat || newColor.format;\n            }\n        }\n\n        function get(opts) {\n            opts = opts || { };\n            return tinycolor.fromRatio({\n                h: currentHue,\n                s: currentSaturation,\n                v: currentValue,\n                a: Math.round(currentAlpha * 100) / 100\n            }, { format: opts.format || currentPreferredFormat });\n        }\n\n        function isValid() {\n            return !textInput.hasClass(\"sp-validation-error\");\n        }\n\n        function move() {\n            updateUI();\n\n            callbacks.move(get());\n            boundElement.trigger('move.spectrum', [ get() ]);\n        }\n\n        function updateUI() {\n\n            textInput.removeClass(\"sp-validation-error\");\n\n            updateHelperLocations();\n\n            // Update dragger background color (gradients take care of saturation and value).\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n            dragger.css(\"background-color\", flatColor.toHexString());\n\n            // Get a format that alpha will be included in (hex and names ignore alpha)\n            var format = currentPreferredFormat;\n            if (currentAlpha < 1) {\n                if (format === \"hex\" || format === \"hex3\" || format === \"hex6\" || format === \"name\") {\n                    format = \"rgb\";\n                }\n            }\n\n            var realColor = get({ format: format }),\n                realHex = realColor.toHexString(),\n                realRgb = realColor.toRgbString();\n\n            // Update the replaced elements background color (with actual selected color)\n            if (rgbaSupport || realColor.alpha === 1) {\n                previewElement.css(\"background-color\", realRgb);\n            }\n            else {\n                previewElement.css(\"background-color\", \"transparent\");\n                previewElement.css(\"filter\", realColor.toFilter());\n            }\n\n            if (opts.showAlpha) {\n                var rgb = realColor.toRgb();\n                rgb.a = 0;\n                var realAlpha = tinycolor(rgb).toRgbString();\n                var gradient = \"linear-gradient(left, \" + realAlpha + \", \" + realHex + \")\";\n\n                if (IE) {\n                    alphaSliderInner.css(\"filter\", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\n                }\n                else {\n                    alphaSliderInner.css(\"background\", \"-webkit-\" + gradient);\n                    alphaSliderInner.css(\"background\", \"-moz-\" + gradient);\n                    alphaSliderInner.css(\"background\", \"-ms-\" + gradient);\n                    alphaSliderInner.css(\"background\", gradient);\n                }\n            }\n\n\n            // Update the text entry input as it changes happen\n            if (opts.showInput) {\n                textInput.val(realColor.toString(format));\n            }\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            drawInitial();\n        }\n\n        function updateHelperLocations() {\n            var s = currentSaturation;\n            var v = currentValue;\n\n            // Where to show the little circle in that displays your current selected color\n            var dragX = s * dragWidth;\n            var dragY = dragHeight - (v * dragHeight);\n            dragX = Math.max(\n                -dragHelperHeight,\n                Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\n            );\n            dragY = Math.max(\n                -dragHelperHeight,\n                Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\n            );\n            dragHelper.css({\n                \"top\": dragY,\n                \"left\": dragX\n            });\n\n            var alphaX = currentAlpha * alphaWidth;\n            alphaSlideHelper.css({\n                \"left\": alphaX - (alphaSlideHelperWidth / 2)\n            });\n\n            // Where to show the bar that displays your current selected hue\n            var slideY = (currentHue) * slideHeight;\n            slideHelper.css({\n                \"top\": slideY - slideHelperHeight\n            });\n        }\n\n        function updateOriginalInput(fireCallback) {\n            var color = get();\n\n            if (isInput) {\n                boundElement.val(color.toString(currentPreferredFormat)).change();\n            }\n\n            var hasChanged = !tinycolor.equals(color, colorOnShow);\n            colorOnShow = color;\n\n            // Update the selection palette with the current color\n            addColorToSelectionPalette(color);\n            if (fireCallback && hasChanged) {\n                callbacks.change(color);\n                boundElement.trigger('change.spectrum', [ color ]);\n            }\n        }\n\n        function reflow() {\n            dragWidth = dragger.width();\n            dragHeight = dragger.height();\n            dragHelperHeight = dragHelper.height();\n            slideWidth = slider.width();\n            slideHeight = slider.height();\n            slideHelperHeight = slideHelper.height();\n            alphaWidth = alphaSlider.width();\n            alphaSlideHelperWidth = alphaSlideHelper.width();\n\n            if (!flat) {\n                container.css(\"position\", \"absolute\");\n                container.offset(getOffset(container, offsetElement));\n            }\n\n            updateHelperLocations();\n        }\n\n        function destroy() {\n            boundElement.show();\n            offsetElement.unbind(\"click.spectrum touchstart.spectrum\");\n            container.remove();\n            replacer.remove();\n            spectrums[spect.id] = null;\n        }\n\n        function option(optionName, optionValue) {\n            if (optionName === undefined) {\n                return $.extend({}, opts);\n            }\n            if (optionValue === undefined) {\n                return opts[optionName];\n            }\n\n            opts[optionName] = optionValue;\n            applyOptions();\n        }\n\n        function enable() {\n            disabled = false;\n            boundElement.attr(\"disabled\", false);\n            offsetElement.removeClass(\"sp-disabled\");\n        }\n\n        function disable() {\n            hide();\n            disabled = true;\n            boundElement.attr(\"disabled\", true);\n            offsetElement.addClass(\"sp-disabled\");\n        }\n\n        initialize();\n\n        var spect = {\n            show: show,\n            hide: hide,\n            toggle: toggle,\n            reflow: reflow,\n            option: option,\n            enable: enable,\n            disable: disable,\n            set: function (c) {\n                set(c);\n                updateOriginalInput();\n            },\n            get: get,\n            destroy: destroy,\n            container: container\n        };\n\n        spect.id = spectrums.push(spect) - 1;\n\n        return spect;\n    }\n\n    /**\n    * checkOffset - get the offset below/above and left/right element depending on screen position\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n    */\n    function getOffset(picker, input) {\n        var extraY = 0;\n        var dpWidth = picker.outerWidth();\n        var dpHeight = picker.outerHeight();\n        var inputHeight = input.outerHeight();\n        var doc = picker[0].ownerDocument;\n        var docElem = doc.documentElement;\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\n        var offset = input.offset();\n        offset.top += inputHeight;\n\n        offset.left -=\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\n            Math.abs(offset.left + dpWidth - viewWidth) : 0);\n\n        offset.top -=\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n        return offset;\n    }\n\n    /**\n    * noop - do nothing\n    */\n    function noop() {\n\n    }\n\n    /**\n    * stopPropagation - makes the code only doing this a little easier to read in line\n    */\n    function stopPropagation(e) {\n        e.stopPropagation();\n    }\n\n    /**\n    * Create a function bound to a given object\n    * Thanks to underscore.js\n    */\n    function bind(func, obj) {\n        var slice = Array.prototype.slice;\n        var args = slice.call(arguments, 2);\n        return function () {\n            return func.apply(obj, args.concat(slice.call(arguments)));\n        };\n    }\n\n    /**\n    * Lightweight drag helper.  Handles containment within the element, so that\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n    */\n    function draggable(element, onmove, onstart, onstop) {\n        onmove = onmove || function () { };\n        onstart = onstart || function () { };\n        onstop = onstop || function () { };\n        var doc = element.ownerDocument || document;\n        var dragging = false;\n        var offset = {};\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var hasTouch = ('ontouchstart' in window);\n\n        var duringDragEvents = {};\n        duringDragEvents[\"selectstart\"] = prevent;\n        duringDragEvents[\"dragstart\"] = prevent;\n        duringDragEvents[(hasTouch ? \"touchmove\" : \"mousemove\")] = move;\n        duringDragEvents[(hasTouch ? \"touchend\" : \"mouseup\")] = stop;\n\n        function prevent(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            e.returnValue = false;\n        }\n\n        function move(e) {\n            if (dragging) {\n                // Mouseup happened outside of window\n                if (IE && document.documentMode < 9 && !e.button) {\n                    return stop();\n                }\n\n                var touches = e.originalEvent.touches;\n                var pageX = touches ? touches[0].pageX : e.pageX;\n                var pageY = touches ? touches[0].pageY : e.pageY;\n\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n                if (hasTouch) {\n                    // Stop scrolling in iOS\n                    prevent(e);\n                }\n\n                onmove.apply(element, [dragX, dragY, e]);\n            }\n        }\n        function start(e) {\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\n            var touches = e.originalEvent.touches;\n\n            if (!rightclick && !dragging) {\n                if (onstart.apply(element, arguments) !== false) {\n                    dragging = true;\n                    maxHeight = $(element).height();\n                    maxWidth = $(element).width();\n                    offset = $(element).offset();\n\n                    $(doc).bind(duringDragEvents);\n                    $(doc.body).addClass(\"sp-dragging\");\n\n                    if (!hasTouch) {\n                        move(e);\n                    }\n\n                    prevent(e);\n                }\n            }\n        }\n        function stop() {\n            if (dragging) {\n                $(doc).unbind(duringDragEvents);\n                $(doc.body).removeClass(\"sp-dragging\");\n                onstop.apply(element, arguments);\n            }\n            dragging = false;\n        }\n\n        $(element).bind(hasTouch ? \"touchstart\" : \"mousedown\", start);\n    }\n\n    function throttle(func, wait, debounce) {\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            var throttler = function () {\n                timeout = null;\n                func.apply(context, args);\n            };\n            if (debounce) clearTimeout(timeout);\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\n        };\n    }\n\n\n    /**\n    * Define a jQuery plugin\n    */\n    var dataID = \"spectrum.id\";\n    $.fn.spectrum = function (opts, extra) {\n\n        if (typeof opts == \"string\") {\n\n            var returnValue = this;\n            var args = Array.prototype.slice.call( arguments, 1 );\n\n            this.each(function () {\n                var spect = spectrums[$(this).data(dataID)];\n                if (spect) {\n\n                    var method = spect[opts];\n                    if (!method) {\n                        throw new Error( \"Spectrum: no such method: '\" + opts + \"'\" );\n                    }\n\n                    if (opts == \"get\") {\n                        returnValue = spect.get();\n                    }\n                    else if (opts == \"container\") {\n                        returnValue = spect.container;\n                    }\n                    else if (opts == \"option\") {\n                        returnValue = spect.option.apply(spect, args);\n                    }\n                    else if (opts == \"destroy\") {\n                        spect.destroy();\n                        $(this).removeData(dataID);\n                    }\n                    else {\n                        method.apply(spect, args);\n                    }\n                }\n            });\n\n            return returnValue;\n        }\n\n        // Initializing a new instance of spectrum\n        return this.spectrum(\"destroy\").each(function () {\n            var spect = spectrum(this, opts);\n            $(this).data(dataID, spect.id);\n        });\n    };\n\n    $.fn.spectrum.load = true;\n    $.fn.spectrum.loadOpts = {};\n    $.fn.spectrum.draggable = draggable;\n    $.fn.spectrum.defaults = defaultOpts;\n\n    $.spectrum = { };\n    $.spectrum.localization = { };\n    $.spectrum.palettes = { };\n\n    $.fn.spectrum.processNativeColorInputs = function () {\n        var colorInput = $(\"<input type='color' value='!' />\")[0];\n        var supportsColor = colorInput.type === \"color\" && colorInput.value != \"!\";\n\n        if (!supportsColor) {\n            $(\"input[type=color]\").spectrum({\n                preferredFormat: \"hex6\"\n            });\n        }\n    };\n    // TinyColor v0.9.14\n    // https://github.com/bgrins/TinyColor\n    // 2013-02-24, Brian Grinstead, MIT License\n\n    (function(root) {\n\n        var trimLeft = /^[\\s,#]+/,\n            trimRight = /\\s+$/,\n            tinyCounter = 0,\n            math = Math,\n            mathRound = math.round,\n            mathMin = math.min,\n            mathMax = math.max,\n            mathRandom = math.random;\n\n        function tinycolor (color, opts) {\n\n            color = (color) ? color : '';\n            opts = opts || { };\n\n            // If input is already a tinycolor, return itself\n            if (typeof color == \"object\" && color.hasOwnProperty(\"_tc_id\")) {\n               return color;\n            }\n            var rgb = inputToRGB(color);\n            var r = rgb.r,\n                g = rgb.g,\n                b = rgb.b,\n                a = rgb.a,\n                roundA = mathRound(100*a) / 100,\n                format = opts.format || rgb.format;\n\n            // Don't let the range of [0,255] come back in [0,1].\n            // Potentially lose a little bit of precision here, but will fix issues where\n            // .5 gets interpreted as half of the total, instead of half of 1\n            // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n            if (r < 1) { r = mathRound(r); }\n            if (g < 1) { g = mathRound(g); }\n            if (b < 1) { b = mathRound(b); }\n\n            return {\n                ok: rgb.ok,\n                format: format,\n                _tc_id: tinyCounter++,\n                alpha: a,\n                toHsv: function() {\n                    var hsv = rgbToHsv(r, g, b);\n                    return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: a };\n                },\n                toHsvString: function() {\n                    var hsv = rgbToHsv(r, g, b);\n                    var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n                    return (a == 1) ?\n                      \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n                      \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ roundA + \")\";\n                },\n                toHsl: function() {\n                    var hsl = rgbToHsl(r, g, b);\n                    return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: a };\n                },\n                toHslString: function() {\n                    var hsl = rgbToHsl(r, g, b);\n                    var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n                    return (a == 1) ?\n                      \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n                      \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ roundA + \")\";\n                },\n                toHex: function(allow3Char) {\n                    return rgbToHex(r, g, b, allow3Char);\n                },\n                toHexString: function(allow3Char) {\n                    return '#' + rgbToHex(r, g, b, allow3Char);\n                },\n                toRgb: function() {\n                    return { r: mathRound(r), g: mathRound(g), b: mathRound(b), a: a };\n                },\n                toRgbString: function() {\n                    return (a == 1) ?\n                      \"rgb(\"  + mathRound(r) + \", \" + mathRound(g) + \", \" + mathRound(b) + \")\" :\n                      \"rgba(\" + mathRound(r) + \", \" + mathRound(g) + \", \" + mathRound(b) + \", \" + roundA + \")\";\n                },\n                toPercentageRgb: function() {\n                    return { r: mathRound(bound01(r, 255) * 100) + \"%\", g: mathRound(bound01(g, 255) * 100) + \"%\", b: mathRound(bound01(b, 255) * 100) + \"%\", a: a };\n                },\n                toPercentageRgbString: function() {\n                    return (a == 1) ?\n                      \"rgb(\"  + mathRound(bound01(r, 255) * 100) + \"%, \" + mathRound(bound01(g, 255) * 100) + \"%, \" + mathRound(bound01(b, 255) * 100) + \"%)\" :\n                      \"rgba(\" + mathRound(bound01(r, 255) * 100) + \"%, \" + mathRound(bound01(g, 255) * 100) + \"%, \" + mathRound(bound01(b, 255) * 100) + \"%, \" + roundA + \")\";\n                },\n                toName: function() {\n                    return hexNames[rgbToHex(r, g, b, true)] || false;\n                },\n                toFilter: function(secondColor) {\n                    var hex = rgbToHex(r, g, b);\n                    var secondHex = hex;\n                    var alphaHex = Math.round(parseFloat(a) * 255).toString(16);\n                    var secondAlphaHex = alphaHex;\n                    var gradientType = opts && opts.gradientType ? \"GradientType = 1, \" : \"\";\n\n                    if (secondColor) {\n                        var s = tinycolor(secondColor);\n                        secondHex = s.toHex();\n                        secondAlphaHex = Math.round(parseFloat(s.alpha) * 255).toString(16);\n                    }\n\n                    return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=#\" + pad2(alphaHex) + hex + \",endColorstr=#\" + pad2(secondAlphaHex) + secondHex + \")\";\n                },\n                toString: function(format) {\n                    format = format || this.format;\n                    var formattedString = false;\n                    if (format === \"rgb\") {\n                        formattedString = this.toRgbString();\n                    }\n                    if (format === \"prgb\") {\n                        formattedString = this.toPercentageRgbString();\n                    }\n                    if (format === \"hex\" || format === \"hex6\") {\n                        formattedString = this.toHexString();\n                    }\n                    if (format === \"hex3\") {\n                        formattedString = this.toHexString(true);\n                    }\n                    if (format === \"name\") {\n                        formattedString = this.toName();\n                    }\n                    if (format === \"hsl\") {\n                        formattedString = this.toHslString();\n                    }\n                    if (format === \"hsv\") {\n                        formattedString = this.toHsvString();\n                    }\n\n                    return formattedString || this.toHexString();\n                }\n            };\n        }\n\n        // If input is an object, force 1 into \"1.0\" to handle ratios properly\n        // String input requires \"1.0\" as input, so 1 will be treated as 1\n        tinycolor.fromRatio = function(color, opts) {\n            if (typeof color == \"object\") {\n                var newColor = {};\n                for (var i in color) {\n                    if (color.hasOwnProperty(i)) {\n                        if (i === \"a\") {\n                            newColor[i] = color[i];\n                        }\n                        else {\n                            newColor[i] = convertToPercentage(color[i]);\n                        }\n                    }\n                }\n                color = newColor;\n            }\n\n            return tinycolor(color, opts);\n        };\n\n        // Given a string or object, convert that input to RGB\n        // Possible string inputs:\n        //\n        //     \"red\"\n        //     \"#f00\" or \"f00\"\n        //     \"#ff0000\" or \"ff0000\"\n        //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n        //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n        //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n        //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n        //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n        //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n        //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n        //\n        function inputToRGB(color) {\n\n            var rgb = { r: 0, g: 0, b: 0 };\n            var a = 1;\n            var ok = false;\n            var format = false;\n\n            if (typeof color == \"string\") {\n                color = stringInputToObject(color);\n            }\n\n            if (typeof color == \"object\") {\n                if (color.hasOwnProperty(\"r\") && color.hasOwnProperty(\"g\") && color.hasOwnProperty(\"b\")) {\n                    rgb = rgbToRgb(color.r, color.g, color.b);\n                    ok = true;\n                    format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n                }\n                else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"v\")) {\n                    color.s = convertToPercentage(color.s);\n                    color.v = convertToPercentage(color.v);\n                    rgb = hsvToRgb(color.h, color.s, color.v);\n                    ok = true;\n                    format = \"hsv\";\n                }\n                else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"l\")) {\n                    color.s = convertToPercentage(color.s);\n                    color.l = convertToPercentage(color.l);\n                    rgb = hslToRgb(color.h, color.s, color.l);\n                    ok = true;\n                    format = \"hsl\";\n                }\n\n                if (color.hasOwnProperty(\"a\")) {\n                    a = color.a;\n                }\n            }\n\n            a = parseFloat(a);\n\n            // Handle invalid alpha characters by setting to 1\n            if (isNaN(a) || a < 0 || a > 1) {\n                a = 1;\n            }\n\n            return {\n                ok: ok,\n                format: color.format || format,\n                r: mathMin(255, mathMax(rgb.r, 0)),\n                g: mathMin(255, mathMax(rgb.g, 0)),\n                b: mathMin(255, mathMax(rgb.b, 0)),\n                a: a\n            };\n        }\n\n\n\n        // Conversion Functions\n        // --------------------\n\n        // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n        // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n        // `rgbToRgb`\n        // Handle bounds / percentage checking to conform to CSS color spec\n        // <http://www.w3.org/TR/css3-color/>\n        // *Assumes:* r, g, b in [0, 255] or [0, 1]\n        // *Returns:* { r, g, b } in [0, 255]\n        function rgbToRgb(r, g, b){\n            return {\n                r: bound01(r, 255) * 255,\n                g: bound01(g, 255) * 255,\n                b: bound01(b, 255) * 255\n            };\n        }\n\n        // `rgbToHsl`\n        // Converts an RGB color value to HSL.\n        // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n        // *Returns:* { h, s, l } in [0,1]\n        function rgbToHsl(r, g, b) {\n\n            r = bound01(r, 255);\n            g = bound01(g, 255);\n            b = bound01(b, 255);\n\n            var max = mathMax(r, g, b), min = mathMin(r, g, b);\n            var h, s, l = (max + min) / 2;\n\n            if(max == min) {\n                h = s = 0; // achromatic\n            }\n            else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch(max) {\n                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                    case g: h = (b - r) / d + 2; break;\n                    case b: h = (r - g) / d + 4; break;\n                }\n\n                h /= 6;\n            }\n\n            return { h: h, s: s, l: l };\n        }\n\n        // `hslToRgb`\n        // Converts an HSL color value to RGB.\n        // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n        // *Returns:* { r, g, b } in the set [0, 255]\n        function hslToRgb(h, s, l) {\n            var r, g, b;\n\n            h = bound01(h, 360);\n            s = bound01(s, 100);\n            l = bound01(l, 100);\n\n            function hue2rgb(p, q, t) {\n                if(t < 0) t += 1;\n                if(t > 1) t -= 1;\n                if(t < 1/6) return p + (q - p) * 6 * t;\n                if(t < 1/2) return q;\n                if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n                return p;\n            }\n\n            if(s === 0) {\n                r = g = b = l; // achromatic\n            }\n            else {\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n                var p = 2 * l - q;\n                r = hue2rgb(p, q, h + 1/3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1/3);\n            }\n\n            return { r: r * 255, g: g * 255, b: b * 255 };\n        }\n\n        // `rgbToHsv`\n        // Converts an RGB color value to HSV\n        // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n        // *Returns:* { h, s, v } in [0,1]\n        function rgbToHsv(r, g, b) {\n\n            r = bound01(r, 255);\n            g = bound01(g, 255);\n            b = bound01(b, 255);\n\n            var max = mathMax(r, g, b), min = mathMin(r, g, b);\n            var h, s, v = max;\n\n            var d = max - min;\n            s = max === 0 ? 0 : d / max;\n\n            if(max == min) {\n                h = 0; // achromatic\n            }\n            else {\n                switch(max) {\n                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                    case g: h = (b - r) / d + 2; break;\n                    case b: h = (r - g) / d + 4; break;\n                }\n                h /= 6;\n            }\n            return { h: h, s: s, v: v };\n        }\n\n        // `hsvToRgb`\n        // Converts an HSV color value to RGB.\n        // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n        // *Returns:* { r, g, b } in the set [0, 255]\n         function hsvToRgb(h, s, v) {\n\n            h = bound01(h, 360) * 6;\n            s = bound01(s, 100);\n            v = bound01(v, 100);\n\n            var i = math.floor(h),\n                f = h - i,\n                p = v * (1 - s),\n                q = v * (1 - f * s),\n                t = v * (1 - (1 - f) * s),\n                mod = i % 6,\n                r = [v, q, p, p, t, v][mod],\n                g = [t, v, v, q, p, p][mod],\n                b = [p, p, t, v, v, q][mod];\n\n            return { r: r * 255, g: g * 255, b: b * 255 };\n        }\n\n        // `rgbToHex`\n        // Converts an RGB color to hex\n        // Assumes r, g, and b are contained in the set [0, 255]\n        // Returns a 3 or 6 character hex\n        function rgbToHex(r, g, b, allow3Char) {\n\n            var hex = [\n                pad2(mathRound(r).toString(16)),\n                pad2(mathRound(g).toString(16)),\n                pad2(mathRound(b).toString(16))\n            ];\n\n            // Return a 3 character hex if possible\n            if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n                return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n            }\n\n            return hex.join(\"\");\n        }\n\n        // `equals`\n        // Can be called with any tinycolor input\n        tinycolor.equals = function (color1, color2) {\n            if (!color1 || !color2) { return false; }\n            return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n        };\n        tinycolor.random = function() {\n            return tinycolor.fromRatio({\n                r: mathRandom(),\n                g: mathRandom(),\n                b: mathRandom()\n            });\n        };\n\n\n        // Modification Functions\n        // ----------------------\n        // Thanks to less.js for some of the basics here\n        // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n\n        tinycolor.desaturate = function (color, amount) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.s -= ((amount || 10) / 100);\n            hsl.s = clamp01(hsl.s);\n            return tinycolor(hsl);\n        };\n        tinycolor.saturate = function (color, amount) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.s += ((amount || 10) / 100);\n            hsl.s = clamp01(hsl.s);\n            return tinycolor(hsl);\n        };\n        tinycolor.greyscale = function(color) {\n            return tinycolor.desaturate(color, 100);\n        };\n        tinycolor.lighten = function(color, amount) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.l += ((amount || 10) / 100);\n            hsl.l = clamp01(hsl.l);\n            return tinycolor(hsl);\n        };\n        tinycolor.darken = function (color, amount) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.l -= ((amount || 10) / 100);\n            hsl.l = clamp01(hsl.l);\n            return tinycolor(hsl);\n        };\n        tinycolor.complement = function(color) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.h = (hsl.h + 180) % 360;\n            return tinycolor(hsl);\n        };\n\n\n        // Combination Functions\n        // ---------------------\n        // Thanks to jQuery xColor for some of the ideas behind these\n        // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n        tinycolor.triad = function(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n            ];\n        };\n        tinycolor.tetrad = function(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n            ];\n        };\n        tinycolor.splitcomplement = function(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n                tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n            ];\n        };\n        tinycolor.analogous = function(color, results, slices) {\n            results = results || 6;\n            slices = slices || 30;\n\n            var hsl = tinycolor(color).toHsl();\n            var part = 360 / slices;\n            var ret = [tinycolor(color)];\n\n            for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n                hsl.h = (hsl.h + part) % 360;\n                ret.push(tinycolor(hsl));\n            }\n            return ret;\n        };\n        tinycolor.monochromatic = function(color, results) {\n            results = results || 6;\n            var hsv = tinycolor(color).toHsv();\n            var h = hsv.h, s = hsv.s, v = hsv.v;\n            var ret = [];\n            var modification = 1 / results;\n\n            while (results--) {\n                ret.push(tinycolor({ h: h, s: s, v: v}));\n                v = (v + modification) % 1;\n            }\n\n            return ret;\n        };\n\n        // Readability Functions\n        // ---------------------\n        // <http://www.w3.org/TR/AERT#color-contrast>\n\n        // `readability`\n        // Analyze the 2 colors and returns an object with the following properties:\n        //    `brightness`: difference in brightness between the two colors\n        //    `color`: difference in color/hue between the two colors\n        tinycolor.readability = function(color1, color2) {\n            var a = tinycolor(color1).toRgb();\n            var b = tinycolor(color2).toRgb();\n            var brightnessA = (a.r * 299 + a.g * 587 + a.b * 114) / 1000;\n            var brightnessB = (b.r * 299 + b.g * 587 + b.b * 114) / 1000;\n            var colorDiff = (\n                Math.max(a.r, b.r) - Math.min(a.r, b.r) +\n                Math.max(a.g, b.g) - Math.min(a.g, b.g) +\n                Math.max(a.b, b.b) - Math.min(a.b, b.b)\n            );\n\n            return {\n                brightness: Math.abs(brightnessA - brightnessB),\n                color: colorDiff\n            };\n        };\n\n        // `readable`\n        // http://www.w3.org/TR/AERT#color-contrast\n        // Ensure that foreground and background color combinations provide sufficient contrast.\n        // *Example*\n        //    tinycolor.readable(\"#000\", \"#111\") => false\n        tinycolor.readable = function(color1, color2) {\n            var readability = tinycolor.readability(color1, color2);\n            return readability.brightness > 125 && readability.color > 500;\n        };\n\n        // `mostReadable`\n        // Given a base color and a list of possible foreground or background\n        // colors for that base, returns the most readable color.\n        // *Example*\n        //    tinycolor.mostReadable(\"#123\", [\"#fff\", \"#000\"]) => \"#000\"\n        tinycolor.mostReadable = function(baseColor, colorList) {\n            var bestColor = null;\n            var bestScore = 0;\n            var bestIsReadable = false;\n            for (var i=0; i < colorList.length; i++) {\n\n                // We normalize both around the \"acceptable\" breaking point,\n                // but rank brightness constrast higher than hue.\n\n                var readability = tinycolor.readability(baseColor, colorList[i]);\n                var readable = readability.brightness > 125 && readability.color > 500;\n                var score = 3 * (readability.brightness / 125) + (readability.color / 500);\n\n                if ((readable && ! bestIsReadable) ||\n                    (readable && bestIsReadable && score > bestScore) ||\n                    ((! readable) && (! bestIsReadable) && score > bestScore)) {\n                    bestIsReadable = readable;\n                    bestScore = score;\n                    bestColor = tinycolor(colorList[i]);\n                }\n            }\n            return bestColor;\n        };\n\n\n        // Big List of Colors\n        // ------------------\n        // <http://www.w3.org/TR/css3-color/#svg-color>\n        var names = tinycolor.names = {\n            aliceblue: \"f0f8ff\",\n            antiquewhite: \"faebd7\",\n            aqua: \"0ff\",\n            aquamarine: \"7fffd4\",\n            azure: \"f0ffff\",\n            beige: \"f5f5dc\",\n            bisque: \"ffe4c4\",\n            black: \"000\",\n            blanchedalmond: \"ffebcd\",\n            blue: \"00f\",\n            blueviolet: \"8a2be2\",\n            brown: \"a52a2a\",\n            burlywood: \"deb887\",\n            burntsienna: \"ea7e5d\",\n            cadetblue: \"5f9ea0\",\n            chartreuse: \"7fff00\",\n            chocolate: \"d2691e\",\n            coral: \"ff7f50\",\n            cornflowerblue: \"6495ed\",\n            cornsilk: \"fff8dc\",\n            crimson: \"dc143c\",\n            cyan: \"0ff\",\n            darkblue: \"00008b\",\n            darkcyan: \"008b8b\",\n            darkgoldenrod: \"b8860b\",\n            darkgray: \"a9a9a9\",\n            darkgreen: \"006400\",\n            darkgrey: \"a9a9a9\",\n            darkkhaki: \"bdb76b\",\n            darkmagenta: \"8b008b\",\n            darkolivegreen: \"556b2f\",\n            darkorange: \"ff8c00\",\n            darkorchid: \"9932cc\",\n            darkred: \"8b0000\",\n            darksalmon: \"e9967a\",\n            darkseagreen: \"8fbc8f\",\n            darkslateblue: \"483d8b\",\n            darkslategray: \"2f4f4f\",\n            darkslategrey: \"2f4f4f\",\n            darkturquoise: \"00ced1\",\n            darkviolet: \"9400d3\",\n            deeppink: \"ff1493\",\n            deepskyblue: \"00bfff\",\n            dimgray: \"696969\",\n            dimgrey: \"696969\",\n            dodgerblue: \"1e90ff\",\n            firebrick: \"b22222\",\n            floralwhite: \"fffaf0\",\n            forestgreen: \"228b22\",\n            fuchsia: \"f0f\",\n            gainsboro: \"dcdcdc\",\n            ghostwhite: \"f8f8ff\",\n            gold: \"ffd700\",\n            goldenrod: \"daa520\",\n            gray: \"808080\",\n            green: \"008000\",\n            greenyellow: \"adff2f\",\n            grey: \"808080\",\n            honeydew: \"f0fff0\",\n            hotpink: \"ff69b4\",\n            indianred: \"cd5c5c\",\n            indigo: \"4b0082\",\n            ivory: \"fffff0\",\n            khaki: \"f0e68c\",\n            lavender: \"e6e6fa\",\n            lavenderblush: \"fff0f5\",\n            lawngreen: \"7cfc00\",\n            lemonchiffon: \"fffacd\",\n            lightblue: \"add8e6\",\n            lightcoral: \"f08080\",\n            lightcyan: \"e0ffff\",\n            lightgoldenrodyellow: \"fafad2\",\n            lightgray: \"d3d3d3\",\n            lightgreen: \"90ee90\",\n            lightgrey: \"d3d3d3\",\n            lightpink: \"ffb6c1\",\n            lightsalmon: \"ffa07a\",\n            lightseagreen: \"20b2aa\",\n            lightskyblue: \"87cefa\",\n            lightslategray: \"789\",\n            lightslategrey: \"789\",\n            lightsteelblue: \"b0c4de\",\n            lightyellow: \"ffffe0\",\n            lime: \"0f0\",\n            limegreen: \"32cd32\",\n            linen: \"faf0e6\",\n            magenta: \"f0f\",\n            maroon: \"800000\",\n            mediumaquamarine: \"66cdaa\",\n            mediumblue: \"0000cd\",\n            mediumorchid: \"ba55d3\",\n            mediumpurple: \"9370db\",\n            mediumseagreen: \"3cb371\",\n            mediumslateblue: \"7b68ee\",\n            mediumspringgreen: \"00fa9a\",\n            mediumturquoise: \"48d1cc\",\n            mediumvioletred: \"c71585\",\n            midnightblue: \"191970\",\n            mintcream: \"f5fffa\",\n            mistyrose: \"ffe4e1\",\n            moccasin: \"ffe4b5\",\n            navajowhite: \"ffdead\",\n            navy: \"000080\",\n            oldlace: \"fdf5e6\",\n            olive: \"808000\",\n            olivedrab: \"6b8e23\",\n            orange: \"ffa500\",\n            orangered: \"ff4500\",\n            orchid: \"da70d6\",\n            palegoldenrod: \"eee8aa\",\n            palegreen: \"98fb98\",\n            paleturquoise: \"afeeee\",\n            palevioletred: \"db7093\",\n            papayawhip: \"ffefd5\",\n            peachpuff: \"ffdab9\",\n            peru: \"cd853f\",\n            pink: \"ffc0cb\",\n            plum: \"dda0dd\",\n            powderblue: \"b0e0e6\",\n            purple: \"800080\",\n            red: \"f00\",\n            rosybrown: \"bc8f8f\",\n            royalblue: \"4169e1\",\n            saddlebrown: \"8b4513\",\n            salmon: \"fa8072\",\n            sandybrown: \"f4a460\",\n            seagreen: \"2e8b57\",\n            seashell: \"fff5ee\",\n            sienna: \"a0522d\",\n            silver: \"c0c0c0\",\n            skyblue: \"87ceeb\",\n            slateblue: \"6a5acd\",\n            slategray: \"708090\",\n            slategrey: \"708090\",\n            snow: \"fffafa\",\n            springgreen: \"00ff7f\",\n            steelblue: \"4682b4\",\n            tan: \"d2b48c\",\n            teal: \"008080\",\n            thistle: \"d8bfd8\",\n            tomato: \"ff6347\",\n            turquoise: \"40e0d0\",\n            violet: \"ee82ee\",\n            wheat: \"f5deb3\",\n            white: \"fff\",\n            whitesmoke: \"f5f5f5\",\n            yellow: \"ff0\",\n            yellowgreen: \"9acd32\"\n        };\n\n        // Make it easy to access colors via `hexNames[hex]`\n        var hexNames = tinycolor.hexNames = flip(names);\n\n\n        // Utilities\n        // ---------\n\n        // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n        function flip(o) {\n            var flipped = { };\n            for (var i in o) {\n                if (o.hasOwnProperty(i)) {\n                    flipped[o[i]] = i;\n                }\n            }\n            return flipped;\n        }\n\n        // Take input from [0, n] and return it as [0, 1]\n        function bound01(n, max) {\n            if (isOnePointZero(n)) { n = \"100%\"; }\n\n            var processPercent = isPercentage(n);\n            n = mathMin(max, mathMax(0, parseFloat(n)));\n\n            // Automatically convert percentage into number\n            if (processPercent) {\n                n = parseInt(n * max, 10) / 100;\n            }\n\n            // Handle floating point rounding errors\n            if ((math.abs(n - max) < 0.000001)) {\n                return 1;\n            }\n\n            // Convert into [0, 1] range if it isn't already\n            return (n % max) / parseFloat(max);\n        }\n\n        // Force a number between 0 and 1\n        function clamp01(val) {\n            return mathMin(1, mathMax(0, val));\n        }\n\n        // Parse an integer into hex\n        function parseHex(val) {\n            return parseInt(val, 16);\n        }\n\n        // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n        // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n        function isOnePointZero(n) {\n            return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n        }\n\n        // Check to see if string passed in is a percentage\n        function isPercentage(n) {\n            return typeof n === \"string\" && n.indexOf('%') != -1;\n        }\n\n        // Force a hex value to have 2 characters\n        function pad2(c) {\n            return c.length == 1 ? '0' + c : '' + c;\n        }\n\n        // Replace a decimal with it's percentage value\n        function convertToPercentage(n) {\n            if (n <= 1) {\n                n = (n * 100) + \"%\";\n            }\n\n            return n;\n        }\n\n        var matchers = (function() {\n\n            // <http://www.w3.org/TR/css3-values/#integers>\n            var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n            // <http://www.w3.org/TR/css3-values/#number-value>\n            var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n            // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n            var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n            // Actual matching.\n            // Parentheses and commas are optional, but not required.\n            // Whitespace can take the place of commas or opening paren\n            var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n            var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n            return {\n                rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n                rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n                hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n                hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n                hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n                hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n                hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n            };\n        })();\n\n        // `stringInputToObject`\n        // Permissive string parsing.  Take in a number of formats, and output an object\n        // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n        function stringInputToObject(color) {\n\n            color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n            var named = false;\n            if (names[color]) {\n                color = names[color];\n                named = true;\n            }\n            else if (color == 'transparent') {\n                return { r: 0, g: 0, b: 0, a: 0 };\n            }\n\n            // Try to match string input using regular expressions.\n            // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n            // Just return an object and let the conversion functions handle that.\n            // This way the result will be the same whether the tinycolor is initialized with string or object.\n            var match;\n            if ((match = matchers.rgb.exec(color))) {\n                return { r: match[1], g: match[2], b: match[3] };\n            }\n            if ((match = matchers.rgba.exec(color))) {\n                return { r: match[1], g: match[2], b: match[3], a: match[4] };\n            }\n            if ((match = matchers.hsl.exec(color))) {\n                return { h: match[1], s: match[2], l: match[3] };\n            }\n            if ((match = matchers.hsla.exec(color))) {\n                return { h: match[1], s: match[2], l: match[3], a: match[4] };\n            }\n            if ((match = matchers.hsv.exec(color))) {\n                return { h: match[1], s: match[2], v: match[3] };\n            }\n            if ((match = matchers.hex6.exec(color))) {\n                return {\n                    r: parseHex(match[1]),\n                    g: parseHex(match[2]),\n                    b: parseHex(match[3]),\n                    format: named ? \"name\" : \"hex\"\n                };\n            }\n            if ((match = matchers.hex3.exec(color))) {\n                return {\n                    r: parseHex(match[1] + '' + match[1]),\n                    g: parseHex(match[2] + '' + match[2]),\n                    b: parseHex(match[3] + '' + match[3]),\n                    format: named ? \"name\" : \"hex\"\n                };\n            }\n\n            return false;\n        }\n\n        root.tinycolor = tinycolor;\n\n    })(this);\n\n    $(function () {\n        if ($.fn.spectrum.load) {\n            $.fn.spectrum.processNativeColorInputs();\n        }\n    });\n\n})(window, jQuery);\n\ndefine(\"colorpicker\", [\"jquery\"], function(){});\n\n",
    "define('strut/config/config',[],function () {\n\tvar config = {\n\t\tslide: {\n\t\t\tsize: {\n\t\t\t\twidth: 1024,\n\t\t\t\theight: 768\n\t\t\t},\n\t\t\toverviewSize: {\n\t\t\t\twidth: 75,\n\t\t\t\theight: 50\n\t\t\t}\n\t\t}\n\t};\n\n\tvar temp = localStorage.getItem(\"Strut_sessionMeta\");\n\ttry {\n\t\tvar sessionMeta = JSON.parse(temp);\n\t} catch (e) {\n\t}\n\n\tvar sessionMeta = sessionMeta || {\n\t\tgenerator_index: 0\n\t};\n\n\twindow.config = config;\n\twindow.sessionMeta = sessionMeta;\n\n\tif (window.sessionMeta.lastProvider == 'localstorage') {\n\t\t// This is a check to upgrade our storage mechanisms\n\t\twindow.sessionMeta.lastProvider = 'largelocalstorage';\n\t\twindow.__requiresStorageConversion = true;\n\t}\n\n\treturn config;\n});\n",
    "/**\nThe eventEmitter pattern from nodeJS ported to the browser.\n\n@author Matt Crinklaw\n*/\ndefine(\n'common/EventEmitter',[],function() {\n\tfunction EventEmitter() {\n\t\tif (!(this instanceof EventEmitter)) return new EventEmitter();\n\t\t\n\t\tthis._events = null;\n\n\t\tif (typeof(process) !== 'undefined' && typeof(process.nextTick) !== 'undefined') {\n\t\t\tthis._deferer = function(cb, topic, args) {\n\t\t\t\tprocess.nextTick(function() { cb(topic, args); } );\n\t\t\t};\n\t\t} else {\n\t\t\tthis._deferer = function(cb, topic, args) {\n\t\t\t\tsetTimeout(function () {cb(topic, args); }, 0);\n\t\t\t};\n\t\t}\n\n    };\n\n\tEventEmitter.prototype = {\n\t\t_listeners: function listeners(type) {\n\t\t\tvar events = this._events || (this._events = {});\n    \t\treturn events[type] || (events[type] = []);\n\t\t},\n\t\t\n\t\t_emit: function(topic, args) {\t\n\t\t\tif (topic instanceof Array)\n\t\t\t\ttopic = JSON.stringify(topic);\n\t\t\tif (!this._events) return;\n\t\t\tvar subs = this._events[topic];\n\t\t\tif (!subs) return;\n\t\t\t\n\t\t\tvar len = subs.length;\n\t\t\twhile(len--){\n\t\t\t\tvar sub = subs[len];\n\t\t\t\t// try {\n\t\t\t\t\tif (sub)\n\t\t\t\t\t\tsub.cb.apply(sub.context, args);\n\t\t\t\t// } catch(e) {\n\t\t\t\t// \tconsole.log(e.stack);\n\t\t\t\t// }\n\t\t\t}\n\t\t},\n\t\t\n\t\t_splice: function(args, start, end) {\n\t\t\targs = Array.prototype.slice.call(args);\n\t\t\treturn args.splice(start, end);\n\t\t},\n\t\t\n\t\t_indexOfSub: function(arr, cb, context) {\n\t\t\tfor (var i = 0; i < arr.length; ++i) {\n\t\t\t\tif (arr[i].cb === cb && arr[i].context === context)\n\t\t\t\t\treturn i;\n\t\t\t}\n\t\t\t\n\t\t\treturn -1;\n\t\t},\n\n\t\t/**\n\t\tPublish an event on the given topic\n\t\t*/\n\t\temit: function(topic) {\n\t\t\tvar args = arguments.length > 1 ? this._splice(arguments, 1, arguments.length) : [];\n\n            this._emit(topic, args);\n\t\t},\n\t\t\n\t\ttrigger: function() {\n\t\t\tthis.emit.apply(this, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\tPublish an event on the given topic on the next iteration \n\t\tthrough the event loop\n\t\t*/\n\t\temitDeferred: function(topic) {\n\t\t\tvar args = arguments.length > 1 ? this._splice(arguments, 1, arguments.length) : [];\n\t\t\tthis._deferer(emit, topic, args);\n\t\t},\n\n\t\t/**\n\t\tRegister a callback for the given topic.\n\t\tOptionally, a context may be provided.  The provided\n\t\tcontext will be used for the this argument to callback.\n\t\t*/\n\t\ton: function(topic, callback, context) {\n\t\t\tif (!callback)\n\t\t\t\tthrow \"Undefined callback provided\";\n\t\t\tif (topic instanceof Array)\n\t\t\t\ttopic = JSON.stringify(topic);\n\t\t\t\n\t\t\tvar subs = this._listeners(topic);\n\t\t\tvar index = this._indexOfSub(subs, callback, context);\n\t\t\tif (index < 0) {\n\t\t\t\tsubs.push({cb: callback, context: context});\n\t\t\t\tindex = subs.length - 1;\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\treturn {dispose: function() {\n\t\t\t\tself.removeListener(topic, callback, context);\n\t\t\t}};\n\t\t},\n\t\t\n\t\t/**\n\t\tRegister a callback that will be removed after\n\t\tits first notification\n\t\t*/\n\t\tonce: function(topic, callback, context) {\n\t\t\tvar holder = {sub: null};\n\t\t\tholder.sub = this.on(topic, function() {\n\t\t\t\tholder.sub.dispose();\n\t\t\t\tcallback.apply(context, arguments);\n\t\t\t});\n\t\t\t\n\t\t\treturn holder.sub;\n\t\t},\n\n\t\t/**\n\t\tremove a listener.  If the listener was registerd\n\t\twith a context, a context must be provided for its removal.\n\t\t*/\n\t\tremoveListener: function(topic, callback, context) {\n\t\t\tvar subs = this._listeners(topic);\n\t\t\t\n\t\t\tvar index = this._indexOfSub(subs, callback, context);\n\t\t\t\n\t\t    if (0 <= index)\n\t\t      subs.splice(index, 1);\n\t\t    \n\t\t    if (subs.length == 0)\n\t\t    \tdelete this._events[topic];\n\t\t},\n\t\t\n\t\tgetNumListeners: function(topic){\n\t\t\t\n\t\t\tvar numListeners = 0;\n\t\t\t\n\t\t\tif (this._events[topic]){\n\t\t\t\tnumListeners = this._events[topic].length;\n\t\t\t}\n\t\t\t\n\t\t\treturn numListeners;\n\t\t},\n\n\t\t\n\t\toff: function(topic, callback, context) {\n\t\t\tthis.removeListener(topic, callback, context);\n\t\t},\n\t\t\n\t\tremoveAllListeners: function() {\n\t\t\tthis._events = null;\n\t\t}\n\t};\n\t\n\treturn EventEmitter;\n});\n\n//try {\n//if (exports) {\n//exports.EventBus = EventBus;\n//}} catch (e) {}\n;\n",
    "define('common/collections/MultiMap',[],function() {\n\t\"use strict\";\n\tfunction MultiMap() {\n\t\tthis._map = {};\n\t}\n\n\tMultiMap.prototype = {\n\t\tput: function(key, val) {\n\t\t\tvar entries = this._map[key];\n\t\t\tif (entries == null) {\n\t\t\t\tentries = [];\n\t\t\t\tthis._map[key] = entries;\n\t\t\t}\n\n\t\t\tentries.push(val);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tputAll: function(key, vals) {\n\t\t\tvar entries = this._map[key];\n\t\t\tif (entries == null) {\n\t\t\t\t// We don't just do entries = vals\n\t\t\t\t// because someone may be modifyng vals elsewhere.\n\t\t\t\tentries = [];\n\t\t\t}\n\n\t\t\tthis._map[key] = entries.concat(vals);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tget: function(key) {\n\t\t\tvar result = this._map[key];\n\t\t\treturn result || [];\n\t\t},\n\n\t\t// We don't overload remove\n\t\t// since we allow null & undefined entries to be added.\n\t\tremove: function(key, val) {\n\t\t\tvar entries = this._map[key];\n\t\t\tvar idx = entries.indexOf(val);\n\n\t\t\tif (idx >= 0) {\n\t\t\t\tif (entries.length <= 1) {\n\t\t\t\t\tthis.removeAll(key);\n\t\t\t\t\treturn [];\n\t\t\t\t} else {\n\t\t\t\t\tentries.splice(idx, 1);\n\t\t\t\t\treturn entries;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tremoveAll: function(key) {\n\t\t\tdelete this._map[key];\n\t\t\treturn this;\n\t\t},\n\n\t\tputIfAbsent: function(key, val) {\n\t\t\tvar entries = this._map[key];\n\t\t\tif (entries == null) {\n\t\t\t\tentries = [];\n\t\t\t\tthis._map[key] = entries;\n\t\t\t}\n\n\t\t\tif (entries.indexOf(val) < 0)\n\t\t\t\tentries.push(val);\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\treturn MultiMap;\n});\n",
    "/*!\n * Lo-Dash v0.7.0 <http://lodash.com>\n * Copyright 2012 John-David Dalton <http://allyoucanleet.com/>\n * Based on Underscore.js 1.3.3, copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.\n * <http://documentcloud.github.com/underscore>\n * Available under MIT license <http://lodash.com/license>\n */\n;(function(window, undefined) {\n  'use strict';\n\n  console.log(\"LOADING LODASH!!!!\")\n\n  /** Detect free variable `exports` */\n  var freeExports = typeof exports == 'object' && exports &&\n    (typeof global == 'object' && global && global == global.global && (window = global), exports);\n\n  /** Native prototype shortcuts */\n  var ArrayProto = Array.prototype,\n      BoolProto = Boolean.prototype,\n      ObjectProto = Object.prototype,\n      NumberProto = Number.prototype,\n      StringProto = String.prototype;\n\n  /** Used to generate unique IDs */\n  var idCounter = 0;\n\n  /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */\n  var largeArraySize = 30;\n\n  /** Used to restore the original `_` reference in `noConflict` */\n  var oldDash = window._;\n\n  /** Used to detect delimiter values that should be processed by `tokenizeEvaluate` */\n  var reComplexDelimiter = /[-?+=!~*%&^<>|{(\\/]|\\[\\D|\\b(?:delete|in|instanceof|new|typeof|void)\\b/;\n\n  /** Used to match HTML entities */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#x27);/g;\n\n  /** Used to match empty string literals in compiled template source */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match regexp flags from their coerced string values */\n  var reFlags = /\\w*$/;\n\n  /** Used to insert the data object variable into compiled template source */\n  var reInsertVariable = /(?:__e|__t = )\\(\\s*(?![\\d\\s\"']|this\\.)/g;\n\n  /** Used to detect if a method is native */\n  var reNative = RegExp('^' +\n    (ObjectProto.valueOf + '')\n      .replace(/[.*+?^=!:${}()|[\\]\\/\\\\]/g, '\\\\$&')\n      .replace(/valueOf|for [^\\]]+/g, '.+?') + '$'\n  );\n\n  /** Used to ensure capturing order and avoid matches for undefined delimiters */\n  var reNoMatch = /($^)/;\n\n  /** Used to match HTML characters */\n  var reUnescapedHtml = /[&<>\"']/g;\n\n  /** Used to match unescaped characters in compiled string literals */\n  var reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n\n  /** Used to fix the JScript [[DontEnum]] bug */\n  var shadowed = [\n    'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',\n    'toLocaleString', 'toString', 'valueOf'\n  ];\n\n  /** Used to make template sourceURLs easier to identify */\n  var templateCounter = 0;\n\n  /** Native method shortcuts */\n  var concat = ArrayProto.concat,\n      hasOwnProperty = ObjectProto.hasOwnProperty,\n      push = ArrayProto.push,\n      propertyIsEnumerable = ObjectProto.propertyIsEnumerable,\n      slice = ArrayProto.slice,\n      toString = ObjectProto.toString;\n\n  /* Native method shortcuts for methods with the same name as other `lodash` methods */\n  var nativeBind = reNative.test(nativeBind = slice.bind) && nativeBind,\n      nativeFloor = Math.floor,\n      nativeIsArray = reNative.test(nativeIsArray = Array.isArray) && nativeIsArray,\n      nativeIsFinite = window.isFinite,\n      nativeKeys = reNative.test(nativeKeys = Object.keys) && nativeKeys,\n      nativeMax = Math.max,\n      nativeMin = Math.min,\n      nativeRandom = Math.random;\n\n  /** `Object#toString` result shortcuts */\n  var argsClass = '[object Arguments]',\n      arrayClass = '[object Array]',\n      boolClass = '[object Boolean]',\n      dateClass = '[object Date]',\n      funcClass = '[object Function]',\n      numberClass = '[object Number]',\n      objectClass = '[object Object]',\n      regexpClass = '[object RegExp]',\n      stringClass = '[object String]';\n\n  /** Timer shortcuts */\n  var clearTimeout = window.clearTimeout,\n      setTimeout = window.setTimeout;\n\n  /**\n   * Detect the JScript [[DontEnum]] bug:\n   *\n   * In IE < 9 an objects own properties, shadowing non-enumerable ones, are\n   * made non-enumerable as well.\n   */\n  var hasDontEnumBug;\n\n  /**\n   * Detect if `Array#shift` and `Array#splice` augment array-like objects\n   * incorrectly:\n   *\n   * Firefox < 10, IE compatibility mode, and IE < 9 have buggy Array `shift()`\n   * and `splice()` functions that fail to remove the last element, `value[0]`,\n   * of array-like objects even though the `length` property is set to `0`.\n   * The `shift()` method is buggy in IE 8 compatibility mode, while `splice()`\n   * is buggy regardless of mode in IE < 9 and buggy in compatibility mode in IE 9.\n   */\n  var hasObjectSpliceBug;\n\n  /** Detect if own properties are iterated after inherited properties (IE < 9) */\n  var iteratesOwnLast;\n\n  /** Detect if an `arguments` object's indexes are non-enumerable (IE < 9) */\n  var noArgsEnum = true;\n\n  (function() {\n    var object = { '0': 1, 'length': 1 },\n        props = [];\n\n    function ctor() { this.x = 1; }\n    ctor.prototype = { 'valueOf': 1, 'y': 1 };\n    for (var prop in new ctor) { props.push(prop); }\n    for (prop in arguments) { noArgsEnum = !prop; }\n\n    hasDontEnumBug = (props + '').length < 4;\n    iteratesOwnLast = props[0] != 'x';\n    hasObjectSpliceBug = (props.splice.call(object, 0, 1), object[0]);\n  }(1));\n\n  /** Detect if an `arguments` object's [[Class]] is unresolvable (Firefox < 4, IE < 9) */\n  var noArgsClass = !isArguments(arguments);\n\n  /** Detect if `Array#slice` cannot be used to convert strings to arrays (Opera < 10.52) */\n  var noArraySliceOnStrings = slice.call('x')[0] != 'x';\n\n  /**\n   * Detect lack of support for accessing string characters by index:\n   *\n   * IE < 8 can't access characters by index and IE 8 can only access\n   * characters by index on string literals.\n   */\n  var noCharByIndex = ('x'[0] + Object('x')[0]) != 'xx';\n\n  /**\n   * Detect if a node's [[Class]] is unresolvable (IE < 9)\n   * and that the JS engine won't error when attempting to coerce an object to\n   * a string without a `toString` property value of `typeof` \"function\".\n   */\n  try {\n    var noNodeClass = ({ 'toString': 0 } + '', toString.call(window.document || 0) == objectClass);\n  } catch(e) { }\n\n  /* Detect if `Function#bind` exists and is inferred to be fast (all but V8) */\n  var isBindFast = nativeBind && /\\n|Opera/.test(nativeBind + toString.call(window.opera));\n\n  /* Detect if `Object.keys` exists and is inferred to be fast (IE, Opera, V8) */\n  var isKeysFast = nativeKeys && /^.+$|true/.test(nativeKeys + !!window.attachEvent);\n\n  /* Detect if strict mode, \"use strict\", is inferred to be fast (V8) */\n  var isStrictFast = !isBindFast;\n\n  /**\n   * Detect if sourceURL syntax is usable without erroring:\n   *\n   * The JS engine in Adobe products, like InDesign, will throw a syntax error\n   * when it encounters a single line comment beginning with the `@` symbol.\n   *\n   * The JS engine in Narwhal will generate the function `function anonymous(){//}`\n   * and throw a syntax error.\n   *\n   * Avoid comments beginning `@` symbols in IE because they are part of its\n   * non-standard conditional compilation support.\n   * http://msdn.microsoft.com/en-us/library/121hztk3(v=vs.94).aspx\n   */\n  try {\n    var useSourceURL = (Function('//@')(), !window.attachEvent);\n  } catch(e) { }\n\n  /** Used to identify object classifications that are array-like */\n  var arrayLikeClasses = {};\n  arrayLikeClasses[boolClass] = arrayLikeClasses[dateClass] = arrayLikeClasses[funcClass] =\n  arrayLikeClasses[numberClass] = arrayLikeClasses[objectClass] = arrayLikeClasses[regexpClass] = false;\n  arrayLikeClasses[argsClass] = arrayLikeClasses[arrayClass] = arrayLikeClasses[stringClass] = true;\n\n  /** Used to identify object classifications that `_.clone` supports */\n  var cloneableClasses = {};\n  cloneableClasses[argsClass] = cloneableClasses[funcClass] = false;\n  cloneableClasses[arrayClass] = cloneableClasses[boolClass] = cloneableClasses[dateClass] =\n  cloneableClasses[numberClass] = cloneableClasses[objectClass] = cloneableClasses[regexpClass] =\n  cloneableClasses[stringClass] = true;\n\n  /**\n   * Used to convert characters to HTML entities:\n   *\n   * Though the `>` character is escaped for symmetry, characters like `>` and `/`\n   * don't require escaping in HTML and have no special meaning unless they're part\n   * of a tag or an unquoted attribute value.\n   * http://mathiasbynens.be/notes/ambiguous-ampersands (under \"semi-related fun fact\")\n   */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;'\n  };\n\n  /** Used to convert HTML entities to characters */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#x27;': \"'\"\n  };\n\n  /** Used to determine if values are of the language type Object */\n  var objectTypes = {\n    'boolean': false,\n    'function': true,\n    'object': true,\n    'number': false,\n    'string': false,\n    'undefined': false,\n    'unknown': true\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The `lodash` function.\n   *\n   * @name _\n   * @constructor\n   * @param {Mixed} value The value to wrap in a `LoDash` instance.\n   * @returns {Object} Returns a `LoDash` instance.\n   */\n  function lodash(value) {\n    // allow invoking `lodash` without the `new` operator\n    return new LoDash(value);\n  }\n\n  /**\n   * Creates a `LoDash` instance that wraps a value to allow chaining.\n   *\n   * @private\n   * @constructor\n   * @param {Mixed} value The value to wrap.\n   */\n  function LoDash(value) {\n    // exit early if already wrapped\n    if (value && value.__wrapped__) {\n      return value;\n    }\n    this.__wrapped__ = value;\n  }\n\n  /**\n   * By default, the template delimiters used by Lo-Dash are similar to those in\n   * embedded Ruby (ERB). Change the following template settings to use alternative\n   * delimiters.\n   *\n   * @static\n   * @memberOf _\n   * @type Object\n   */\n  lodash.templateSettings = {\n\n    /**\n     * Used to detect `data` property values to be HTML-escaped.\n     *\n     * @static\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'escape': /<%-([\\s\\S]+?)%>/g,\n\n    /**\n     * Used to detect code to be evaluated.\n     *\n     * @static\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'evaluate': /<%([\\s\\S]+?)%>/g,\n\n    /**\n     * Used to detect `data` property values to inject.\n     *\n     * @static\n     * @memberOf _.templateSettings\n     * @type RegExp\n     */\n    'interpolate': /<%=([\\s\\S]+?)%>/g,\n\n    /**\n     * Used to reference the data object in the template text.\n     *\n     * @static\n     * @memberOf _.templateSettings\n     * @type String\n     */\n    'variable': ''\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The template used to create iterator functions.\n   *\n   * @private\n   * @param {Obect} data The data object used to populate the text.\n   * @returns {String} Returns the interpolated text.\n   */\n  var iteratorTemplate = template(\n    // conditional strict mode\n    '<% if (useStrict) { %>\\'use strict\\';\\n<% } %>' +\n\n    // the `iteratee` may be reassigned by the `top` snippet\n    'var index, value, iteratee = <%= firstArg %>, ' +\n    // assign the `result` variable an initial value\n    'result<% if (init) { %> = <%= init %><% } %>;\\n' +\n    // add code to exit early or do so if the first argument is falsey\n    '<%= exit %>;\\n' +\n    // add code after the exit snippet but before the iteration branches\n    '<%= top %>;\\n' +\n\n    // the following branch is for iterating arrays and array-like objects\n    '<% if (arrayBranch) { %>' +\n    'var length = iteratee.length; index = -1;' +\n    '  <% if (objectBranch) { %>\\nif (length === +length) {<% } %>' +\n\n    // add support for accessing string characters by index if needed\n    '  <% if (noCharByIndex) { %>\\n' +\n    '  if (toString.call(iteratee) == stringClass) {\\n' +\n    '    iteratee = iteratee.split(\\'\\')\\n' +\n    '  }' +\n    '  <% } %>\\n' +\n\n    '  <%= arrayBranch.beforeLoop %>;\\n' +\n    '  while (++index < length) {\\n' +\n    '    value = iteratee[index];\\n' +\n    '    <%= arrayBranch.inLoop %>\\n' +\n    '  }' +\n    '  <% if (objectBranch) { %>\\n}<% } %>' +\n    '<% } %>' +\n\n    // the following branch is for iterating an object's own/inherited properties\n    '<% if (objectBranch) { %>' +\n    '  <% if (arrayBranch) { %>\\nelse {' +\n\n    // add support for iterating over `arguments` objects if needed\n    '  <%  } else if (noArgsEnum) { %>\\n' +\n    '  var length = iteratee.length; index = -1;\\n' +\n    '  if (length && isArguments(iteratee)) {\\n' +\n    '    while (++index < length) {\\n' +\n    '      value = iteratee[index += \\'\\'];\\n' +\n    '      <%= objectBranch.inLoop %>\\n' +\n    '    }\\n' +\n    '  } else {' +\n    '  <% } %>' +\n\n    // Firefox < 3.6, Opera > 9.50 - Opera < 11.60, and Safari < 5.1\n    // (if the prototype or a property on the prototype has been set)\n    // incorrectly sets a function's `prototype` property [[Enumerable]]\n    // value to `true`. Because of this Lo-Dash standardizes on skipping\n    // the the `prototype` property of functions regardless of its\n    // [[Enumerable]] value.\n    '  <% if (!hasDontEnumBug) { %>\\n' +\n    '  var skipProto = typeof iteratee == \\'function\\' && \\n' +\n    '    propertyIsEnumerable.call(iteratee, \\'prototype\\');\\n' +\n    '  <% } %>' +\n\n    // iterate own properties using `Object.keys` if it's fast\n    '  <% if (isKeysFast && useHas) { %>\\n' +\n    '  var ownIndex = -1,\\n' +\n    '      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\\n' +\n    '      length = ownProps.length;\\n\\n' +\n    '  <%= objectBranch.beforeLoop %>;\\n' +\n    '  while (++ownIndex < length) {\\n' +\n    '    index = ownProps[ownIndex];\\n' +\n    '    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == \\'prototype\\')) {\\n  <% } %>' +\n    '    value = iteratee[index];\\n' +\n    '    <%= objectBranch.inLoop %>\\n' +\n    '    <% if (!hasDontEnumBug) { %>}\\n<% } %>' +\n    '  }' +\n\n    // else using a for-in loop\n    '  <% } else { %>\\n' +\n    '  <%= objectBranch.beforeLoop %>;\\n' +\n    '  for (index in iteratee) {<%' +\n    '    if (!hasDontEnumBug || useHas) { %>\\n    if (<%' +\n    '      if (!hasDontEnumBug) { %>!(skipProto && index == \\'prototype\\')<% }' +\n    '      if (!hasDontEnumBug && useHas) { %> && <% }' +\n    '      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }' +\n    '    %>) {' +\n    '    <% } %>\\n' +\n    '    value = iteratee[index];\\n' +\n    '    <%= objectBranch.inLoop %>;' +\n    '    <% if (!hasDontEnumBug || useHas) { %>\\n    }<% } %>\\n' +\n    '  }' +\n    '  <% } %>' +\n\n    // Because IE < 9 can't set the `[[Enumerable]]` attribute of an\n    // existing property and the `constructor` property of a prototype\n    // defaults to non-enumerable, Lo-Dash skips the `constructor`\n    // property when it infers it's iterating over a `prototype` object.\n    '  <% if (hasDontEnumBug) { %>\\n\\n' +\n    '  var ctor = iteratee.constructor;\\n' +\n    '    <% for (var k = 0; k < 7; k++) { %>\\n' +\n    '  index = \\'<%= shadowed[k] %>\\';\\n' +\n    '  if (<%' +\n    '      if (shadowed[k] == \\'constructor\\') {' +\n    '        %>!(ctor && ctor.prototype === iteratee) && <%' +\n    '      } %>hasOwnProperty.call(iteratee, index)) {\\n' +\n    '    value = iteratee[index];\\n' +\n    '    <%= objectBranch.inLoop %>\\n' +\n    '  }' +\n    '    <% } %>' +\n    '  <% } %>' +\n    '  <% if (arrayBranch || noArgsEnum) { %>\\n}<% } %>' +\n    '<% } %>\\n' +\n\n    // add code to the bottom of the iteration function\n    '<%= bottom %>;\\n' +\n    // finally, return the `result`\n    'return result'\n  );\n\n  /**\n   * Reusable iterator options shared by\n   * `every`, `filter`, `find`, `forEach`, `forIn`, `forOwn`, `groupBy`, `map`,\n   * `reject`, `some`, and `sortBy`.\n   */\n  var baseIteratorOptions = {\n    'args': 'collection, callback, thisArg',\n    'init': 'collection',\n    'top':\n      'if (!callback) {\\n' +\n      '  callback = identity\\n' +\n      '}\\n' +\n      'else if (thisArg) {\\n' +\n      '  callback = bindIterator(callback, thisArg)\\n' +\n      '}',\n    'inLoop': 'if (callback(value, index, collection) === false) return result'\n  };\n\n  /** Reusable iterator options for `countBy`, `groupBy`, and `sortBy` */\n  var countByIteratorOptions = {\n    'init': '{}',\n    'top':\n      'var prop;\\n' +\n      'if (typeof callback != \\'function\\') {\\n' +\n      '  var valueProp = callback;\\n' +\n      '  callback = function(value) { return value[valueProp] }\\n' +\n      '}\\n' +\n      'else if (thisArg) {\\n' +\n      '  callback = bindIterator(callback, thisArg)\\n' +\n      '}',\n    'inLoop':\n      'prop = callback(value, index, collection);\\n' +\n      '(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)'\n  };\n\n  /** Reusable iterator options for `every` and `some` */\n  var everyIteratorOptions = {\n    'init': 'true',\n    'inLoop': 'if (!callback(value, index, collection)) return !result'\n  };\n\n  /** Reusable iterator options for `defaults` and `extend` */\n  var extendIteratorOptions = {\n    'useHas': false,\n    'useStrict': false,\n    'args': 'object',\n    'init': 'object',\n    'top':\n      'for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\\n' +\n      '  if (iteratee = arguments[argsIndex]) {',\n    'inLoop': 'result[index] = value',\n    'bottom': '  }\\n}'\n  };\n\n  /** Reusable iterator options for `filter`, `reject`, and `where` */\n  var filterIteratorOptions = {\n    'init': '[]',\n    'inLoop': 'callback(value, index, collection) && result.push(value)'\n  };\n\n  /** Reusable iterator options for `find`, `forEach`, `forIn`, and `forOwn` */\n  var forEachIteratorOptions = {\n    'top': 'if (thisArg) callback = bindIterator(callback, thisArg)'\n  };\n\n  /** Reusable iterator options for `forIn` and `forOwn` */\n  var forOwnIteratorOptions = {\n    'inLoop': {\n      'object': baseIteratorOptions.inLoop\n    }\n  };\n\n  /** Reusable iterator options for `invoke`, `map`, `pluck`, and `sortBy` */\n  var mapIteratorOptions = {\n    'init': '',\n    'exit': 'if (!collection) return []',\n    'beforeLoop': {\n      'array':  'result = Array(length)',\n      'object': 'result = ' + (isKeysFast ? 'Array(length)' : '[]')\n    },\n    'inLoop': {\n      'array':  'result[index] = callback(value, index, collection)',\n      'object': 'result' + (isKeysFast ? '[ownIndex] = ' : '.push') + '(callback(value, index, collection))'\n    }\n  };\n\n  /** Reusable iterator options for `omit` and `pick` */\n  var omitIteratorOptions = {\n    'useHas': false,\n    'args': 'object, callback, thisArg',\n    'init': '{}',\n    'top':\n      'var isFunc = typeof callback == \\'function\\';\\n' +\n      'if (!isFunc) {\\n' +\n      '  var props = concat.apply(ArrayProto, arguments)\\n' +\n      '} else if (thisArg) {\\n' +\n      '  callback = bindIterator(callback, thisArg)\\n' +\n      '}',\n    'inLoop':\n      'if (isFunc\\n' +\n      '  ? !callback(value, index, object)\\n' +\n      '  : indexOf(props, index) < 0\\n' +\n      ') result[index] = value'\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a bound iterator function that, when called, invokes `func` with\n   * the `this` binding of `thisArg` and the arguments (value, index, object).\n   *\n   * @private\n   * @param {Function} func The function to bind.\n   * @param {Mixed} [thisArg] The `this` binding of `func`.\n   * @returns {Function} Returns the new bound function.\n   */\n  function bindIterator(func, thisArg) {\n    return function(value, index, object) {\n      return func.call(thisArg, value, index, object);\n    };\n  }\n\n  /**\n   * Creates a function optimized for searching large arrays for a given `value`,\n   * starting at `fromIndex`, using strict equality for comparisons, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {Mixed} value The value to search for.\n   * @param {Number} [fromIndex=0] The index to start searching from.\n   * @param {Number} [largeSize=30] The length at which an array is considered large.\n   * @returns {Boolean} Returns `true` if `value` is found, else `false`.\n   */\n  function cachedContains(array, fromIndex, largeSize) {\n    fromIndex || (fromIndex = 0);\n\n    var length = array.length,\n        isLarge = (length - fromIndex) >= (largeSize || largeArraySize),\n        cache = isLarge ? {} : array;\n\n    if (isLarge) {\n      // init value cache\n      var key,\n          index = fromIndex - 1;\n\n      while (++index < length) {\n        // manually coerce `value` to string because `hasOwnProperty`, in some\n        // older versions of Firefox, coerces objects incorrectly\n        key = array[index] + '';\n        (hasOwnProperty.call(cache, key) ? cache[key] : (cache[key] = [])).push(array[index]);\n      }\n    }\n    return function(value) {\n      if (isLarge) {\n        var key = value + '';\n        return hasOwnProperty.call(cache, key) && indexOf(cache[key], value) > -1;\n      }\n      return indexOf(cache, value, fromIndex) > -1;\n    }\n  }\n\n  /**\n   * Used by `sortBy` to compare transformed `collection` values, stable sorting\n   * them in ascending order.\n   *\n   * @private\n   * @param {Object} a The object to compare to `b`.\n   * @param {Object} b The object to compare to `a`.\n   * @returns {Number} Returns the sort order indicator of `1` or `-1`.\n   */\n  function compareAscending(a, b) {\n    var ai = a.index,\n        bi = b.index;\n\n    a = a.criteria;\n    b = b.criteria;\n\n    // ensure a stable sort in V8 and other engines\n    // http://code.google.com/p/v8/issues/detail?id=90\n    if (a !== b) {\n      if (a > b || a === undefined) {\n        return 1;\n      }\n      if (a < b || b === undefined) {\n        return -1;\n      }\n    }\n    return ai < bi ? -1 : 1;\n  }\n\n  /**\n   * Creates a function that, when called, invokes `func` with the `this`\n   * binding of `thisArg` and prepends any `partailArgs` to the arguments passed\n   * to the bound function.\n   *\n   * @private\n   * @param {Function|String} func The function to bind or the method name.\n   * @param {Mixed} [thisArg] The `this` binding of `func`.\n   * @param {Array} partialArgs An array of arguments to be partially applied.\n   * @returns {Function} Returns the new bound function.\n   */\n  function createBound(func, thisArg, partialArgs) {\n    var isFunc = isFunction(func),\n        isPartial = !partialArgs,\n        methodName = func;\n\n    // juggle arguments\n    if (isPartial) {\n      partialArgs = thisArg;\n    }\n\n    function bound() {\n      // `Function#bind` spec\n      // http://es5.github.com/#x15.3.4.5\n      var args = arguments,\n          thisBinding = isPartial ? this : thisArg;\n\n      if (!isFunc) {\n        func = thisArg[methodName];\n      }\n      if (partialArgs.length) {\n        args = args.length\n          ? partialArgs.concat(slice.call(args))\n          : partialArgs;\n      }\n      if (this instanceof bound) {\n        // get `func` instance if `bound` is invoked in a `new` expression\n        noop.prototype = func.prototype;\n        thisBinding = new noop;\n\n        // mimic the constructor's `return` behavior\n        // http://es5.github.com/#x13.2.2\n        var result = func.apply(thisBinding, args);\n        return result && objectTypes[typeof result]\n          ? result\n          : thisBinding\n      }\n      return func.apply(thisBinding, args);\n    }\n    return bound;\n  }\n\n  /**\n   * Creates compiled iteration functions. The iteration function will be created\n   * to iterate over only objects if the first argument of `options.args` is\n   * \"object\" or `options.inLoop.array` is falsey.\n   *\n   * @private\n   * @param {Object} [options1, options2, ...] The compile options objects.\n   *\n   *  useHas - A boolean to specify whether or not to use `hasOwnProperty` checks\n   *   in the object loop.\n   *\n   *  useStrict - A boolean to specify whether or not to include the ES5\n   *   \"use strict\" directive.\n   *\n   *  args - A string of comma separated arguments the iteration function will\n   *   accept.\n   *\n   *  init - A string to specify the initial value of the `result` variable.\n   *\n   *  exit - A string of code to use in place of the default exit-early check\n   *   of `if (!arguments[0]) return result`.\n   *\n   *  top - A string of code to execute after the exit-early check but before\n   *   the iteration branches.\n   *\n   *  beforeLoop - A string or object containing an \"array\" or \"object\" property\n   *   of code to execute before the array or object loops.\n   *\n   *  inLoop - A string or object containing an \"array\" or \"object\" property\n   *   of code to execute in the array or object loops.\n   *\n   *  bottom - A string of code to execute after the iteration branches but\n   *   before the `result` is returned.\n   *\n   * @returns {Function} Returns the compiled function.\n   */\n  function createIterator() {\n    var object,\n        prop,\n        value,\n        index = -1,\n        length = arguments.length;\n\n    // merge options into a template data object\n    var data = {\n      'bottom': '',\n      'exit': '',\n      'init': '',\n      'top': '',\n      'arrayBranch': { 'beforeLoop': '' },\n      'objectBranch': { 'beforeLoop': '' }\n    };\n\n    while (++index < length) {\n      object = arguments[index];\n      for (prop in object) {\n        value = (value = object[prop]) == null ? '' : value;\n        // keep this regexp explicit for the build pre-process\n        if (/beforeLoop|inLoop/.test(prop)) {\n          if (typeof value == 'string') {\n            value = { 'array': value, 'object': value };\n          }\n          data.arrayBranch[prop] = value.array || '';\n          data.objectBranch[prop] = value.object || '';\n        } else {\n          data[prop] = value;\n        }\n      }\n    }\n    // set additional template `data` values\n    var args = data.args,\n        firstArg = /^[^,]+/.exec(args)[0],\n        useStrict = data.useStrict;\n\n    data.firstArg = firstArg;\n    data.hasDontEnumBug = hasDontEnumBug;\n    data.isKeysFast = isKeysFast;\n    data.noArgsEnum = noArgsEnum;\n    data.shadowed = shadowed;\n    data.useHas = data.useHas !== false;\n    data.useStrict = useStrict == null ? isStrictFast : useStrict;\n\n    if (data.noCharByIndex == null) {\n      data.noCharByIndex = noCharByIndex;\n    }\n    if (!data.exit) {\n      data.exit = 'if (!' + firstArg + ') return result';\n    }\n    if (firstArg != 'collection' || !data.arrayBranch.inLoop) {\n      data.arrayBranch = null;\n    }\n    // create the function factory\n    var factory = Function(\n        'arrayLikeClasses, ArrayProto, bind, bindIterator, compareAscending, concat, ' +\n        'forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, ' +\n        'isPlainObject, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, ' +\n        'slice, stringClass, toString',\n      'var callee = function(' + args + ') {\\n' + iteratorTemplate(data) + '\\n};\\n' +\n      'return callee'\n    );\n    // return the compiled function\n    return factory(\n      arrayLikeClasses, ArrayProto, bind, bindIterator, compareAscending, concat,\n      forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction,\n      isPlainObject, objectClass, objectTypes, nativeKeys, propertyIsEnumerable,\n      slice, stringClass, toString\n    );\n  }\n\n  /**\n   * Used by `template` to escape characters for inclusion in compiled\n   * string literals.\n   *\n   * @private\n   * @param {String} match The matched character to escape.\n   * @returns {String} Returns the escaped character.\n   */\n  function escapeStringChar(match) {\n    return '\\\\' + stringEscapes[match];\n  }\n\n  /**\n   * Used by `escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {String} match The matched character to escape.\n   * @returns {String} Returns the escaped character.\n   */\n  function escapeHtmlChar(match) {\n    return htmlEscapes[match];\n  }\n\n  /**\n   * A no-operation function.\n   *\n   * @private\n   */\n  function noop() {\n    // no operation performed\n  }\n\n  /**\n   * Used by `unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {String} match The matched character to unescape.\n   * @returns {String} Returns the unescaped character.\n   */\n  function unescapeHtmlChar(match) {\n    return htmlUnescapes[match];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Checks if `value` is an `arguments` object.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is an `arguments` object, else `false`.\n   * @example\n   *\n   * (function() { return _.isArguments(arguments); })(1, 2, 3);\n   * // => true\n   *\n   * _.isArguments([1, 2, 3]);\n   * // => false\n   */\n  function isArguments(value) {\n    return toString.call(value) == argsClass;\n  }\n  // fallback for browsers that can't detect `arguments` objects by [[Class]]\n  if (noArgsClass) {\n    isArguments = function(value) {\n      return !!(value && hasOwnProperty.call(value, 'callee'));\n    };\n  }\n\n  /**\n   * Checks if `value` is an array.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is an array, else `false`.\n   * @example\n   *\n   * (function() { return _.isArray(arguments); })();\n   * // => false\n   *\n   * _.isArray([1, 2, 3]);\n   * // => true\n   */\n  var isArray = nativeIsArray || function(value) {\n    return toString.call(value) == arrayClass;\n  };\n\n  /**\n   * Checks if `value` is a function.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a function, else `false`.\n   * @example\n   *\n   * _.isFunction(''.concat);\n   * // => true\n   */\n  function isFunction(value) {\n    return typeof value == 'function';\n  }\n  // fallback for older versions of Chrome and Safari\n  if (isFunction(/x/)) {\n    isFunction = function(value) {\n      return toString.call(value) == funcClass;\n    };\n  }\n\n  /**\n   * A fallback implementation of `isPlainObject` that checks if a given `value`\n   * is an object created by the `Object` constructor, assuming objects created\n   * by the `Object` constructor have no inherited enumerable properties and that\n   * there are no `Object.prototype` extensions.\n   *\n   * @private\n   * @param {Mixed} value The value to check.\n   * @param {Boolean} [skipArgsCheck=false] Internally used to skip checks for\n   *  `arguments` objects.\n   * @returns {Boolean} Returns `true` if `value` is a plain object, else `false`.\n   */\n  function isPlainFallback(value, skipArgsCheck) {\n    // avoid non-objects and false positives for `arguments` objects\n    var result = false;\n    if (!(value && typeof value == 'object') || (!skipArgsCheck && isArguments(value))) {\n      return result;\n    }\n    // IE < 9 presents DOM nodes as `Object` objects except they have `toString`\n    // methods that are `typeof` \"string\" and still can coerce nodes to strings.\n    // Also check that the constructor is `Object` (i.e. `Object instanceof Object`)\n    var ctor = value.constructor;\n    if ((!noNodeClass || !(typeof value.toString != 'function' && typeof (value + '') == 'string')) &&\n        (!isFunction(ctor) || ctor instanceof ctor)) {\n      // IE < 9 iterates inherited properties before own properties. If the first\n      // iterated property is an object's own property then there are no inherited\n      // enumerable properties.\n      if (iteratesOwnLast) {\n        forIn(value, function(value, key, object) {\n          result = !hasOwnProperty.call(object, key);\n          return false;\n        });\n        return result === false;\n      }\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      forIn(value, function(value, key) {\n        result = key;\n      });\n      return result === false || hasOwnProperty.call(value, result);\n    }\n    return result;\n  }\n\n  /**\n   * Checks if a given `value` is an object created by the `Object` constructor.\n   *\n   * @private\n   * @param {Mixed} value The value to check.\n   * @param {Boolean} [skipArgsCheck=false] Internally used to skip checks for\n   *  `arguments` objects.\n   * @returns {Boolean} Returns `true` if `value` is a plain object, else `false`.\n   */\n  var isPlainObject = objectTypes.__proto__ != ObjectProto ? isPlainFallback : function(value, skipArgsCheck) {\n    if (!value) {\n      return false;\n    }\n    var valueOf = value.valueOf,\n        objProto = typeof valueOf == 'function' && (objProto = valueOf.__proto__) && objProto.__proto__;\n\n    return objProto\n      ? value == objProto || (value.__proto__ == objProto && (skipArgsCheck || !isArguments(value)))\n      : isPlainFallback(value);\n  };\n\n  /**\n   * A shim implementation of `Object.keys` that produces an array of the given\n   * object's own enumerable property names.\n   *\n   * @private\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns a new array of property names.\n   */\n  var shimKeys = createIterator({\n    'args': 'object',\n    'init': '[]',\n    'inLoop': 'result.push(index)'\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a clone of `value`. If `deep` is `true`, all nested objects will\n   * also be cloned otherwise they will be assigned by reference. Functions, DOM\n   * nodes, `arguments` objects, and objects created by constructors other than\n   * `Object` are **not** cloned.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to clone.\n   * @param {Boolean} deep A flag to indicate a deep clone.\n   * @param {Object} [guard] Internally used to allow this method to work with\n   *  others like `_.map` without using their callback `index` argument for `deep`.\n   * @param {Array} [stackA=[]] Internally used to track traversed source objects.\n   * @param {Array} [stackB=[]] Internally used to associate clones with their\n   *  source counterparts.\n   * @returns {Mixed} Returns the cloned `value`.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe', 'age': 40 },\n   *   { 'name': 'larry', 'age': 50 },\n   *   { 'name': 'curly', 'age': 60 }\n   * ];\n   *\n   * _.clone({ 'name': 'moe' });\n   * // => { 'name': 'moe' }\n   *\n   * var shallow = _.clone(stooges);\n   * shallow[0] === stooges[0];\n   * // => true\n   *\n   * var deep = _.clone(stooges, true);\n   * shallow[0] === stooges[0];\n   * // => false\n   */\n  function clone(value, deep, guard, stackA, stackB) {\n    if (value == null) {\n      return value;\n    }\n    if (guard) {\n      deep = false;\n    }\n    // inspect [[Class]]\n    var isObj = objectTypes[typeof value];\n    if (isObj) {\n      // don't clone `arguments` objects, functions, or non-object Objects\n      var className = toString.call(value);\n      if (!cloneableClasses[className] || (noArgsClass && isArguments(value))) {\n        return value;\n      }\n      var isArr = className == arrayClass;\n      isObj = isArr || (className == objectClass ? isPlainObject(value, true) : isObj);\n    }\n    // shallow clone\n    if (!isObj || !deep) {\n      // don't clone functions\n      return isObj\n        ? (isArr ? slice.call(value) : extend({}, value))\n        : value;\n    }\n\n    var ctor = value.constructor;\n    switch (className) {\n      case boolClass:\n        return new ctor(value == true);\n\n      case dateClass:\n        return new ctor(+value);\n\n      case numberClass:\n      case stringClass:\n        return new ctor(value);\n\n      case regexpClass:\n        return ctor(value.source, reFlags.exec(value));\n    }\n\n    // check for circular references and return corresponding clone\n    stackA || (stackA = []);\n    stackB || (stackB = []);\n\n    var length = stackA.length;\n    while (length--) {\n      if (stackA[length] == value) {\n        return stackB[length];\n      }\n    }\n\n    // init cloned object\n    var result = isArr ? ctor(length = value.length) : {};\n\n    // add the source value to the stack of traversed objects\n    // and associate it with its clone\n    stackA.push(value);\n    stackB.push(result);\n\n    // recursively populate clone (susceptible to call stack limits)\n    if (isArr) {\n      var index = -1;\n      while (++index < length) {\n        result[index] = clone(value[index], deep, null, stackA, stackB);\n      }\n    } else {\n      forOwn(value, function(objValue, key) {\n        result[key] = clone(objValue, deep, null, stackA, stackB);\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Assigns enumerable properties of the default object(s) to the `destination`\n   * object for all `destination` properties that resolve to `null`/`undefined`.\n   * Once a property is set, additional defaults of the same property will be\n   * ignored.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The destination object.\n   * @param {Object} [default1, default2, ...] The default objects.\n   * @returns {Object} Returns the destination object.\n   * @example\n   *\n   * var iceCream = { 'flavor': 'chocolate' };\n   * _.defaults(iceCream, { 'flavor': 'vanilla', 'sprinkles': 'rainbow' });\n   * // => { 'flavor': 'chocolate', 'sprinkles': 'rainbow' }\n   */\n  var defaults = createIterator(extendIteratorOptions, {\n    'inLoop': 'if (result[index] == null) ' + extendIteratorOptions.inLoop\n  });\n\n  /**\n   * Assigns enumerable properties of the source object(s) to the `destination`\n   * object. Subsequent sources will overwrite propery assignments of previous\n   * sources.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The destination object.\n   * @param {Object} [source1, source2, ...] The source objects.\n   * @returns {Object} Returns the destination object.\n   * @example\n   *\n   * _.extend({ 'name': 'moe' }, { 'age': 40 });\n   * // => { 'name': 'moe', 'age': 40 }\n   */\n  var extend = createIterator(extendIteratorOptions);\n\n  /**\n   * Iterates over `object`'s own and inherited enumerable properties, executing\n   * the `callback` for each property. The `callback` is bound to `thisArg` and\n   * invoked with three arguments; (value, key, object). Callbacks may exit iteration\n   * early by explicitly returning `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * function Dog(name) {\n   *   this.name = name;\n   * }\n   *\n   * Dog.prototype.bark = function() {\n   *   alert('Woof, woof!');\n   * };\n   *\n   * _.forIn(new Dog('Dagny'), function(value, key) {\n   *   alert(key);\n   * });\n   * // => alerts 'name' and 'bark' (order is not guaranteed)\n   */\n  var forIn = createIterator(baseIteratorOptions, forEachIteratorOptions, forOwnIteratorOptions, {\n    'useHas': false\n  });\n\n  /**\n   * Iterates over `object`'s own enumerable properties, executing the `callback`\n   * for each property. The `callback` is bound to `thisArg` and invoked with three\n   * arguments; (value, key, object). Callbacks may exit iteration early by explicitly\n   * returning `false`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n   *   alert(key);\n   * });\n   * // => alerts '0', '1', and 'length' (order is not guaranteed)\n   */\n  var forOwn = createIterator(baseIteratorOptions, forEachIteratorOptions, forOwnIteratorOptions);\n\n  /**\n   * Creates a sorted array of all enumerable properties, own and inherited,\n   * of `object` that have function values.\n   *\n   * @static\n   * @memberOf _\n   * @alias methods\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns a new array of property names that have function values.\n   * @example\n   *\n   * _.functions(_);\n   * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]\n   */\n  var functions = createIterator({\n    'useHas': false,\n    'args': 'object',\n    'init': '[]',\n    'inLoop': 'if (isFunction(value)) result.push(index)',\n    'bottom': 'result.sort()'\n  });\n\n  /**\n   * Checks if the specified object `property` exists and is a direct property,\n   * instead of an inherited property.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to check.\n   * @param {String} property The property to check for.\n   * @returns {Boolean} Returns `true` if key is a direct property, else `false`.\n   * @example\n   *\n   * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');\n   * // => true\n   */\n  function has(object, property) {\n    return object ? hasOwnProperty.call(object, property) : false;\n  }\n\n  /**\n   * Creates an object composed of the inverted keys and values of the given `object`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to invert.\n   * @returns {Object} Returns the created inverted object.\n   * @example\n   *\n   *  _.invert({ 'first': 'Moe', 'second': 'Larry', 'third': 'Curly' });\n   * // => { 'Moe': 'first', 'Larry': 'second', 'Curly': 'third' } (order is not guaranteed)\n   */\n  var invert = createIterator({\n    'args': 'object',\n    'init': '{}',\n    'inLoop': 'result[value] = index'\n  });\n\n  /**\n   * Checks if `value` is a boolean (`true` or `false`) value.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a boolean value, else `false`.\n   * @example\n   *\n   * _.isBoolean(null);\n   * // => false\n   */\n  function isBoolean(value) {\n    return value === true || value === false || toString.call(value) == boolClass;\n  }\n\n  /**\n   * Checks if `value` is a date.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a date, else `false`.\n   * @example\n   *\n   * _.isDate(new Date);\n   * // => true\n   */\n  function isDate(value) {\n    return toString.call(value) == dateClass;\n  }\n\n  /**\n   * Checks if `value` is a DOM element.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a DOM element, else `false`.\n   * @example\n   *\n   * _.isElement(document.body);\n   * // => true\n   */\n  function isElement(value) {\n    return value ? value.nodeType === 1 : false;\n  }\n\n  /**\n   * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a\n   * length of `0` and objects with no own enumerable properties are considered\n   * \"empty\".\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Array|Object|String} value The value to inspect.\n   * @returns {Boolean} Returns `true` if the `value` is empty, else `false`.\n   * @example\n   *\n   * _.isEmpty([1, 2, 3]);\n   * // => false\n   *\n   * _.isEmpty({});\n   * // => true\n   *\n   * _.isEmpty('');\n   * // => true\n   */\n  var isEmpty = createIterator({\n    'args': 'value',\n    'init': 'true',\n    'top':\n      'var className = toString.call(value),\\n' +\n      '    length = value.length;\\n' +\n      'if (arrayLikeClasses[className]' +\n      (noArgsClass ? ' || isArguments(value)' : '') + ' ||\\n' +\n      '  (className == objectClass && length === +length &&\\n' +\n      '  isFunction(value.splice))' +\n      ') return !length',\n    'inLoop': {\n      'object': 'return false'\n    }\n  });\n\n  /**\n   * Performs a deep comparison between two values to determine if they are\n   * equivalent to each other.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} a The value to compare.\n   * @param {Mixed} b The other value to compare.\n   * @param {Object} [stackA=[]] Internally used track traversed `a` objects.\n   * @param {Object} [stackB=[]] Internally used track traversed `b` objects.\n   * @returns {Boolean} Returns `true` if the values are equvalent, else `false`.\n   * @example\n   *\n   * var moe = { 'name': 'moe', 'luckyNumbers': [13, 27, 34] };\n   * var clone = { 'name': 'moe', 'luckyNumbers': [13, 27, 34] };\n   *\n   * moe == clone;\n   * // => false\n   *\n   * _.isEqual(moe, clone);\n   * // => true\n   */\n  function isEqual(a, b, stackA, stackB) {\n    // a strict comparison is necessary because `null == undefined`\n    if (a == null || b == null) {\n      return a === b;\n    }\n    // exit early for identical values\n    if (a === b) {\n      // treat `+0` vs. `-0` as not equal\n      return a !== 0 || (1 / a == 1 / b);\n    }\n    // unwrap any LoDash wrapped values\n    if (objectTypes[typeof a] || objectTypes[typeof b]) {\n      a = a.__wrapped__ || a;\n      b = b.__wrapped__ || b;\n    }\n    // compare [[Class]] names\n    var className = toString.call(a);\n    if (className != toString.call(b)) {\n      return false;\n    }\n    switch (className) {\n      case boolClass:\n      case dateClass:\n        // coerce dates and booleans to numbers, dates to milliseconds and booleans\n        // to `1` or `0`, treating invalid dates coerced to `NaN` as not equal\n        return +a == +b;\n\n      case numberClass:\n        // treat `NaN` vs. `NaN` as equal\n        return a != +a\n          ? b != +b\n          // but treat `+0` vs. `-0` as not equal\n          : (a == 0 ? (1 / a == 1 / b) : a == +b);\n\n      case regexpClass:\n      case stringClass:\n        // coerce regexes to strings (http://es5.github.com/#x15.10.6.4)\n        // treat string primitives and their corresponding object instances as equal\n        return a == b + '';\n    }\n    // exit early, in older browsers, if `a` is array-like but not `b`\n    var isArr = arrayLikeClasses[className];\n    if (noArgsClass && !isArr && (isArr = isArguments(a)) && !isArguments(b)) {\n      return false;\n    }\n    // exit for functions and DOM nodes\n    if (!isArr && (className != objectClass || (noNodeClass && (\n        (typeof a.toString != 'function' && typeof (a + '') == 'string') ||\n        (typeof b.toString != 'function' && typeof (b + '') == 'string'))))) {\n      return false;\n    }\n\n    // assume cyclic structures are equal\n    // the algorithm for detecting cyclic structures is adapted from ES 5.1\n    // section 15.12.3, abstract operation `JO` (http://es5.github.com/#x15.12.3)\n    stackA || (stackA = []);\n    stackB || (stackB = []);\n\n    var length = stackA.length;\n    while (length--) {\n      if (stackA[length] == a) {\n        return stackB[length] == b;\n      }\n    }\n\n    var index = -1,\n        result = true,\n        size = 0;\n\n    // add `a` and `b` to the stack of traversed objects\n    stackA.push(a);\n    stackB.push(b);\n\n    // recursively compare objects and arrays (susceptible to call stack limits)\n    if (isArr) {\n      // compare lengths to determine if a deep comparison is necessary\n      size = a.length;\n      result = size == b.length;\n\n      if (result) {\n        // deep compare the contents, ignoring non-numeric properties\n        while (size--) {\n          if (!(result = isEqual(a[size], b[size], stackA, stackB))) {\n            break;\n          }\n        }\n      }\n      return result;\n    }\n\n    var ctorA = a.constructor,\n        ctorB = b.constructor;\n\n    // non `Object` object instances with different constructors are not equal\n    if (ctorA != ctorB && !(\n          isFunction(ctorA) && ctorA instanceof ctorA &&\n          isFunction(ctorB) && ctorB instanceof ctorB\n        )) {\n      return false;\n    }\n    // deep compare objects\n    for (var prop in a) {\n      if (hasOwnProperty.call(a, prop)) {\n        // count the number of properties.\n        size++;\n        // deep compare each property value.\n        if (!(hasOwnProperty.call(b, prop) && isEqual(a[prop], b[prop], stackA, stackB))) {\n          return false;\n        }\n      }\n    }\n    // ensure both objects have the same number of properties\n    for (prop in b) {\n      // The JS engine in Adobe products, like InDesign, has a bug that causes\n      // `!size--` to throw an error so it must be wrapped in parentheses.\n      // https://github.com/documentcloud/underscore/issues/355\n      if (hasOwnProperty.call(b, prop) && !(size--)) {\n        // `size` will be `-1` if `b` has more properties than `a`\n        return false;\n      }\n    }\n    // handle JScript [[DontEnum]] bug\n    if (hasDontEnumBug) {\n      while (++index < 7) {\n        prop = shadowed[index];\n        if (hasOwnProperty.call(a, prop) &&\n            !(hasOwnProperty.call(b, prop) && isEqual(a[prop], b[prop], stackA, stackB))) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Checks if `value` is a finite number.\n   *\n   * Note: This is not the same as native `isFinite`, which will return true for\n   * booleans and other values. See http://es5.github.com/#x15.1.2.5.\n   *\n   * @deprecated\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a finite number, else `false`.\n   * @example\n   *\n   * _.isFinite(-101);\n   * // => true\n   *\n   * _.isFinite('10');\n   * // => false\n   *\n   * _.isFinite(Infinity);\n   * // => false\n   */\n  function isFinite(value) {\n    return nativeIsFinite(value) && toString.call(value) == numberClass;\n  }\n\n  /**\n   * Checks if `value` is the language type of Object.\n   * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is an object, else `false`.\n   * @example\n   *\n   * _.isObject({});\n   * // => true\n   *\n   * _.isObject(1);\n   * // => false\n   */\n  function isObject(value) {\n    // check if the value is the ECMAScript language type of Object\n    // http://es5.github.com/#x8\n    // and avoid a V8 bug\n    // http://code.google.com/p/v8/issues/detail?id=2291\n    return value ? objectTypes[typeof value] : false;\n  }\n\n  /**\n   * Checks if `value` is `NaN`.\n   *\n   * Note: This is not the same as native `isNaN`, which will return true for\n   * `undefined` and other values. See http://es5.github.com/#x15.1.2.4.\n   *\n   * @deprecated\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is `NaN`, else `false`.\n   * @example\n   *\n   * _.isNaN(NaN);\n   * // => true\n   *\n   * _.isNaN(new Number(NaN));\n   * // => true\n   *\n   * isNaN(undefined);\n   * // => true\n   *\n   * _.isNaN(undefined);\n   * // => false\n   */\n  function isNaN(value) {\n    // `NaN` as a primitive is the only value that is not equal to itself\n    // (perform the [[Class]] check first to avoid errors with some host objects in IE)\n    return toString.call(value) == numberClass && value != +value\n  }\n\n  /**\n   * Checks if `value` is `null`.\n   *\n   * @deprecated\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is `null`, else `false`.\n   * @example\n   *\n   * _.isNull(null);\n   * // => true\n   *\n   * _.isNull(undefined);\n   * // => false\n   */\n  function isNull(value) {\n    return value === null;\n  }\n\n  /**\n   * Checks if `value` is a number.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a number, else `false`.\n   * @example\n   *\n   * _.isNumber(8.4 * 5);\n   * // => true\n   */\n  function isNumber(value) {\n    return toString.call(value) == numberClass;\n  }\n\n  /**\n   * Checks if `value` is a regular expression.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a regular expression, else `false`.\n   * @example\n   *\n   * _.isRegExp(/moe/);\n   * // => true\n   */\n  function isRegExp(value) {\n    return toString.call(value) == regexpClass;\n  }\n\n  /**\n   * Checks if `value` is a string.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is a string, else `false`.\n   * @example\n   *\n   * _.isString('moe');\n   * // => true\n   */\n  function isString(value) {\n    return toString.call(value) == stringClass;\n  }\n\n  /**\n   * Checks if `value` is `undefined`.\n   *\n   * @deprecated\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Mixed} value The value to check.\n   * @returns {Boolean} Returns `true` if the `value` is `undefined`, else `false`.\n   * @example\n   *\n   * _.isUndefined(void 0);\n   * // => true\n   */\n  function isUndefined(value) {\n    return value === undefined;\n  }\n\n  /**\n   * Creates an array composed of the own enumerable property names of `object`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns a new array of property names.\n   * @example\n   *\n   * _.keys({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => ['one', 'two', 'three'] (order is not guaranteed)\n   */\n  var keys = !nativeKeys ? shimKeys : function(object) {\n    var type = typeof object;\n\n    // avoid iterating over the `prototype` property\n    if (type == 'function' && propertyIsEnumerable.call(object, 'prototype')) {\n      return shimKeys(object);\n    }\n    return object && objectTypes[type]\n      ? nativeKeys(object)\n      : [];\n  };\n\n  /**\n   * Merges enumerable properties of the source object(s) into the `destination`\n   * object. Subsequent sources will overwrite propery assignments of previous\n   * sources.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The destination object.\n   * @param {Object} [source1, source2, ...] The source objects.\n   * @param {Object} [indicator] Internally used to indicate that the `stack`\n   *  argument is an array of traversed objects instead of another source object.\n   * @param {Array} [stackA=[]] Internally used to track traversed source objects.\n   * @param {Array} [stackB=[]] Internally used to associate clones with their\n   *  source counterparts.\n   * @returns {Object} Returns the destination object.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe' },\n   *   { 'name': 'larry' }\n   * ];\n   *\n   * var ages = [\n   *   { 'age': 40 },\n   *   { 'age': 50 }\n   * ];\n   *\n   * _.merge(stooges, ages);\n   * // => [{ 'name': 'moe', 'age': 40 }, { 'name': 'larry', 'age': 50 }]\n   */\n  var merge = createIterator(extendIteratorOptions, {\n    'args': 'object, source, indicator',\n    'top':\n      'var argsLength, isArr, stackA, stackB,\\n' +\n      '    args = arguments, argsIndex = 0;\\n' +\n      'if (indicator == isPlainObject) {\\n' +\n      '  argsLength = 2;\\n' +\n      '  stackA = args[3];\\n' +\n      '  stackB = args[4]\\n' +\n      '} else {\\n' +\n      '  argsLength = args.length;\\n' +\n      '  stackA = [];\\n' +\n      '  stackB = []\\n' +\n      '}\\n' +\n      'while (++argsIndex < argsLength) {\\n' +\n      '  if (iteratee = args[argsIndex]) {',\n    'inLoop':\n      'if ((source = value) && ((isArr = isArray(source)) || isPlainObject(source))) {\\n' +\n      '  var found = false, stackLength = stackA.length;\\n' +\n      '  while (stackLength--) {\\n' +\n      '    if (found = stackA[stackLength] == source) break\\n' +\n      '  }\\n' +\n      '  if (found) {\\n' +\n      '    result[index] = stackB[stackLength]\\n' +\n      '  } else {\\n' +\n      '    stackA.push(source);\\n' +\n      '    stackB.push(value = (value = result[index]) && isArr\\n' +\n      '      ? (isArray(value) ? value : [])\\n' +\n      '      : (isPlainObject(value) ? value : {})\\n' +\n      '    );\\n' +\n      '    result[index] = callee(value, source, isPlainObject, stackA, stackB)\\n' +\n      '  }\\n' +\n      '} else if (source != null) {\\n' +\n      '  result[index] = source\\n' +\n      '}'\n  });\n\n  /**\n   * Creates a shallow clone of `object` excluding the specified properties.\n   * Property names may be specified as individual arguments or as arrays of\n   * property names. If `callback` is passed, it will be executed for each property\n   * in the `object`, omitting the properties `callback` returns truthy for. The\n   * `callback` is bound to `thisArg` and invoked with three arguments; (value, key, object).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The source object.\n   * @param {Function|String} callback|[prop1, prop2, ...] The properties to omit\n   *  or the function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns an object without the omitted properties.\n   * @example\n   *\n   * _.omit({ 'name': 'moe', 'age': 40, 'userid': 'moe1' }, 'userid');\n   * // => { 'name': 'moe', 'age': 40 }\n   *\n   * _.omit({ 'name': 'moe', '_hint': 'knucklehead', '_seed': '96c4eb' }, function(value, key) {\n   *   return key.charAt(0) == '_';\n   * });\n   * // => { 'name': 'moe' }\n   */\n  var omit = createIterator(omitIteratorOptions);\n\n  /**\n   * Creates a two dimensional array of the given object's key-value pairs,\n   * i.e. `[[key1, value1], [key2, value2]]`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns new array of key-value pairs.\n   * @example\n   *\n   * _.pairs({ 'moe': 30, 'larry': 40, 'curly': 50 });\n   * // => [['moe', 30], ['larry', 40], ['curly', 50]] (order is not guaranteed)\n   */\n  var pairs = createIterator({\n    'args': 'object',\n    'init':'[]',\n    'inLoop': 'result'  + (isKeysFast ? '[ownIndex] = ' : '.push') + '([index, value])'\n  });\n\n  /**\n   * Creates a shallow clone of `object` composed of the specified properties.\n   * Property names may be specified as individual arguments or as arrays of\n   * property names. If `callback` is passed, it will be executed for each property\n   * in the `object`, picking the properties `callback` returns truthy for. The\n   * `callback` is bound to `thisArg` and invoked with three arguments; (value, key, object).\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The source object.\n   * @param {Function|String} callback|[prop1, prop2, ...] The properties to pick\n   *  or the function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns an object composed of the picked properties.\n   * @example\n   *\n   * _.pick({ 'name': 'moe', 'age': 40, 'userid': 'moe1' }, 'name', 'age');\n   * // => { 'name': 'moe', 'age': 40 }\n   *\n   * _.pick({ 'name': 'moe', '_hint': 'knucklehead', '_seed': '96c4eb' }, function(value, key) {\n   *   return key.charAt(0) != '_';\n   * });\n   * // => { 'name': 'moe' }\n   */\n  var pick = createIterator(omitIteratorOptions, {\n    'top':\n      'if (typeof callback != \\'function\\') {\\n' +\n      '  var prop,\\n' +\n      '      props = concat.apply(ArrayProto, arguments),\\n' +\n      '      length = props.length;\\n' +\n      '  for (index = 1; index < length; index++) {\\n' +\n      '    prop = props[index];\\n' +\n      '    if (prop in object) result[prop] = object[prop]\\n' +\n      '  }\\n' +\n      '} else {\\n' +\n      '  if (thisArg) callback = bindIterator(callback, thisArg)',\n    'inLoop':\n      'if (callback(value, index, object)) result[index] = value',\n    'bottom': '}'\n  });\n\n  /**\n   * Creates an array composed of the own enumerable property values of `object`.\n   *\n   * @static\n   * @memberOf _\n   * @category Objects\n   * @param {Object} object The object to inspect.\n   * @returns {Array} Returns a new array of property values.\n   * @example\n   *\n   * _.values({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => [1, 2, 3]\n   */\n  var values = createIterator({\n    'args': 'object',\n    'init': '[]',\n    'inLoop': 'result.push(value)'\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Checks if a given `target` element is present in a `collection` using strict\n   * equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @alias include\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Mixed} target The value to check for.\n   * @returns {Boolean} Returns `true` if the `target` element is found, else `false`.\n   * @example\n   *\n   * _.contains([1, 2, 3], 3);\n   * // => true\n   *\n   * _.contains({ 'name': 'moe', 'age': 40 }, 'moe');\n   * // => true\n   *\n   * _.contains('curly', 'ur');\n   * // => true\n   */\n  var contains = createIterator({\n    'args': 'collection, target',\n    'init': 'false',\n    'noCharByIndex': false,\n    'beforeLoop': {\n      'array': 'if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1'\n    },\n    'inLoop': 'if (value === target) return true'\n  });\n\n  /**\n   * Creates an object composed of keys returned from running each element of\n   * `collection` through a `callback`. The corresponding value of each key is\n   * the number of times the key was returned by `callback`. The `callback` is\n   * bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n   * The `callback` argument may also be the name of a property to count by (e.g. 'length').\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function|String} callback|property The function called per iteration\n   *  or property name to count by.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns the composed aggregate object.\n   * @example\n   *\n   * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });\n   * // => { '4': 1, '6': 2 }\n   *\n   * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n   * // => { '4': 1, '6': 2 }\n   *\n   * _.countBy(['one', 'two', 'three'], 'length');\n   * // => { '3': 2, '5': 1 }\n   */\n  var countBy = createIterator(baseIteratorOptions, countByIteratorOptions);\n\n  /**\n   * Checks if the `callback` returns a truthy value for **all** elements of a\n   * `collection`. The `callback` is bound to `thisArg` and invoked with three\n   * arguments; (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias all\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Boolean} Returns `true` if all elements pass the callback check,\n   *  else `false`.\n   * @example\n   *\n   * _.every([true, 1, null, 'yes'], Boolean);\n   * // => false\n   */\n  var every = createIterator(baseIteratorOptions, everyIteratorOptions);\n\n  /**\n   * Examines each element in a `collection`, returning an array of all elements\n   * the `callback` returns truthy for. The `callback` is bound to `thisArg` and\n   * invoked with three arguments; (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias select\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a new array of elements that passed the callback check.\n   * @example\n   *\n   * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n   * // => [2, 4, 6]\n   */\n  var filter = createIterator(baseIteratorOptions, filterIteratorOptions);\n\n  /**\n   * Examines each element in a `collection`, returning the first one the `callback`\n   * returns truthy for. The function returns as soon as it finds an acceptable\n   * element, and does not iterate over the entire `collection`. The `callback` is\n   * bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias detect\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Mixed} Returns the element that passed the callback check,\n   *  else `undefined`.\n   * @example\n   *\n   * var even = _.find([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n   * // => 2\n   */\n  var find = createIterator(baseIteratorOptions, forEachIteratorOptions, {\n    'init': '',\n    'inLoop': 'if (callback(value, index, collection)) return value'\n  });\n\n  /**\n   * Iterates over a `collection`, executing the `callback` for each element in\n   * the `collection`. The `callback` is bound to `thisArg` and invoked with three\n   * arguments; (value, index|key, collection). Callbacks may exit iteration early\n   * by explicitly returning `false`.\n   *\n   * @static\n   * @memberOf _\n   * @alias each\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array|Object|String} Returns `collection`.\n   * @example\n   *\n   * _([1, 2, 3]).forEach(alert).join(',');\n   * // => alerts each number and returns '1,2,3'\n   *\n   * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, alert);\n   * // => alerts each number (order is not guaranteed)\n   */\n  var forEach = createIterator(baseIteratorOptions, forEachIteratorOptions);\n\n  /**\n   * Creates an object composed of keys returned from running each element of\n   * `collection` through a `callback`. The corresponding value of each key is an\n   * array of elements passed to `callback` that returned the key. The `callback`\n   * is bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n   * The `callback` argument may also be the name of a property to count by (e.g. 'length').\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function|String} callback|property The function called per iteration\n   *  or property name to group by.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Object} Returns the composed aggregate object.\n   * @example\n   *\n   * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });\n   * // => { '4': [4.2], '6': [6.1, 6.4] }\n   *\n   * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n   * // => { '4': [4.2], '6': [6.1, 6.4] }\n   *\n   * _.groupBy(['one', 'two', 'three'], 'length');\n   * // => { '3': ['one', 'two'], '5': ['three'] }\n   */\n  var groupBy = createIterator(baseIteratorOptions, countByIteratorOptions, {\n    'inLoop':\n      'prop = callback(value, index, collection);\\n' +\n      '(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)'\n  });\n\n  /**\n   * Invokes the method named by `methodName` on each element in the `collection`,\n   * returning an array of the results of each invoked method. Additional arguments\n   * will be passed to each invoked method. If `methodName` is a function it will\n   * be invoked for, and `this` bound to, each element in the `collection`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function|String} methodName The name of the method to invoke or\n   *  the function invoked per iteration.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the method with.\n   * @returns {Array} Returns a new array of the results of each invoked method.\n   * @example\n   *\n   * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n   * // => [[1, 5, 7], [1, 2, 3]]\n   *\n   * _.invoke([123, 456], String.prototype.split, '');\n   * // => [['1', '2', '3'], ['4', '5', '6']]\n   */\n  var invoke = createIterator(mapIteratorOptions, {\n    'args': 'collection, methodName',\n    'top':\n      'var args = slice.call(arguments, 2),\\n' +\n      '    isFunc = typeof methodName == \\'function\\'',\n    'inLoop': {\n      'array':\n        'result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)',\n      'object':\n        'result' + (isKeysFast ? '[ownIndex] = ' : '.push') +\n        '((isFunc ? methodName : value[methodName]).apply(value, args))'\n    }\n  });\n\n  /**\n   * Creates an array of values by running each element in the `collection`\n   * through a `callback`. The `callback` is bound to `thisArg` and invoked with\n   * three arguments; (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias collect\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a new array of the results of each `callback` execution.\n   * @example\n   *\n   * _.map([1, 2, 3], function(num) { return num * 3; });\n   * // => [3, 6, 9]\n   *\n   * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });\n   * // => [3, 6, 9] (order is not guaranteed)\n   */\n  var map = createIterator(baseIteratorOptions, mapIteratorOptions);\n\n  /**\n   * Retrieves the value of a specified property from all elements in\n   * the `collection`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {String} property The property to pluck.\n   * @returns {Array} Returns a new array of property values.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe', 'age': 40 },\n   *   { 'name': 'larry', 'age': 50 },\n   *   { 'name': 'curly', 'age': 60 }\n   * ];\n   *\n   * _.pluck(stooges, 'name');\n   * // => ['moe', 'larry', 'curly']\n   */\n  var pluck = createIterator(mapIteratorOptions, {\n    'args': 'collection, property',\n    'inLoop': {\n      'array':  'result[index] = value[property]',\n      'object': 'result' + (isKeysFast ? '[ownIndex] = ' : '.push') + '(value[property])'\n    }\n  });\n\n  /**\n   * Boils down a `collection` to a single value. The initial state of the\n   * reduction is `accumulator` and each successive step of it should be returned\n   * by the `callback`. The `callback` is bound to `thisArg` and invoked with 4\n   * arguments; for arrays they are (accumulator, value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias foldl, inject\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [accumulator] Initial value of the accumulator.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Mixed} Returns the accumulated value.\n   * @example\n   *\n   * var sum = _.reduce([1, 2, 3], function(memo, num) { return memo + num; });\n   * // => 6\n   */\n  var reduce = createIterator({\n    'args': 'collection, callback, accumulator, thisArg',\n    'init': 'accumulator',\n    'top':\n      'var noaccum = arguments.length < 3;\\n' +\n      'if (thisArg) callback = bindIterator(callback, thisArg)',\n    'beforeLoop': {\n      'array': 'if (noaccum) result = iteratee[++index]'\n    },\n    'inLoop': {\n      'array':\n        'result = callback(result, value, index, collection)',\n      'object':\n        'result = noaccum\\n' +\n        '  ? (noaccum = false, value)\\n' +\n        '  : callback(result, value, index, collection)'\n    }\n  });\n\n  /**\n   * The right-associative version of `_.reduce`.\n   *\n   * @static\n   * @memberOf _\n   * @alias foldr\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [accumulator] Initial value of the accumulator.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Mixed} Returns the accumulated value.\n   * @example\n   *\n   * var list = [[0, 1], [2, 3], [4, 5]];\n   * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);\n   * // => [4, 5, 2, 3, 0, 1]\n   */\n  function reduceRight(collection, callback, accumulator, thisArg) {\n    if (!collection) {\n      return accumulator;\n    }\n\n    var length = collection.length,\n        noaccum = arguments.length < 3;\n\n    if(thisArg) {\n      callback = bindIterator(callback, thisArg);\n    }\n    if (length === +length) {\n      var iteratee = noCharByIndex && toString.call(collection) == stringClass\n        ? collection.split('')\n        : collection;\n\n      if (length && noaccum) {\n        accumulator = iteratee[--length];\n      }\n      while (length--) {\n        accumulator = callback(accumulator, iteratee[length], length, collection);\n      }\n      return accumulator;\n    }\n\n    var prop,\n        props = keys(collection);\n\n    length = props.length;\n    if (length && noaccum) {\n      accumulator = collection[props[--length]];\n    }\n    while (length--) {\n      prop = props[length];\n      accumulator = callback(accumulator, collection[prop], prop, collection);\n    }\n    return accumulator;\n  }\n\n  /**\n   * The opposite of `_.filter`, this method returns the values of a\n   * `collection` that `callback` does **not** return truthy for.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a new array of elements that did **not** pass the\n   *  callback check.\n   * @example\n   *\n   * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n   * // => [1, 3, 5]\n   */\n  var reject = createIterator(baseIteratorOptions, filterIteratorOptions, {\n    'inLoop': '!' + filterIteratorOptions.inLoop\n  });\n\n  /**\n   * Gets the size of the `collection` by returning `collection.length` for arrays\n   * and array-like objects or the number of own enumerable properties for objects.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to inspect.\n   * @returns {Number} Returns `collection.length` or number of own enumerable properties.\n   * @example\n   *\n   * _.size([1, 2]);\n   * // => 2\n   *\n   * _.size({ 'one': 1, 'two': 2, 'three': 3 });\n   * // => 3\n   *\n   * _.size('curly');\n   * // => 5\n   */\n  function size(collection) {\n    if (!collection) {\n      return 0;\n    }\n    var length = collection.length;\n    return length === +length ? length : keys(collection).length;\n  }\n\n  /**\n   * Checks if the `callback` returns a truthy value for **any** element of a\n   * `collection`. The function returns as soon as it finds passing value, and\n   * does not iterate over the entire `collection`. The `callback` is bound to\n   * `thisArg` and invoked with three arguments; (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @alias any\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Boolean} Returns `true` if any element passes the callback check,\n   *  else `false`.\n   * @example\n   *\n   * _.some([null, 0, 'yes', false]);\n   * // => true\n   */\n  var some = createIterator(baseIteratorOptions, everyIteratorOptions, {\n    'init': 'false',\n    'inLoop': everyIteratorOptions.inLoop.replace('!', '')\n  });\n\n  /**\n   * Creates an array, stable sorted in ascending order by the results of\n   * running each element of `collection` through a `callback`. The `callback`\n   * is bound to `thisArg` and invoked with three arguments; (value, index|key, collection).\n   * The `callback` argument may also be the name of a property to sort by (e.g. 'length').\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Function|String} callback|property The function called per iteration\n   *  or property name to sort by.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a new array of sorted elements.\n   * @example\n   *\n   * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });\n   * // => [3, 1, 2]\n   *\n   * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);\n   * // => [3, 1, 2]\n   *\n   * _.sortBy(['larry', 'brendan', 'moe'], 'length');\n   * // => ['moe', 'larry', 'brendan']\n   */\n  var sortBy = createIterator(baseIteratorOptions, countByIteratorOptions, mapIteratorOptions, {\n    'inLoop': {\n      'array':\n        'result[index] = {\\n' +\n        '  criteria: callback(value, index, collection),\\n' +\n        '  index: index,\\n' +\n        '  value: value\\n' +\n        '}',\n      'object':\n        'result' + (isKeysFast ? '[ownIndex] = ' : '.push') + '({\\n' +\n        '  criteria: callback(value, index, collection),\\n' +\n        '  index: index,\\n' +\n        '  value: value\\n' +\n        '})'\n    },\n    'bottom':\n      'result.sort(compareAscending);\\n' +\n      'length = result.length;\\n' +\n      'while (length--) {\\n' +\n      '  result[length] = result[length].value\\n' +\n      '}'\n  });\n\n  /**\n   * Converts the `collection`, to an array.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to convert.\n   * @returns {Array} Returns the new converted array.\n   * @example\n   *\n   * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\n   * // => [2, 3, 4]\n   */\n  function toArray(collection) {\n    if (!collection) {\n      return [];\n    }\n    var length = collection.length;\n    if (length === +length) {\n      return (noArraySliceOnStrings ? toString.call(collection) == stringClass : typeof collection == 'string')\n        ? collection.split('')\n        : slice.call(collection);\n    }\n    return values(collection);\n  }\n\n  /**\n   * Examines each element in a `collection`, returning an array of all elements\n   * that contain the given `properties`.\n   *\n   * @static\n   * @memberOf _\n   * @category Collections\n   * @param {Array|Object|String} collection The collection to iterate over.\n   * @param {Object} properties The object of properties/values to filter by.\n   * @returns {Array} Returns a new array of elements that contain the given `properties`.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe', 'age': 40 },\n   *   { 'name': 'larry', 'age': 50 },\n   *   { 'name': 'curly', 'age': 60 }\n   * ];\n   *\n   * _.where(stooges, { 'age': 40 });\n   * // => [{ 'name': 'moe', 'age': 40 }]\n   */\n  var where = createIterator(filterIteratorOptions, {\n    'args': 'collection, properties',\n    'top':\n      'var props = [];\\n' +\n      'forIn(properties, function(value, prop) { props.push(prop) });\\n' +\n      'var propsLength = props.length',\n    'inLoop':\n      'for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\\n' +\n      '  prop = props[propIndex];\\n' +\n      '  if (!(pass = value[prop] === properties[prop])) break\\n' +\n      '}\\n' +\n      'pass && result.push(value)'\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates an array with all falsey values of `array` removed. The values\n   * `false`, `null`, `0`, `\"\"`, `undefined` and `NaN` are all falsey.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to compact.\n   * @returns {Array} Returns a new filtered array.\n   * @example\n   *\n   * _.compact([0, 1, false, 2, '', 3]);\n   * // => [1, 2, 3]\n   */\n  function compact(array) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index]) {\n        result.push(array[index]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an array of `array` elements not present in the other arrays\n   * using strict equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to process.\n   * @param {Array} [array1, array2, ...] Arrays to check.\n   * @returns {Array} Returns a new array of `array` elements not present in the\n   *  other arrays.\n   * @example\n   *\n   * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);\n   * // => [1, 3, 4]\n   */\n  function difference(array) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var index = -1,\n        length = array.length,\n        flattened = concat.apply(result, arguments),\n        contains = cachedContains(flattened, length);\n\n    while (++index < length) {\n      if (!contains(array[index])) {\n        result.push(array[index]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the first element of the `array`. Pass `n` to return the first `n`\n   * elements of the `array`.\n   *\n   * @static\n   * @memberOf _\n   * @alias head, take\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Number} [n] The number of elements to return.\n   * @param {Object} [guard] Internally used to allow this method to work with\n   *  others like `_.map` without using their callback `index` argument for `n`.\n   * @returns {Mixed} Returns the first element or an array of the first `n`\n   *  elements of `array`.\n   * @example\n   *\n   * _.first([5, 4, 3, 2, 1]);\n   * // => 5\n   */\n  function first(array, n, guard) {\n    if (array) {\n      return (n == null || guard) ? array[0] : slice.call(array, 0, n);\n    }\n  }\n\n  /**\n   * Flattens a nested array (the nesting can be to any depth). If `shallow` is\n   * truthy, `array` will only be flattened a single level.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to compact.\n   * @param {Boolean} shallow A flag to indicate only flattening a single level.\n   * @returns {Array} Returns a new flattened array.\n   * @example\n   *\n   * _.flatten([1, [2], [3, [[4]]]]);\n   * // => [1, 2, 3, 4];\n   *\n   * _.flatten([1, [2], [3, [[4]]]], true);\n   * // => [1, 2, 3, [[4]]];\n   */\n  function flatten(array, shallow) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var value,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      value = array[index];\n\n      // recursively flatten arrays (susceptible to call stack limits)\n      if (isArray(value)) {\n        push.apply(result, shallow ? value : flatten(value));\n      } else {\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the index at which the first occurrence of `value` is found using\n   * strict equality for comparisons, i.e. `===`. If the `array` is already\n   * sorted, passing `true` for `isSorted` will run a faster binary search.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to search.\n   * @param {Mixed} value The value to search for.\n   * @param {Boolean|Number} [fromIndex=0] The index to start searching from or\n   *  `true` to perform a binary search on a sorted `array`.\n   * @returns {Number} Returns the index of the matched value or `-1`.\n   * @example\n   *\n   * _.indexOf([1, 2, 3, 1, 2, 3], 2);\n   * // => 1\n   *\n   * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);\n   * // => 4\n   *\n   * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);\n   * // => 2\n   */\n  function indexOf(array, value, fromIndex) {\n    if (!array) {\n      return -1;\n    }\n    var index = -1,\n        length = array.length;\n\n    if (fromIndex) {\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) - 1;\n      } else {\n        index = sortedIndex(array, value);\n        return array[index] === value ? index : -1;\n      }\n    }\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Gets all but the last element of `array`. Pass `n` to exclude the last `n`\n   * elements from the result.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Number} [n] The number of elements to return.\n   * @param {Object} [guard] Internally used to allow this method to work with\n   *  others like `_.map` without using their callback `index` argument for `n`.\n   * @returns {Array} Returns all but the last element or `n` elements of `array`.\n   * @example\n   *\n   * _.initial([3, 2, 1]);\n   * // => [3, 2]\n   */\n  function initial(array, n, guard) {\n    if (!array) {\n      return [];\n    }\n    return slice.call(array, 0, -((n == null || guard) ? 1 : n));\n  }\n\n  /**\n   * Computes the intersection of all the passed-in arrays using strict equality\n   * for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} [array1, array2, ...] Arrays to process.\n   * @returns {Array} Returns a new array of unique elements, in order, that are\n   *  present in **all** of the arrays.\n   * @example\n   *\n   * _.intersection([1, 2, 3], [101, 2, 1, 10], [2, 1]);\n   * // => [1, 2]\n   */\n  function intersection(array) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var value,\n        argsLength = arguments.length,\n        cache = [],\n        index = -1,\n        length = array.length;\n\n    array: while (++index < length) {\n      value = array[index];\n      if (indexOf(result, value) < 0) {\n        for (var argsIndex = 1; argsIndex < argsLength; argsIndex++) {\n          if (!(cache[argsIndex] || (cache[argsIndex] = cachedContains(arguments[argsIndex])))(value)) {\n            continue array;\n          }\n        }\n        result.push(value);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the last element of the `array`. Pass `n` to return the lasy `n`\n   * elementsvof the `array`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Number} [n] The number of elements to return.\n   * @param {Object} [guard] Internally used to allow this method to work with\n   *  others like `_.map` without using their callback `index` argument for `n`.\n   * @returns {Mixed} Returns the last element or an array of the last `n`\n   *  elements of `array`.\n   * @example\n   *\n   * _.last([3, 2, 1]);\n   * // => 1\n   */\n  function last(array, n, guard) {\n    if (array) {\n      var length = array.length;\n      return (n == null || guard) ? array[length - 1] : slice.call(array, -n || length);\n    }\n  }\n\n  /**\n   * Gets the index at which the last occurrence of `value` is found using\n   * strict equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to search.\n   * @param {Mixed} value The value to search for.\n   * @param {Number} [fromIndex=array.length-1] The index to start searching from.\n   * @returns {Number} Returns the index of the matched value or `-1`.\n   * @example\n   *\n   * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);\n   * // => 4\n   *\n   * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);\n   * // => 1\n   */\n  function lastIndexOf(array, value, fromIndex) {\n    if (!array) {\n      return -1;\n    }\n    var index = array.length;\n    if (fromIndex && typeof fromIndex == 'number') {\n      index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n    }\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Retrieves the maximum value of an `array`. If `callback` is passed,\n   * it will be executed for each value in the `array` to generate the\n   * criterion by which the value is ranked. The `callback` is bound to\n   * `thisArg` and invoked with three arguments; (value, index, array).\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to iterate over.\n   * @param {Function} [callback] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Mixed} Returns the maximum value.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe', 'age': 40 },\n   *   { 'name': 'larry', 'age': 50 },\n   *   { 'name': 'curly', 'age': 60 }\n   * ];\n   *\n   * _.max(stooges, function(stooge) { return stooge.age; });\n   * // => { 'name': 'curly', 'age': 60 };\n   */\n  function max(array, callback, thisArg) {\n    var computed = -Infinity,\n        result = computed;\n\n    if (!array) {\n      return result;\n    }\n    var current,\n        index = -1,\n        length = array.length;\n\n    if (!callback) {\n      while (++index < length) {\n        if (array[index] > result) {\n          result = array[index];\n        }\n      }\n      return result;\n    }\n    if (thisArg) {\n      callback = bindIterator(callback, thisArg);\n    }\n    while (++index < length) {\n      current = callback(array[index], index, array);\n      if (current > computed) {\n        computed = current;\n        result = array[index];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Retrieves the minimum value of an `array`. If `callback` is passed,\n   * it will be executed for each value in the `array` to generate the\n   * criterion by which the value is ranked. The `callback` is bound to `thisArg`\n   * and invoked with three arguments; (value, index, array).\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to iterate over.\n   * @param {Function} [callback] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Mixed} Returns the minimum value.\n   * @example\n   *\n   * _.min([10, 5, 100, 2, 1000]);\n   * // => 2\n   */\n  function min(array, callback, thisArg) {\n    var computed = Infinity,\n        result = computed;\n\n    if (!array) {\n      return result;\n    }\n    var current,\n        index = -1,\n        length = array.length;\n\n    if (!callback) {\n      while (++index < length) {\n        if (array[index] < result) {\n          result = array[index];\n        }\n      }\n      return result;\n    }\n    if (thisArg) {\n      callback = bindIterator(callback, thisArg);\n    }\n    while (++index < length) {\n      current = callback(array[index], index, array);\n      if (current < computed) {\n        computed = current;\n        result = array[index];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an object composed from arrays of `keys` and `values`. Pass either\n   * a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`, or\n   * two arrays, one of `keys` and one of corresponding `values`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} keys The array of keys.\n   * @param {Array} [values=[]] The array of values.\n   * @returns {Object} Returns an object composed of the given keys and\n   *  corresponding values.\n   * @example\n   *\n   * _.object(['moe', 'larry', 'curly'], [30, 40, 50]);\n   * // => { 'moe': 30, 'larry': 40, 'curly': 50 }\n   */\n  function object(keys, values) {\n    if (!keys) {\n      return {};\n    }\n    var index = -1,\n        length = keys.length,\n        result = {};\n\n    while (++index < length) {\n      if (values) {\n        result[keys[index]] = values[index];\n      } else {\n        result[keys[index][0]] = keys[index][1];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an array of numbers (positive and/or negative) progressing from\n   * `start` up to but not including `stop`. This method is a port of Python's\n   * `range()` function. See http://docs.python.org/library/functions.html#range.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Number} [start=0] The start of the range.\n   * @param {Number} end The end of the range.\n   * @param {Number} [step=1] The value to increment or descrement by.\n   * @returns {Array} Returns a new range array.\n   * @example\n   *\n   * _.range(10);\n   * // => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n   *\n   * _.range(1, 11);\n   * // => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n   *\n   * _.range(0, 30, 5);\n   * // => [0, 5, 10, 15, 20, 25]\n   *\n   * _.range(0, -10, -1);\n   * // => [0, -1, -2, -3, -4, -5, -6, -7, -8, -9]\n   *\n   * _.range(0);\n   * // => []\n   */\n  function range(start, end, step) {\n    start = +start || 0;\n    step = +step || 1;\n\n    if (end == null) {\n      end = start;\n      start = 0;\n    }\n    // use `Array(length)` so V8 will avoid the slower \"dictionary\" mode\n    // http://www.youtube.com/watch?v=XAqIpGU8ZZk#t=16m27s\n    var index = -1,\n        length = nativeMax(0, Math.ceil((end - start) / step)),\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = start;\n      start += step;\n    }\n    return result;\n  }\n\n  /**\n   * The opposite of `_.initial`, this method gets all but the first value of\n   * `array`. Pass `n` to exclude the first `n` values from the result.\n   *\n   * @static\n   * @memberOf _\n   * @alias drop, tail\n   * @category Arrays\n   * @param {Array} array The array to query.\n   * @param {Number} [n] The number of elements to return.\n   * @param {Object} [guard] Internally used to allow this method to work with\n   *  others like `_.map` without using their callback `index` argument for `n`.\n   * @returns {Array} Returns all but the first value or `n` values of `array`.\n   * @example\n   *\n   * _.rest([3, 2, 1]);\n   * // => [2, 1]\n   */\n  function rest(array, n, guard) {\n    if (!array) {\n      return [];\n    }\n    return slice.call(array, (n == null || guard) ? 1 : n);\n  }\n\n  /**\n   * Creates an array of shuffled `array` values, using a version of the\n   * Fisher-Yates shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to shuffle.\n   * @returns {Array} Returns a new shuffled array.\n   * @example\n   *\n   * _.shuffle([1, 2, 3, 4, 5, 6]);\n   * // => [4, 1, 6, 3, 5, 2]\n   */\n  function shuffle(array) {\n    if (!array) {\n      return [];\n    }\n    var rand,\n        index = -1,\n        length = array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      rand = nativeFloor(nativeRandom() * (index + 1));\n      result[index] = result[rand];\n      result[rand] = array[index];\n    }\n    return result;\n  }\n\n  /**\n   * Uses a binary search to determine the smallest index at which the `value`\n   * should be inserted into `array` in order to maintain the sort order of the\n   * sorted `array`. If `callback` is passed, it will be executed for `value` and\n   * each element in `array` to compute their sort ranking. The `callback` is\n   * bound to `thisArg` and invoked with one argument; (value).\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to iterate over.\n   * @param {Mixed} value The value to evaluate.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Number} Returns the index at which the value should be inserted\n   *  into `array`.\n   * @example\n   *\n   * _.sortedIndex([20, 30, 40], 35);\n   * // => 2\n   *\n   * var dict = {\n   *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'thirty-five': 35, 'fourty': 40 }\n   * };\n   *\n   * _.sortedIndex(['twenty', 'thirty', 'fourty'], 'thirty-five', function(word) {\n   *   return dict.wordToNumber[word];\n   * });\n   * // => 2\n   *\n   * _.sortedIndex(['twenty', 'thirty', 'fourty'], 'thirty-five', function(word) {\n   *   return this.wordToNumber[word];\n   * }, dict);\n   * // => 2\n   */\n  function sortedIndex(array, value, callback, thisArg) {\n    if (!array) {\n      return 0;\n    }\n    var mid,\n        low = 0,\n        high = array.length;\n\n    if (callback) {\n      if (thisArg) {\n        callback = bind(callback, thisArg);\n      }\n      value = callback(value);\n      while (low < high) {\n        mid = (low + high) >>> 1;\n        callback(array[mid]) < value ? low = mid + 1 : high = mid;\n      }\n    } else {\n      while (low < high) {\n        mid = (low + high) >>> 1;\n        array[mid] < value ? low = mid + 1 : high = mid;\n      }\n    }\n    return low;\n  }\n\n  /**\n   * Computes the union of the passed-in arrays using strict equality for\n   * comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} [array1, array2, ...] Arrays to process.\n   * @returns {Array} Returns a new array of unique values, in order, that are\n   *  present in one or more of the arrays.\n   * @example\n   *\n   * _.union([1, 2, 3], [101, 2, 1, 10], [2, 1]);\n   * // => [1, 2, 3, 101, 10]\n   */\n  function union() {\n    var index = -1,\n        result = [],\n        flattened = concat.apply(result, arguments),\n        length = flattened.length;\n\n    while (++index < length) {\n      if (indexOf(result, flattened[index]) < 0) {\n        result.push(flattened[index]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates a duplicate-value-free version of the `array` using strict equality\n   * for comparisons, i.e. `===`. If the `array` is already sorted, passing `true`\n   * for `isSorted` will run a faster algorithm. If `callback` is passed, each\n   * element of `array` is passed through a callback` before uniqueness is computed.\n   * The `callback` is bound to `thisArg` and invoked with three arguments; (value, index, array).\n   *\n   * @static\n   * @memberOf _\n   * @alias unique\n   * @category Arrays\n   * @param {Array} array The array to process.\n   * @param {Boolean} [isSorted=false] A flag to indicate that the `array` is already sorted.\n   * @param {Function} [callback=identity] The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a duplicate-value-free array.\n   * @example\n   *\n   * _.uniq([1, 2, 1, 3, 1]);\n   * // => [1, 2, 3]\n   *\n   * _.uniq([1, 1, 2, 2, 3], true);\n   * // => [1, 2, 3]\n   *\n   * _.uniq([1, 2, 1.5, 3, 2.5], function(num) { return Math.floor(num); });\n   * // => [1, 2, 3]\n   *\n   * _.uniq([1, 2, 1.5, 3, 2.5], function(num) { return this.floor(num); }, Math);\n   * // => [1, 2, 3]\n   */\n  function uniq(array, isSorted, callback, thisArg) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var computed,\n        index = -1,\n        length = array.length,\n        seen = [];\n\n    // juggle arguments\n    if (typeof isSorted == 'function') {\n      thisArg = callback;\n      callback = isSorted;\n      isSorted = false;\n    }\n    if (!callback) {\n      callback = identity;\n    } else if (thisArg) {\n      callback = bindIterator(callback, thisArg);\n    }\n    while (++index < length) {\n      computed = callback(array[index], index, array);\n      if (isSorted\n            ? !index || seen[seen.length - 1] !== computed\n            : indexOf(seen, computed) < 0\n          ) {\n        seen.push(computed);\n        result.push(array[index]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Creates an array with all occurrences of the passed values removed using\n   * strict equality for comparisons, i.e. `===`.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} array The array to filter.\n   * @param {Mixed} [value1, value2, ...] Values to remove.\n   * @returns {Array} Returns a new filtered array.\n   * @example\n   *\n   * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);\n   * // => [2, 3, 4]\n   */\n  function without(array) {\n    var result = [];\n    if (!array) {\n      return result;\n    }\n    var index = -1,\n        length = array.length,\n        contains = cachedContains(arguments, 1, 20);\n\n    while (++index < length) {\n      if (!contains(array[index])) {\n        result.push(array[index]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Groups the elements of each array at their corresponding indexes. Useful for\n   * separate data sources that are coordinated through matching array indexes.\n   * For a matrix of nested arrays, `_.zip.apply(...)` can transpose the matrix\n   * in a similar fashion.\n   *\n   * @static\n   * @memberOf _\n   * @category Arrays\n   * @param {Array} [array1, array2, ...] Arrays to process.\n   * @returns {Array} Returns a new array of grouped elements.\n   * @example\n   *\n   * _.zip(['moe', 'larry', 'curly'], [30, 40, 50], [true, false, false]);\n   * // => [['moe', 30, true], ['larry', 40, false], ['curly', 50, false]]\n   */\n  function zip(array) {\n    if (!array) {\n      return [];\n    }\n    var index = -1,\n        length = max(pluck(arguments, 'length')),\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = pluck(arguments, index);\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Creates a function that is restricted to executing only after it is\n   * called `n` times.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Number} n The number of times the function must be called before\n   * it is executed.\n   * @param {Function} func The function to restrict.\n   * @returns {Function} Returns the new restricted function.\n   * @example\n   *\n   * var renderNotes = _.after(notes.length, render);\n   * _.forEach(notes, function(note) {\n   *   note.asyncSave({ 'success': renderNotes });\n   * });\n   * // `renderNotes` is run once, after all notes have saved\n   */\n  function after(n, func) {\n    if (n < 1) {\n      return func();\n    }\n    return function() {\n      if (--n < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  }\n\n  /**\n   * Creates a function that, when called, invokes `func` with the `this`\n   * binding of `thisArg` and prepends any additional `bind` arguments to those\n   * passed to the bound function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to bind.\n   * @param {Mixed} [thisArg] The `this` binding of `func`.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n   * @returns {Function} Returns the new bound function.\n   * @example\n   *\n   * var func = function(greeting) {\n   *   return greeting + ' ' + this.name;\n   * };\n   *\n   * func = _.bind(func, { 'name': 'moe' }, 'hi');\n   * func();\n   * // => 'hi moe'\n   */\n  function bind(func, thisArg) {\n    // use `Function#bind` if it exists and is fast\n    // (in V8 `Function#bind` is slower except when partially applied)\n    return isBindFast || (nativeBind && arguments.length > 2)\n      ? nativeBind.call.apply(nativeBind, arguments)\n      : createBound(func, thisArg, slice.call(arguments, 2));\n  }\n\n  /**\n   * Binds methods on `object` to `object`, overwriting the existing method.\n   * If no method names are provided, all the function properties of `object`\n   * will be bound.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Object} object The object to bind and assign the bound methods to.\n   * @param {String} [methodName1, methodName2, ...] Method names on the object to bind.\n   * @returns {Object} Returns `object`.\n   * @example\n   *\n   * var buttonView = {\n   *  'label': 'lodash',\n   *  'onClick': function() { alert('clicked: ' + this.label); }\n   * };\n   *\n   * _.bindAll(buttonView);\n   * jQuery('#lodash_button').on('click', buttonView.onClick);\n   * // => When the button is clicked, `this.label` will have the correct value\n   */\n  var bindAll = createIterator({\n    'useHas': false,\n    'useStrict': false,\n    'args': 'object',\n    'init': 'object',\n    'top':\n      'var funcs = arguments,\\n' +\n      '    length = funcs.length;\\n' +\n      'if (length > 1) {\\n' +\n      '  for (var index = 1; index < length; index++) {\\n' +\n      '    result[funcs[index]] = bind(result[funcs[index]], result)\\n' +\n      '  }\\n' +\n      '  return result\\n' +\n      '}',\n    'inLoop':\n      'if (isFunction(result[index])) {\\n' +\n      '  result[index] = bind(result[index], result)\\n' +\n      '}'\n  });\n\n  /**\n   * Creates a function that is the composition of the passed functions,\n   * where each function consumes the return value of the function that follows.\n   * In math terms, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} [func1, func2, ...] Functions to compose.\n   * @returns {Function} Returns the new composed function.\n   * @example\n   *\n   * var greet = function(name) { return 'hi: ' + name; };\n   * var exclaim = function(statement) { return statement + '!'; };\n   * var welcome = _.compose(exclaim, greet);\n   * welcome('moe');\n   * // => 'hi: moe!'\n   */\n  function compose() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments,\n          length = funcs.length;\n\n      while (length--) {\n        args = [funcs[length].apply(this, args)];\n      }\n      return args[0];\n    };\n  }\n\n  /**\n   * Creates a function that will delay the execution of `func` until after\n   * `wait` milliseconds have elapsed since the last time it was invoked. Pass\n   * `true` for `immediate` to cause debounce to invoke `func` on the leading,\n   * instead of the trailing, edge of the `wait` timeout. Subsequent calls to\n   * the debounced function will return the result of the last `func` call.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to debounce.\n   * @param {Number} wait The number of milliseconds to delay.\n   * @param {Boolean} immediate A flag to indicate execution is on the leading\n   *  edge of the timeout.\n   * @returns {Function} Returns the new debounced function.\n   * @example\n   *\n   * var lazyLayout = _.debounce(calculateLayout, 300);\n   * jQuery(window).on('resize', lazyLayout);\n   */\n  function debounce(func, wait, immediate) {\n    var args,\n        result,\n        thisArg,\n        timeoutId;\n\n    function delayed() {\n      timeoutId = null;\n      if (!immediate) {\n        result = func.apply(thisArg, args);\n      }\n    }\n\n    return function() {\n      var isImmediate = immediate && !timeoutId;\n      args = arguments;\n      thisArg = this;\n\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(delayed, wait);\n\n      if (isImmediate) {\n        result = func.apply(thisArg, args);\n      }\n      return result;\n    };\n  }\n\n  /**\n   * Executes the `func` function after `wait` milliseconds. Additional arguments\n   * will be passed to `func` when it is invoked.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to delay.\n   * @param {Number} wait The number of milliseconds to delay execution.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.\n   * @returns {Number} Returns the `setTimeout` timeout id.\n   * @example\n   *\n   * var log = _.bind(console.log, console);\n   * _.delay(log, 1000, 'logged later');\n   * // => 'logged later' (Appears after one second.)\n   */\n  function delay(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function() { return func.apply(undefined, args); }, wait);\n  }\n\n  /**\n   * Defers executing the `func` function until the current call stack has cleared.\n   * Additional arguments will be passed to `func` when it is invoked.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to defer.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.\n   * @returns {Number} Returns the `setTimeout` timeout id.\n   * @example\n   *\n   * _.defer(function() { alert('deferred'); });\n   * // returns from the function before `alert` is called\n   */\n  function defer(func) {\n    var args = slice.call(arguments, 1);\n    return setTimeout(function() { return func.apply(undefined, args); }, 1);\n  }\n\n  /**\n   * Creates a function that, when called, invokes `object[methodName]` and\n   * prepends any additional `lateBind` arguments to those passed to the bound\n   * function. This method\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Object} object The object the method belongs to.\n   * @param {String} methodName The method name.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n   * @returns {Function} Returns the new bound function.\n   * @example\n   *\n   * var object = {\n   *   'name': 'moe',\n   *   'greet': function(greeting) {\n   *     return greeting + ' ' + this.name;\n   *   }\n   * };\n   *\n   * var func = _.bind(object, 'greet', 'hi');\n   * func();\n   * // => 'hi moe'\n   *\n   * object.greet = function(greeting) {\n   *   return greeting + ', ' + this.name + '!';\n   * };\n   *\n   * func();\n   * // => 'hi, moe!'\n   */\n  function lateBind(object, methodName) {\n    return createBound(methodName, object, slice.call(arguments, 2));\n  }\n\n  /**\n   * Creates a function that memoizes the result of `func`. If `resolver` is\n   * passed, it will be used to determine the cache key for storing the result\n   * based on the arguments passed to the memoized function. By default, the first\n   * argument passed to the memoized function is used as the cache key.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to have its output memoized.\n   * @param {Function} [resolver] A function used to resolve the cache key.\n   * @returns {Function} Returns the new memoizing function.\n   * @example\n   *\n   * var fibonacci = _.memoize(function(n) {\n   *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n   * });\n   */\n  function memoize(func, resolver) {\n    var cache = {};\n    return function() {\n      var prop = resolver ? resolver.apply(this, arguments) : arguments[0];\n      return hasOwnProperty.call(cache, prop)\n        ? cache[prop]\n        : (cache[prop] = func.apply(this, arguments));\n    };\n  }\n\n  /**\n   * Creates a function that is restricted to one execution. Repeat calls to\n   * the function will return the value of the first call.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to restrict.\n   * @returns {Function} Returns the new restricted function.\n   * @example\n   *\n   * var initialize = _.once(createApplication);\n   * initialize();\n   * initialize();\n   * // Application is only created once.\n   */\n  function once(func) {\n    var result,\n        ran = false;\n\n    return function() {\n      if (ran) {\n        return result;\n      }\n      ran = true;\n      result = func.apply(this, arguments);\n\n      // clear the `func` variable so the function may be garbage collected\n      func = null;\n      return result;\n    };\n  }\n\n  /**\n   * Creates a function that, when called, invokes `func` with any additional\n   * `partial` arguments prepended to those passed to the new function. This method\n   * is similar to `bind`, except it does **not** alter the `this` binding.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to partially apply arguments to.\n   * @param {Mixed} [arg1, arg2, ...] Arguments to be partially applied.\n   * @returns {Function} Returns the new partially applied function.\n   * @example\n   *\n   * var greet = function(greeting, name) { return greeting + ': ' + name; };\n   * var hi = _.partial(greet, 'hi');\n   * hi('moe');\n   * // => 'hi: moe'\n   */\n  function partial(func) {\n    return createBound(func, slice.call(arguments, 1));\n  }\n\n  /**\n   * Creates a function that, when executed, will only call the `func`\n   * function at most once per every `wait` milliseconds. If the throttled\n   * function is invoked more than once during the `wait` timeout, `func` will\n   * also be called on the trailing edge of the timeout. Subsequent calls to the\n   * throttled function will return the result of the last `func` call.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Function} func The function to throttle.\n   * @param {Number} wait The number of milliseconds to throttle executions to.\n   * @returns {Function} Returns the new throttled function.\n   * @example\n   *\n   * var throttled = _.throttle(updatePosition, 100);\n   * jQuery(window).on('scroll', throttled);\n   */\n  function throttle(func, wait) {\n    var args,\n        result,\n        thisArg,\n        timeoutId,\n        lastCalled = 0;\n\n    function trailingCall() {\n      lastCalled = new Date;\n      timeoutId = null;\n      result = func.apply(thisArg, args);\n    }\n\n    return function() {\n      var now = new Date,\n          remain = wait - (now - lastCalled);\n\n      args = arguments;\n      thisArg = this;\n\n      if (remain <= 0) {\n        lastCalled = now;\n        result = func.apply(thisArg, args);\n      }\n      else if (!timeoutId) {\n        timeoutId = setTimeout(trailingCall, remain);\n      }\n      return result;\n    };\n  }\n\n  /**\n   * Creates a function that passes `value` to the `wrapper` function as its\n   * first argument. Additional arguments passed to the new function are appended\n   * to those passed to the `wrapper` function.\n   *\n   * @static\n   * @memberOf _\n   * @category Functions\n   * @param {Mixed} value The value to wrap.\n   * @param {Function} wrapper The wrapper function.\n   * @returns {Function} Returns the new function.\n   * @example\n   *\n   * var hello = function(name) { return 'hello: ' + name; };\n   * hello = _.wrap(hello, function(func) {\n   *   return 'before, ' + func('moe') + ', after';\n   * });\n   * hello();\n   * // => 'before, hello: moe, after'\n   */\n  function wrap(value, wrapper) {\n    return function() {\n      var args = [value];\n      if (arguments.length) {\n        push.apply(args, arguments);\n      }\n      return wrapper.apply(this, args);\n    };\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Converts the characters `&`, `<`, `>`, `\"`, and `'` in `string` to their\n   * corresponding HTML entities.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {String} string The string to escape.\n   * @returns {String} Returns the escaped string.\n   * @example\n   *\n   * _.escape('Moe, Larry & Curly');\n   * // => \"Moe, Larry &amp; Curly\"\n   */\n  function escape(string) {\n    return string == null ? '' : (string + '').replace(reUnescapedHtml, escapeHtmlChar);\n  }\n\n  /**\n   * This function returns the first argument passed to it.\n   *\n   * Note: It is used throughout Lo-Dash as a default callback.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Mixed} value Any value.\n   * @returns {Mixed} Returns `value`.\n   * @example\n   *\n   * var moe = { 'name': 'moe' };\n   * moe === _.identity(moe);\n   * // => true\n   */\n  function identity(value) {\n    return value;\n  }\n\n  /**\n   * Adds functions properties of `object` to the `lodash` function and chainable\n   * wrapper.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} object The object of function properties to add to `lodash`.\n   * @example\n   *\n   * _.mixin({\n   *   'capitalize': function(string) {\n   *     return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n   *   }\n   * });\n   *\n   * _.capitalize('larry');\n   * // => 'Larry'\n   *\n   * _('curly').capitalize();\n   * // => 'Curly'\n   */\n  function mixin(object) {\n    forEach(functions(object), function(methodName) {\n      var func = lodash[methodName] = object[methodName];\n\n      LoDash.prototype[methodName] = function() {\n        var args = [this.__wrapped__];\n        if (arguments.length) {\n          push.apply(args, arguments);\n        }\n        var result = func.apply(lodash, args);\n        if (this.__chain__) {\n          result = new LoDash(result);\n          result.__chain__ = true;\n        }\n        return result;\n      };\n    });\n  }\n\n  /**\n   * Reverts the '_' variable to its previous value and returns a reference to\n   * the `lodash` function.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @returns {Function} Returns the `lodash` function.\n   * @example\n   *\n   * var lodash = _.noConflict();\n   */\n  function noConflict() {\n    window._ = oldDash;\n    return this;\n  }\n\n  /**\n   * Produces a random number between `min` and `max` (inclusive). If only one\n   * argument is passed, a number between `0` and the given number will be returned.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Number} [min=0] The minimum possible value.\n   * @param {Number} [max=1] The maximum possible value.\n   * @returns {Number} Returns a random number.\n   * @example\n   *\n   * _.random(0, 5);\n   * // => a number between 1 and 5\n   *\n   * _.random(5);\n   * // => also a number between 1 and 5\n   */\n  function random(min, max) {\n    if (min == null && max == null) {\n      max = 1;\n    }\n    min = +min || 0;\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + nativeFloor(nativeRandom() * ((+max || 0) - min + 1));\n  }\n\n  /**\n   * Resolves the value of `property` on `object`. If `property` is a function\n   * it will be invoked and its result returned, else the property value is\n   * returned. If `object` is falsey, then `null` is returned.\n   *\n   * @deprecated\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} object The object to inspect.\n   * @param {String} property The property to get the result of.\n   * @returns {Mixed} Returns the resolved value.\n   * @example\n   *\n   * var object = {\n   *   'cheese': 'crumpets',\n   *   'stuff': function() {\n   *     return 'nonsense';\n   *   }\n   * };\n   *\n   * _.result(object, 'cheese');\n   * // => 'crumpets'\n   *\n   * _.result(object, 'stuff');\n   * // => 'nonsense'\n   */\n  function result(object, property) {\n    // based on Backbone's private `getValue` function\n    // https://github.com/documentcloud/backbone/blob/0.9.2/backbone.js#L1419-1424\n    if (!object) {\n      return null;\n    }\n    var value = object[property];\n    return isFunction(value) ? object[property]() : value;\n  }\n\n  /**\n   * A micro-templating method that handles arbitrary delimiters, preserves\n   * whitespace, and correctly escapes quotes within interpolated code.\n   *\n   * Note: In the development build `_.template` utilizes sourceURLs for easier\n   * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n   *\n   * Note: Lo-Dash may be used in Chrome extensions by either creating a `lodash csp`\n   * build and avoiding `_.template` use, or loading Lo-Dash in a sandboxed page.\n   * See http://developer.chrome.com/trunk/extensions/sandboxingEval.html\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {String} text The template text.\n   * @param {Obect} data The data object used to populate the text.\n   * @param {Object} options The options object.\n   * @returns {Function|String} Returns a compiled function when no `data` object\n   *  is given, else it returns the interpolated text.\n   * @example\n   *\n   * // using a compiled template\n   * var compiled = _.template('hello: <%= name %>');\n   * compiled({ 'name': 'moe' });\n   * // => 'hello: moe'\n   *\n   * var list = '<% _.forEach(people, function(name) { %> <li><%= name %></li> <% }); %>';\n   * _.template(list, { 'people': ['moe', 'larry', 'curly'] });\n   * // => '<li>moe</li><li>larry</li><li>curly</li>'\n   *\n   * // using the \"escape\" delimiter to escape HTML in data property values\n   * _.template('<b><%- value %></b>', { 'value': '<script>' });\n   * // => '<b>&lt;script></b>'\n   *\n   * // using the internal `print` function in \"evaluate\" delimiters\n   * _.template('<% print(\"Hello \" + epithet); %>', { 'epithet': 'stooge' });\n   * // => 'Hello stooge.'\n   *\n   * // using custom template delimiter settings\n   * _.templateSettings = {\n   *   'interpolate': /\\{\\{(.+?)\\}\\}/g\n   * };\n   *\n   * _.template('Hello {{ name }}!', { 'name': 'Mustache' });\n   * // => 'Hello Mustache!'\n   *\n   * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n   * var compiled = _.template('hello: <%= data.name %>', null, { 'variable': 'data' });\n   * compiled.source;\n   * // => function(data) {\n   *   var __t, __p = '', __e = _.escape;\n   *   __p += 'hello: ' + ((__t = ( data.name )) == null ? '' : __t);\n   *   return __p;\n   * }\n   *\n   * // using the `source` property to inline compiled templates for meaningful\n   * // line numbers in error messages and a stack trace\n   * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n   *   var JST = {\\\n   *     \"main\": ' + _.template(mainText).source + '\\\n   *   };\\\n   * ');\n   */\n  function template(text, data, options) {\n    // based on John Resig's `tmpl` implementation\n    // http://ejohn.org/blog/javascript-micro-templating/\n    // and Laura Doktorova's doT.js\n    // https://github.com/olado/doT\n    options || (options = {});\n    text += '';\n\n    var isEvaluating,\n        result,\n        index = 0,\n        settings = lodash.templateSettings,\n        source = \"__p += '\",\n        variable = options.variable || settings.variable,\n        hasVariable = variable;\n\n    // compile regexp to match each delimiter\n    var reDelimiters = RegExp(\n      (options.escape || settings.escape || reNoMatch).source + '|' +\n      (options.interpolate || settings.interpolate || reNoMatch).source + '|' +\n      (options.evaluate || settings.evaluate || reNoMatch).source + '|$'\n    , 'g');\n\n    text.replace(reDelimiters, function(match, escapeValue, interpolateValue, evaluateValue, offset) {\n      // escape characters that cannot be included in string literals\n      source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n      // replace delimiters with snippets\n      source +=\n        escapeValue ? \"' +\\n__e(\" + escapeValue + \") +\\n'\" :\n        evaluateValue ? \"';\\n\" + evaluateValue + \";\\n__p += '\" :\n        interpolateValue ? \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\" : '';\n\n      isEvaluating || (isEvaluating = evaluateValue || reComplexDelimiter.test(escapeValue || interpolateValue));\n      index = offset + match.length;\n    });\n\n    source += \"';\\n\";\n\n    // if `variable` is not specified and the template contains \"evaluate\"\n    // delimiters, wrap a with-statement around the generated code to add the\n    // data object to the top of the scope chain\n    if (!hasVariable) {\n      variable = 'obj';\n      if (isEvaluating) {\n        source = 'with (' + variable + ') {\\n' + source + '\\n}\\n';\n      }\n      else {\n        // avoid a with-statement by prepending data object references to property names\n        var reDoubleVariable = RegExp('(\\\\(\\\\s*)' + variable + '\\\\.' + variable + '\\\\b', 'g');\n        source = source\n          .replace(reInsertVariable, '$&' + variable + '.')\n          .replace(reDoubleVariable, '$1__d');\n      }\n    }\n\n    // cleanup code by stripping empty strings\n    source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n      .replace(reEmptyStringMiddle, '$1')\n      .replace(reEmptyStringTrailing, '$1;');\n\n    // frame code as the function body\n    source = 'function(' + variable + ') {\\n' +\n      (hasVariable ? '' : variable + ' || (' + variable + ' = {});\\n') +\n      'var __t, __p = \\'\\', __e = _.escape' +\n      (isEvaluating\n        ? ', __j = Array.prototype.join;\\n' +\n          'function print() { __p += __j.call(arguments, \\'\\') }\\n'\n        : (hasVariable ? '' : ', __d = ' + variable + '.' + variable + ' || ' + variable) + ';\\n'\n      ) +\n      source +\n      'return __p\\n}';\n\n    // use a sourceURL for easier debugging\n    // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n    var sourceURL = useSourceURL\n      ? '\\n//@ sourceURL=/lodash/template/source[' + (templateCounter++) + ']'\n      : '';\n\n    try {\n      result = Function('_', 'return ' + source + sourceURL)(lodash);\n    } catch(e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) {\n      return result(data);\n    }\n    // provide the compiled function's source via its `toString` method, in\n    // supported environments, or the `source` property as a convenience for\n    // inlining compiled templates during the build process\n    result.source = source;\n    return result;\n  }\n\n  /**\n   * Executes the `callback` function `n` times, returning an array of the results\n   * of each `callback` execution. The `callback` is bound to `thisArg` and invoked\n   * with one argument; (index).\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Number} n The number of times to execute the callback.\n   * @param {Function} callback The function called per iteration.\n   * @param {Mixed} [thisArg] The `this` binding for the callback.\n   * @returns {Array} Returns a new array of the results of each `callback` execution.\n   * @example\n   *\n   * var diceRolls = _.times(3, _.partial(_.random, 1, 6));\n   * // => [3, 6, 4]\n   *\n   * _.times(3, function(n) { mage.castSpell(n); });\n   * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively\n   *\n   * _.times(3, function(n) { this.cast(n); }, mage);\n   * // => also calls `mage.castSpell(n)` three times\n   */\n  function times(n, callback, thisArg) {\n    var index = -1,\n        result = Array(n || 0);\n\n    if (thisArg) {\n      while (++index < n) {\n        result[index] = callback.call(thisArg, index);\n      }\n    } else {\n      while (++index < n) {\n        result[index] = callback(index);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts the HTML entities `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#x27;`\n   * in `string` to their corresponding characters.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {String} string The string to unescape.\n   * @returns {String} Returns the unescaped string.\n   * @example\n   *\n   * _.unescape('Moe, Larry &amp; Curly');\n   * // => \"Moe, Larry & Curly\"\n   */\n  function unescape(string) {\n    return string == null ? '' : (string + '').replace(reEscapedHtml, unescapeHtmlChar);\n  }\n\n  /**\n   * Generates a unique id. If `prefix` is passed, the id will be appended to it.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {String} [prefix] The value to prefix the id with.\n   * @returns {Number|String} Returns a numeric id if no prefix is passed, else\n   *  a string id may be returned.\n   * @example\n   *\n   * _.uniqueId('contact_');\n   * // => 'contact_104'\n   */\n  function uniqueId(prefix) {\n    var id = idCounter++;\n    return prefix ? prefix + id : id;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Wraps the value in a `lodash` wrapper object.\n   *\n   * @static\n   * @memberOf _\n   * @category Chaining\n   * @param {Mixed} value The value to wrap.\n   * @returns {Object} Returns the wrapper object.\n   * @example\n   *\n   * var stooges = [\n   *   { 'name': 'moe', 'age': 40 },\n   *   { 'name': 'larry', 'age': 50 },\n   *   { 'name': 'curly', 'age': 60 }\n   * ];\n   *\n   * var youngest = _.chain(stooges)\n   *     .sortBy(function(stooge) { return stooge.age; })\n   *     .map(function(stooge) { return stooge.name + ' is ' + stooge.age; })\n   *     .first()\n   *     .value();\n   * // => 'moe is 40'\n   */\n  function chain(value) {\n    value = new LoDash(value);\n    value.__chain__ = true;\n    return value;\n  }\n\n  /**\n   * Invokes `interceptor` with the `value` as the first argument, and then\n   * returns `value`. The purpose of this method is to \"tap into\" a method chain,\n   * in order to perform operations on intermediate results within the chain.\n   *\n   * @static\n   * @memberOf _\n   * @category Chaining\n   * @param {Mixed} value The value to pass to `interceptor`.\n   * @param {Function} interceptor The function to invoke.\n   * @returns {Mixed} Returns `value`.\n   * @example\n   *\n   * _.chain([1, 2, 3, 200])\n   *  .filter(function(num) { return num % 2 == 0; })\n   *  .tap(alert)\n   *  .map(function(num) { return num * num })\n   *  .value();\n   * // => // [2, 200] (alerted)\n   * // => [4, 40000]\n   */\n  function tap(value, interceptor) {\n    interceptor(value);\n    return value;\n  }\n\n  /**\n   * Enables method chaining on the wrapper object.\n   *\n   * @name chain\n   * @deprecated\n   * @memberOf _\n   * @category Chaining\n   * @returns {Mixed} Returns the wrapper object.\n   * @example\n   *\n   * _([1, 2, 3]).value();\n   * // => [1, 2, 3]\n   */\n  function wrapperChain() {\n    this.__chain__ = true;\n    return this;\n  }\n\n  /**\n   * Extracts the wrapped value.\n   *\n   * @name value\n   * @memberOf _\n   * @category Chaining\n   * @returns {Mixed} Returns the wrapped value.\n   * @example\n   *\n   * _([1, 2, 3]).value();\n   * // => [1, 2, 3]\n   */\n  function wrapperValue() {\n    return this.__wrapped__;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The semantic version number.\n   *\n   * @static\n   * @memberOf _\n   * @type String\n   */\n  lodash.VERSION = '0.7.0';\n\n  // assign static methods\n  lodash.after = after;\n  lodash.bind = bind;\n  lodash.bindAll = bindAll;\n  lodash.chain = chain;\n  lodash.clone = clone;\n  lodash.compact = compact;\n  lodash.compose = compose;\n  lodash.contains = contains;\n  lodash.countBy = countBy;\n  lodash.debounce = debounce;\n  lodash.defaults = defaults;\n  lodash.defer = defer;\n  lodash.delay = delay;\n  lodash.difference = difference;\n  lodash.escape = escape;\n  lodash.every = every;\n  lodash.extend = extend;\n  lodash.filter = filter;\n  lodash.find = find;\n  lodash.first = first;\n  lodash.flatten = flatten;\n  lodash.forEach = forEach;\n  lodash.forIn = forIn;\n  lodash.forOwn = forOwn;\n  lodash.functions = functions;\n  lodash.groupBy = groupBy;\n  lodash.has = has;\n  lodash.identity = identity;\n  lodash.indexOf = indexOf;\n  lodash.initial = initial;\n  lodash.intersection = intersection;\n  lodash.invert = invert;\n  lodash.invoke = invoke;\n  lodash.isArguments = isArguments;\n  lodash.isArray = isArray;\n  lodash.isBoolean = isBoolean;\n  lodash.isDate = isDate;\n  lodash.isElement = isElement;\n  lodash.isEmpty = isEmpty;\n  lodash.isEqual = isEqual;\n  lodash.isFinite = isFinite;\n  lodash.isFunction = isFunction;\n  lodash.isNaN = isNaN;\n  lodash.isNull = isNull;\n  lodash.isNumber = isNumber;\n  lodash.isObject = isObject;\n  lodash.isRegExp = isRegExp;\n  lodash.isString = isString;\n  lodash.isUndefined = isUndefined;\n  lodash.keys = keys;\n  lodash.last = last;\n  lodash.lastIndexOf = lastIndexOf;\n  lodash.lateBind = lateBind;\n  lodash.map = map;\n  lodash.max = max;\n  lodash.memoize = memoize;\n  lodash.merge = merge;\n  lodash.min = min;\n  lodash.mixin = mixin;\n  lodash.noConflict = noConflict;\n  lodash.object = object;\n  lodash.omit = omit;\n  lodash.once = once;\n  lodash.pairs = pairs;\n  lodash.partial = partial;\n  lodash.pick = pick;\n  lodash.pluck = pluck;\n  lodash.random = random;\n  lodash.range = range;\n  lodash.reduce = reduce;\n  lodash.reduceRight = reduceRight;\n  lodash.reject = reject;\n  lodash.rest = rest;\n  lodash.result = result;\n  lodash.shuffle = shuffle;\n  lodash.size = size;\n  lodash.some = some;\n  lodash.sortBy = sortBy;\n  lodash.sortedIndex = sortedIndex;\n  lodash.tap = tap;\n  lodash.template = template;\n  lodash.throttle = throttle;\n  lodash.times = times;\n  lodash.toArray = toArray;\n  lodash.unescape = unescape;\n  lodash.union = union;\n  lodash.uniq = uniq;\n  lodash.uniqueId = uniqueId;\n  lodash.values = values;\n  lodash.where = where;\n  lodash.without = without;\n  lodash.wrap = wrap;\n  lodash.zip = zip;\n\n  // assign aliases\n  lodash.all = every;\n  lodash.any = some;\n  lodash.collect = map;\n  lodash.detect = find;\n  lodash.drop = rest;\n  lodash.each = forEach;\n  lodash.foldl = reduce;\n  lodash.foldr = reduceRight;\n  lodash.head = first;\n  lodash.include = contains;\n  lodash.inject = reduce;\n  lodash.methods = functions;\n  lodash.select = filter;\n  lodash.tail = rest;\n  lodash.take = first;\n  lodash.unique = uniq;\n\n  // add pseudo private properties used and removed during the build process\n  lodash._iteratorTemplate = iteratorTemplate;\n  lodash._shimKeys = shimKeys;\n\n  /*--------------------------------------------------------------------------*/\n\n  // assign private `LoDash` constructor's prototype\n  LoDash.prototype = lodash.prototype;\n\n  // add all static functions to `LoDash.prototype`\n  mixin(lodash);\n\n  // add `LoDash.prototype.chain` after calling `mixin()` to avoid overwriting\n  // it with the wrapped `lodash.chain`\n  LoDash.prototype.chain = wrapperChain;\n  LoDash.prototype.value = wrapperValue;\n\n  // add all mutator Array functions to the wrapper.\n  forEach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n    var func = ArrayProto[methodName];\n\n    LoDash.prototype[methodName] = function() {\n      var value = this.__wrapped__;\n      func.apply(value, arguments);\n\n      // avoid array-like object bugs with `Array#shift` and `Array#splice` in\n      // Firefox < 10 and IE < 9\n      if (hasObjectSpliceBug && value.length === 0) {\n        delete value[0];\n      }\n      if (this.__chain__) {\n        value = new LoDash(value);\n        value.__chain__ = true;\n      }\n      return value;\n    };\n  });\n\n  // add all accessor Array functions to the wrapper.\n  forEach(['concat', 'join', 'slice'], function(methodName) {\n    var func = ArrayProto[methodName];\n\n    LoDash.prototype[methodName] = function() {\n      var value = this.__wrapped__,\n          result = func.apply(value, arguments);\n\n      if (this.__chain__) {\n        result = new LoDash(result);\n        result.__chain__ = true;\n      }\n      return result;\n    };\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // expose Lo-Dash\n  // some AMD build optimizers, like r.js, check for specific condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lo-Dash to the global object even when an AMD loader is present in\n    // case Lo-Dash was injected by a third-party script and not intended to be\n    // loaded as a module. The global assignment can be reverted in the Lo-Dash\n    // module via its `noConflict()` method.\n    window._ = lodash;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define('lodash',[],function() {\n      return lodash;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports) {\n    // in Node.js or RingoJS v0.8.0+\n    if (typeof module == 'object' && module && module.exports == freeExports) {\n      (module.exports = lodash)._ = lodash;\n    }\n    // in Narwhal or RingoJS v0.7.0-\n    else {\n      freeExports._ = lodash;\n    }\n  }\n  else {\n    // in a browser or Rhino\n    window._ = lodash;\n  }\n}(this));\n",
    "define('framework/ServiceRegistry',['common/EventEmitter', 'common/collections/MultiMap', 'lodash'],\nfunction(EventEmitter, MultiMap, _) {\n\t'use strict';\n\tvar identifier = 0;\n\n\t/**\n\t * @constructor\n\t */\n\tfunction ServiceRegistry() {\n\t\tthis._services = new MultiMap();\n\t}\n\n\tvar proto = ServiceRegistry.prototype = Object.create(EventEmitter.prototype);\n\n\tproto.register = function(opts, service) {\n\t\tif (service.__registryIdentifier == null)\n\t\t\tservice.__registryIdentifier = ++identifier;\n\n\t\tvar interfaces;\n\t\tif (Array.isArray(opts)) {\n\t\t\tinterfaces = opts;\n\t\t\topts = {};\n\t\t} else if (typeof opts === 'string') {\n\t\t\tinterfaces = [opts];\n\t\t\topts = {};\n\t\t} else {\n\t\t\tinterfaces = Array.isArray(opts.interfaces) ? opts.interfaces : [opts.interfaces];\t\t\t\n\t\t}\n\n\t\tvar entry = new ServiceEntry(interfaces, opts.meta, service);\n\n\t\tinterfaces.forEach(function(iface) {\n\t\t\tthis._services.put(iface, entry);\n\t\t\tthis.emit('registered:' + iface, entry);\n\t\t}, this);\n\t\tthis.emit('registered', entry);\n\n\t\treturn this;\n\t};\n\n\tproto.deregister = function(opts) {\n\t\topts = this.normalize(opts);\n\t\tthis._deregister(opts);\n\n\t\treturn this;\n\t};\n\n\tproto.on = function(topic, callback, context) {\n\t\tvar result = EventEmitter.prototype.on.apply(this, arguments);\n\t\tvar parts = topic.split(':');\n\t\tif (parts[0] == 'registered') {\n\t\t\tif (parts.length == 1) {\n\t\t\t\tconsole.log('immediate callback for naked registered not implemented.');\n\t\t\t} else {\n\t\t\t\tthis._services.get(parts[1])\n\t\t\t\t.forEach(function(entry) {\n\t\t\t\t\tthis.emit('registered:' + parts[1], entry);\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\tproto._deregister = function(opts) {\n\t\tvar removed = [];\n\t\topts.interfaces.forEach(function(iface) {\n\t\t\tvar entries = this._services.get(iface);\n\t\t\tentries.forEach(function (entry, idx) {\n\t\t\t\tif (entry.matches(opts)) {\n\t\t\t\t\tthis._services.remove(iface, entry);\n\t\t\t\t\tremoved.push(entry);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}, this);\n\n\t\tremoved.forEach(function(entry) {\n\t\t\tthis.emit('deregistered', entry);\n\t\t}, this);\n\t};\n\n\tproto.getBest = function(opts) {\n\t\tvar entry = this.getBestEntry(opts);\n\t\tif (entry != null)\n\t\t\treturn entry.service();\n\t\treturn null;\n\t};\n\n\tproto.getBestEntry = function(opts) {\n\t\treturn this.get(opts)[0];\n\t};\n\n\tvar Normalize = proto.normalize = function Normalize(opts) {\n\t\tvar parms = {};\n\t\tif (typeof opts === 'string') {\n\t\t\tparms.interfaces = [opts];\n\t\t} else if (Array.isArray(opts)) {\n\t\t\tparms.interfaces = opts;\n\t\t} else {\n\t\t\tparms = opts;\n\t\t\tif (!Array.isArray(parms.interfaces))\n\t\t\t\tparms.interfaces = [parms.interfaces];\n\t\t}\n\n\t\treturn parms;\n\t};\n\n\tproto.get = function(opts) {\n\t\tvar parms = this.normalize(opts);\n\n\t\tvar seen;\n\t\tvar prevSeen = {};\n\t\t// For each interface\n\t\tparms.interfaces.some(function(iface, idx) {\n\t\t\tseen = {};\n\t\t\t// Get the services with that interface\n\t\t\tthis._services.get(iface).forEach(function(entry) {\n\t\t\t\t// see if they match the query options\n\t\t\t\tif (entry.metaMatches(opts.meta)) {\n\t\t\t\t\t// If this is the first interface through or the service\n\t\t\t\t\t// has all the previous requested interfaces, add it\n\t\t\t\t\t// to 'seen'\n\t\t\t\t\tif (idx == 0 || prevSeen[entry.serviceIdentifier()] != null) {\n\t\t\t\t\t\tseen[entry.serviceIdentifier()] = entry;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t// move the set of services matching all interfaces forward\n\t\t\tprevSeen = seen;\n\t\t\t// break the loop if no service matched the requested interface(s)\n\t\t\treturn Object.keys(seen).length == 0;\n\t\t}, this);\n\n\t\tvar result = [];\n\n\t\tfor (var k in seen) {\n\t\t\tresult.push(seen[k]);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tproto.getInvoke = function(srvcOpts, methName, args) {\n\t\tvar services = this.get(srvcOpts);\n\n\t\tvar items = {};\n\t\tservices.forEach(function(entry) {\n\t\t\tvar srvc = entry.service();\n\t\t\tvar item = srvc[methName].apply(srvc, args);\n\t\t\titems[item.id] = item;\n\t\t}, this);\n\n\t\treturn items;\n\t};\n\n\tfunction ServiceEntry(interfaces, meta, service) {\n\t\tthis._interfaces = interfaces;\n\t\tthis._meta = meta || {};\n\t\tthis._service = service;\n\t}\n\n\tServiceEntry.prototype = {\n\t\tequals: function(other) {\n\t\t\treturn other._service.__registryIdentifier == this._service.__registryIdentifier;\n\t\t},\n\n\t\tservice: function() {\n\t\t\treturn this._service;\n\t\t},\n\n\t\tmeta: function() {\n\t\t\treturn this._meta;\n\t\t},\n\n\t\tmatches: function(opts) {\n\t\t\topts = Normalize(opts);\n\t\t\tvar ifSet = {};\n\n\t\t\topts.interfaces.forEach(function(iface) {\n\t\t\t\tifSet[iface] = true;\n\t\t\t});\n\n\t\t\treturn this._interfaces.every(function(iface) {\n\t\t\t\treturn ifSet[iface];\n\t\t\t});\n\t\t},\n\n\t\tmetaMatches: function(meta) {\n\t\t\tif (meta == null) return true;\n\n\t\t\tfor (var key in meta) {\n\t\t\t\tif (!_.isEqual(meta[key], this._meta[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tserviceIdentifier: function() {\n\t\t\treturn this._service.__registryIdentifier;\n\t\t}\n\t};\n\n\treturn ServiceRegistry;\n});\n",
    "define('libs/backbone',[\"lodash\", \"jquery\"], function(_, jquery) {\n  var obj = {};\n  obj._ = _;\n  obj.jQuery = jquery;\n\n//     Backbone.js 1.0.0\n\n//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(){\n\n  // Initial Setup\n  // -------------\n\n  // Save a reference to the global object (`window` in the browser, `exports`\n  // on the server).\n  var root = this;\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create local references to array methods we'll want to use later.\n  var array = [];\n  var push = array.push;\n  var slice = array.slice;\n  var splice = array.splice;\n\n  // The top-level namespace. All public Backbone classes and modules will\n  // be attached to this. Exported for both the browser and the server.\n  var Backbone;\n  if (typeof exports !== 'undefined') {\n    Backbone = exports;\n  } else {\n    Backbone = root.Backbone = {};\n  }\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.0.0';\n\n  // Require Underscore, if we're on the server, and it's not already present.\n  var _ = root._;\n // if (!_ && (typeof require !== 'undefined')) _ = require('underscore');\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = root.jQuery || root.Zepto || root.ender || root.$;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // custom events. You may bind with `on` or remove with `off` callback\n  // functions to an event; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {\n\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\n    // the callback to all events fired.\n    on: function(name, callback, context) {\n      if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n      this._events || (this._events = {});\n      var events = this._events[name] || (this._events[name] = []);\n      events.push({callback: callback, context: context, ctx: context || this});\n      return this;\n    },\n\n    // Bind an event to only be triggered a single time. After the first time\n    // the callback is invoked, it will be removed.\n    once: function(name, callback, context) {\n      if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n      var self = this;\n      var once = _.once(function() {\n        self.off(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n      return this.on(name, once, context);\n    },\n\n    // Remove one or many callbacks. If `context` is null, removes all\n    // callbacks with that function. If `callback` is null, removes all\n    // callbacks for the event. If `name` is null, removes all bound\n    // callbacks for all events.\n    off: function(name, callback, context) {\n      var retain, ev, events, names, i, l, j, k;\n      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n      if (!name && !callback && !context) {\n        this._events = {};\n        return this;\n      }\n\n      names = name ? [name] : _.keys(this._events);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (events = this._events[name]) {\n          this._events[name] = retain = [];\n          if (callback || context) {\n            for (j = 0, k = events.length; j < k; j++) {\n              ev = events[j];\n              if ((callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n                  (context && context !== ev.context)) {\n                retain.push(ev);\n              }\n            }\n          }\n          if (!retain.length) delete this._events[name];\n        }\n      }\n\n      return this;\n    },\n\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\n    // passed the same arguments as `trigger` is, apart from the event name\n    // (unless you're listening on `\"all\"`, which will cause your callback to\n    // receive the true name of the event as the first argument).\n    trigger: function(name) {\n      if (!this._events) return this;\n      var args = slice.call(arguments, 1);\n      if (!eventsApi(this, 'trigger', name, args)) return this;\n      var events = this._events[name];\n      var allEvents = this._events.all;\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, arguments);\n      return this;\n    },\n\n    // Tell this object to stop listening to either specific events ... or\n    // to every object it's currently listening to.\n    stopListening: function(obj, name, callback) {\n      var listeners = this._listeners;\n      if (!listeners) return this;\n      var deleteListener = !name && !callback;\n      if (typeof name === 'object') callback = this;\n      if (obj) (listeners = {})[obj._listenerId] = obj;\n      for (var id in listeners) {\n        listeners[id].off(name, callback, this);\n        if (deleteListener) delete this._listeners[id];\n      }\n      return this;\n    }\n\n  };\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Implement fancy features of the Events API such as multiple event\n  // names `\"change blur\"` and jQuery-style event maps `{change: action}`\n  // in terms of the existing API.\n  var eventsApi = function(obj, action, name, rest) {\n    if (!name) return true;\n\n    // Handle event maps.\n    if (typeof name === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n      return false;\n    }\n\n    // Handle space separated event names.\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n      return false;\n    }\n\n    return true;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);\n    }\n  };\n\n  var listenMethods = {listenTo: 'on', listenToOnce: 'once'};\n\n  // Inversion-of-control versions of `on` and `once`. Tell *this* object to\n  // listen to an event in another object ... keeping track of what it's\n  // listening to.\n  _.each(listenMethods, function(implementation, method) {\n    Events[method] = function(obj, name, callback) {\n      var listeners = this._listeners || (this._listeners = {});\n      var id = obj._listenerId || (obj._listenerId = _.uniqueId('l'));\n      listeners[id] = obj;\n      if (typeof name === 'object') callback = this;\n      obj[implementation](name, callback, this);\n      return this;\n    };\n  });\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var defaults;\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId('c');\n    this.attributes = {};\n    _.extend(this, _.pick(options, modelOptions));\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    if (defaults = _.result(this, 'defaults')) {\n      attrs = _.defaults({}, attrs, defaults);\n    }\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // A list of options to be attached directly to the model, if provided.\n  var modelOptions = ['url', 'urlRoot', 'collection'];\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      var attr, attrs, unset, changes, silent, changing, prev, current;\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      unset           = options.unset;\n      silent          = options.silent;\n      changes         = [];\n      changing        = this._changing;\n      this._changing  = true;\n\n      if (!changing) {\n      //  this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n      current = this.attributes, prev = this._previousAttributes;\n\n      // Check for changes of `id`.\n      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];\n\n      // For each `set` attribute, update or delete the current value.\n      for (attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n      /*  if (!_.isEqual(prev[attr], val)) {\n          this.changed[attr] = val;\n        } else {\n          delete this.changed[attr];\n        } */\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = true;\n        options.changes = changes;\n        for (var i = 0, l = changes.length; i < l; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var val, changed = false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      for (var attr in diff) {\n        if (_.isEqual(old[attr], (val = diff[attr]))) continue;\n        (changed || (changed = {}))[attr] = val;\n      }\n      return changed;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server. If the server's representation of the\n    // model differs from its current attributes, they will be overridden,\n    // triggering a `\"change\"` event.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        if (!model.set(model.parse(resp, options), options)) return false;\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      var attrs, method, xhr, attributes = this.attributes;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      // If we're not waiting and attributes exist, save acts as `set(attr).save(null, opts)`.\n      if (attrs && (!options || !options.wait) && !this.set(attrs, options)) return false;\n\n      options = _.extend({validate: true}, options);\n\n      // Do not persist invalid models.\n      if (!this._validate(attrs, options)) return false;\n\n      // Set temporary attributes if `{wait: true}`.\n      if (attrs && options.wait) {\n        this.attributes = _.extend({}, attributes, attrs);\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = model.parse(resp, options);\n        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);\n        if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {\n          return false;\n        }\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch') options.attrs = attrs;\n      xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      if (attrs && options.wait) this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n\n      var destroy = function() {\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (options.wait || model.isNew()) destroy();\n        if (success) success(model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      if (this.isNew()) {\n        options.success();\n        return false;\n      }\n      wrapError(this, options);\n\n      var xhr = this.sync('delete', this, options);\n      if (!options.wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();\n      if (this.isNew()) return base;\n      return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return this.id == null;\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend(options || {}, { validate: true }));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options || {}, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model.\n  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, function(method) {\n    Model.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.attributes);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analagous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.url) this.url = options.url;\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, merge: false, remove: false};\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model){ return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set.\n    add: function(models, options) {\n      return this.set(models, _.defaults(options || {}, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      models = _.isArray(models) ? models.slice() : [models];\n      options || (options = {});\n      var i, l, index, model;\n      for (i = 0, l = models.length; i < l; i++) {\n        model = this.get(models[i]);\n        if (!model) continue;\n        delete this._byId[model.id];\n        delete this._byId[model.cid];\n        index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n        this._removeReference(model);\n      }\n      return this;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      options = _.defaults(options || {}, setOptions);\n      if (options.parse) models = this.parse(models, options);\n      if (!_.isArray(models)) models = models ? [models] : [];\n      var i, l, model, attrs, existing, sort;\n      var at = options.at;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n      var toAdd = [], toRemove = [], modelMap = {};\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      for (i = 0, l = models.length; i < l; i++) {\n        if (!(model = this._prepareModel(models[i], options))) continue;\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        if (existing = this.get(model)) {\n          if (options.remove) modelMap[existing.cid] = true;\n          if (options.merge) {\n            existing.set(model.attributes, options);\n            if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;\n          }\n\n        // This is a new model, push it to the `toAdd` list.\n        } else if (options.add) {\n          toAdd.push(model);\n\n          // Listen to added models' events, and index models for lookup by\n          // `id` and by `cid`.\n          model.on('all', this._onModelEvent, this);\n          this._byId[model.cid] = model;\n          if (model.id != null) this._byId[model.id] = model;\n        }\n      }\n\n      // Remove nonexistent models if appropriate.\n      if (options.remove) {\n        for (i = 0, l = this.length; i < l; ++i) {\n          if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this.remove(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      if (toAdd.length) {\n        if (sortable) sort = true;\n        this.length += toAdd.length;\n        if (at != null) {\n          splice.apply(this.models, [at, 0].concat(toAdd));\n        } else {\n          push.apply(this.models, toAdd);\n        }\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      if (options.silent) return this;\n\n      // Trigger `add` events.\n      for (i = 0, l = toAdd.length; i < l; i++) {\n        (model = toAdd[i]).trigger('add', model, this, options);\n      }\n\n      // Trigger `sort` if the collection was sorted.\n      if (sort) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options || (options = {});\n      for (var i = 0, l = this.models.length; i < l; i++) {\n        this._removeReference(this.models[i]);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return this;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      model = this._prepareModel(model, options);\n      this.add(model, _.extend({at: this.length}, options));\n      return model;\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      model = this._prepareModel(model, options);\n      this.add(model, _.extend({at: 0}, options));\n      return model;\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function(begin, end) {\n      return this.models.slice(begin, end);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj.id != null ? obj.id : obj.cid || obj];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      if (_.isEmpty(attrs)) return first ? void 0 : [];\n      return this[first ? 'find' : 'filter'](function(model) {\n        for (var key in attrs) {\n          if (attrs[key] !== model.get(key)) return false;\n        }\n        return true;\n      });\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      if (!this.comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      // Run sort based on type of `comparator`.\n      if (_.isString(this.comparator) || this.comparator.length === 1) {\n        this.models = this.sortBy(this.comparator, this);\n      } else {\n        this.models.sort(_.bind(this.comparator, this));\n      }\n\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Figure out the smallest index at which a model should be inserted so as\n    // to maintain order.\n    sortedIndex: function(model, value, context) {\n      value || (value = this.comparator);\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _.sortedIndex(this.models, model, iterator, context);\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success(collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      if (!(model = this._prepareModel(model, options))) return false;\n      if (!options.wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(resp) {\n        if (options.wait) collection.add(model, options);\n        if (success) success(model, resp, options);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (attrs instanceof Model) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options || (options = {});\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model._validate(attrs, options)) {\n        this.trigger('invalid', this, attrs, options);\n        return false;\n      }\n      return model;\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model) {\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (model && event === 'change:' + model.idAttribute) {\n        delete this._byId[model.previous(model.idAttribute)];\n        if (model.id != null) this._byId[model.id] = model;\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'indexOf', 'shuffle', 'lastIndexOf',\n    'isEmpty', 'chain'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, function(method) {\n    Collection.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.models);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy'];\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, function(method) {\n    Collection.prototype[method] = function(value, context) {\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _[method](this.models, iterator, context);\n    };\n  });\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    this._configure(options || {});\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be prefered to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this.$el.remove();\n      this.stopListening();\n      return this;\n    },\n\n    // Change the view's element (`this.el` property), including event\n    // re-delegation.\n    setElement: function(element, delegate) {\n      if (this.$el) this.undelegateEvents();\n      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) this.delegateEvents();\n      return this;\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save'\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    // This only works for delegate-able events: not `focus`, `blur`, and\n    // not `change`, `submit`, and `reset` in Internet Explorer.\n    delegateEvents: function(events) {\n      if (!(events || (events = _.result(this, 'events')))) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[events[key]];\n        if (!method) continue;\n\n        var match = key.match(delegateEventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, this);\n        eventName += '.delegateEvents' + this.cid;\n        if (selector === '') {\n          this.$el.on(eventName, method);\n        } else {\n          this.$el.on(eventName, selector, method);\n        }\n      }\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view with `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // Performs the initial configuration of a View with a set of options.\n    // Keys with special meaning *(e.g. model, collection, id, className)* are\n    // attached directly to the view.  See `viewOptions` for an exhaustive\n    // list.\n    _configure: function(options) {\n      if (this.options) options = _.extend({}, _.result(this, 'options'), options);\n      _.extend(this, _.pick(options, viewOptions));\n      this.options = options;\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);\n        this.setElement($el, false);\n      } else {\n        this.setElement(_.result(this, 'el'), false);\n      }\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // If we're sending a `PATCH` request, and we're in an old Internet Explorer\n    // that still has ActiveX enabled by default, override jQuery to use that\n    // for XHR instead. Remove this line when jQuery supports `PATCH` on IE8.\n    if (params.type === 'PATCH' && window.ActiveXObject &&\n          !(window.external && window.external.msActiveXFilteringEnabled)) {\n      params.xhr = function() {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      };\n    }\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        callback && callback.apply(router, args);\n        router.trigger.apply(router, ['route:' + name].concat(args));\n        router.trigger('route', name, args);\n        Backbone.history.trigger('route', router, name, args);\n      });\n      return this;\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional){\n                     return optional ? match : '([^\\/]+)';\n                   })\n                   .replace(splatParam, '(.*?)');\n      return new RegExp('^' + route + '$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param) {\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    _.bindAll(this, 'checkUrl');\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for detecting MSIE.\n  var isExplorer = /msie [\\w.]+/;\n\n  // Cached regex for removing a trailing slash.\n  var trailingSlash = /\\/$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the cross-browser normalized URL fragment, either from the URL,\n    // the hash, or the override.\n    getFragment: function(fragment, forcePushState) {\n      if (fragment == null) {\n        if (this._hasPushState || !this._wantsHashChange || forcePushState) {\n          fragment = this.location.pathname;\n          var root = this.root.replace(trailingSlash, '');\n          if (!fragment.indexOf(root)) fragment = fragment.substr(root.length);\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error(\"Backbone.history has already been started\");\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({}, {root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);\n      var fragment          = this.getFragment();\n      var docMode           = document.documentMode;\n      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      if (oldIE && this._wantsHashChange) {\n        this.iframe = Backbone.$('<iframe src=\"javascript:0\" tabindex=\"-1\" />').hide().appendTo('body')[0].contentWindow;\n        this.navigate(fragment);\n      }\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._hasPushState) {\n        Backbone.$(window).on('popstate', this.checkUrl);\n      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {\n        Backbone.$(window).on('hashchange', this.checkUrl);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      // Determine if we need to change the base url, for a pushState link\n      // opened by a non-pushState browser.\n      this.fragment = fragment;\n      var loc = this.location;\n      var atRoot = loc.pathname.replace(/[^\\/]$/, '$&/') === this.root;\n\n      // If we've started off with a route from a `pushState`-enabled browser,\n      // but we're currently in a browser that doesn't support it...\n      if (this._wantsHashChange && this._wantsPushState && !this._hasPushState && !atRoot) {\n        this.fragment = this.getFragment(null, true);\n        this.location.replace(this.root + this.location.search + '#' + this.fragment);\n        // Return immediately as browser will do redirect to new url\n        return true;\n\n      // Or if we've started out with a hash-based route, but we're currently\n      // in a browser where it could be `pushState`-based instead...\n      } else if (this._wantsPushState && this._hasPushState && atRoot && loc.hash) {\n        this.fragment = this.getHash().replace(routeStripper, '');\n        this.history.replaceState({}, document.title, this.root + this.fragment + loc.search);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);\n      clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n      if (current === this.fragment && this.iframe) {\n        current = this.getFragment(this.getHash(this.iframe));\n      }\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl() || this.loadUrl(this.getHash());\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragmentOverride) {\n      var fragment = this.fragment = this.getFragment(fragmentOverride);\n      var matched = _.any(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n      return matched;\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: options};\n      fragment = this.getFragment(fragment || '');\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n      var url = this.root + fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._hasPushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if(!options.replace) this.iframe.document.open().close();\n          this._updateHash(this.iframe.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function (model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error(model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n}).call(obj);\n\nreturn obj.Backbone;\n});\n",
    "define('libs/etch',['libs/backbone'], function(Backbone) {\n  'use strict';\n    \n  var models = {},\n    views = {},\n    collections = {},\n    etch = {};\n\t\n  // versioning as per semver.org\n  etch.VERSION = '0.6.2';\n\n  etch.config = {\n    // selector to specify editable elements   \n    selector: '.editable',\n      \n    // Named sets of buttons to be specified on the editable element\n    // in the markup as \"data-button-class\"   \n    buttonClasses: {\n      'default': ['save'],\n      'all': ['bold', 'italic', 'underline', 'unordered-list', 'ordered-list', 'link', 'clear-formatting', 'save'],\n      'title': ['bold', 'italic', 'underline', 'save']\n    }\n  };\n\n  function extractValue(e){\n      var value = e.target.dataset.value;\n      if (value == null) {\n        $target = $(e.target);\n        value = $target.parent()[0].dataset.value;\n      }\n      return value;\n  }\n\n  models.Editor = Backbone.Model.extend({\n    constructor: function EtchEditorModel() {\n      Backbone.Model.prototype.constructor.apply(this, arguments);\n    }\n  });\n\n  views.Editor = Backbone.View.extend({\n    constructor: function EtchEditorView() {\n      Backbone.View.prototype.constructor.apply(this, arguments);\n    },\n\n    initialize: function() {\n      this.$el = $(this.el);\n            \n      // Model attribute event listeners:\n      _.bindAll(this, 'changeButtons', 'changePosition', 'changeEditable', 'insertImage',\n              '_editableModelChanged');\n      this.model.bind('change:buttons', this.changeButtons, this);\n      this.model.bind('change:position', this.changePosition, this);\n      this.model.bind('change:editable', this.changeEditable, this);\n      this.model.bind('caretUpdated', this._caretUpdated, this);\n      this.model.bind('spectrum:hide', this._hideSpectrum, this);\n\n      this.model.on('change:editableModel', this._editableModelChanged, this);\n\n      this._editableModelChanged(this.model, this.model.get('editableModel'));\n      // Init Routines:\n      this.changeEditable();\n    },\n\n    events: {\n      'click .etch-bold': 'toggleBold',\n      'click .etch-italic': 'toggleItalic',\n      'click .etch-underline': 'toggleUnderline',\n      'click .etch-heading': 'toggleHeading',\n      'click .etch-unordered-list': 'toggleUnorderedList',\n      'click .etch-justify-left': 'justifyLeft',\n      'click .etch-justify-center': 'justifyCenter',\n      'click .etch-justify-right': 'justifyRight',\n      'click .etch-ordered-list': 'toggleOrderedList',\n      'click .etch-link': 'toggleLink',\n      'click .etch-image': 'getImage',\n      'click .etch-save': 'save',\n      'click .etch-clear-formatting': 'clearFormatting',\n      'click [data-option=\"fontSize\"]': 'setFontSize',\n      'click [data-option=\"fontFamily\"]': 'setFontFamily'\n    },\n\n    _editableModelChanged: function(model, newEditable) {\n      if (this._lastEditableModel != null) {\n        this._lastEditableModel.off(null, null, this);\n      }\n\n      this._lastEditableModel = newEditable;\n      \n      newEditable.on('change:size', this._fontSizeChanged, this);\n    },\n\n    _hideSpectrum: function() {\n      this.$colorChooser.spectrum('hide');\n    },\n\n    _caretUpdated: function() {\n      var $container = $(getSelectionBoundaryElement(window));\n      var color = $container.attr('color');\n      var face = $container.attr('face');\n\n      color = color || $container.parents('font').attr('color') || '#333';\n      face = face || $container.parents('font').attr('face') || 'Lato';\n\n      if (face)\n        face = face.split(',')[0]\n\n      this.$fontFamilyReadout.html(face);\n      this.$colorChooser.spectrum('set', color);\n    },\n        \n    changeEditable: function() {\n      this.setButtonClass();\n      // Im assuming that Ill add more functionality here\n    },\n\n    setButtonClass: function() {\n      // check the button class of the element being edited and set the associated buttons on the model\n      var editorModel = this.model;\n      var buttonClass = editorModel.get('editable').attr('data-button-class') || 'default';\n      editorModel.set({ buttons: etch.config.buttonClasses[buttonClass] });\n    },\n\n    _fontSizeChanged: function(model, value) {\n      this.$fontSizeReadout.text(value);\n    },\n\n    changeButtons: function() {\n      console.log(\"Change btns\");\n      // render the buttons into the editor-panel\n      this.$el.empty();\n      var view = this;\n      var buttons = this.model.get('buttons');\n            \n      // hide editor panel if there are no buttons in it and exit early\n      if (!buttons.length) { $(this.el).hide(); return; }\n      \n      var $container = view.$el;  \n      _.each(this.model.get('buttons'), function(button){\n        if (button == \"<group>\") {\n          $container = etch.groupElFactory();\n          view.$el.append($container);\n        } else if (button == \"</group>\") {\n          $container = view.$el;\n        } else {\n          var $buttonEl = etch.buttonElFactory(button);\n          $container.append($buttonEl);\n        }\n      });\n            \n      $(this.el).show('fast');\n\n      var $colorChooser = this.$el.find(\".color-chooser\");\n      if ($colorChooser.length > 0) {\n        var hex = '333';\n        $colorChooser.spectrum({\n          color: '#' + hex,\n          showSelectionPalette: true,\n          localStorageKey: 'strut.colorChooser',\n          showPalette: true,\n          showInitial: true,\n          showInput: true,\n          palette: [],\n          clickoutFiresChange: true,\n          theme: 'sp-dark',\n          move: function (color) {\n            // $colorChooser.find(\"div\").css(\"backgroundColor\", \"#\" + hex);\n            //view.model.get('editableModel').set('color', hex)\n            document.execCommand('foreColor', false, color.toHexString());\n          },\n          change: function(color) {\n            Backbone.trigger('etch:state', {\n              color: color.toHexString()\n            });\n          }\n        });\n\n        var prevent = function(e) {\n          e.preventDefault();\n        };\n\n        $(\".sp-replacer\").mousedown(prevent);\n        $(\".sp-container\").mousedown(prevent);\n        $colorChooser.mousedown(prevent);\n\n        $colorChooser.find(\"div\").css(\"backgroundColor\", '#' + hex)\n      }\n\n      var $toggle = this.$el.find('.dropdown-toggle');\n      $toggle.dropdown();\n      this.$fontSizeReadout = this.$el.find('.fontSizeReadout');\n      this.$colorChooser = $colorChooser;\n      this.$fontFamilyReadout = this.$el.find('.fontFamilyBtn > .text');\n    },\n\n    changePosition: function() {\n      // animate editor-panel to new position\n      var pos = this.model.get('position');\n      this.$el.animate({'top': pos.y, 'left': pos.x}, { queue: false, duration: 300 });\n    },\n        \n    wrapSelection: function(selectionOrRange, elString, cb) {\n      // wrap current selection with elString tag\n      var range = selectionOrRange === Range ? selectionOrRange : selectionOrRange.getRangeAt(0);\n      var el = document.createElement(elString);\n      range.surroundContents(el);\n    },\n        \n    clearFormatting: function(e) {\n      e.preventDefault();\n      document.execCommand('removeFormat', false, null);\n    },\n\n    setFontFamily: function(e) {\n      e.preventDefault();\n      var value = extractValue(e);\n      document.execCommand('fontName', false, value);\n      value = value.substr(value.indexOf(\"'\")+1, value.lastIndexOf(\"'\")-1)\n      this.$el.find(\".fontFamilyBtn .text\").text(value);\n      Backbone.trigger('etch:state', {\n        face: value\n      });\n    },\n\n    setFontSize: function(e) {\n      var textBox = this.model.get('editableModel');\n      var value = extractValue(e);\n\n      textBox.set('size', (value |= 0));\n\n      // TODO: we need to bind this to the editable model...\n      // whenever that changes.\n      // so that way we have the correct font readouts when someone\n      // uses the scale control\n      this.$el.find(\".fontSizeBtn .text\").text(value);\n      Backbone.trigger('etch:state', {\n        size: value\n      });\n    },\n        \n    toggleBold: function(e) {\n      e.preventDefault();\n      document.execCommand('bold', false, null);\n    },\n\n    toggleItalic: function(e) {\n      e.preventDefault();\n      document.execCommand('italic', false, null);\n    },\n\n    toggleUnderline: function(e) {\n      e.preventDefault();\n      document.execCommand('underline', false, null);\n    },\n        \n    toggleHeading: function(e) {\n      e.preventDefault();\n      var range = window.getSelection().getRangeAt(0);\n      var wrapper = range.commonAncestorContainer.parentElement\n      if ($(wrapper).is('h3')) {\n        $(wrapper).replaceWith(wrapper.textContent)\n        return;\n      }\n      var h3 = document.createElement('h3');\n      range.surroundContents(h3);\n    },\n\n    urlPrompt: function(callback) {\n      // This uses the default browser UI prompt to get a url.\n      // Override this function if you want to implement a custom UI.\n        \n      var url = prompt('Enter a url', 'http://');\n        \n      // Ensure a new link URL starts with http:// or https:// \n      // before it's added to the DOM.\n      //\n      // NOTE: This implementation will disallow relative URLs from being added\n      // but will make it easier for users typing external URLs.\n      if (/^((http|https)...)/.test(url)) {\n        callback(url);\n      } else {\n        callback(\"http://\" + url);\n      }\n    },\n    \n    toggleLink: function(e) {\n      e.preventDefault();\n      var range = window.getSelection().getRangeAt(0);\n\n      // are we in an anchor element?\n      if (range.startContainer.parentNode.tagName === 'A' || range.endContainer.parentNode.tagName === 'A') {\n        // unlink anchor\n        document.execCommand('unlink', false, null);\n      } else {\n        // promt for url and create link\n        this.urlPrompt(function(url) {\n          document.execCommand('createLink', false, url);\n            // sets the link to new tab / window\n            // needs to get the range from fresh since the tree changed\n            window.getSelection().getRangeAt(0).startContainer.parentNode.setAttribute('target','_blank');\n        });\n      }\n    },\n\n    toggleUnorderedList: function(e) {\n      e.preventDefault();\n      document.execCommand('insertUnorderedList', false, null);\n    },\n\n    toggleOrderedList: function(e){\n      e.preventDefault();\n      document.execCommand('insertOrderedList', false, null);\n    },\n        \n    justifyLeft: function(e) {\n      e.preventDefault();\n      document.execCommand('justifyLeft', false, null);\n    },\n\n    justifyCenter: function(e) {\n      e.preventDefault();\n      document.execCommand('justifyCenter', false, null);\n    },\n\n    justifyRight: function(e) {\n      e.preventDefault();\n      document.execCommand('justifyRight', false, null);\n    },\n\n    getImage: function(e) {\n      e.preventDefault();\n\n      // call startUploader with callback to handle inserting it once it is uploded/cropped\n      this.startUploader(this.insertImage);\n    },\n        \n    startUploader: function(cb) {\n      // initialize Image Uploader\n      var model = new models.ImageUploader();\n      var view = new views.ImageUploader({model: model});\n            \n      // stash a reference to the callback to be called after image is uploaded\n      model._imageCallback = function(image) {\n        view.startCropper(image, cb);\n      };\n\n\n      // stash reference to saved range for inserting the image once its \n      this._savedRange = window.getSelection().getRangeAt(0);\n\n      // insert uploader html into DOM\n      $('body').append(view.render().el);\n    },\n        \n    insertImage: function(image) {\n      // insert image - passed as a callback to startUploader\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(this._savedRange);\n            \n      var attrs = {\n        'editable': this.model.get('editable'),\n        'editableModel': this.model.get('editableModel')\n      };\n            \n      _.extend(attrs, image);\n\n      var model = new models.EditableImage(attrs);\n      var view = new views.EditableImage({model: model});\n      this._savedRange.insertNode($(view.render().el).addClass('etch-float-left')[0]);\n    },\n        \n    save: function(e) {\n      e.preventDefault();\n      var editableModel = this.model.get('editableModel');\n      editableModel.trigger('save');\n    }\n  });\n\n  // tack on models, views, etc... as well as init function\n  _.extend(etch, {\n    models: models,\n    views: views,\n    collections: collections,\n\n    triggerCaret: function() {\n      var editorModel = $('.etch-editor-panel').data('model');\n      editorModel.trigger('caretUpdated');\n    },\n\n    // This function is to be used as callback to whatever event\n    // you use to initialize editing \n    editableInit: function(e, overrideY) {\n      e.stopPropagation();\n      var target = e.target || e.srcElement;\n      var $editable = $(target).etchFindEditable();\n      //$editable.attr('contenteditable', true);\n\n      // if the editor isn't already built, build it\n      var $editor = $('.etch-editor-panel');\n      var editorModel = $editor.data('model');\n      if (!$editor.size()) {\n        $editor = $('<div class=\"etch-editor-panel\">');\n        var editorAttrs = { editable: $editable, editableModel: this.model };\n        document.body.appendChild($editor[0]);\n        $editor.etchInstantiate({classType: 'Editor', attrs: editorAttrs});\n        editorModel = $editor.data('model');\n\n      // check if we are on a new editable\n      } else if ($editable[0] !== editorModel.get('editable')[0]) {\n        // set new editable\n        editorModel.set({\n          editable: $editable,\n          editableModel: this.model\n        });\n        $editor.css(\"display\", \"block\");\n      } else {\n        $editor.css(\"display\", \"block\");\n      }\n      \n      // Firefox seems to be only browser that defaults to `StyleWithCSS == true`\n      // so we turn it off here. Plus a try..catch to avoid an error being thrown in IE8.\n      try {\n        document.execCommand('StyleWithCSS', false, false);\n      }\n      catch (err) {\n        // expecting to just eat IE8 error, but if different error, rethrow\n        if (err.message !== \"Invalid argument.\") {\n          // console.log(err);\n        }\n      }\n\n      if (models.EditableImage) {\n        // instantiate any images that may be in the editable\n        var $imgs = $editable.find('img');\n        if ($imgs.size()) {\n          var attrs = { editable: $editable, editableModel: this.model };\n          $imgs.each(function() {\n            var $this = $(this);\n            if (!$this.data('editableImageModel')) {\n              var editableImageModel =  new models.EditableImage(attrs);\n              var editableImageView = new views.EditableImage({model: editableImageModel, el: this, tagName: this.tagName});\n              $this.data('editableImageModel', editableImageModel);\n            }\n          });\n        }\n      }\n\n      // listen for mousedowns that are not coming from the editor\n      // and close the editor\n      var _this = this;\n      $('body').bind('mousedown.editor', function(e) {\n        // check to see if the click was in an etch tool\n        var target = e.target || e.srcElement;\n        if ($(target).not('.sp-container *, .colorpicker *, .etch-editor-panel, .etch-editor-panel *, .etch-image-tools, .etch-image-tools *').size()) {\n          // remove editor\n          $editor.css(\"display\", \"none\");\n          editorModel.trigger('spectrum:hide', null);\n          //$editor.remove();\n                    \n                    \n          if (models.EditableImage) {\n            // unblind the image-tools if the editor isn't active\n            $editable.find('img').unbind('mouseenter');\n\n            // remove any latent image tool model references\n            $(etch.config.selector+' img').data('editableImageModel', false)\n          }\n                    \n          // once the editor is removed, remove the body binding for it\n          $(this).unbind('mousedown.editor');\n        }\n      });\n\n      this.model.trigger('change:size', this.model, this.model.get('size'), {});\n      editorModel.set({position: {x: e.pageX - 15, y: overrideY || (e.pageY - 80)}});\n    }\n  });\n\n  // jquery helper functions\n  $.fn.etchInstantiate = function(options, cb) {\n    return this.each(function() {\n      var $el = $(this);\n      options || (options = {});\n\n      var settings = {\n        el: this,\n        attrs: {}\n      }\n\n      _.extend(settings, options);\n\n      var model = new models[settings.classType](settings.attrs, settings);\n\n      // initialize a view is there is one\n      if (_.isFunction(views[settings.classType])) {\n        var view = new views[settings.classType]({model: model, el: this, tagName: this.tagName});\n      }\n           \n      // stash the model and view on the elements data object\n      $el.data({model: model});\n      $el.data({view: view});\n\n      if (_.isFunction(cb)) {\n        cb({model: model, view: view});\n      }\n    });\n  }\n\n  // TODO: how do we really want to do this?\n  // Allow a template to be provided?\n  // Construct based on some options object?\n  etch.buttonElFactory = function(button) {\n      return $('<a href=\"#\" class=\"etch-editor-button etch-'+ button +'\" title=\"'+ button.replace('-', ' ') +'\"><span></span></a>');\n  };\n\n  $.fn.etchFindEditable = function() {\n    // function that looks for the editable selector on itself or its parents\n    // and returns that el when it is found\n    var $el = $(this);\n    return $el.is(etch.config.selector) ? $el : $el.closest(etch.config.selector);\n  }\n    \n  return etch;\n});\n\n",
    "define('css',[],function () {\n    var path = undefined;\n    if (typeof process !== \"undefined\" && typeof nodeRequire !== 'undefined') {\n        var fs = nodeRequire('fs');\n        path = nodeRequire('path');\n        var fname = null;\n    }\n\n    function loadCss(url) {\n        if (typeof document === \"undefined\") {\n            addToBuild(url);\n            return;\n        }\n\n        if (isOptimized)\n            return;\n\n        var link = document.createElement(\"link\");\n        link.type = \"text/css\";\n        link.rel = \"stylesheet\";\n        link.href = url; // TODO: needs to be configurable.\n        link.href = link.href.replace('impress/import/', '');\n        link.href = link.href.replace('impress/tpl/', '');\n        link.href = link.href.replace('impress/', '');\n        document.getElementsByTagName(\"head\")[0].appendChild(link);\n    }\n\n    function addToBuild(url) {\n        var contents = fs.readFileSync('app/' + url, \"utf8\");\n        fs.appendFileSync(fname, contents + \"\\n\");\n    }\n\n    return {\n        load: function (name, req, onLoad, config) {\n            if (path && !fname) {\n                //fname = path.dirname(config.out) + \"/built.css\";\n                if (!fs.existsSync(\".tmp\"))\n                    fs.mkdirSync(\".tmp\");\n                // if (!fs.existsSync(\".tmp/styles\"))\n                // fs.mkdirSync(\".tmp/styles\");\n                fname = \".tmp/built.css\";\n            }\n            loadCss(name);\n            onLoad(null);\n        }\n    };\n});\n\n",
    "\n",
    "define('strut/etch_extension/main',['libs/etch', 'css!styles/etch_extension/EtchOverrides.css'],\nfunction(etch) {\n    'use strict';\n    _.extend(etch.config.buttonClasses, {\n        default: [\n            '<group>', 'bold', 'italic', '</group>',\n            '<group>', 'unordered-list', 'ordered-list', '</group>',\n            '<group>', 'justify-left', 'justify-center', '</group>',\n            '<group>', 'link', '</group>',\n            'font-family', 'font-size',\n            '<group>', 'color', '</group>',\n            '<group>', 'clear-formatting', '</group>']\n        });\n\n    var noText = [\n        'link',\n        'clear-formatting',\n        'ordered-list',\n        'unordered-list'\n    ];\n\n    etch.buttonElFactory = function(button) {\n        var viewData = {\n            button: button,\n            title: button.replace('-', ' '),\n            display: button.substring(0, 1).toUpperCase()\n        };\n\n        if (noText.indexOf(button) > -1)\n            viewData.display = ''\n\n        switch (button) {\n            case 'font-size':\n                return JST['strut.etch_extension/fontSizeSelection'](viewData);\n            case 'font-family':\n                return JST['strut.etch_extension/fontFamilySelection'](viewData);\n            case 'color':\n                return JST['strut.etch_extension/colorChooser'](viewData);\n            default:\n                if (button.indexOf('justify') !== -1) {\n                    viewData.icon = button.substring(button.indexOf('-')+1, button.length);\n                    return JST['strut.etch_extension/align'](viewData);\n                } else {\n                    return JST['strut.etch_extension/defaultButton'](viewData);\n                }\n        }\n    };\n\n    etch.groupElFactory = function() {\n        return $('<div class=\"btn-group\">')\n    };\n\n    return {\n        initialize: function() {\n        }\n    }\n});\n",
    "\n",
    "define('tantaman/web/widgets/FileBrowser',['libs/backbone', 'css!styles/widgets/fileBrowser.css'],\nfunction(Backbone, empty) {\n\treturn Backbone.View.extend({\n\t\tevents: {\n\t\t\tdestroyed: 'dispose',\n\t\t\t'click li[data-filename]': '_fileClicked',\n\t\t\t'click button.close': '_deleteClicked',\n\t\t\t'dblclick li[data-filename]': '_fileChosen'\n\t\t},\n\n\t\tclassName: \"fileBrowser\",\n\n\t\tinitialize: function() {\n\t\t\tthis.render = this.render.bind(this);\n\t\t\tthis.storageInterface.on(\"change:currentProvider\", this.render);\n\n\t\t\tthis.template = JST['tantaman.web.widgets/FileBrowser'];\n\n\t\t\tthis.renderListing = this.renderListing.bind(this);\n\t\t},\n\n\t\trender: function() {\n\t\t\tif (!this.storageInterface.ready())\n\t\t\t\treturn this;\n\n\t\t\tthis.$el.html('<div class=\"browserContent\">');\n\n\t\t\tif (this.storageInterface.providerReady(this.$el)) {\n\t\t\t\tthis.renderListing();\n\t\t\t} else {\n\t\t\t\tthis.storageInterface.activateProvider(this.$el, this.renderListing);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis.storageInterface.off(null, null, this);\n\t\t},\n\n\t\t_fileClicked: function(e) {\n\t\t\tthis.$fileName.val(e.currentTarget.dataset.filename);\n\t\t\tthis.$el.find('.active').removeClass('active');\n\t\t\t$(e.currentTarget).addClass('active');\n\t\t},\n\n\t\t_fileChosen: function(e) {\n\t\t\tthis.$el.trigger('fileChosen', e.currentTarget.dataset.fileName);\n\t\t},\n\n\t\t_deleteClicked: function(e) {\n\t\t\tvar $target = $(e.currentTarget);\n\t\t\tvar $li = $target.parent().parent();\n\t\t\tthis.storageInterface.remove($li.attr('data-filename'));\n\t\t\t$li.remove();\n\n\t\t\te.stopPropagation();\n\t\t\treturn false;\n\t\t},\n\n\t\trenderListing: function() {\n\t\t\tvar self = this;\n\t\t\tthis.storageInterface.listPresentations().then(function(list) {\n\t\t\t\tself.$el.find('.browserContent').html(self.template({files: list}));\n\t\t\t\tself.$fileName = self.$el.find('.fileName');\n\t\t\t}, function(err) {\n\t\t\t\tif (err) {\n\t\t\t\t\tself.$el.find('.browserContent').html(err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tfileName: function() {\n\t\t\treturn this.$fileName.val();\n\t\t},\n\n\t\tconstructor: function ProviderTab(storageInterface, editorModel) {\n\t\t\tthis.storageInterface = storageInterface;\n\t\t\tthis.editorModel = editorModel;\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "\n",
    "define('strut/storage/view/StorageModal',['libs/backbone', 'tantaman/web/widgets/FileBrowser', 'css!styles/storage/storageModal.css'],\nfunction(Backbone, FileBrowser) {\n\treturn Backbone.View.extend({\n\t\tclassName: \"storageModal modal hide\",\n\t\tevents: {\n\t\t\t'click a[data-provider]': '_providerSelected',\n\t\t\t'click .ok': '_okClicked',\n\t\t\t'destroyed': 'dispose'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis.storageInterface = this.options.storageInterface;\n\t\t\tthis.editorModel = this.options.editorModel;\n\t\t\tdelete this.options.storageInterface;\n\t\t\tdelete this.options.editorModel;\n\n\t\t\tthis.template = JST['strut.storage/StorageModal'];\n\n\t\t\tthis.storageInterface.on('change:providers', this.render, this);\n\t\t\tthis.storageInterface.on('change:currentProvider', this._providerChanged, this);\n\t\t\tthis.fileBrowser = new FileBrowser(this.storageInterface, this.editorModel);\n\t\t},\n\n\t\ttitle: function(title) {\n\t\t\tthis.$el.find('.title').html(title);\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis.storageInterface.off(null, null, this);\n\t\t},\n\n\t\trender: function() {\n\t\t\t// Create a tab for each provider?\n\t\t\t// Each tab will list the presentations currently saved with that provider\n\t\t\t// and also have a 'save' or 'open' button.\n\n\t\t\t// Don't load the data for a provider until its tab is selected...\n\t\t\tvar providerNames = this.storageInterface.providerNames();\n\t\t\tthis.fileBrowser.$el.detach();\n\t\t\tthis.$el.html(this.template({\n\t\t\t\ttitle: this.__title(),\n\t\t\t\ttabs: providerNames\n\t\t\t}));\n\n\t\t\tthis._providerChanged();\n\t\t\tthis.$el.find('.tabContent').append(this.fileBrowser.$el);\n\t\t},\n\n\t\tshow: function(actionHandler, title) {\n\t\t\tthis.actionHandler = actionHandler;\n\t\t\tthis.title(title);\n            //打开菜单后显示fileBrowser\n\t\t\tthis.fileBrowser.render();\n\t\t\tthis.$el.modal('show');\n\t\t},\n\n\t\t_providerChanged: function() {\n\t\t\tif (this.$lastProviderTab) {\n\t\t\t\tthis.$lastProviderTab.removeClass('active');\n\t\t\t}\n\n\t\t\tthis.$lastProviderTab = \n\t\t\t\tthis.$el.find('[data-provider=\"' + \n\t\t\t\t\tthis.storageInterface.currentProviderId() + '\"]').parent();\n\n\t\t\tthis.$lastProviderTab.addClass('active');\n\t\t},\n\n\t\t__title: function() { return 'none'; },\n\n\t\t_okClicked: function() {\n\t\t\tif (this.actionHandler) {\n\t\t\t\tif (this.fileBrowser.fileName() == \"\") {\n\t\t\t\t\t// Present some message..\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar self = this;\n\t\t\t\tthis.actionHandler(this.storageInterface, this.editorModel,\n\t\t\t\tthis.fileBrowser.fileName(),\n\t\t\t\tfunction(result, err) {\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tself.$el.modal('hide');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// display the err\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_providerSelected: function(e) {\n\t\t\t// change the storage interface's selected\n\t\t\t// storage provider\n\t\t\tthis.storageInterface.selectProvider(e.target.dataset.provider);\n\t\t},\n\n\t\tconstructor: function AbstractStorageModal() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define(\n'strut/storage/model/ActionHandlers',[],function() {\n\n\tfunction saveCurrentPresentation(storageInterface, model) {\n\t\treturn storageInterface\n\t\t\t.savePresentation(model.fileName(),\n\t\t\t\t\t\t\t  model.exportPresentation(model.fileName()));\n\t}\n\n\treturn {\n\t\tsave: function(storageInterface, model, filename, cb) {\n\t\t\tif (storageInterface.ready())\n\t\t\t\tstorageInterface.savePresentation(filename, model.exportPresentation(filename), cb);\n\t\t},\n\n\t\topen: function(storageInterface, model, filename, cb) {\n\t\t\t// When opening a new presentation:\n\n\t\t\t// 1. save the current presentation\n\t\t\tsaveCurrentPresentation(storageInterface, model)\n\t\t\t// 2. open the requested presentation\n\t\t\t.then(function () {\n\t\t\t\treturn storageInterface.load(filename);\n\t\t\t}).then(function(data) {\n\t\t\t\tmodel.importPresentation(data);\n\t\t\t\tcb(null);\n\t\t\t}).catch(function(err) {\n\t\t\t\tcb(err);\n\t\t\t\tconsole.log(err);\n\t\t\t\tconsole.log(err.stack);\n\t\t\t});\n\t\t},\n\n\t\tnew_: function(options) {\n\t\t\t// TODO: prompt for user input\n\t\t\t// of the new filename / presentation name.\n\n\n\t\t\t// TODO: don't do the saving of the current\n\t\t\t// prezzer here.\n//\t\t\tsaveCurrentPresentation(options.storageInterface, options.model)\n//\t\t\t.then(function() {\n//\t\t\t\toptions.model.newPresentation();\n//\t\t\t}, function(error) {\n//\t\t\t\t// Error saving old presentation...\n//\t\t\t\tconsole.log(error);\n//\t\t\t}).done();\n\n            if (confirm(\"Do you wanna to create a new plezen without saving the current one\")) {\n                window.location.href = window.location.origin + \"/impress\";\n            }\n            else {\n            }\n\t\t}\n\t};\n});\n",
    "define('tantaman/web/widgets/ErrorModal',[],function() {\n\treturn {\n\t\tshow: function(err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n});\n",
    "define('strut/storage/view/SaveMenuItem',['libs/backbone', '../model/ActionHandlers', 'tantaman/web/widgets/ErrorModal', 'lang'],\nfunction(Backbone, ActionHandlers, ErrorModal, lang) {\n\treturn Backbone.View.extend({\n\t\ttagName: 'li',\n\t\tevents: {\n\t\t\tclick: 'save'\n\t\t},\n\n\t\tconstructor: function SaveMenuItem(modal, model, storageInterface) {\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t\tthis.model = model;\n\t\t\tthis.saveAsModal = modal;\n\t\t\tthis.storageInterface = storageInterface;\n\t\t},\n\n\t\tsave: function() {\n\t\t\tfileName = this.model.fileName();\n\t\t\tif (fileName == null) {\n\t\t\t\tthis.saveAsModal.show(ActionHandlers.save, lang.save_as);\n\t\t\t} else {\n\t\t\t\tActionHandlers.save(this.storageInterface, this.model, fileName, ErrorModal.show);\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html('<a>' + lang.save + '</a>');\n\t\t\treturn this;\n\t\t}\n\t});\n});\n",
    "define('tantaman/web/storage/StorageProvidersWrapper',['libs/backbone'],\nfunction(Backbone) {\n\t'use strict';\n\t// TODO: make a general class to handle all this service boilerplate.\n\t// ServiceCollection does most of it.\n\tfunction StorageProvidersWrapper(registry) {\n\t\tthis.registry = registry;\n\t\tthis.providers = {};\n\t\t\n\t\tthis.registry.on('registered:tantaman.web.StorageProvider',\n\t\t\tthis._providerRegistered, this);\n\n\t\t// this._getProviders();\n\t\t// TODO: handle de-registrations\n\t\tthis._updateCurrentProvider();\n\t}\n\n\t_.extend(StorageProvidersWrapper.prototype, Backbone.Events, {\n\t\t_currentProviderId: null,\n\t\t_providerRegistered: function(providerEntry) {\n\t\t\tvar provider = providerEntry.service();\n\t\t\tthis.providers[provider.id] = provider;\n\n\t\t\tif (this._currentProviderId == null)\n\t\t\t\tthis._currentProviderId = provider.id;\n\n\t\t\tthis.trigger('change:providers.push', this.providers, provider);\n\t\t\tthis.trigger('change:providers', this.providers, provider);\n\t\t},\n\n\t\t_getProviders: function() {\n\t\t\tvar providerEntries = this.registry.get('tantaman.web.StorageProvider');\n\t\t\tvar providers = {};\n\t\t\tproviderEntries.forEach(function(providerEntry) {\n\t\t\t\tvar provider = providerEntry.service();\n\t\t\t\tproviders[provider.id] = provider;\n\n\t\t\t\tif (this._currentProviderId == null)\n\t\t\t\t\tthis._currentProviderId = provider.id;\n\t\t\t}, this);\n\n\t\t\tthis.providers = providers;\n\t\t},\n\n\t\tselectProvider: function(providerId) {\n\t\t\tif (providerId != this._currentProviderId) {\n\t\t\t\tthis.currentProvider().bg();\n\t\t\t\tthis._currentProviderId = providerId;\n\t\t\t\tthis.trigger('change:currentProvider');\n\t\t\t}\n\t\t},\n\n\t\tproviderNames: function() {\n\t\t\tvar result = [];\n\n\t\t\tfor (var id in this.providers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: this.providers[id].name,\n\t\t\t\t\tid: id\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tcurrentProvider: function() {\n\t\t\treturn this.providers[this._currentProviderId];\n\t\t},\n\n\t\t_updateCurrentProvider: function() {\n\t\t\tif (window.sessionMeta.lastProvider)\n\t\t\t\tthis._currentProviderId = window.sessionMeta.lastProvider;\n\t\t}\n\t});\n\n\treturn StorageProvidersWrapper;\n});\n",
    "define('strut/storage/model/StorageInterface',['tantaman/web/storage/StorageProvidersWrapper'],\nfunction(StorageProviders) {\n\t'use strict';\n\n\tfunction splitDocKey(docKey) {\n\t\treturn docKey.substring(docKey.indexOf(':')+1)\n\t\t\t\t\t.split('/');\n\t}\n\n\t// TODO: update to use ServiceCollection\n\t// remove presentation specific garbage\n\tfunction StorageInterface(registry) {\n\t\tthis._providers = new StorageProviders(registry);\n\t}\n\n\tStorageInterface.prototype = {\n\t\tvalidKey: function(key) {\n\t\t\treturn key != '' && \n\t\t\t\tkey.indexOf('\\u0000') == -1 &&\n\t\t\t\tkey.indexOf('/') == -1 &&\n\t\t\t\tkey.indexOf('\\\\') == -1;\n\t\t},\n\n\t\tready: function() {\n\t\t\treturn this.currentProvider() != null;\n\t\t},\n\n\t\tproviderNames: function() {\n\t\t\treturn this._providers.providerNames();\n\t\t},\n\n\t\tproviderReady: function($el) {\n\t\t\treturn this.currentProvider().ready($el);\n\t\t},\n\n\t\tactivateProvider: function($el, cb) {\n\t\t\tthis.currentProvider().activate($el, cb);\n\t\t},\n\n\t\tselectProvider: function(providerId) {\n\t\t\tthis._providers.selectProvider(providerId);\n\t\t},\n\n\t\tcurrentProvider: function() {\n\t\t\treturn this._providers.currentProvider();\n\t\t},\n\n\t\tcurrentProviderId: function() {\n\t\t\treturn this._providers._currentProviderId;\n\t\t},\n\n\t\ton: function() {\n\t\t\treturn this._providers.on.apply(this._providers, arguments);\n\t\t},\n\n\t\tstore: function(identifier, data, options) {\n\t\t\tif (data instanceof Blob) {\n\t\t\t\tthrow \"Use storeAttachment for saving blobs\";\n\t\t\t} else {\n\t\t\t\tif (!options || options.json == null)\n\t\t\t\t\toptions = {json: true};\n\t\t\t\treturn this.currentProvider().setContents(identifier, data, options);\n\t\t\t}\n\t\t},\n\n\t\tload: function(identifier) {\n\t\t\treturn this.currentProvider().getContents(identifier, {json: true});\n\t\t\t// release currently loaded attachments from the AttachmentCache\n\t\t\t// start loading all attachments for the given identifier?\n\t\t},\n\n\t\tremove: function(identifier) {\n\t\t\treturn this.currentProvider().rm(identifier);\n\t\t\t// Tell the AttachmentCache to release its attachments\n\t\t\t// for the given identifier\n\t\t},\n\n\t\tstoreAttachment: function(docKey, attachKey, blob) {\n\t\t\t// stores a blob\n\t\t\treturn this.currentProvider().setAttachment(docKey, attachKey, blob);\n\t\t},\n\n\t\tremoveAttachment: function(docKey, attachKey) {\n\t\t\treturn this.currentProvider().rmAttachment(docKey, attachKey);\n\t\t},\n\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\treturn this.currentProvider().getAttachmentURL(docKey, attachKey);\n\t\t},\n\n\t\trevokeAllAttachmentURLs: function() {\n\t\t\tthis.currentProvider().urlCache.revokeAllCachedURLs();\n\t\t},\n\n\t\trevokeAttachmentURL: function(docKey, attachKey) {\n\t\t\treturn this.currentProvider().revokeAttachmentURL(docKey, attachKey);\n\t\t},\n\n\t\tlist: function(path) {\n\t\t\treturn this.currentProvider().ls(path);\n\t\t},\n\n\t\tlistPresentations: function(path) {\n\t\t\treturn this.currentProvider().ls();\n\t\t},\n\n\t\tsavePresentation: function(identifier, data) {\n\t\t\t// var idx = identifier.indexOf('.strut');\n\t\t\t// if (idx == -1 || (idx + '.strut'.length != identifier.length)) {\n\t\t\t// \tidentifier += '.strut';\n\t\t\t// }\n\t\t\twindow.sessionMeta.lastPresentation = identifier;\n\t\t\treturn this.store(identifier, data)\n\t\t}\n\t};\n\n\treturn StorageInterface;\n});\n",
    "define('tantaman/web/widgets/MenuItem',[],function () {\n    function MenuItem(options) {\n        this.$el = $('<li><a>' + options.title + ' ' +\n            ((options.hotkey) ? '<span class=\"label pull-right\">' + options.hotkey + '</span>' : '')\n            + '</a></li>');\n\n        this.$el.click(function () {\n            if (options.modal) {\n                if (options.save == true && localStorage.getItem('filename') != \"undefined\") //保存功能\n                {\n                    //直接保存\n                    options.modal.noshow(options.handler, options.title, options.model);\n                }\n                else { //另存为 传option.model为了取得preview\n                    options.modal.show(options.handler, options.title, options.model);\n                }\n            }\n            else\n                options.handler(options.model);\n        });\n    }\n\n    MenuItem.prototype = {\n        render: function () {\n            return this;\n        }\n    };\n\n    return MenuItem;\n});\n",
    "define('strut/storage/main',['./view/StorageModal',\n\t\t'./view/SaveMenuItem',\n\t\t'./model/StorageInterface',\n\t\t'./model/ActionHandlers',\n\t\t'tantaman/web/widgets/MenuItem',\n\t\t'lang'],\nfunction(StorageModal,\n\t\tSaveMenuItem,\n\t\tStorageInterface,\n\t\tActionHandlers,\n\t\tMenuItem,\n\t\tlang) {\n\t'use strict';\n\tvar storageInterface = null;\n\n\tvar storageModal = null;\n\tvar $modals = $('#modals');\n\t\n\tvar service = {\n\t\tcreateMenuItems: function(editorModel) {\n\t\t\tvar menuItems = [];\n\n\t\t\tif (storageModal == null) {\n\t\t\t\tstorageModal = new StorageModal({\n\t\t\t\t\teditorModel: editorModel,\n\t\t\t\t\tstorageInterface: storageInterface\n\t\t\t\t});\n\t\t\t\tstorageModal.render();\n\t\t\t\t$modals.append(storageModal.$el);\n\t\t\t}\n\n            menuItems.push(new MenuItem({ title: lang.new_, handler: ActionHandlers.new_, model: {model: editorModel, storageInterface: storageInterface} }));\n//\t\t\tmenuItems.push(new MenuItem({ title: lang.open, modal: storageModal, handler: ActionHandlers.open }));\n//\n//\t\t\tmenuItems.push(new SaveMenuItem(storageModal, editorModel, storageInterface));\n//\t\t\tmenuItems.push(new MenuItem({title: lang.save_as, modal: storageModal, handler: ActionHandlers.save }));\n\n//\t\t\tmenuItems.push({\n//\t\t\t\t$el: $('<li class=\"divider\"></li>'),\n//\t\t\t\trender: function() { return this; }\n//\t\t\t});\n\n\t\t\treturn menuItems;\n\t\t}\n\t};\n\n\treturn {\n\t\t// TODO: break strut dependencies!\n\t\tinitialize: function(registry) {\n\t\t\tstorageInterface = new StorageInterface(registry);\n\t\t\tregistry.register({\n\t\t\t\t// TODO: shouldn't be logomenuitemprovider\n\t\t\t\t// should be brought into the logo\n\t\t\t\t// based on its capabilities\n\t\t\t\tinterfaces: 'strut.LogoMenuItemProvider'\n\t\t\t}, service);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.StorageInterface'\n\t\t\t}, storageInterface)\n\t\t}\n\t}\n});\n\n",
    "define('framework/ServiceCollection',['common/EventEmitter', 'lodash'], \nfunction (EventEmitter, _) {\n\tvar identity = function(p) {return p;};\n\n\tfunction ServiceCollection(registry, lookup, converter) {\n\t\tvar t = new EventEmitter();\n\t\tfor (var i in t) {\n\t\t\tthis[i] = t[i];\n\t\t}\n\t\t\n\t\tthis._idToItem = {};\n\t\tthis._lookup = registry.normalize(lookup);\n\t\tthis._converter = converter || identity;\n\t\tthis._registry = registry;\n\n\t\tthis._register();\n\t\tthis._populateItems();\n\t}\n\n\tServiceCollection.toServiceConverter = function(entry) {\n\t\treturn entry.service();\n\t}\n\n\tvar proto = ServiceCollection.prototype = Object.create(Array.prototype);\n\n\tproto._register = function() {\n\t\tthis._registry.on('registered', this._serviceRegistered, this);\n\t\tthis._registry.on('deregistered', this._serviceDeregistered, this);\n\t};\n\n\tproto._serviceDeregistered = function(entry) {\n\t\tif (entry.matches(this._lookup)) {\n\t\t\tthis._handleRemoval(entry);\n\t\t}\n\t};\n\n\tproto._handleRemoval = function(entry) {\n\t\tvar item = this._idToItem[entry.serviceIdentifier()];\n\n\t\tif (!Array.isArray(item))\n\t\t\titem = [item];\n\n\t\titem.forEach(function(item) {\n\t\t\tvar i = this.indexOf(item);\n\t\t\tthis.splice(i, 1);\n\t\t\tthis.emit('deregistered', item, entry, i);\n\t\t}, this);\n\t};\n\n\tproto._serviceRegistered = function(entry) {\n\t\tif (entry.matches(this._lookup)) {\n\t\t\tvar item = this._converter(entry);\n\t\t\tthis._handleAddition(item, entry);\n\t\t}\n\t};\n\n\tproto._populateItems = function() {\n\t\tvar entries = this._registry.get(this._lookup);\n\t\tentries.forEach(function(entry) {\n\t\t\tvar item = this._converter(entry);\n\t\t\tthis._handleAddition(item, entry);\n\t\t}, this)\n\t};\n\n\tproto._handleAddition = function(item, entry) {\n\t\tthis._idToItem[entry.serviceIdentifier()] = item;\n\t\tif (Array.isArray(item)) {\n\t\t\titem.forEach(function(i) {\n\t\t\t\tthis.push(i);\n\t\t\t\tthis.emit('registered', item, entry, i);\n\t\t\t}, this);\n\t\t} else {\n\t\t\tthis.push(item);\n\t\t\tthis.emit('registered', item, entry, this.length - 1);\n\t\t}\n\t}\n\n\tproto.dispose = function() {\n\t\tthis._registry.off(null, null, this);\n\t};\n\n\treturn ServiceCollection;\n});\n",
    "/*\nA modal backed by a ServiceCollection.\nEach entry in the collection gets a new tab.\n*/\ndefine('tantaman/web/widgets/TabbedModal',['libs/backbone'],\nfunction(Backbone) {\n\treturn Backbone.View.extend({\n\t\tevents: {\n\t\t\thidden: '_hidden'\n\t\t},\n\n\t\tclassName: 'tabbedModal modal hide',\n\n\t\tinitialize: function() {\n\n\t\t},\n\n\t\t__template: function() {\n\t\t\treturn JST['tantaman.web.widgets/TabbedModal'];\n\t\t},\n\n\t\t_providerSelected: function(i, e) {\n\t\t\tif (e) {\n\t\t\t\tvar $curr = $(e.currentTarget);\n\t\t\t\tif (this.$lastProviderTab && this.$lastProviderTab[0] == $curr[0])\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.$lastProviderTab)\n\t\t\t\tthis.$lastProviderTab.removeClass('active');\n\n\t\t\tthis.$lastProviderTab = $curr;\n\t\t\tthis.$lastProviderTab.addClass('active');\n\n\t\t\tif (this.__currentProvider)\n\t\t\t\tthis.__currentProvider.hide();\n\n\t\t\tthis.__currentProvider = this.__tabCollection[i];\n\n\t\t\tthis.__providerSelected(this.__currentProvider, e);\n\n\t\t\tthis.__currentProvider.show(this.$tabContent, this.$el);\n\t\t},\n\n\t\t__providerSelected: function(provider, e) {\n\t\t},\n\n\t\t_hidden: function() {\n\t\t\tif (this.__currentProvider)\n\t\t\t\tthis.__currentProvider.hidden();\n\t\t},\n\n//\t\tshow: function(cb, title) {\n//\t\t\tthis.__cb = cb;\n//\t\t\tthis.__$title.text(title);\n//\t\t\tif (this.__currentProvider)\n//\t\t\t\tthis.__currentProvider.show(this.$tabContent, this.$el);\n//\t\t\tthis.$el.modal('show');\n//\t\t},\n        show: function(cb, title, editormodel) {\n            this.__cb = cb;\n            this.__$title.text(title);\n            if (this.__currentProvider)\n                this.__currentProvider.show(this.$tabContent, this.$el, editormodel);\n            this.$el.modal('show');\n        },\n\n        noshow: function(cb, title, editormodel) {\n            this.__cb = cb;\n            this.__$title.text(title);\n            if (this.__currentProvider)\n                this.__currentProvider.noshow(this.$tabContent, this.$el, editormodel);\n        },\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this.__template()(this.__tabCollection));\n\t\t\tthis.__$ok = this.$el.find('.ok');\n\t\t\tthis.__$title = this.$el.find('.title');\n\t\t\tthis.$tabContent = this.$el.find('.tabContent');\n\n\t\t\tvar self = this;\n\t\t\tvar $tabs = this.$el.find('.providerTab');\n\t\t\t$tabs.each(function(i) {\n\t\t\t\tvar $item = $(this);\n\t\t\t\t$item.click(function(e) {\n\t\t\t\t\tself._providerSelected(i, e);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (this.__tabCollection.length > 0)\n\t\t\t\tself._providerSelected(0, {currentTarget: $tabs[0]});\n\n\t\t\treturn this;\n\t\t},\n\n\t\t// TODO: listen for tab additions and removals.\n\t\t// tabProviders should just be a \"tabProvider\" that can be listened to\n\t\t// and provides tabs.\n\t\tconstructor: function TabbedModal(tabCollection) {\n\t\t\tthis.__tabCollection = tabCollection;\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "define('strut/exporter/ExportImportModal',['tantaman/web/widgets/TabbedModal'],\nfunction(TabbedModal) {\n\treturn TabbedModal.extend({\n\t\tintialize: function() {\n\t\t},\n\n\t\tconstructor: function ExportModal(editorModel, services) {\n\t\t\tvar tabs = [];\n\t\t\tservices.forEach(function(service) {\n\t\t\t\ttabs.push(service.createView(editorModel));\n\t\t\t});\n\t\t\tTabbedModal.prototype.constructor.call(this, tabs);\n\t\t}\n\t});\n});\n",
    "define('strut/exporter/main',['tantaman/web/widgets/MenuItem',\n\t\t'framework/ServiceCollection',\n\t\t'./ExportImportModal',\n\t\t'lang'],\nfunction(MenuItem, ServiceCollection, ExportModal, lang) {\n\t'use strict';\n\n\tvar $modals = $('#modals');\n\n\tvar exportModal = null;\n\tvar exporterCollection = null;\n\tvar menuProvider = {\n\t\tcreateMenuItems: function(editorModel) {\n\t\t\tif (exportModal == null) {\n\t\t\t\texportModal = new ExportModal(editorModel, exporterCollection);\n\t\t\t\texportModal.render();\n\t\t\t\t$modals.append(exportModal.$el);\n\t\t\t}\n            //导出功能菜单\n\n            var menuItems = [];\n//            menuItems.push(new MenuItem({title: lang.save, modal: exportModal, save:true}));\n//            menuItems.push(new MenuItem({title: lang.save_as, modal: exportModal}));\n            menuItems.push(new MenuItem({title: lang.save, modal: exportModal, model:editorModel,save:true}));\n            menuItems.push(new MenuItem({title: lang.save_as, modal: exportModal,model:editorModel}));\n\n            menuItems.push({\n                $el: $('<li class=\"divider\"></li>'),\n                render: function() { return this; }\n            });\n\n\t\t\treturn menuItems;\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\texporterCollection = new ServiceCollection(\n\t\t\t\t\t\t\t\t\t\t\tregistry, 'strut.exporter',\n\t\t\t\t\t\t\t\t\t\t\tServiceCollection.toServiceConverter\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\tregistry.register({\n\t\t\t\t// again, shouldn't call out LogoMenuItemProvider explicitly\n\t\t\t\tinterfaces: ['strut.LogoMenuItemProvider']\n\t\t\t}, menuProvider);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.exporter.Collection'\n\t\t\t}, exporterCollection);\n\t\t}\n\t};\n});\n",
    "define('common/collections/LinkedList',[],function() {\n    /**\n    \t* Provides a linked list implementation\n    \t* @class common.collections.LinkedList\n    \t*\n    */\n\n    var LinkedList;\n    return LinkedList = (function() {\n\n      function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n      }\n\n      LinkedList.prototype.push = function(value) {\n        var newNode;\n        newNode = {\n          prev: null,\n          next: null,\n          value: value\n        };\n        if (this.tail != null) {\n          this.tail.next = newNode;\n          newNode.prev = this.tail;\n          this.tail = newNode;\n        } else {\n          this.head = this.tail = newNode;\n        }\n        ++this.length;\n        return this;\n      };\n\n      LinkedList.prototype.pop = function() {\n        var value;\n        if (!(this.tail != null)) {\n          throw \"List is empty\";\n        }\n        value = this.tail.value;\n        if (this.tail === this.head) {\n          this.tail = this.head = null;\n        } else {\n          this.tail = this.tail.prev;\n          this.tail.next = null;\n        }\n        --this.length;\n        return value;\n      };\n\n      LinkedList.prototype.shift = function() {\n        var value;\n        if (!(this.head != null)) {\n          throw \"List is empty\";\n        }\n        value = this.head.value;\n        if (this.tail === this.head) {\n          this.tail = this.head = null;\n        } else {\n          this.head = this.head.next;\n          this.head.prev = null;\n        }\n        --this.length;\n        return value;\n      };\n\n      LinkedList.prototype.unshift = function(value) {\n        var newNode;\n        newNode = {\n          prev: null,\n          next: null,\n          value: value\n        };\n        if (this.head != null) {\n          this.head.prev = newNode;\n          newNode.next = this.head;\n          this.head = newNode;\n        } else {\n          this.head = this.tail = newNode;\n        }\n        ++this.length;\n        return this;\n      };\n\n      LinkedList.prototype.first = function() {\n        return this.head.value;\n      };\n\n      LinkedList.prototype.last = function() {\n        return this.tail.value;\n      };\n\n      LinkedList.prototype.forEach = function(cb) {\n        var cursor, idx, _results;\n        cursor = this.head;\n        idx = 0;\n        _results = [];\n        while (cursor !== null) {\n          cb(cursor.value, idx++, this);\n          _results.push(cursor = cursor.next);\n        }\n        return _results;\n      };\n\n      return LinkedList;\n\n    })();\n  });\n",
    "define('tantaman/web/undo_support/Commands',[],function() {\n  var CombinedCommand;\n\n  /**\n   * Special kind of command, which allows to pack several commands into single undo/redo item.\n   *\n   * @class CombinedCommand\n   * @param {*} command\n   * @param {string} name Name of the command (will be shown in undo history and undo/redo hints).\n   */\n  CombinedCommand = function(commands, name) {\n    this.commands = commands;\n    this.name = name;\n  };\n  CombinedCommand.prototype = {\n    \"do\": function() {\n      this.commands.forEach(function(command){\n        command.do();\n      });\n    },\n    undo: function() {\n      this.commands.reverse().forEach(function(command){\n        command.undo();\n      });\n    }\n  };\n\n  return {\n    CombinedCommand: CombinedCommand,\n  };\n});\n",
    "define('tantaman/web/undo_support/CmdList',[\n  \"common/EventEmitter\",\n  \"common/collections/LinkedList\",\n  \"./Commands\"],\n  function (EventEmitter, LinkedList, Commands) {\n\n    /**\n     * Maintains a list of commands in an undo history. Drops commands when they should no longer be reachable via\n     * standard undo/redo semantics.\n     *\n     * @class UndoHistory\n     * @param {Integer} size Number of commands/actions to remember.\n     */\n    var UndoHistory = (function () {\n\n      function UndoHistory(size) {\n        this.size = size;\n        this.actions = new LinkedList();\n        this.cursor = null;\n        this.recording = false;\n        this.undoCount = 0;\n        _.extend(this, new EventEmitter());\n      }\n\n      /**\n       * Clears undo history.\n       *\n       * @method clear\n       */\n      UndoHistory.prototype.clear = function () {\n        this.cursor = null;\n        this.undoCount = null;\n        this.actions = new LinkedList();\n      };\n\n      /**\n       * Adds a new command to the undo history. This re-sets the re-do history.\n       *\n       * @param {Command} command Command to be added to the history\n       */\n      UndoHistory.prototype.push = function (command) {\n        if (this.recording) {\n          this.recorded.push(command);\n        }\n        else {\n          var node;\n          if ((this.actions.length - this.undoCount) < this.size) {\n            if (this.undoCount > 0) {\n              node = {\n                prev: null,\n                next: null,\n                value: command\n              };\n              if (!this.cursor) {\n                this.actions.head = node;\n                this.actions.length = 1;\n              } else {\n                node.prev = this.cursor;\n                this.cursor.next.prev = null;\n                this.cursor.next = node;\n                this.actions.length += 1;\n                this.actions.length = this.actions.length - this.undoCount;\n              }\n              this.actions.tail = node;\n              this.undoCount = 0;\n              this.cursor = null;\n            } else {\n              this.actions.push(command);\n              this.cursor = null;\n            }\n          } else {\n            this.actions.shift();\n            this.actions.push(command);\n          }\n          this.emit(\"updated\");\n          return this;\n        }\n      };\n\n      /**\n       * Alias for executing \"do\" and \"push\".\n       *\n       * @param {*} command\n       * @returns {*} Results of \"do\".\n       */\n      UndoHistory.prototype.pushdo = function (command) {\n        if (this.recording) {\n          this.recorded.push(command);\n        }\n        else {\n          var result = command.do();\n          this.push(command);\n          return result;\n        }\n      };\n\n      /**\n       * Alias for executing \"do\" and \"push\".\n       *\n       * @param {Command} command\n       * @returns {*} Results of \"do\".\n       */\n      UndoHistory.prototype.record = function (callback, name) {\n        this.recording = true;\n        this.recorded = [];\n        callback();\n        this.recording = false;\n\n\t\t\t\tif (this.recorded.length) {\n\t\t\t\t\tvar cmd = new Commands.CombinedCommand(this.recorded, name);\n\t\t\t\t\tthis.push(cmd);\n\t\t\t\t\treturn cmd;\n\t\t\t\t}\n      };\n\n      /**\n       * This is useful for telling the user what command would be undone if they pressed undo.\n       *\n       * @returns {string} Name of the next command to be undone.\n       */\n      UndoHistory.prototype.undoName = function () {\n        var node;\n        if (this.undoCount < this.actions.length) {\n          node = this.cursor || this.actions.tail;\n          if (node != null) {\n            return node.value.name;\n          } else {\n            return \"\";\n          }\n        } else {\n          return \"\";\n        }\n      };\n\n      /**\n       * This is useful for telling the user what command would be redone if they pressed redo.\n       *\n       * @returns {string} Name of the next command to be redone.\n       */\n      UndoHistory.prototype.redoName = function () {\n        var node;\n        if (this.undoCount > 0) {\n          if (!(this.cursor != null)) {\n            node = this.actions.head;\n          } else {\n            node = this.cursor.next;\n          }\n          if (node != null) {\n            return node.value.name;\n          } else {\n            return \"\";\n          }\n        } else {\n          return \"\";\n        }\n      };\n\n      /**\n       * Undoes a command.\n       *\n       * @returns UndoHistory this\n       */\n      UndoHistory.prototype.undo = function () {\n        if (this.undoCount < this.actions.length) {\n          if (!(this.cursor != null)) {\n            this.cursor = this.actions.tail;\n          }\n          this.cursor.value.undo();\n          this.cursor = this.cursor.prev;\n          ++this.undoCount;\n          this.emit(\"updated\");\n        }\n        return this;\n      };\n\n      /**\n       * Redoes a command.\n       *\n       * @returns UndoHistory this\n       */\n      UndoHistory.prototype.redo = function () {\n        if (this.undoCount > 0) {\n          if (!(this.cursor != null)) {\n            this.cursor = this.actions.head;\n          } else {\n            this.cursor = this.cursor.next;\n          }\n          this.cursor.value[\"do\"]();\n          --this.undoCount;\n          this.emit(\"updated\");\n        }\n        return this;\n      };\n\n      return UndoHistory;\n\n    })();\n    return UndoHistory;\n  });\n",
    "define('tantaman/web/undo_support/CmdListFactory',['./CmdList'],\nfunction(CmdList) {\n\t'use strict';\n\tvar managedInstances = {};\n\treturn {\n\t\tcreate: function(opts) {\n\t\t\topts = opts || {};\n\t\t\treturn new CmdList(opts.size || 20);\n\t\t},\n\n\t\t// TODO: this should be gotten from the editor model\n\t\t// and not some global managed instance.\n\t\tmanagedInstance: function(key, opts) {\n\t\t\tvar instance = managedInstances[key];\n\t\t\tif (!instance) {\n\t\t\t\tinstance = this.create(opts);\n\t\t\t\tmanagedInstances[key] = instance;\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t};\n});\n",
    "define('tantaman/web/widgets/UndoRedoMenuItem',[],function() {\n\t'use strict';\n\n\tfunction UndoRedoMenuItem(options) {\n\t\tthis.$el = $('<li><a>' + options.title + '<span class=\"label\">' + options.hotkey + '</span></a>'\n\t\t+ '</li>');\n\n\t\tthis.options = options;\n\t\tthis.$el.click(this._perform.bind(this));\n\n\t\tthis._sub = options.cmdList.on('updated', this._listUpdated, this);\n\t}\n\n\tUndoRedoMenuItem.prototype = {\n\t\trender: function() {\n\t\t\treturn this;\n\t\t},\n\n\t\t_listUpdated: function() {\n\t\t\tvar name = this.options.cmdList[this.options.action + 'Name']();\n\t\t\tif (name) {\n\t\t\t\tvar label = this.$el.find('.label');\n\t\t\t\tlabel.html(name);\n\t\t\t\tlabel.removeClass('dispNone');\n\t\t\t} else {\n\t\t\t\tvar label = this.$el.find('.label');\n\t\t\t\tlabel.addClass('dispNone');\n\t\t\t}\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis._sub.dispose();\n\t\t},\n\n\t\t_perform: function(e) {\n\t\t\tthis.options.handler();\n\t\t}\n\t}\n\n\treturn UndoRedoMenuItem;\n});\n",
    "define('strut/logo_button/main',['framework/ServiceCollection', 'tantaman/web/widgets/MenuItem',\n\t\t'tantaman/web/undo_support/CmdListFactory',\n\t\t'tantaman/web/widgets/UndoRedoMenuItem'],\nfunction(ServiceCollection, MenuItem, CmdListFactory, UndoRedoMenuItem) {\n\t'use strict';\n\n\tvar cmdList = CmdListFactory.managedInstance('editor');\n\tfunction createMenuItem(actionEntry) {\n\t\tif (actionEntry.meta().action == 'undo' || actionEntry.meta().action == 'redo') {\n\t\t\treturn new UndoRedoMenuItem({\n\t\t\t\tcmdList: cmdList,\n\t\t\t\taction: actionEntry.meta().action,\n\t\t\t\thandler: actionEntry.service(),\n\t\t\t\thotkey: actionEntry.meta().hotkey,\n\t\t\t\ttitle: actionEntry.meta().title\n\t\t\t});\n\t\t} else {\n\t\t\treturn new MenuItem({\n\t\t\t\t\ttitle: actionEntry.meta().title,\n\t\t\t\t\thandler: actionEntry.service(),\n\t\t\t\t\thotkey: actionEntry.meta().hotkey\n\t\t\t\t});\n\t\t}\n\t}\n\n\tvar actionProviders;\n\tvar actionButtonProvider = {\n\t\t// TODO: remove glob events and instead get it from the editor model...\n\t\t// shouldn't have any singletons anywhere.\n\t\t// TODO: the \"ctrl + c\", etc. bindings should be attached to the action?\n\t\t// instead of in our \"glob evts\" ?\n\t\tcreateMenuItems: function() {\n\t\t\tvar menuItems = [];\n\t\t\tactionProviders.forEach(function(actionEntry) {\n\t\t\t\tmenuItems.push(createMenuItem(actionEntry));\n\t\t\t\t// ugh what a hax0r :/\n\t\t\t\tif (actionEntry.meta().action == 'redo') {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t$el: $('<li class=\"divider\"></li>'),\n\t\t\t\t\t\trender: function() { return this; }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n            //删除按钮后的分割线\n\t\t\tmenuItems.push({\n\t\t\t\t$el: $('<li class=\"divider\"></li>'),\n\t\t\t\trender: function() { return this; }\n\t\t\t});\n\t\t\treturn menuItems;\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tactionProviders = new ServiceCollection(\n\t\t\t\t\tregistry,\n\t\t\t\t\t'strut.editor.glob.action'\n\t\t\t\t);\n\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.LogoMenuItemProvider'\n\t\t\t}, actionButtonProvider);\n\t\t}\n\t}\n});\n",
    "\n",
    "define('tantaman/web/widgets/Dropdown',['libs/backbone','css!styles/widgets/widgets.css'],\nfunction(Backbone, empty) {\n\n\t/**\n\t * @class Dropdown\n\t * @param model\n\t * @param template\n\t * @param options\n\t */\n\tfunction Dropdown(model, template, options) {\n\t\tthis.$el = $('<div class=\"dropdown btn-group\">');\n\t\tthis.el = this.$el[0];\n\t\tif (options && options.class) {\n\t\t\tthis.$el.addClass(options.class);\n\t\t}\n\n\t\tthis._template = template;\n\n\t\tvar self = this;\n\t\tthis.$el.on('destroyed', function() {\n\t\t\tself.dispose();\n\t\t});\n\n\t\tthis._model = model;\n\t\tif (model.on)\n\t\t\tmodel.on('change', this._render, this);\n\t}\n\n\tDropdown.prototype = {\n\t\trender: function() {\n\t\t\tvar data;\n\t\t\tif (this._model.attributes)\n\t\t\t\tdata = this._model.attributes;\n\t\t\telse\n\t\t\t\tdata = this._model;\n\n\t\t\tthis.$el.html(this._template(data));\n\n\t\t\treturn this;\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tif (this._model.off)\n\t\t\t\tthis._model.off(null, null, this);\n\t\t\tthis.off();\n\t\t}\n\t};\n\n\t_.extend(Dropdown.prototype, Backbone.Events);\n\n\treturn Dropdown;\n});\n",
    "define('strut/deck/Utils',[],function() {\n\tfunction makeRawish(obj) {\n\t\tif (obj && obj.constructor.name != 'Object' && 'attributes' in obj)\n\t\t\treturn obj.attributes;\n\t\treturn obj;\n\t}\n\n\treturn {\n\t\tslideSurface: function(slide, deck) {\n\t\t\tslide = makeRawish(slide);\n\t\t\tdeck = makeRawish(deck);\n\t\t\treturn this.slideSurfaceRaw(slide, deck);\n\t\t},\n\n\t\tslideSurfaceRaw: function(slide, deck) {\n\t\t\tvar decksurface = deck.surface || 'bg-default';\n\n\t\t\tvar result;\n\t\t\tif (slide) {\n\t\t\t\tresult = slide.surface;\n\t\t\t\tif (result == 'bg-default' || result == null)\n\t\t\t\t\tresult = decksurface;\n\t\t\t}\n\n\t\t\tif (result == null)\n\t\t\t\tresult = decksurface;\n\n\t\t\treturn result;\n\t\t},\n\n\t\tisImg: function(bg) {\n\t\t\treturn bg && bg.indexOf('img:') == 0;\n\t\t},\n\n\t\tgetImgUrl: function(bg) {\n\t\t\treturn 'url(' + bg.substring(4) + ')';\n\t\t},\n\n\t\t/**\n\t\t * TODO: simplify me!\n\t\t *\n\t\t * Returns the correct background class\n\t\t * which is currently complicated by the fact that sometimes\n\t\t * slides should be transparent and other times they should set their background\n\t\t * to the surface color.\n\t\t *\n\t\t * Other problems arise from the fact that legacy presentations don't have their\n\t\t * background attributes set.\n\t\t *\n\t\t * also bg-default refers to the deck background if from a slide\n\t\t * and the surface background if from a deck.\n\t\t */\n\t\tslideBackground: function(slide, deck, opts) {\n\t\t\tslide = makeRawish(slide);\n\t\t\tdeck = makeRawish(deck);\n\n\t\t\treturn this.slideBackgroundRaw(slide, deck, opts);\n\t\t},\n\n\t\tslideBackgroundRaw: function(slide, deck, opts) {\n\t\t\tvar deckbackground = deck.background || 'bg-transparent';\n\t\t\tvar decksurface = deck.surface || 'bg-default';\n\n\t\t\topts = opts || {};\n\t\t\tvar result;\n\t\t\tvar surface = this.slideSurface(slide, deck);\n\t\t\tif (slide) {\n\t\t\t\tresult = slide.background;\n\t\t\t\tif (result == 'bg-default' || result == null) {\n\t\t\t\t\tresult = deckbackground;\n\t\t\t\t}\n\n\t\t\t\tif (result == 'bg-transparent') {\n\t\t\t\t\tresult = surface;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult = deckbackground;\n\t\t\t}\n\n\t\t\tif (result == 'bg-default' && opts.surfaceForDefault)\n\t\t\t\tresult = surface;\n\n\t\t\tif (result == surface && opts.transparentForSurface) {\n\t\t\t\tresult = '';\n\t\t\t}\n\n\t\t\tif (result == decksurface && opts.transparentForDeckSurface)\n\t\t\t\tresult = '';\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetCurrentBackgrounds: function($el) {\n\t\t\treturn $el.attr('class').match(/bg-[^ ]+/g);\n\t\t},\n\n\t\tgetCurrentBackground: function($el) {\n\t\t\tvar bg = this.getCurrentBackgrounds($el);\n\t\t\tif (bg)\n\t\t\t\treturn bg[0];\n\t\t},\n\n\t\tremoveCurrentBackground: function($el) {\n\t\t\tvar bgs = this.getCurrentBackgrounds($el);\n\t\t\tif (bgs) {\n\t\t\t\tbgs.forEach(function(bg) {\n\t\t\t\t\t$el.removeClass(bg);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\t\n\t\t\treturn bgs;\n\t\t},\n\n\t\tapplyBackground: function($el, slide, deck, opts) {\n\t\t\tthis.removeCurrentBackground($el);\n\t\t\tvar bg = this.slideBackground(slide, deck, opts);\n\t\t\tif (bg.indexOf('img:') == 0) {\n\t\t\t\t$el.css('background-image', 'url(' + bg.substring(4) + ')');\n\t\t\t} else {\n\t\t\t\t$el.css('background-image', '');\n\t\t\t\t$el.addClass(bg);\n\t\t\t}\n\t\t}\n\t};\n});\n",
    "// Author tantaman\n// License MIT\n// http://github.com/tantaman/imgup\ndefine('libs/imgup',[],function () {\n    var root = {};\n\n    ;\n    (function (root) {\n        'use strict';\n\n        var routes = {\n            upload: 'https://api.imgur.com/3/upload'\n        };\n\n        function UploadHandler(xhr) {\n            this._xhr = xhr;\n\n            xhr.onload = handlerCallbacks.onload.bind(this);\n            xhr.upload.onabort = xhr.onabort =\n                xhr.upload.onerror = xhr.onerror =\n                    xhr.ontimeout = handlerCallbacks.onerror.bind(this);\n\n            xhr.upload.onprogress = handlerCallbacks.onprogress.bind(this);\n\n            this._progressBacks = [];\n            this._errorBacks = [];\n            this._thenBacks = [];\n        }\n\n        var handlerCallbacks = {\n            onload: function () {\n                var result = JSON.parse(this._xhr.responseText);\n\n                if (!result.success) {\n                    handlerCallbacks.onerror.call(this, result);\n                } else {\n                    this._thenBacks.forEach(function (cb) {\n                        cb(result);\n                    });\n                }\n            },\n\n            onprogress: function (e) {\n                var completed = e.loaded / e.total;\n                this._progressBacks.forEach(function (cb) {\n                    cb(completed, e);\n                });\n            },\n\n            onerror: function (e) {\n                this._errorBacks.forEach(function (cb) {\n                    cb(e);\n                });\n            }\n        };\n\n        UploadHandler.prototype = {\n            cancel: function () {\n                this._xhr.abort();\n                return this;\n            },\n\n            then: function (cb, ecb) {\n                if (cb != null)\n                    this._thenBacks.push(cb);\n                if (ecb != null)\n                    this._errorBacks.push(ecb);\n                return this;\n            },\n\n            error: function (cb) {\n                this._errorBacks.push(cb);\n                return this;\n            },\n\n            progress: function (cb) {\n                this._progressBacks.push(cb);\n                return this;\n            }\n        };\n\n        function Imgup(clientId) {\n            this.clientId = clientId;\n        }\n\n        Imgup.prototype = {\n            upload: function (file) {\n                var form = new FormData();\n                form.append('image', file);\n\n                var xhr = new XMLHttpRequest();\n                //xhr.open('POST', routes.upload);\n                xhr.open('POST', '/image/upload');\n                xhr.setRequestHeader('Authorization', 'Client-ID ' + this.clientId);\n\n                var self = this;\n                var handler = new UploadHandler(xhr);\n\n                xhr.send(form);\n\n                return handler;\n\n            }\n        };\n\n        root.Imgup = Imgup;\n    })(root);\n\n    return root.Imgup;\n});\n",
    "/*\r\n @author Matt Crinklaw-Vogt\r\n */\r\ndefine('tantaman/web/widgets/ItemImportModal',['libs/backbone', 'libs/imgup', 'lang'],\r\n    function (Backbone, Imgup, lang) {\r\n        var modalCache = {};\r\n        var reg = /^[a-z]+:/;\r\n        var imgup = new Imgup('847de02274cba30');\r\n\r\n        var ignoredVals = {\r\n            'http:': true,\r\n            'http://': true,\r\n            'file:': true,\r\n            '/': true,\r\n            'https://': true,\r\n            'https:': true\r\n        };\r\n\r\n        var Modal = Backbone.View.extend({\r\n            className: \"itemGrabber modal hide\",\r\n            events: {\r\n                \"click .preview\": \"choosePic\",\r\n                \"click .ok\": \"okClicked\",\r\n                \"click div[data-option='browse']\": \"browseClicked\",\r\n                \"click div[data-option='search']\": \"searchClicked\",\r\n                \"change input[type='file']\": \"fileChosen\",\r\n                \"keyup input[name='itemUrl']\": \"urlChanged\",\r\n                \"paste input[name='itemUrl']\": \"urlChanged\",\r\n                \"hidden\": \"hidden\",\r\n                \"dragover\": \"_dragover\",\r\n                \"drop\": \"_drop\",\r\n                \"dragleave\": \"_dragleave\"\r\n            },\r\n\r\n            choosePic: function () {\r\n                var imgSrc = arguments[0].target.currentSrc;\r\n                this.$el.find(\"input[name='itemUrl']\").val(imgSrc);\r\n                this.$el.find(arguments[0].target).addClass(\"imgborder\").siblings().removeClass(\"imgborder\")\r\n                this.$input.val(imgSrc);\r\n                this.urlChanged({\r\n                    which: -1\r\n                });\r\n                //arguments.addClass(\"test\")\r\n            },\r\n\r\n            initialize: function () {\r\n                this.loadItem = _.debounce(this.loadItem.bind(this), 200);\r\n            },\r\n\r\n            // 弹出框\r\n            show: function (cb) {\r\n                this.options.pics = [];\r\n                this.$el.html(JST[\"tantaman.web.widgets/ItemImportModal\"](this.options));\r\n                this.$el.find(\"input[name='itemUrl']\").val(\"\");\r\n                this.$el.find(\".ok\").addClass(\"disabled\");\r\n                this.cb = cb;\r\n                return this.$el.modal('show');\r\n            },\r\n\r\n            // 插入搜索图片\r\n            okClicked: function () {\r\n                if (!this.$el.find(\".ok\").hasClass(\"disabled\")) {\r\n                    if (this.file != null) {\r\n                        this.cb({\r\n                            file: this.file,\r\n                            src: this.src\r\n                        });\r\n                    } else {\r\n                        this.cb(this.src);\r\n                    }\r\n\r\n                    return this.$el.modal('hide');\r\n                }\r\n            },\r\n\r\n            _dragover: function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                e.originalEvent.dataTransfer.dropEffect = 'copy';\r\n\r\n                this.$droparea.addClass('active');\r\n            },\r\n\r\n            _dragleave: function (e) {\r\n                this.$droparea.removeClass('active');\r\n            },\r\n\r\n            _drop: function (e) {\r\n                this.$droparea.removeClass('active');\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                var f = e.originalEvent.dataTransfer.files[0];\r\n\r\n                this._fileChosen(f);\r\n            },\r\n\r\n            fileChosen: function (e) {\r\n                var f, reader,\r\n                    _this = this;\r\n                f = e.target.files[0];\r\n\r\n                this._fileChosen(f);\r\n            },\r\n\r\n            _fileChosen: function (f) {\r\n                if (!f.type.match('image.*'))\r\n                    return;\r\n                //单张图片不超过200K\r\n                if (f.size > 200 * 1024) {\r\n                    alert(lang.oversize);\r\n                    return;\r\n                }\r\n\r\n                this.item.src = '';\r\n                var _this = this;\r\n\r\n\r\n                /*if (this.options.hasStorage()) {\r\n                 var url = URL.createObjectURL(f);\r\n                 this.$input.val(url);\r\n                 this.item.src = url;\r\n                 URL.revokeObjectURL(url);\r\n                 this.file = f;\r\n                 }*/\r\n                /*\r\n                 this._switchToProgress();\r\n                 debugger;\r\n                 imgup.upload(f).progress(function(ratio) {\r\n                 debugger;\r\n                 _this._updateProgress(ratio);\r\n                 }).then(function(result) {\r\n                 debugger;\r\n                 _this._switchToThumbnail();\r\n                 //_this.$input.val(result);\r\n                 _this.urlChanged({\r\n                 which: -1\r\n                 });\r\n                 }, function() {\r\n                 debugger;\r\n                 _this._updateProgress(0);\r\n                 _this._switchToThumbnail();\r\n                 _this.$input.val('Failed to upload image to imgur');\r\n                 });\r\n\r\n                 */\r\n                var formdata = new FormData();\r\n                formdata.append('image', f);\r\n\r\n                $.ajax({\r\n                    url: '/image/upload',\r\n                    type: 'POST',\r\n                    cache: false,\r\n                    data: formdata,\r\n                    contentType: false,\r\n                    processData: false,\r\n                    beforeSend: function () {\r\n                        _this._switchToProgress();\r\n\r\n                    },\r\n                    success: function (data) {\r\n\r\n                        _this._switchToThumbnail();\r\n                        _this.$input.val(data.url);\r\n                        _this.urlChanged({\r\n                            which: -1\r\n                        });\r\n\r\n                    },\r\n                    error: function (jqXHR, textStatus, err) {\r\n                        alert('text status ' + textStatus + ', err ' + err)\r\n                    }\r\n                });\r\n\r\n                return\r\n\r\n            },\r\n\r\n            browseClicked: function () {\r\n                debugger\r\n                return this.$el.find('input[type=\"file\"]').click();\r\n            },\r\n\r\n            //            setHeader: function(xhr) {\r\n            //            xhr.setRequestHeader('Authorization', 'Basic <Your Azure Marketplace Key(Remember');\r\n            //            },\r\n\r\n            // 搜索图片\r\n            searchClicked: function () {\r\n                //Primary Account Key\tLz7CGFA2unnIHDvG+yGP5d6NPGvM6leoYOWP5zOJQYc\r\n                var accountKeyEncoded = \"Okx6N0NHRkEydW5uSUhEdkcreUdQNWQ2TlBHdk02bGVvWU9XUDV6T0pRWWM=\";\r\n                var query = this.$el.find(\"input[name='itemUrl']\").val();//this.$input.val();\r\n\r\n                var requestStr = \"https://api.datamarket.azure.com/Bing/Search/v1/Image?$top=10&Query=%27\" + query + \"%27&Market=%27zh-CN%27&ImageFilters=%27Size%3AMedium%27\";\r\n\r\n                $.ajax({\r\n                    type: 'GET',\r\n                    url: requestStr,\r\n                    dataType: \"json\",\r\n                    context: this,\r\n                    beforeSend: function (xhr) {\r\n                        this._switchToProgress();\r\n                        xhr.setRequestHeader('Authorization', 'Basic ' + accountKeyEncoded);\r\n                    },\r\n                    success: function (data, status) {\r\n                        var imgSrc = data.d.results[0].MediaUrl;\r\n                        var title = data.d.results[0].Title;\r\n                        this.options.pics = [];\r\n                        for (var i = 0; i < data.d.results.length; i++) {\r\n                            if (i == 9) {\r\n                                break;\r\n                            }\r\n                            this.options.pics.push({ \"path\": data.d.results[i].MediaUrl });\r\n                        }\r\n\r\n                        this.$el.html(JST[\"tantaman.web.widgets/ItemImportModal\"](this.options));\r\n                        this.$el.find(\"input[name='itemUrl']\").val(imgSrc);\r\n                        this.$el.find(\".preview\").first().addClass(\"imgborder\");//val(imgSrc);\r\n                        this._switchToThumbnail();\r\n                        this.$input.val(imgSrc);\r\n                        this.urlChanged({\r\n                            which: -1\r\n                        });\r\n\r\n                    },\r\n                    error: function (jqXHR, textStatus, errorThrown) {\r\n                        alert(textStatus);\r\n                    }\r\n                });\r\n            },\r\n\r\n            hidden: function () {\r\n                if (this.$input != null) {\r\n                    this.item.src = '';\r\n                    this.file = null;\r\n                    return this.$input.val(\"\");\r\n                }\r\n            },\r\n            urlChanged: function (e) {\r\n\r\n                if (e.which === 13) {\r\n                    this.src = this.$input.val();\r\n                    return this.okClicked();\r\n                } else {\r\n                    if (this.$input.val().length > 10) { //大于个字符才开始加载\r\n                        this.loadItem();\r\n                    }\r\n                }\r\n            },\r\n            loadItem: function () {\r\n                var val = this.$input.val();\r\n\r\n                if (val in ignoredVals)\r\n                    return;\r\n\r\n                var r = reg.exec(val);\r\n                if (r == null || r.index != 0) {\r\n                    if (val !== '')\r\n                        val = 'http://' + val;\r\n                }\r\n\r\n                if (this.item.src != val)\r\n                    this.item.src = val;\r\n\r\n                return this.src = this.item.src;\r\n            },\r\n            _itemLoadError: function () {\r\n                this.$el.find(\".ok\").addClass(\"disabled\");\r\n                //页面加载错误导致插入图片页面上的alert显示\r\n//                return this.$el.find(\".alert\").removeClass(\"dispNone\");\r\n            },\r\n            _itemLoaded: function () {\r\n                this.$el.find(\".ok\").removeClass(\"disabled\");\r\n                return this.$el.find(\".alert\").addClass(\"dispNone\");\r\n            },\r\n            // should probably just make a sub component to handle progress\r\n            _updateProgress: function (ratio) {\r\n                this.$progressBar.css('width', ratio * 100 + '%');\r\n            },\r\n            _switchToProgress: function () {\r\n                this.$thumbnail.addClass('dispNone');\r\n                this.$progress.removeClass('dispNone');\r\n            },\r\n            _switchToThumbnail: function () {\r\n                this.$progress.addClass('dispNone');\r\n                this.$thumbnail.removeClass('dispNone');\r\n            },\r\n            render: function () {\r\n                var _this = this;\r\n                this.$el.html(JST[\"tantaman.web.widgets/ItemImportModal\"](this.options));\r\n                this.$el.modal();\r\n                this.$el.modal(\"hide\");\r\n\r\n                this.item = this.$el.find(this.options.tag)[0];\r\n\r\n\r\n                if (this.options.tag === \"video\") {\r\n                    //this.$el.find(\".modal-body\").prepend(\"<div class='alert alert-success'>Supports <strong>webm & YouTube</strong>.<br/>Try out: http://www.youtube.com/watch?v=vHUsdkmr-SM</div>\");\r\n                    this.$el.find(\".modal-body\").prepend(lang.videoprompt);\r\n                }\r\n                if (!this.options.ignoreErrors) {\r\n                    this.item.onerror = function () {\r\n                        return _this._itemLoadError();\r\n                    };\r\n                    this.item.onload = function () {\r\n                        return _this._itemLoaded();\r\n                    };\r\n                }\r\n\r\n                this.$input = this.$el.find(\"input[name='itemUrl']\");\r\n                this.$progress = this.$el.find('.progressloading');\r\n                this.$progressBar = this.$progress.find('.bar');\r\n                this.$thumbnail = this.$el.find('.thumbnail');\r\n                this.$droparea = this.$el.find('.droparea');\r\n\r\n                return this.$el;\r\n            },\r\n            constructor: function ItemImportModal() {\r\n                Backbone.View.prototype.constructor.apply(this, arguments);\r\n            }\r\n        });\r\n\r\n        return {\r\n            get: function (options) {\r\n                //暂时注释，搜索图片和插入图片公用img的tag,但是options的其他属性不同\r\n                //                var previous = modalCache[options.tag];\r\n                var previous = modalCache[options.name];\r\n                if (!previous) {\r\n                    previous = new Modal(options);\r\n                    previous.$el.bind('destroyed', function () {\r\n                        delete modalCache[options.tag];\r\n                    });\r\n\r\n                    modalCache[options.tag] = previous;\r\n\r\n                    previous.render();\r\n                    $('#modals').append(previous.$el);\r\n                }\r\n\r\n                return previous;\r\n            },\r\n\r\n            ctor: Modal\r\n        };\r\n    });\r\n\n",
    "define('strut/themes/ColorChooserModal',['libs/backbone'],\nfunction(Backbone) {\n\t/**\n\t* A modal that present a flat color chooser.\n\t*/\n\treturn Backbone.View.extend({\n\t\tclassName: 'modal hide',\n\t\tevents: {\n\t\t\t'click .ok': '_apply'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis._color = '#EEE';\n\t\t},\n\n\t\t/**\n\t\t* Show the modal.  cb is the\n\t\t* function that is called when a color is chosen.\n\t\t* @param {function} cb\n\t\t*/\n\t\tshow: function(cb) {\n\t\t\tthis._cb = cb;\n\t\t\tthis.$el.modal('show');\n\t\t},\n\n\t\thide: function() {\n\t\t\tthis.$el.modal('hide');\n\t\t},\n\n\t\t_apply: function() {\n\t\t\tvar c = typeof this._color == 'string' ? this._color : this._color.toHexString();\n\t\t\tthis._$colorChooser.spectrum('set', this._color);\n\t\t\tthis._cb(c);\n\t\t\tthis.hide();\n\t\t},\n\n\t\trender: function() {\n\t\t\tvar self = this;\n\t\t\tthis.$el.html(JST['strut.themes/ColorChooserModal']());\n\t\t\tthis._$body = this.$el.find('.modal-body');\n\t\t\tthis._$colorChooser = this.$el.find('.color-chooser');\n\t\t\tthis._$colorChooser.spectrum({\n\t\t\t\tcolor: this._color,\n\t\t\t\tshowSelectionPalette: true,\n          \t\tlocalStorageKey: 'strut.colorChooser',\n          \t\tshowPalette: true,\n          \t\tshowInitial: true,\n          \t\tshowInput: true,\n          \t\tpalette: [],\n          \t\tclickoutFiresChange: true,\n          \t\tflat: true,\n          \t\tmove: function(color) {\n          \t\t\tself._color = color;\n          \t\t\tself._$body.css('background', color.toHexString());\n          \t\t}\n\t\t\t});\n\t\t\tthis.$el.modal({\n\t\t\t\tshow: false\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function ColorChooserModal() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('strut/themes/BackgroundProvider',['tantaman/web/widgets/Dropdown',\n\t\t'strut/deck/Utils',\n\t\t'tantaman/web/widgets/ItemImportModal',\n\t\t'./ColorChooserModal',\n\t\t'lang'],\nfunction(View, DeckUtils, ItemImportModal, ColorChooserModal, lang) {\n\tfunction BackgroundProvider(opts) {\n\t\tvar backgrounds = opts.backgrounds;\n\t\tvar editorModel = opts.editorModel;\n\t\tvar selector = opts.selector;\n\t\tvar attr = opts.attr;\n\n\t\tthis._view = new View(backgrounds, opts.template,\n\t\t\t{class: 'iconBtns group-dropdown'});\n\t\tthis._editorModel = editorModel;\n\t\tthis._selector = selector;\n\t\tthis._attr = attr;\n\n\t\tthis._previewBackground = this._previewBackground.bind(this);\n\t\tthis._restoreBackground = this._restoreBackground.bind(this);\n\t\tthis._setBackground = this._setBackground.bind(this);\n\t\tthis._view.$el.on('mouseover', '.thumbnail', this._previewBackground);\n\t\tthis._view.$el.on('mouseout', '.thumbnail', this._restoreBackground);\n\t\tthis._view.$el.on('click', '.thumbnail', this._setBackground);\n\n\t\tthis._setBackgroundImage = this._setBackgroundImage.bind(this);\n\n\t\tif (!imageChooserModal) {\n\t\t\timageChooserModal = ItemImportModal.get({\n\t\t\t\ttag: 'img',\n\t\t\t\tname: lang.image,\n\t\t\t\ttitle: lang.insert_image,\n\t\t\t\ticon: 'icon-picture',\n\t\t\t\tbrowsable: true,\n\t\t\t\thasStorage: editorModel.hasStorage\n\t\t\t});\n\t\t}\n\t}\n\n\tvar imageChooserModal = null;\n\tvar colorChooserModal = new ColorChooserModal();\n\tcolorChooserModal.render();\n\t$('#modals').append(colorChooserModal.$el);\n\n\t// gradientChooserModal = ...\n\t// TODO: update your jQuery gradient chooser.\n\n\tBackgroundProvider.prototype = {\n\t\tview: function() {\n\t\t\treturn this._view;\n\t\t},\n\n\t\t_previewBackground: function(e) {\n\t\t\tvar $container = $(this._selector);\n\t\t\tif ($container.length == 0)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tvar klass = e.currentTarget.dataset['class'];\n\t\t\tif (klass == null) return;\n\t\t\tif (klass == 'bg-img' || klass == 'bg-custom') return;\n\n\t\t\tif (klass == 'bg-default') {\n\t\t\t\tif (this._attr == 'Background') {\n\t\t\t\t\tif ($(e.currentTarget).parent().parent().is('.allSlides')) {\n\t\t\t\t\t\tklass = this._editorModel.deck().slideSurface();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tklass = DeckUtils.slideBackground(null, this._editorModel.deck(), {transparentForSurface: true, surfaceForDefault: true});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._swapBg($container, klass);\n\t\t},\n\n\t\t_setBackground: function(e) {\n\t\t\tvar bg = e.currentTarget.dataset['class'];\n\t\t\tvar allSlides = $(e.currentTarget).parent().parent().is('.allSlides');\n\t\t\tif (bg == 'bg-img') {\n\t\t\t\tvar self = this;\n\t\t\t\timageChooserModal.show(function(src) {\n\t\t\t\t\tself._setBackgroundImage(allSlides, src);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (bg == 'bg-custom') {\n\t\t\t\tvar self = this;\n\t\t\t\tcolorChooserModal.show(function(color) {\n\t\t\t\t\tself._setCustomBgColor(allSlides, color);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._setBgClass(allSlides, bg);\n\t\t},\n\n\t\t_setCustomBgColor: function(allSlides, color) {\n\t\t\tvar bgClass = this._editorModel.addCustomBgClassFor(color).klass;\n\t\t\tthis._setBgClass(allSlides, bgClass);\n\t\t},\n\n\t\t_setBgClass: function(allSlides, bg) {\n\t\t\tif (bg == null)\n\t\t\t\treturn;\n\n\t\t\tvar attr = this._attr.substring(0,1).toLowerCase() + this._attr.substring(1);\n\t\t\tvar obj = this._pickObj(allSlides);\n\n\t\t\tif (bg == '')\n\t\t\t\tbg = undefined;\n\n\t\t\tobj.set(attr, bg);\n\t\t},\n\n\t\t_pickObj: function(allSlides) {\n\t\t\tif (allSlides) {\n\t\t\t\treturn this._editorModel.deck();\n\t\t\t} else {\n\t\t\t\treturn this._editorModel.activeSlide();\n\t\t\t}\n\t\t},\n\n\t\t_setBackgroundImage: function(allSlides, src) {\n\t\t\tvar obj = this._pickObj(allSlides);\n\t\t\t// TODO: we really have to fix this bastard.\n\t\t\tif (this._attr == 'Background') {\n\t\t\t\tobj.set('background', 'img:' + src);\n\t\t\t} else {\n\t\t\t\tobj.set('surface', 'img:' + src);\n\t\t\t}\n\t\t},\n\n\t\t_restoreBackground: function(e) {\n\t\t\t// ugh...\n\t\t\tvar bg;\n\t\t\tif (this._attr == 'Background')\n\t\t\t\tbg = DeckUtils.slideBackground(this._editorModel.activeSlide(),\n\t\t\t\t\tthis._editorModel.deck(), {transparentForSurface: true, surfaceForDefault: true});\n\n\t\t\tif (bg == null) {\n\t\t\t\t// ugh... there should be no visibility into modes from here.\n\t\t\t\tif (this._editorModel.get('modeId') != 'slide-editor') {\n\t\t\t\t\tbg = DeckUtils.slideSurface(null, this._editorModel.deck());\n\t\t\t\t} else {\n\t\t\t\t\tbg = DeckUtils.slideSurface(this._editorModel.activeSlide(), this._editorModel.deck());\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar $container = $(this._selector);\n\t\t\tif ($container.length == 0)\n\t\t\t\treturn;\n\t\t\tif (DeckUtils.isImg(bg)) {\n\t\t\t\tthis._removeLastBg($container);\n\t\t\t} else {\n\t\t\t\tthis._swapBg($container, bg);\n\t\t\t}\n\t\t},\n\n\t\t_removeLastBg: function($el) {\n\t\t\tif (!this._lastBg) {\n\t\t\t\tthis._lastBg = DeckUtils.getCurrentBackground($el);\n\t\t\t}\n\t\t\tif (this._lastBg) {\n\t\t\t\t$el.removeClass(this._lastBg);\n\t\t\t}\n\t\t},\n\n\t\t_swapBg: function($el, newBg) {\n\t\t\tthis._removeLastBg($el);\n\t\t\tthis._lastBg = newBg;\n\t\t\t$el.addClass(newBg);\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis._view.dispose();\t\n\t\t}\n\t};\n\n\treturn BackgroundProvider;\n});\n",
    "\n",
    "define('strut/themes/AvailableBackgrounds',['css!styles/strut.themes/backgroundClasses.css'], function() {\n\treturn {\n\ttitle: 'background',\n\tbackgrounds: [\n\t// TODO: translate descriptions\n\t\t{klass: 'bg-solid-black', description: 'Black'},\n\t\t{klass: 'bg-solid-light', description: 'Light'},\n\t\t{klass: 'bg-solid-smoke', description: 'Smoke'},\n\t\t{klass: 'bg-solid-orange', description: 'Orange'},\n\t\t{klass: 'bg-solid-yellow', description: 'Yellow'},\n\t\t{klass: 'bg-solid-grass', description: 'Grass'},\n\t\t{klass: 'bg-solid-darkgreen', description: 'Dark Green'},\n\t\t{klass: 'bg-solid-sky', description: 'Sky'},\n\t\t{klass: 'bg-solid-lavender', description: 'Lavender'},\n\t\t{klass: 'bg-solid-purple', description: 'Purple'},\n\t\t{klass: 'bg-solid-salmon', description: 'Salmon'},\n\t]\n}});\n",
    "\n",
    "define('strut/themes/AvailableSurfaces',['css!styles/strut.themes/surfaceClasses.css'], function() {\n\treturn {\n\t\ttitle: 'surface',\n\t\tbackgrounds: [\n\t\t\t{klass: 'bg-surf-grad-black'},\n\t\t\t{klass: 'bg-surf-grad-light'},\n\t\t\t{klass: 'bg-surf-grad-smoke'},\n\t\t\t{klass: 'bg-surf-grad-orange'},\n\t\t\t{klass: 'bg-surf-grad-yellow'},\n\t\t\t{klass: 'bg-surf-grad-grass'},\n\t\t\t{klass: 'bg-surf-grad-darkgreen'},\n\t\t\t{klass: 'bg-surf-grad-sky'},\n\t\t\t{klass: 'bg-surf-grad-lavender'},\n\t\t\t{klass: 'bg-surf-grad-purple'},\n\t\t\t{klass: 'bg-surf-grad-salmon'},\n\t\t]\n\t}\n});\n",
    "\n",
    "// CodeMirror version 3.16\n//\n// CodeMirror is the only global var we claim\nconsole.log('Loaded mirror');\nwindow.CodeMirror = (function() {\n  \"use strict\";\n\n  // BROWSER SNIFFING\n\n  // Crude, but necessary to handle a number of hard-to-feature-detect\n  // bugs and behavior differences.\n  var gecko = /gecko\\/\\d/i.test(navigator.userAgent);\n  var ie = /MSIE \\d/.test(navigator.userAgent);\n  var ie_lt8 = ie && (document.documentMode == null || document.documentMode < 8);\n  var ie_lt9 = ie && (document.documentMode == null || document.documentMode < 9);\n  var webkit = /WebKit\\//.test(navigator.userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(navigator.userAgent);\n  var chrome = /Chrome\\//.test(navigator.userAgent);\n  var opera = /Opera\\//.test(navigator.userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var khtml = /KHTML\\//.test(navigator.userAgent);\n  var mac_geLion = /Mac OS X 1\\d\\D([7-9]|\\d\\d)\\D/.test(navigator.userAgent);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(navigator.userAgent);\n  var phantom = /PhantomJS/.test(navigator.userAgent);\n\n  var ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);\n  var mac = ios || /Mac/.test(navigator.platform);\n  var windows = /win/i.test(navigator.platform);\n\n  var opera_version = opera && navigator.userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (opera_version) opera_version = Number(opera_version[1]);\n  if (opera_version && opera_version >= 15) { opera = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || opera && (opera_version == null || opera_version < 12.11));\n  var captureMiddleClick = gecko || (ie && !ie_lt9);\n\n  // Optimize some code when these features are not used\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  // CONSTRUCTOR\n\n  function CodeMirror(place, options) {\n    if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);\n\n    this.options = options = options || {};\n    // Determine effective options based on given values and defaults.\n    for (var opt in defaults) if (!options.hasOwnProperty(opt) && defaults.hasOwnProperty(opt))\n      options[opt] = defaults[opt];\n    setGuttersForLineNumbers(options);\n\n    var docStart = typeof options.value == \"string\" ? 0 : options.value.first;\n    var display = this.display = makeDisplay(place, docStart);\n    display.wrapper.CodeMirror = this;\n    updateGutters(this);\n    if (options.autofocus && !mobile) focusInput(this);\n\n    this.state = {keyMaps: [],\n                  overlays: [],\n                  modeGen: 0,\n                  overwrite: false, focused: false,\n                  suppressEdits: false, pasteIncoming: false,\n                  draggingText: false,\n                  highlight: new Delayed()};\n\n    themeChanged(this);\n    if (options.lineWrapping)\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n\n    var doc = options.value;\n    if (typeof doc == \"string\") doc = new Doc(options.value, options.mode);\n    operation(this, attachDoc)(this, doc);\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie) setTimeout(bind(resetInput, this, true), 20);\n\n    registerEventHandlers(this);\n    // IE throws unspecified error in certain cases, when\n    // trying to access activeElement before onload\n    var hasFocus; try { hasFocus = (document.activeElement == display.input); } catch(e) { }\n    if (hasFocus || (options.autofocus && !mobile)) setTimeout(bind(onFocus, this), 20);\n    else onBlur(this);\n\n    operation(this, function() {\n      for (var opt in optionHandlers)\n        if (optionHandlers.propertyIsEnumerable(opt))\n          optionHandlers[opt](this, options[opt], Init);\n      for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);\n    })();\n  }\n\n  // DISPLAY CONSTRUCTOR\n\n  function makeDisplay(place, docStart) {\n    var d = {};\n\n    var input = d.input = elt(\"textarea\", null, null, \"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;\");\n    if (webkit) input.style.width = \"1000px\";\n    else input.setAttribute(\"wrap\", \"off\");\n    // if border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) input.style.border = \"1px solid black\";\n    input.setAttribute(\"autocorrect\", \"off\"); input.setAttribute(\"autocapitalize\", \"off\"); input.setAttribute(\"spellcheck\", \"false\");\n\n    // Wraps and hides input textarea\n    d.inputDiv = elt(\"div\", [input], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The actual fake scrollbars.\n    d.scrollbarH = elt(\"div\", [elt(\"div\", null, null, \"height: 1px\")], \"CodeMirror-hscrollbar\");\n    d.scrollbarV = elt(\"div\", [elt(\"div\", null, null, \"width: 1px\")], \"CodeMirror-vscrollbar\");\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    // DIVs containing the selection and the actual code\n    d.lineDiv = elt(\"div\", null, \"CodeMirror-code\");\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    // Blinky cursor, and element used to ensure cursor fits at the end of a line\n    d.cursor = elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\");\n    // Secondary cursor, shown when on a 'jump' in bi-directional text\n    d.otherCursor = elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\");\n    // Used to measure text size\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = elt(\"div\", [d.measure, d.selectionDiv, d.lineDiv, d.cursor, d.otherCursor],\n                         null, \"position: relative; outline: none\");\n    // Moved around its parent to cover visible view\n    d.mover = elt(\"div\", [elt(\"div\", [d.lineSpace], \"CodeMirror-lines\")], null, \"position: relative\");\n    // Set to the height of the text, causes scrolling\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    // D is needed because behavior of elts with overflow: auto and padding is inconsistent across browsers\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerCutOff + \"px; width: 1px;\");\n    // Will contain the gutters, if any\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Provides scrolling\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.inputDiv, d.scrollbarH, d.scrollbarV,\n                            d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n    // Work around IE7 z-index bug\n    if (ie_lt8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (place.appendChild) place.appendChild(d.wrapper); else place(d.wrapper);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari\n    if (ios) input.style.width = \"0px\";\n    if (!webkit) d.scroller.draggable = true;\n    // Needed to handle Tab key in KHTML\n    if (khtml) { d.inputDiv.style.height = \"1px\"; d.inputDiv.style.position = \"absolute\"; }\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    else if (ie_lt8) d.scrollbarH.style.minWidth = d.scrollbarV.style.minWidth = \"18px\";\n\n    // Current visible range (may be bigger than the view window).\n    d.viewOffset = d.lastSizeC = 0;\n    d.showingFrom = d.showingTo = docStart;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // See readInput and resetInput\n    d.prevInput = \"\";\n    // Set to true when a non-horizontal-scrolling widget is added. As\n    // an optimization, widget aligning is skipped when d is false.\n    d.alignWidgets = false;\n    // Flag that indicates whether we currently expect input to appear\n    // (after some event like 'keypress' or 'input') and are polling\n    // intensively.\n    d.pollingFast = false;\n    // Self-resetting timeout for the poller\n    d.poll = new Delayed();\n\n    d.cachedCharWidth = d.cachedTextHeight = null;\n    d.measureLineCache = [];\n    d.measureLineCachePos = 0;\n\n    // Tracks when resetInput has punted to just putting a short\n    // string instead of the (large) selection.\n    d.inaccurateSelection = false;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    return d;\n  }\n\n  // STATE UPDATES\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);\n    cm.doc.iter(function(line) {\n      if (line.stateAfter) line.stateAfter = null;\n      if (line.styles) line.styles = null;\n    });\n    cm.doc.frontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) regChange(cm);\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      cm.display.wrapper.className += \" CodeMirror-wrap\";\n      cm.display.sizer.style.minWidth = \"\";\n    } else {\n      cm.display.wrapper.className = cm.display.wrapper.className.replace(\" CodeMirror-wrap\", \"\");\n      computeMaxLength(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function(){updateScrollbars(cm);}, 100);\n  }\n\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function(line) {\n      if (lineIsHidden(cm.doc, line))\n        return 0;\n      else if (wrapping)\n        return (Math.ceil(line.text.length / perLine) || 1) * th;\n      else\n        return th;\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function(line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) updateLineHeight(line, estHeight);\n    });\n  }\n\n  function keyMapChanged(cm) {\n    var map = keyMap[cm.options.keyMap], style = map.style;\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-keymap-\\S+/g, \"\") +\n      (style ? \" cm-keymap-\" + style : \"\");\n    cm.state.disableInput = map.disableInput;\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  function guttersChanged(cm) {\n    updateGutters(cm);\n    regChange(cm);\n    setTimeout(function(){alignHorizontally(cm);}, 20);\n  }\n\n  function updateGutters(cm) {\n    var gutters = cm.display.gutters, specs = cm.options.gutters;\n    removeChildren(gutters);\n    for (var i = 0; i < specs.length; ++i) {\n      var gutterClass = specs[i];\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n      if (gutterClass == \"CodeMirror-linenumbers\") {\n        cm.display.lineGutter = gElt;\n        gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = i ? \"\" : \"none\";\n  }\n\n  function lineLength(doc, line) {\n    if (line.height == 0) return 0;\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find();\n      cur = getLine(doc, found.from.line);\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found = merged.find();\n      len -= cur.text.length - found.from.ch;\n      cur = getLine(doc, found.to.line);\n      len += cur.text.length - found.to.ch;\n    }\n    return len;\n  }\n\n  function computeMaxLength(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(doc, d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function(line) {\n      var len = lineLength(doc, line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // Make sure the gutters options contains the element\n  // \"CodeMirror-linenumbers\" when the lineNumbers option is true.\n  function setGuttersForLineNumbers(options) {\n    var found = false;\n    for (var i = 0; i < options.gutters.length; ++i) {\n      if (options.gutters[i] == \"CodeMirror-linenumbers\") {\n        if (options.lineNumbers) found = true;\n        else options.gutters.splice(i--, 1);\n      }\n    }\n    if (!found && options.lineNumbers)\n      options.gutters.push(\"CodeMirror-linenumbers\");\n  }\n\n  // SCROLLBARS\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content. Optionally force a scrollTop.\n  function updateScrollbars(cm) {\n    var d = cm.display, docHeight = cm.doc.height;\n    var totalHeight = docHeight + paddingVert(d);\n    d.sizer.style.minHeight = d.heightForcer.style.top = totalHeight + \"px\";\n    d.gutters.style.height = Math.max(totalHeight, d.scroller.clientHeight - scrollerCutOff) + \"px\";\n    var scrollHeight = Math.max(totalHeight, d.scroller.scrollHeight);\n    var needsH = d.scroller.scrollWidth > (d.scroller.clientWidth + 1);\n    var needsV = scrollHeight > (d.scroller.clientHeight + 1);\n    if (needsV) {\n      d.scrollbarV.style.display = \"block\";\n      d.scrollbarV.style.bottom = needsH ? scrollbarWidth(d.measure) + \"px\" : \"0\";\n      d.scrollbarV.firstChild.style.height =\n        (scrollHeight - d.scroller.clientHeight + d.scrollbarV.clientHeight) + \"px\";\n    } else {\n      d.scrollbarV.style.display = \"\";\n      d.scrollbarV.firstChild.style.height = \"0\";\n    }\n    if (needsH) {\n      d.scrollbarH.style.display = \"block\";\n      d.scrollbarH.style.right = needsV ? scrollbarWidth(d.measure) + \"px\" : \"0\";\n      d.scrollbarH.firstChild.style.width =\n        (d.scroller.scrollWidth - d.scroller.clientWidth + d.scrollbarH.clientWidth) + \"px\";\n    } else {\n      d.scrollbarH.style.display = \"\";\n      d.scrollbarH.firstChild.style.width = \"0\";\n    }\n    if (needsH && needsV) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = d.scrollbarFiller.style.width = scrollbarWidth(d.measure) + \"px\";\n    } else d.scrollbarFiller.style.display = \"\";\n    if (needsH && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = scrollbarWidth(d.measure) + \"px\";\n      d.gutterFiller.style.width = d.gutters.offsetWidth + \"px\";\n    } else d.gutterFiller.style.display = \"\";\n\n    if (mac_geLion && scrollbarWidth(d.measure) === 0)\n      d.scrollbarV.style.minWidth = d.scrollbarH.style.minHeight = mac_geMountainLion ? \"18px\" : \"12px\";\n  }\n\n  function visibleLines(display, doc, viewPort) {\n    var top = display.scroller.scrollTop, height = display.wrapper.clientHeight;\n    if (typeof viewPort == \"number\") top = viewPort;\n    else if (viewPort) {top = viewPort.top; height = viewPort.bottom - viewPort.top;}\n    top = Math.floor(top - paddingTop(display));\n    var bottom = Math.ceil(top + height);\n    return {from: lineAtHeight(doc, top), to: lineAtHeight(doc, bottom)};\n  }\n\n  // LINE NUMBERS\n\n  function alignHorizontally(cm) {\n    var display = cm.display;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) return;\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, l = comp + \"px\";\n    for (var n = display.lineDiv.firstChild; n; n = n.nextSibling) if (n.alignable) {\n      for (var i = 0, a = n.alignable; i < a.length; ++i) a[i].style.left = l;\n    }\n    if (cm.options.fixedGutter)\n      display.gutters.style.left = (comp + gutterW) + \"px\";\n  }\n\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) return false;\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding);\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      return true;\n    }\n    return false;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  }\n  function compensateForHScroll(display) {\n    return getRect(display.scroller).left - getRect(display.sizer).left;\n  }\n\n  // DISPLAY DRAWING\n\n  function updateDisplay(cm, changes, viewPort, forced) {\n    var oldFrom = cm.display.showingFrom, oldTo = cm.display.showingTo, updated;\n    var visible = visibleLines(cm.display, cm.doc, viewPort);\n    for (;;) {\n      if (!updateDisplayInner(cm, changes, visible, forced)) break;\n      forced = false;\n      updated = true;\n      updateSelection(cm);\n      updateScrollbars(cm);\n\n      // Clip forced viewport to actual scrollable area\n      if (viewPort)\n        viewPort = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight,\n                            typeof viewPort == \"number\" ? viewPort : viewPort.top);\n      visible = visibleLines(cm.display, cm.doc, viewPort);\n      if (visible.from >= cm.display.showingFrom && visible.to <= cm.display.showingTo)\n        break;\n      changes = [];\n    }\n\n    if (updated) {\n      signalLater(cm, \"update\", cm);\n      if (cm.display.showingFrom != oldFrom || cm.display.showingTo != oldTo)\n        signalLater(cm, \"viewportChange\", cm, cm.display.showingFrom, cm.display.showingTo);\n    }\n    return updated;\n  }\n\n  // Uses a set of changes plus the current scroll position to\n  // determine which DOM updates have to be made, and makes the\n  // updates.\n  function updateDisplayInner(cm, changes, visible, forced) {\n    var display = cm.display, doc = cm.doc;\n    if (!display.wrapper.clientWidth) {\n      display.showingFrom = display.showingTo = doc.first;\n      display.viewOffset = 0;\n      return;\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!forced && changes.length == 0 &&\n        visible.from > display.showingFrom && visible.to < display.showingTo)\n      return;\n\n    if (maybeUpdateLineNumberWidth(cm))\n      changes = [{from: doc.first, to: doc.first + doc.size}];\n    var gutterW = display.sizer.style.marginLeft = display.gutters.offsetWidth + \"px\";\n    display.scrollbarH.style.left = cm.options.fixedGutter ? gutterW : \"0\";\n\n    // Used to determine which lines need their line numbers updated\n    var positionsChangedFrom = Infinity;\n    if (cm.options.lineNumbers)\n      for (var i = 0; i < changes.length; ++i)\n        if (changes[i].diff && changes[i].from < positionsChangedFrom) { positionsChangedFrom = changes[i].from; }\n\n    var end = doc.first + doc.size;\n    var from = Math.max(visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, visible.to + cm.options.viewportMargin);\n    if (display.showingFrom < from && from - display.showingFrom < 20) from = Math.max(doc.first, display.showingFrom);\n    if (display.showingTo > to && display.showingTo - to < 20) to = Math.min(end, display.showingTo);\n    if (sawCollapsedSpans) {\n      from = lineNo(visualLine(doc, getLine(doc, from)));\n      while (to < end && lineIsHidden(doc, getLine(doc, to))) ++to;\n    }\n\n    // Create a range of theoretically intact lines, and punch holes\n    // in that using the change info.\n    var intact = [{from: Math.max(display.showingFrom, doc.first),\n                   to: Math.min(display.showingTo, end)}];\n    if (intact[0].from >= intact[0].to) intact = [];\n    else intact = computeIntact(intact, changes);\n    // When merged lines are present, we might have to reduce the\n    // intact ranges because changes in continued fragments of the\n    // intact lines do require the lines to be redrawn.\n    if (sawCollapsedSpans)\n      for (var i = 0; i < intact.length; ++i) {\n        var range = intact[i], merged;\n        while (merged = collapsedSpanAtEnd(getLine(doc, range.to - 1))) {\n          var newTo = merged.find().from.line;\n          if (newTo > range.from) range.to = newTo;\n          else { intact.splice(i--, 1); break; }\n        }\n      }\n\n    // Clip off the parts that won't be visible\n    var intactLines = 0;\n    for (var i = 0; i < intact.length; ++i) {\n      var range = intact[i];\n      if (range.from < from) range.from = from;\n      if (range.to > to) range.to = to;\n      if (range.from >= range.to) intact.splice(i--, 1);\n      else intactLines += range.to - range.from;\n    }\n    if (!forced && intactLines == to - from && from == display.showingFrom && to == display.showingTo) {\n      updateViewOffset(cm);\n      return;\n    }\n    intact.sort(function(a, b) {return a.from - b.from;});\n\n    // Avoid crashing on IE's \"unspecified error\" when in iframes\n    try {\n      var focused = document.activeElement;\n    } catch(e) {}\n    if (intactLines < (to - from) * .7) display.lineDiv.style.display = \"none\";\n    patchDisplay(cm, from, to, intact, positionsChangedFrom);\n    display.lineDiv.style.display = \"\";\n    if (focused && document.activeElement != focused && focused.offsetHeight) focused.focus();\n\n    var different = from != display.showingFrom || to != display.showingTo ||\n      display.lastSizeC != display.wrapper.clientHeight;\n    // This is just a bogus formula that detects when the editor is\n    // resized or the font size changes.\n    if (different) {\n      display.lastSizeC = display.wrapper.clientHeight;\n      startWorker(cm, 400);\n    }\n    display.showingFrom = from; display.showingTo = to;\n\n    updateHeightsInViewport(cm);\n    updateViewOffset(cm);\n\n    return true;\n  }\n\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var node = display.lineDiv.firstChild, height; node; node = node.nextSibling) if (node.lineObj) {\n      if (ie_lt8) {\n        var bot = node.offsetTop + node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = getRect(node);\n        height = box.bottom - box.top;\n      }\n      var diff = node.lineObj.height - height;\n      if (height < 2) height = textHeight(display);\n      if (diff > .001 || diff < -.001) {\n        updateLineHeight(node.lineObj, height);\n        var widgets = node.lineObj.widgets;\n        if (widgets) for (var i = 0; i < widgets.length; ++i)\n          widgets[i].height = widgets[i].node.offsetHeight;\n      }\n    }\n  }\n\n  function updateViewOffset(cm) {\n    var off = cm.display.viewOffset = heightAtLine(cm, getLine(cm.doc, cm.display.showingFrom));\n    // Position the mover div to align with the current virtual scroll position\n    cm.display.mover.style.top = off + \"px\";\n  }\n\n  function computeIntact(intact, changes) {\n    for (var i = 0, l = changes.length || 0; i < l; ++i) {\n      var change = changes[i], intact2 = [], diff = change.diff || 0;\n      for (var j = 0, l2 = intact.length; j < l2; ++j) {\n        var range = intact[j];\n        if (change.to <= range.from && change.diff) {\n          intact2.push({from: range.from + diff, to: range.to + diff});\n        } else if (change.to <= range.from || change.from >= range.to) {\n          intact2.push(range);\n        } else {\n          if (change.from > range.from)\n            intact2.push({from: range.from, to: change.from});\n          if (change.to < range.to)\n            intact2.push({from: change.to + diff, to: range.to + diff});\n        }\n      }\n      intact = intact2;\n    }\n    return intact;\n  }\n\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      left[cm.options.gutters[i]] = n.offsetLeft;\n      width[cm.options.gutters[i]] = n.offsetWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth};\n  }\n\n  function patchDisplay(cm, from, to, intact, updateNumbersFrom) {\n    var dims = getDimensions(cm);\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    if (!intact.length && (!webkit || !cm.display.currentWheelTarget))\n      removeChildren(display.lineDiv);\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      if (webkit && mac && cm.display.currentWheelTarget == node) {\n        node.style.display = \"none\";\n        node.lineObj = null;\n      } else {\n        node.parentNode.removeChild(node);\n      }\n      return next;\n    }\n\n    var nextIntact = intact.shift(), lineN = from;\n    cm.doc.iter(from, to, function(line) {\n      if (nextIntact && nextIntact.to == lineN) nextIntact = intact.shift();\n      if (lineIsHidden(cm.doc, line)) {\n        if (line.height != 0) updateLineHeight(line, 0);\n        if (line.widgets && cur && cur.previousSibling) for (var i = 0; i < line.widgets.length; ++i) {\n          var w = line.widgets[i];\n          if (w.showIfHidden) {\n            var prev = cur.previousSibling;\n            if (/pre/i.test(prev.nodeName)) {\n              var wrap = elt(\"div\", null, null, \"position: relative\");\n              prev.parentNode.replaceChild(wrap, prev);\n              wrap.appendChild(prev);\n              prev = wrap;\n            }\n            var wnode = prev.appendChild(elt(\"div\", [w.node], \"CodeMirror-linewidget\"));\n            if (!w.handleMouseEvents) wnode.ignoreEvents = true;\n            positionLineWidget(w, wnode, prev, dims);\n          }\n        }\n      } else if (nextIntact && nextIntact.from <= lineN && nextIntact.to > lineN) {\n        // This line is intact. Skip to the actual node. Update its\n        // line number if needed.\n        while (cur.lineObj != line) cur = rm(cur);\n        if (lineNumbers && updateNumbersFrom <= lineN && cur.lineNumber)\n          setTextContent(cur.lineNumber, lineNumberFor(cm.options, lineN));\n        cur = cur.nextSibling;\n      } else {\n        // For lines with widgets, make an attempt to find and reuse\n        // the existing element, so that widgets aren't needlessly\n        // removed and re-inserted into the dom\n        if (line.widgets) for (var j = 0, search = cur, reuse; search && j < 20; ++j, search = search.nextSibling)\n          if (search.lineObj == line && /div/i.test(search.nodeName)) { reuse = search; break; }\n        // This line needs to be generated.\n        var lineNode = buildLineElement(cm, line, lineN, dims, reuse);\n        if (lineNode != reuse) {\n          container.insertBefore(lineNode, cur);\n        } else {\n          while (cur != reuse) cur = rm(cur);\n          cur = cur.nextSibling;\n        }\n\n        lineNode.lineObj = line;\n      }\n      ++lineN;\n    });\n    while (cur) cur = rm(cur);\n  }\n\n  function buildLineElement(cm, line, lineNo, dims, reuse) {\n    var lineElement = lineContent(cm, line);\n    var markers = line.gutterMarkers, display = cm.display, wrap;\n\n    if (!cm.options.lineNumbers && !markers && !line.bgClass && !line.wrapClass && !line.widgets)\n      return lineElement;\n\n    // Lines with gutter elements, widgets or a background class need\n    // to be wrapped again, and have the extra elements added to the\n    // wrapper div\n\n    if (reuse) {\n      reuse.alignable = null;\n      var isOk = true, widgetsSeen = 0, insertBefore = null;\n      for (var n = reuse.firstChild, next; n; n = next) {\n        next = n.nextSibling;\n        if (!/\\bCodeMirror-linewidget\\b/.test(n.className)) {\n          reuse.removeChild(n);\n        } else {\n          for (var i = 0; i < line.widgets.length; ++i) {\n            var widget = line.widgets[i];\n            if (widget.node == n.firstChild) {\n              if (!widget.above && !insertBefore) insertBefore = n;\n              positionLineWidget(widget, n, reuse, dims);\n              ++widgetsSeen;\n              break;\n            }\n          }\n          if (i == line.widgets.length) { isOk = false; break; }\n        }\n      }\n      reuse.insertBefore(lineElement, insertBefore);\n      if (isOk && widgetsSeen == line.widgets.length) {\n        wrap = reuse;\n        reuse.className = line.wrapClass || \"\";\n      }\n    }\n    if (!wrap) {\n      wrap = elt(\"div\", null, line.wrapClass, \"position: relative\");\n      wrap.appendChild(lineElement);\n    }\n    // Kludge to make sure the styled element lies behind the selection (by z-index)\n    if (line.bgClass)\n      wrap.insertBefore(elt(\"div\", null, line.bgClass + \" CodeMirror-linebackground\"), wrap.firstChild);\n    if (cm.options.lineNumbers || markers) {\n      var gutterWrap = wrap.insertBefore(elt(\"div\", null, null, \"position: absolute; left: \" +\n                                             (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"),\n                                         wrap.firstChild);\n      if (cm.options.fixedGutter) (wrap.alignable || (wrap.alignable = [])).push(gutterWrap);\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        wrap.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineNo),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \"\n              + display.lineNumInnerWidth + \"px\"));\n      if (markers)\n        for (var k = 0; k < cm.options.gutters.length; ++k) {\n          var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];\n          if (found)\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" +\n                                       dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n        }\n    }\n    if (ie_lt8) wrap.style.zIndex = 2;\n    if (line.widgets && wrap != reuse) for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents) node.ignoreEvents = true;\n      positionLineWidget(widget, node, wrap, dims);\n      if (widget.above)\n        wrap.insertBefore(node, cm.options.lineNumbers && line.height != 0 ? gutterWrap : lineElement);\n      else\n        wrap.appendChild(node);\n      signalLater(widget, \"redraw\");\n    }\n    return wrap;\n  }\n\n  function positionLineWidget(widget, node, wrap, dims) {\n    if (widget.noHScroll) {\n      (wrap.alignable || (wrap.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n    }\n  }\n\n  // SELECTION / CURSOR\n\n  function updateSelection(cm) {\n    var display = cm.display;\n    var collapsed = posEq(cm.doc.sel.from, cm.doc.sel.to);\n    if (collapsed || cm.options.showCursorWhenSelecting)\n      updateSelectionCursor(cm);\n    else\n      display.cursor.style.display = display.otherCursor.style.display = \"none\";\n    if (!collapsed)\n      updateSelectionRange(cm);\n    else\n      display.selectionDiv.style.display = \"none\";\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, cm.doc.sel.head, \"div\");\n      var wrapOff = getRect(display.wrapper), lineOff = getRect(display.lineDiv);\n      display.inputDiv.style.top = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                                        headPos.top + lineOff.top - wrapOff.top)) + \"px\";\n      display.inputDiv.style.left = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                                         headPos.left + lineOff.left - wrapOff.left)) + \"px\";\n    }\n  }\n\n  // No selection, plain cursor\n  function updateSelectionCursor(cm) {\n    var display = cm.display, pos = cursorCoords(cm, cm.doc.sel.head, \"div\");\n    display.cursor.style.left = pos.left + \"px\";\n    display.cursor.style.top = pos.top + \"px\";\n    display.cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n    display.cursor.style.display = \"\";\n\n    if (pos.other) {\n      display.otherCursor.style.display = \"\";\n      display.otherCursor.style.left = pos.other.left + \"px\";\n      display.otherCursor.style.top = pos.other.top + \"px\";\n      display.otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    } else { display.otherCursor.style.display = \"none\"; }\n  }\n\n  // Highlight selection\n  function updateSelectionRange(cm) {\n    var display = cm.display, doc = cm.doc, sel = cm.doc.sel;\n    var fragment = document.createDocumentFragment();\n    var clientWidth = display.lineSpace.offsetWidth, pl = paddingLeft(cm.display);\n\n    function add(left, top, width, bottom) {\n      if (top < 0) top = 0;\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left +\n                               \"px; top: \" + top + \"px; width: \" + (width == null ? clientWidth - left : width) +\n                               \"px; height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {\n        var leftPos = coords(from, \"left\"), rightPos, left, right;\n        if (from == to) {\n          rightPos = leftPos;\n          left = right = leftPos.left;\n        } else {\n          rightPos = coords(to - 1, \"right\");\n          if (dir == \"rtl\") { var tmp = leftPos; leftPos = rightPos; rightPos = tmp; }\n          left = leftPos.left;\n          right = rightPos.right;\n        }\n        if (fromArg == null && from == 0) left = pl;\n        if (rightPos.top - leftPos.top > 3) { // Different lines, draw top part\n          add(left, leftPos.top, null, leftPos.bottom);\n          left = pl;\n          if (leftPos.bottom < rightPos.top) add(left, leftPos.bottom, null, rightPos.top);\n        }\n        if (toArg == null && to == lineLen) right = clientWidth;\n        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n          start = leftPos;\n        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n          end = rightPos;\n        if (left < pl + 1) left = pl;\n        add(left, rightPos.top, right - left, rightPos.bottom);\n      });\n      return {start: start, end: end};\n    }\n\n    if (sel.from.line == sel.to.line) {\n      drawForLine(sel.from.line, sel.from.ch, sel.to.ch);\n    } else {\n      var fromLine = getLine(doc, sel.from.line), toLine = getLine(doc, sel.to.line);\n      var singleVLine = visualLine(doc, fromLine) == visualLine(doc, toLine);\n      var leftEnd = drawForLine(sel.from.line, sel.from.ch, singleVLine ? fromLine.text.length : null).end;\n      var rightStart = drawForLine(sel.to.line, singleVLine ? 0 : null, sel.to.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(pl, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        add(pl, leftEnd.bottom, null, rightStart.top);\n    }\n\n    removeChildrenAndAdd(display.selectionDiv, fragment);\n    display.selectionDiv.style.display = \"\";\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) return;\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursor.style.visibility = display.otherCursor.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      display.blinker = setInterval(function() {\n        display.cursor.style.visibility = display.otherCursor.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.showingTo)\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.frontier < doc.first) doc.frontier = doc.first;\n    if (doc.frontier >= cm.display.showingTo) return;\n    var end = +new Date + cm.options.workTime;\n    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));\n    var changed = [], prevChange;\n    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.showingTo + 500), function(line) {\n      if (doc.frontier >= cm.display.showingFrom) { // Visible\n        var oldStyles = line.styles;\n        line.styles = highlightLine(cm, line, state);\n        var ischange = !oldStyles || oldStyles.length != line.styles.length;\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];\n        if (ischange) {\n          if (prevChange && prevChange.end == doc.frontier) prevChange.end++;\n          else changed.push(prevChange = {start: doc.frontier, end: doc.frontier + 1});\n        }\n        line.stateAfter = copyState(doc.mode, state);\n      } else {\n        processLine(cm, line, state);\n        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;\n      }\n      ++doc.frontier;\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    if (changed.length)\n      operation(cm, function() {\n        for (var i = 0; i < changed.length; ++i)\n          regChange(this, changed[i].start, changed[i].end);\n      })();\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc, maxScan = cm.doc.mode.innerMode ? 1000 : 100;\n    for (var search = n, lim = n - maxScan; search > lim; --search) {\n      if (search <= doc.first) return doc.first;\n      var line = getLine(doc, search - 1);\n      if (line.stateAfter && (!precise || search <= doc.frontier)) return search;\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline;\n  }\n\n  function getStateBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) return true;\n    var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos-1).stateAfter;\n    if (!state) state = startState(doc.mode);\n    else state = copyState(doc.mode, state);\n    doc.iter(pos, n, function(line) {\n      processLine(cm, line, state);\n      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.showingFrom && pos < display.showingTo;\n      line.stateAfter = save ? copyState(doc.mode, state) : null;\n      ++pos;\n    });\n    return state;\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop;}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight;}\n  function paddingLeft(display) {\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", null, null, \"text-align: left\")).appendChild(elt(\"span\", \"x\"));\n    return e.offsetLeft;\n  }\n\n  function measureChar(cm, line, ch, data, bias) {\n    var dir = -1;\n    data = data || measureLine(cm, line);\n\n    for (var pos = ch;; pos += dir) {\n      var r = data[pos];\n      if (r) break;\n      if (dir < 0 && pos == 0) dir = 1;\n    }\n    bias = pos > ch ? \"left\" : pos < ch ? \"right\" : bias;\n    if (bias == \"left\" && r.leftSide) r = r.leftSide;\n    else if (bias == \"right\" && r.rightSide) r = r.rightSide;\n    return {left: pos < ch ? r.right : r.left,\n            right: pos > ch ? r.left : r.right,\n            top: r.top,\n            bottom: r.bottom};\n  }\n\n  function findCachedMeasurement(cm, line) {\n    var cache = cm.display.measureLineCache;\n    for (var i = 0; i < cache.length; ++i) {\n      var memo = cache[i];\n      if (memo.text == line.text && memo.markedSpans == line.markedSpans &&\n          cm.display.scroller.clientWidth == memo.width &&\n          memo.classes == line.textClass + \"|\" + line.bgClass + \"|\" + line.wrapClass)\n        return memo;\n    }\n  }\n\n  function clearCachedMeasurement(cm, line) {\n    var exists = findCachedMeasurement(cm, line);\n    if (exists) exists.text = exists.measure = exists.markedSpans = null;\n  }\n\n  function measureLine(cm, line) {\n    // First look in the cache\n    var cached = findCachedMeasurement(cm, line);\n    if (cached) return cached.measure;\n\n    // Failing that, recompute and store result in cache\n    var measure = measureLineInner(cm, line);\n    var cache = cm.display.measureLineCache;\n    var memo = {text: line.text, width: cm.display.scroller.clientWidth,\n                markedSpans: line.markedSpans, measure: measure,\n                classes: line.textClass + \"|\" + line.bgClass + \"|\" + line.wrapClass};\n    if (cache.length == 16) cache[++cm.display.measureLineCachePos % 16] = memo;\n    else cache.push(memo);\n    return measure;\n  }\n\n  function measureLineInner(cm, line) {\n    var display = cm.display, measure = emptyArray(line.text.length);\n    var pre = lineContent(cm, line, measure, true);\n\n    // IE does not cache element positions of inline elements between\n    // calls to getBoundingClientRect. This makes the loop below,\n    // which gathers the positions of all the characters on the line,\n    // do an amount of layout work quadratic to the number of\n    // characters. When line wrapping is off, we try to improve things\n    // by first subdividing the line into a bunch of inline blocks, so\n    // that IE can reuse most of the layout information from caches\n    // for those blocks. This does interfere with line wrapping, so it\n    // doesn't work when wrapping is on, but in that case the\n    // situation is slightly better, since IE does cache line-wrapping\n    // information and only recomputes per-line.\n    if (ie && !ie_lt8 && !cm.options.lineWrapping && pre.childNodes.length > 100) {\n      var fragment = document.createDocumentFragment();\n      var chunk = 10, n = pre.childNodes.length;\n      for (var i = 0, chunks = Math.ceil(n / chunk); i < chunks; ++i) {\n        var wrap = elt(\"div\", null, null, \"display: inline-block\");\n        for (var j = 0; j < chunk && n; ++j) {\n          wrap.appendChild(pre.firstChild);\n          --n;\n        }\n        fragment.appendChild(wrap);\n      }\n      pre.appendChild(fragment);\n    }\n\n    removeChildrenAndAdd(display.measure, pre);\n\n    var outer = getRect(display.lineDiv);\n    var vranges = [], data = emptyArray(line.text.length), maxBot = pre.offsetHeight;\n    // Work around an IE7/8 bug where it will sometimes have randomly\n    // replaced our pre with a clone at this point.\n    if (ie_lt9 && display.measure.first != pre)\n      removeChildrenAndAdd(display.measure, pre);\n\n    function measureRect(rect) {\n      var top = rect.top - outer.top, bot = rect.bottom - outer.top;\n      if (bot > maxBot) bot = maxBot;\n      if (top < 0) top = 0;\n      for (var i = vranges.length - 2; i >= 0; i -= 2) {\n        var rtop = vranges[i], rbot = vranges[i+1];\n        if (rtop > bot || rbot < top) continue;\n        if (rtop <= top && rbot >= bot ||\n            top <= rtop && bot >= rbot ||\n            Math.min(bot, rbot) - Math.max(top, rtop) >= (bot - top) >> 1) {\n          vranges[i] = Math.min(top, rtop);\n          vranges[i+1] = Math.max(bot, rbot);\n          break;\n        }\n      }\n      if (i < 0) { i = vranges.length; vranges.push(top, bot); }\n      return {left: rect.left - outer.left,\n              right: rect.right - outer.left,\n              top: i, bottom: null};\n    }\n    function finishRect(rect) {\n      rect.bottom = vranges[rect.top+1];\n      rect.top = vranges[rect.top];\n    }\n\n    for (var i = 0, cur; i < measure.length; ++i) if (cur = measure[i]) {\n      var node = cur, rect = null;\n      // A widget might wrap, needs special care\n      if (/\\bCodeMirror-widget\\b/.test(cur.className) && cur.getClientRects) {\n        if (cur.firstChild.nodeType == 1) node = cur.firstChild;\n        var rects = node.getClientRects();\n        if (rects.length > 1) {\n          rect = data[i] = measureRect(rects[0]);\n          rect.rightSide = measureRect(rects[rects.length - 1]);\n        }\n      }\n      if (!rect) rect = data[i] = measureRect(getRect(node));\n      if (cur.measureRight) rect.right = getRect(cur.measureRight).left;\n      if (cur.leftSide) rect.leftSide = measureRect(getRect(cur.leftSide));\n    }\n    removeChildren(cm.display.measure);\n    for (var i = 0, cur; i < data.length; ++i) if (cur = data[i]) {\n      finishRect(cur);\n      if (cur.leftSide) finishRect(cur.leftSide);\n      if (cur.rightSide) finishRect(cur.rightSide);\n    }\n    return data;\n  }\n\n  function measureLineWidth(cm, line) {\n    var hasBadSpan = false;\n    if (line.markedSpans) for (var i = 0; i < line.markedSpans; ++i) {\n      var sp = line.markedSpans[i];\n      if (sp.collapsed && (sp.to == null || sp.to == line.text.length)) hasBadSpan = true;\n    }\n    var cached = !hasBadSpan && findCachedMeasurement(cm, line);\n    if (cached) return measureChar(cm, line, line.text.length, cached.measure, \"right\").right;\n\n    var pre = lineContent(cm, line, null, true);\n    var end = pre.appendChild(zeroWidthElement(cm.display.measure));\n    removeChildrenAndAdd(cm.display.measure, pre);\n    return getRect(end).right - getRect(cm.display.lineDiv).left;\n  }\n\n  function clearCaches(cm) {\n    cm.display.measureLineCache.length = cm.display.measureLineCachePos = 0;\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = null;\n    if (!cm.options.lineWrapping) cm.display.maxLineChanged = true;\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() { return window.pageXOffset || (document.documentElement || document.body).scrollLeft; }\n  function pageScrollY() { return window.pageYOffset || (document.documentElement || document.body).scrollTop; }\n\n  // Context is one of \"line\", \"div\" (display.lineDiv), \"local\"/null (editor), or \"page\"\n  function intoCoordSystem(cm, lineObj, rect, context) {\n    if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {\n      var size = widgetHeight(lineObj.widgets[i]);\n      rect.top += size; rect.bottom += size;\n    }\n    if (context == \"line\") return rect;\n    if (!context) context = \"local\";\n    var yOff = heightAtLine(cm, lineObj);\n    if (context == \"local\") yOff += paddingTop(cm.display);\n    else yOff -= cm.display.viewOffset;\n    if (context == \"page\" || context == \"window\") {\n      var lOff = getRect(cm.display.lineSpace);\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect;\n  }\n\n  // Context may be \"window\", \"page\", \"div\", or \"local\"/null\n  // Result is in \"div\" coords\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") return coords;\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = getRect(cm.display.sizer);\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = getRect(cm.display.lineSpace);\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top};\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) lineObj = getLine(cm.doc, pos.line);\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, null, bias), context);\n  }\n\n  function cursorCoords(cm, pos, context, lineObj, measurement) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!measurement) measurement = measureLine(cm, lineObj);\n    function get(ch, right) {\n      var m = measureChar(cm, lineObj, ch, measurement, right ? \"right\" : \"left\");\n      if (right) m.left = m.right; else m.right = m.left;\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n    function getBidi(ch, partPos) {\n      var part = order[partPos], right = part.level % 2;\n      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {\n        part = order[--partPos];\n        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);\n        right = true;\n      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {\n        part = order[++partPos];\n        ch = bidiLeft(part) - part.level % 2;\n        right = false;\n      }\n      if (right && ch == part.to && ch > part.from) return get(ch - 1);\n      return get(ch, right);\n    }\n    var order = getOrder(lineObj), ch = pos.ch;\n    if (!order) return get(ch);\n    var partPos = getBidiPartAt(order, ch);\n    var val = getBidi(ch, partPos);\n    if (bidiOther != null) val.other = getBidi(ch, bidiOther);\n    return val;\n  }\n\n  function PosWithInfo(line, ch, outside, xRel) {\n    var pos = new Pos(line, ch);\n    pos.xRel = xRel;\n    if (outside) pos.outside = true;\n    return pos;\n  }\n\n  // Coords must be lineSpace-local\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) return PosWithInfo(doc.first, 0, true, -1);\n    var lineNo = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineNo > last)\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);\n    if (x < 0) x = 0;\n\n    for (;;) {\n      var lineObj = getLine(doc, lineNo);\n      var found = coordsCharInner(cm, lineObj, lineNo, x, y);\n      var merged = collapsedSpanAtEnd(lineObj);\n      var mergedPos = merged && merged.find();\n      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n        lineNo = mergedPos.to.line;\n      else\n        return found;\n    }\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    var innerOff = y - heightAtLine(cm, lineObj);\n    var wrongLine = false, adjust = 2 * cm.display.wrapper.clientWidth;\n    var measurement = measureLine(cm, lineObj);\n\n    function getX(ch) {\n      var sp = cursorCoords(cm, Pos(lineNo, ch), \"line\",\n                            lineObj, measurement);\n      wrongLine = true;\n      if (innerOff > sp.bottom) return sp.left - adjust;\n      else if (innerOff < sp.top) return sp.left + adjust;\n      else wrongLine = false;\n      return sp.left;\n    }\n\n    var bidi = getOrder(lineObj), dist = lineObj.text.length;\n    var from = lineLeft(lineObj), to = lineRight(lineObj);\n    var fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;\n\n    if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);\n    // Do a binary search between these bounds.\n    for (;;) {\n      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {\n        var ch = x < fromX || x - fromX <= toX - x ? from : to;\n        var xDiff = x - (ch == from ? fromX : toX);\n        while (isExtendingChar.test(lineObj.text.charAt(ch))) ++ch;\n        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside,\n                              xDiff < 0 ? -1 : xDiff ? 1 : 0);\n        return pos;\n      }\n      var step = Math.ceil(dist / 2), middle = from + step;\n      if (bidi) {\n        middle = from;\n        for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);\n      }\n      var middleX = getX(middle);\n      if (middleX > x) {to = middle; toX = middleX; if (toOutside = wrongLine) toX += 1000; dist = step;}\n      else {from = middle; fromX = middleX; fromOutside = wrongLine; dist -= step;}\n    }\n  }\n\n  var measureText;\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) return display.cachedTextHeight;\n    if (measureText == null) {\n      measureText = elt(\"pre\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) display.cachedTextHeight = height;\n    removeChildren(display.measure);\n    return height || 1;\n  }\n\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) return display.cachedCharWidth;\n    var anchor = elt(\"span\", \"x\");\n    var pre = elt(\"pre\", [anchor]);\n    removeChildrenAndAdd(display.measure, pre);\n    var width = anchor.offsetWidth;\n    if (width > 2) display.cachedCharWidth = width;\n    return width || 10;\n  }\n\n  // OPERATIONS\n\n  // Operations are used to wrap changes in such a way that each\n  // change won't have to update the cursor and display (which would\n  // be awkward, slow, and error-prone), but instead updates are\n  // batched and then all combined and executed at once.\n\n  var nextOpId = 0;\n  function startOperation(cm) {\n    cm.curOp = {\n      // An array of ranges of lines that have to be updated. See\n      // updateDisplay.\n      changes: [],\n      forceUpdate: false,\n      updateInput: null,\n      userSelChange: null,\n      textChanged: null,\n      selectionChanged: false,\n      cursorActivity: false,\n      updateMaxLine: false,\n      updateScrollPos: false,\n      id: ++nextOpId\n    };\n    if (!delayedCallbackDepth++) delayedCallbacks = [];\n  }\n\n  function endOperation(cm) {\n    var op = cm.curOp, doc = cm.doc, display = cm.display;\n    cm.curOp = null;\n\n    if (op.updateMaxLine) computeMaxLength(cm);\n    if (display.maxLineChanged && !cm.options.lineWrapping && display.maxLine) {\n      var width = measureLineWidth(cm, display.maxLine);\n      display.sizer.style.minWidth = Math.max(0, width + 3 + scrollerCutOff) + \"px\";\n      display.maxLineChanged = false;\n      var maxScrollLeft = Math.max(0, display.sizer.offsetLeft + display.sizer.offsetWidth - display.scroller.clientWidth);\n      if (maxScrollLeft < doc.scrollLeft && !op.updateScrollPos)\n        setScrollLeft(cm, Math.min(display.scroller.scrollLeft, maxScrollLeft), true);\n    }\n    var newScrollPos, updated;\n    if (op.updateScrollPos) {\n      newScrollPos = op.updateScrollPos;\n    } else if (op.selectionChanged && display.scroller.clientHeight) { // don't rescroll if not visible\n      var coords = cursorCoords(cm, doc.sel.head);\n      newScrollPos = calculateScrollPos(cm, coords.left, coords.top, coords.left, coords.bottom);\n    }\n    if (op.changes.length || op.forceUpdate || newScrollPos && newScrollPos.scrollTop != null) {\n      updated = updateDisplay(cm, op.changes, newScrollPos && newScrollPos.scrollTop, op.forceUpdate);\n      if (cm.display.scroller.offsetHeight) cm.doc.scrollTop = cm.display.scroller.scrollTop;\n    }\n    if (!updated && op.selectionChanged) updateSelection(cm);\n    if (op.updateScrollPos) {\n      display.scroller.scrollTop = display.scrollbarV.scrollTop = doc.scrollTop = newScrollPos.scrollTop;\n      display.scroller.scrollLeft = display.scrollbarH.scrollLeft = doc.scrollLeft = newScrollPos.scrollLeft;\n      alignHorizontally(cm);\n      if (op.scrollToPos)\n        scrollPosIntoView(cm, clipPos(cm.doc, op.scrollToPos), op.scrollToPosMargin);\n    } else if (newScrollPos) {\n      scrollCursorIntoView(cm);\n    }\n    if (op.selectionChanged) restartBlink(cm);\n\n    if (cm.state.focused && op.updateInput)\n      resetInput(cm, op.userSelChange);\n\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) for (var i = 0; i < hidden.length; ++i)\n      if (!hidden[i].lines.length) signal(hidden[i], \"hide\");\n    if (unhidden) for (var i = 0; i < unhidden.length; ++i)\n      if (unhidden[i].lines.length) signal(unhidden[i], \"unhide\");\n\n    var delayed;\n    if (!--delayedCallbackDepth) {\n      delayed = delayedCallbacks;\n      delayedCallbacks = null;\n    }\n    if (op.textChanged)\n      signal(cm, \"change\", cm, op.textChanged);\n    if (op.cursorActivity) signal(cm, \"cursorActivity\", cm);\n    if (delayed) for (var i = 0; i < delayed.length; ++i) delayed[i]();\n  }\n\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm1, f) {\n    return function() {\n      var cm = cm1 || this, withOp = !cm.curOp;\n      if (withOp) startOperation(cm);\n      try { var result = f.apply(cm, arguments); }\n      finally { if (withOp) endOperation(cm); }\n      return result;\n    };\n  }\n  function docOperation(f) {\n    return function() {\n      var withOp = this.cm && !this.cm.curOp, result;\n      if (withOp) startOperation(this.cm);\n      try { result = f.apply(this, arguments); }\n      finally { if (withOp) endOperation(this.cm); }\n      return result;\n    };\n  }\n  function runInOp(cm, f) {\n    var withOp = !cm.curOp, result;\n    if (withOp) startOperation(cm);\n    try { result = f(); }\n    finally { if (withOp) endOperation(cm); }\n    return result;\n  }\n\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) from = cm.doc.first;\n    if (to == null) to = cm.doc.first + cm.doc.size;\n    cm.curOp.changes.push({from: from, to: to, diff: lendiff});\n  }\n\n  // INPUT HANDLING\n\n  function slowPoll(cm) {\n    if (cm.display.pollingFast) return;\n    cm.display.poll.set(cm.options.pollInterval, function() {\n      readInput(cm);\n      if (cm.state.focused) slowPoll(cm);\n    });\n  }\n\n  function fastPoll(cm) {\n    var missed = false;\n    cm.display.pollingFast = true;\n    function p() {\n      var changed = readInput(cm);\n      if (!changed && !missed) {missed = true; cm.display.poll.set(60, p);}\n      else {cm.display.pollingFast = false; slowPoll(cm);}\n    }\n    cm.display.poll.set(20, p);\n  }\n\n  // prevInput is a hack to work with IME. If we reset the textarea\n  // on every change, that breaks IME. So we look for changes\n  // compared to the previous content instead. (Modern browsers have\n  // events that indicate IME taking place, but these are not widely\n  // supported or compatible enough yet to rely on.)\n  function readInput(cm) {\n    var input = cm.display.input, prevInput = cm.display.prevInput, doc = cm.doc, sel = doc.sel;\n    if (!cm.state.focused || hasSelection(input) || isReadOnly(cm) || cm.state.disableInput) return false;\n    if (cm.state.pasteIncoming && cm.state.fakedLastChar) {\n      input.value = input.value.substring(0, input.value.length - 1);\n      cm.state.fakedLastChar = false;\n    }\n    var text = input.value;\n    if (text == prevInput && posEq(sel.from, sel.to)) return false;\n    if (ie && !ie_lt9 && cm.display.inputHasSelection === text) {\n      resetInput(cm, true);\n      return false;\n    }\n\n    var withOp = !cm.curOp;\n    if (withOp) startOperation(cm);\n    sel.shift = false;\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) ++same;\n    var from = sel.from, to = sel.to;\n    if (same < prevInput.length)\n      from = Pos(from.line, from.ch - (prevInput.length - same));\n    else if (cm.state.overwrite && posEq(from, to) && !cm.state.pasteIncoming)\n      to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + (text.length - same)));\n\n    var updateInput = cm.curOp.updateInput;\n    var changeEvent = {from: from, to: to, text: splitLines(text.slice(same)),\n                       origin: cm.state.pasteIncoming ? \"paste\" : \"+input\"};\n    makeChange(cm.doc, changeEvent, \"end\");\n    cm.curOp.updateInput = updateInput;\n    signalLater(cm, \"inputRead\", cm, changeEvent);\n\n    if (text.length > 1000 || text.indexOf(\"\\n\") > -1) input.value = cm.display.prevInput = \"\";\n    else cm.display.prevInput = text;\n    if (withOp) endOperation(cm);\n    cm.state.pasteIncoming = false;\n    return true;\n  }\n\n  function resetInput(cm, user) {\n    var minimal, selected, doc = cm.doc;\n    if (!posEq(doc.sel.from, doc.sel.to)) {\n      cm.display.prevInput = \"\";\n      minimal = hasCopyEvent &&\n        (doc.sel.to.line - doc.sel.from.line > 100 || (selected = cm.getSelection()).length > 1000);\n      var content = minimal ? \"-\" : selected || cm.getSelection();\n      cm.display.input.value = content;\n      if (cm.state.focused) selectInput(cm.display.input);\n      if (ie && !ie_lt9) cm.display.inputHasSelection = content;\n    } else if (user) {\n      cm.display.prevInput = cm.display.input.value = \"\";\n      if (ie && !ie_lt9) cm.display.inputHasSelection = null;\n    }\n    cm.display.inaccurateSelection = minimal;\n  }\n\n  function focusInput(cm) {\n    if (cm.options.readOnly != \"nocursor\" && (!mobile || document.activeElement != cm.display.input))\n      cm.display.input.focus();\n  }\n\n  function isReadOnly(cm) {\n    return cm.options.readOnly || cm.doc.cantEdit;\n  }\n\n  // EVENT HANDLERS\n\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    if (ie)\n      on(d.scroller, \"dblclick\", operation(cm, function(e) {\n        if (signalDOMEvent(cm, e)) return;\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) return;\n        e_preventDefault(e);\n        var word = findWordAt(getLine(cm.doc, pos.line).text, pos);\n        extendSelection(cm.doc, word.from, word.to);\n      }));\n    else\n      on(d.scroller, \"dblclick\", function(e) { signalDOMEvent(cm, e) || e_preventDefault(e); });\n    on(d.lineSpace, \"selectstart\", function(e) {\n      if (!eventInWidget(d, e)) e_preventDefault(e);\n    });\n    // Gecko browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for Gecko.\n    if (!captureMiddleClick) on(d.scroller, \"contextmenu\", function(e) {onContextMenu(cm, e);});\n\n    on(d.scroller, \"scroll\", function() {\n      if (d.scroller.clientHeight) {\n        setScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n    on(d.scrollbarV, \"scroll\", function() {\n      if (d.scroller.clientHeight) setScrollTop(cm, d.scrollbarV.scrollTop);\n    });\n    on(d.scrollbarH, \"scroll\", function() {\n      if (d.scroller.clientHeight) setScrollLeft(cm, d.scrollbarH.scrollLeft);\n    });\n\n    on(d.scroller, \"mousewheel\", function(e){onScrollWheel(cm, e);});\n    on(d.scroller, \"DOMMouseScroll\", function(e){onScrollWheel(cm, e);});\n\n    function reFocus() { if (cm.state.focused) setTimeout(bind(focusInput, cm), 0); }\n    on(d.scrollbarH, \"mousedown\", reFocus);\n    on(d.scrollbarV, \"mousedown\", reFocus);\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function() { d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    var resizeTimer;\n    function onResize() {\n      if (resizeTimer == null) resizeTimer = setTimeout(function() {\n        resizeTimer = null;\n        // Might be a text scaling operation, clear size caches.\n        d.cachedCharWidth = d.cachedTextHeight = knownScrollbarWidth = null;\n        clearCaches(cm);\n        runInOp(cm, bind(regChange, cm));\n      }, 100);\n    }\n    on(window, \"resize\", onResize);\n    // Above handler holds on to the editor and its data structures.\n    // Here we poll to unregister it when the editor is no longer in\n    // the document, so that it can be garbage-collected.\n    function unregister() {\n      for (var p = d.wrapper.parentNode; p && p != document.body; p = p.parentNode) {}\n      if (p) setTimeout(unregister, 5000);\n      else off(window, \"resize\", onResize);\n    }\n    setTimeout(unregister, 5000);\n\n    on(d.input, \"keyup\", operation(cm, function(e) {\n      if (signalDOMEvent(cm, e) || cm.options.onKeyEvent && cm.options.onKeyEvent(cm, addStop(e))) return;\n      if (e.keyCode == 16) cm.doc.sel.shift = false;\n    }));\n    on(d.input, \"input\", bind(fastPoll, cm));\n    on(d.input, \"keydown\", operation(cm, onKeyDown));\n    on(d.input, \"keypress\", operation(cm, onKeyPress));\n    on(d.input, \"focus\", bind(onFocus, cm));\n    on(d.input, \"blur\", bind(onBlur, cm));\n\n    function drag_(e) {\n      if (signalDOMEvent(cm, e) || cm.options.onDragEvent && cm.options.onDragEvent(cm, addStop(e))) return;\n      e_stop(e);\n    }\n    if (cm.options.dragDrop) {\n      on(d.scroller, \"dragstart\", function(e){onDragStart(cm, e);});\n      on(d.scroller, \"dragenter\", drag_);\n      on(d.scroller, \"dragover\", drag_);\n      on(d.scroller, \"drop\", operation(cm, onDrop));\n    }\n    on(d.scroller, \"paste\", function(e) {\n      if (eventInWidget(d, e)) return;\n      focusInput(cm);\n      fastPoll(cm);\n    });\n    on(d.input, \"paste\", function() {\n      // Workaround for webkit bug https://bugs.webkit.org/show_bug.cgi?id=90206\n      // Add a char to the end of textarea before paste occur so that\n      // selection doesn't span to the end of textarea.\n      if (webkit && !cm.state.fakedLastChar && !(new Date - cm.state.lastMiddleDown < 200)) {\n        var start = d.input.selectionStart, end = d.input.selectionEnd;\n        d.input.value += \"$\";\n        d.input.selectionStart = start;\n        d.input.selectionEnd = end;\n        cm.state.fakedLastChar = true;\n      }\n      cm.state.pasteIncoming = true;\n      fastPoll(cm);\n    });\n\n    function prepareCopy() {\n      if (d.inaccurateSelection) {\n        d.prevInput = \"\";\n        d.inaccurateSelection = false;\n        d.input.value = cm.getSelection();\n        selectInput(d.input);\n      }\n    }\n    on(d.input, \"cut\", prepareCopy);\n    on(d.input, \"copy\", prepareCopy);\n\n    // Needed to handle Tab key in KHTML\n    if (khtml) on(d.sizer, \"mouseup\", function() {\n        if (document.activeElement == d.input) d.input.blur();\n        focusInput(cm);\n    });\n  }\n\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || n.ignoreEvents || n.parentNode == display.sizer && n != display.mover) return true;\n    }\n  }\n\n  function posFromMouse(cm, e, liberal) {\n    var display = cm.display;\n    if (!liberal) {\n      var target = e_target(e);\n      if (target == display.scrollbarH || target == display.scrollbarH.firstChild ||\n          target == display.scrollbarV || target == display.scrollbarV.firstChild ||\n          target == display.scrollbarFiller || target == display.gutterFiller) return null;\n    }\n    var x, y, space = getRect(display.lineSpace);\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX; y = e.clientY; } catch (e) { return null; }\n    return coordsChar(cm, x - space.left, y - space.top);\n  }\n\n  var lastClick, lastDoubleClick;\n  function onMouseDown(e) {\n    if (signalDOMEvent(this, e)) return;\n    var cm = this, display = cm.display, doc = cm.doc, sel = doc.sel;\n    sel.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        display.scroller.draggable = false;\n        setTimeout(function(){display.scroller.draggable = true;}, 100);\n      }\n      return;\n    }\n    if (clickInGutter(cm, e)) return;\n    var start = posFromMouse(cm, e);\n\n    switch (e_button(e)) {\n    case 3:\n      if (captureMiddleClick) onContextMenu.call(cm, cm, e);\n      return;\n    case 2:\n      if (webkit) cm.state.lastMiddleDown = +new Date;\n      if (start) extendSelection(cm.doc, start);\n      setTimeout(bind(focusInput, cm), 20);\n      e_preventDefault(e);\n      return;\n    }\n    // For button 1, if it was clicked inside the editor\n    // (posFromMouse returning non-null), we have to adjust the\n    // selection.\n    if (!start) {if (e_target(e) == display.scroller) e_preventDefault(e); return;}\n\n    if (!cm.state.focused) onFocus(cm);\n\n    var now = +new Date, type = \"single\";\n    if (lastDoubleClick && lastDoubleClick.time > now - 400 && posEq(lastDoubleClick.pos, start)) {\n      type = \"triple\";\n      e_preventDefault(e);\n      setTimeout(bind(focusInput, cm), 20);\n      selectLine(cm, start.line);\n    } else if (lastClick && lastClick.time > now - 400 && posEq(lastClick.pos, start)) {\n      type = \"double\";\n      lastDoubleClick = {time: now, pos: start};\n      e_preventDefault(e);\n      var word = findWordAt(getLine(doc, start.line).text, start);\n      extendSelection(cm.doc, word.from, word.to);\n    } else { lastClick = {time: now, pos: start}; }\n\n    var last = start;\n    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) && !posEq(sel.from, sel.to) &&\n        !posLess(start, sel.from) && !posLess(sel.to, start) && type == \"single\") {\n      var dragEnd = operation(cm, function(e2) {\n        if (webkit) display.scroller.draggable = false;\n        cm.state.draggingText = false;\n        off(document, \"mouseup\", dragEnd);\n        off(display.scroller, \"drop\", dragEnd);\n        if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {\n          e_preventDefault(e2);\n          extendSelection(cm.doc, start);\n          focusInput(cm);\n        }\n      });\n      // Let the drag handler handle this.\n      if (webkit) display.scroller.draggable = true;\n      cm.state.draggingText = dragEnd;\n      // IE's approach to draggable\n      if (display.scroller.dragDrop) display.scroller.dragDrop();\n      on(document, \"mouseup\", dragEnd);\n      on(display.scroller, \"drop\", dragEnd);\n      return;\n    }\n    e_preventDefault(e);\n    if (type == \"single\") extendSelection(cm.doc, clipPos(doc, start));\n\n    var startstart = sel.from, startend = sel.to, lastPos = start;\n\n    function doSelect(cur) {\n      if (posEq(lastPos, cur)) return;\n      lastPos = cur;\n\n      if (type == \"single\") {\n        extendSelection(cm.doc, clipPos(doc, start), cur);\n        return;\n      }\n\n      startstart = clipPos(doc, startstart);\n      startend = clipPos(doc, startend);\n      if (type == \"double\") {\n        var word = findWordAt(getLine(doc, cur.line).text, cur);\n        if (posLess(cur, startstart)) extendSelection(cm.doc, word.from, startend);\n        else extendSelection(cm.doc, startstart, word.to);\n      } else if (type == \"triple\") {\n        if (posLess(cur, startstart)) extendSelection(cm.doc, startend, clipPos(doc, Pos(cur.line, 0)));\n        else extendSelection(cm.doc, startstart, clipPos(doc, Pos(cur.line + 1, 0)));\n      }\n    }\n\n    var editorSize = getRect(display.wrapper);\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true);\n      if (!cur) return;\n      if (!posEq(cur, last)) {\n        if (!cm.state.focused) onFocus(cm);\n        last = cur;\n        doSelect(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          setTimeout(operation(cm, function(){if (counter == curCount) extend(e);}), 150);\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) setTimeout(operation(cm, function() {\n          if (counter != curCount) return;\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50);\n      }\n    }\n\n    function done(e) {\n      counter = Infinity;\n      e_preventDefault(e);\n      focusInput(cm);\n      off(document, \"mousemove\", move);\n      off(document, \"mouseup\", up);\n    }\n\n    var move = operation(cm, function(e) {\n      if (!ie && !e_button(e)) done(e);\n      else extend(e);\n    });\n    var up = operation(cm, done);\n    on(document, \"mousemove\", move);\n    on(document, \"mouseup\", up);\n  }\n\n  function clickInGutter(cm, e) {\n    var display = cm.display;\n    try { var mX = e.clientX, mY = e.clientY; }\n    catch(e) { return false; }\n\n    if (mX >= Math.floor(getRect(display.gutters).right)) return false;\n    e_preventDefault(e);\n    if (!hasHandler(cm, \"gutterClick\")) return true;\n\n    var lineBox = getRect(display.lineDiv);\n    if (mY > lineBox.bottom) return true;\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.options.gutters.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && getRect(g).right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.options.gutters[i];\n        signalLater(cm, \"gutterClick\", cm, line, gutter, e);\n        break;\n      }\n    }\n    return true;\n  }\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e) || (cm.options.onDragEvent && cm.options.onDragEvent(cm, addStop(e))))\n      return;\n    e_preventDefault(e);\n    if (ie) lastDrop = +new Date;\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || isReadOnly(cm)) return;\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var loadFile = function(file, i) {\n        var reader = new FileReader;\n        reader.onload = function() {\n          text[i] = reader.result;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            makeChange(cm.doc, {from: pos, to: pos, text: splitLines(text.join(\"\\n\")), origin: \"paste\"}, \"around\");\n          }\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i) loadFile(files[i], i);\n    } else {\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && !(posLess(pos, cm.doc.sel.from) || posLess(cm.doc.sel.to, pos))) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(bind(focusInput, cm), 20);\n        return;\n      }\n      try {\n        var text = e.dataTransfer.getData(\"Text\");\n        if (text) {\n          var curFrom = cm.doc.sel.from, curTo = cm.doc.sel.to;\n          setSelection(cm.doc, pos, pos);\n          if (cm.state.draggingText) replaceRange(cm.doc, \"\", curFrom, curTo, \"paste\");\n          cm.replaceSelection(text, null, \"paste\");\n          focusInput(cm);\n          onFocus(cm);\n        }\n      }\n      catch(e){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return; }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) return;\n\n    var txt = cm.getSelection();\n    e.dataTransfer.setData(\"Text\", txt);\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      if (opera) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (opera) img.parentNode.removeChild(img);\n    }\n  }\n\n  function setScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) return;\n    cm.doc.scrollTop = val;\n    if (!gecko) updateDisplay(cm, [], val);\n    if (cm.display.scroller.scrollTop != val) cm.display.scroller.scrollTop = val;\n    if (cm.display.scrollbarV.scrollTop != val) cm.display.scrollbarV.scrollTop = val;\n    if (gecko) updateDisplay(cm, []);\n    startWorker(cm, 100);\n  }\n  function setScrollLeft(cm, val, isScroller) {\n    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) return;\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) cm.display.scroller.scrollLeft = val;\n    if (cm.display.scrollbarH.scrollLeft != val) cm.display.scrollbarH.scrollLeft = val;\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) wheelPixelsPerUnit = -.53;\n  else if (gecko) wheelPixelsPerUnit = 15;\n  else if (chrome) wheelPixelsPerUnit = -.7;\n  else if (safari) wheelPixelsPerUnit = -1/3;\n\n  function onScrollWheel(cm, e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) dx = e.detail;\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) dy = e.detail;\n    else if (dy == null) dy = e.wheelDelta;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    if (!(dx && scroll.scrollWidth > scroll.clientWidth ||\n          dy && scroll.scrollHeight > scroll.clientHeight)) return;\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      for (var cur = e.target; cur != scroll; cur = cur.parentNode) {\n        if (cur.lineObj) {\n          cm.display.currentWheelTarget = cur;\n          break;\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !opera && wheelPixelsPerUnit != null) {\n      if (dy)\n        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));\n      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));\n      e_preventDefault(e);\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return;\n    }\n\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) top = Math.max(0, top + pixels - 50);\n      else bot = Math.min(cm.doc.height, bot + pixels + 50);\n      updateDisplay(cm, [], {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function() {\n          if (display.wheelStartX == null) return;\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) return;\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) return false;\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    if (cm.display.pollingFast && readInput(cm)) cm.display.pollingFast = false;\n    var doc = cm.doc, prevShift = doc.sel.shift, done = false;\n    try {\n      if (isReadOnly(cm)) cm.state.suppressEdits = true;\n      if (dropShift) doc.sel.shift = false;\n      done = bound(cm) != Pass;\n    } finally {\n      doc.sel.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done;\n  }\n\n  function allKeyMaps(cm) {\n    var maps = cm.state.keyMaps.slice(0);\n    if (cm.options.extraKeys) maps.push(cm.options.extraKeys);\n    maps.push(cm.options.keyMap);\n    return maps;\n  }\n\n  var maybeTransition;\n  function handleKeyBinding(cm, e) {\n    // Handle auto keymap transitions\n    var startMap = getKeyMap(cm.options.keyMap), next = startMap.auto;\n    clearTimeout(maybeTransition);\n    if (next && !isModifierKey(e)) maybeTransition = setTimeout(function() {\n      if (getKeyMap(cm.options.keyMap) == startMap) {\n        cm.options.keyMap = (next.call ? next.call(null, cm) : next);\n        keyMapChanged(cm);\n      }\n    }, 50);\n\n    var name = keyName(e, true), handled = false;\n    if (!name) return false;\n    var keymaps = allKeyMaps(cm);\n\n    if (e.shiftKey) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      handled = lookupKey(\"Shift-\" + name, keymaps, function(b) {return doHandleBinding(cm, b, true);})\n             || lookupKey(name, keymaps, function(b) {\n                  if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                    return doHandleBinding(cm, b);\n                });\n    } else {\n      handled = lookupKey(name, keymaps, function(b) { return doHandleBinding(cm, b); });\n    }\n\n    if (handled) {\n      e_preventDefault(e);\n      restartBlink(cm);\n      if (ie_lt9) { e.oldKeyCode = e.keyCode; e.keyCode = 0; }\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    }\n    return handled;\n  }\n\n  function handleCharBinding(cm, e, ch) {\n    var handled = lookupKey(\"'\" + ch + \"'\", allKeyMaps(cm),\n                            function(b) { return doHandleBinding(cm, b, true); });\n    if (handled) {\n      e_preventDefault(e);\n      restartBlink(cm);\n      signalLater(cm, \"keyHandled\", cm, \"'\" + ch + \"'\", e);\n    }\n    return handled;\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (!cm.state.focused) onFocus(cm);\n    if (signalDOMEvent(cm, e) || cm.options.onKeyEvent && cm.options.onKeyEvent(cm, addStop(e))) return;\n    if (ie && e.keyCode == 27) e.returnValue = false;\n    var code = e.keyCode;\n    // IE does strange things with escape.\n    cm.doc.sel.shift = code == 16 || e.shiftKey;\n    // First give onKeyEvent option a chance to handle this.\n    var handled = handleKeyBinding(cm, e);\n    if (opera) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        cm.replaceSelection(\"\");\n    }\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (signalDOMEvent(cm, e) || cm.options.onKeyEvent && cm.options.onKeyEvent(cm, addStop(e))) return;\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (opera && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return;}\n    if (((opera && (!e.which || e.which < 10)) || khtml) && handleKeyBinding(cm, e)) return;\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    if (this.options.electricChars && this.doc.mode.electricChars &&\n        this.options.smartIndent && !isReadOnly(this) &&\n        this.doc.mode.electricChars.indexOf(ch) > -1)\n      setTimeout(operation(cm, function() {indentLine(cm, cm.doc.sel.to.line, \"smart\");}), 75);\n    if (handleCharBinding(cm, e, ch)) return;\n    if (ie && !ie_lt9) cm.display.inputHasSelection = null;\n    fastPoll(cm);\n  }\n\n  function onFocus(cm) {\n    if (cm.options.readOnly == \"nocursor\") return;\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm);\n      cm.state.focused = true;\n      if (cm.display.wrapper.className.search(/\\bCodeMirror-focused\\b/) == -1)\n        cm.display.wrapper.className += \" CodeMirror-focused\";\n      if (!cm.curOp) {\n        resetInput(cm, true);\n        if (webkit) setTimeout(bind(resetInput, cm, true), 0); // Issue #1730\n      }\n    }\n    slowPoll(cm);\n    restartBlink(cm);\n  }\n  function onBlur(cm) {\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm);\n      cm.state.focused = false;\n      cm.display.wrapper.className = cm.display.wrapper.className.replace(\" CodeMirror-focused\", \"\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function() {if (!cm.state.focused) cm.doc.sel.shift = false;}, 150);\n  }\n\n  var detectingSelectAll;\n  function onContextMenu(cm, e) {\n    if (signalDOMEvent(cm, e, \"contextmenu\")) return;\n    var display = cm.display, sel = cm.doc.sel;\n    if (eventInWidget(display, e)) return;\n\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || opera) return; // Opera is difficult.\n    if (posEq(sel.from, sel.to) || posLess(pos, sel.from) || !posLess(pos, sel.to))\n      operation(cm, setSelection)(cm.doc, pos, pos);\n\n    var oldCSS = display.input.style.cssText;\n    display.inputDiv.style.position = \"absolute\";\n    display.input.style.cssText = \"position: fixed; width: 30px; height: 30px; top: \" + (e.clientY - 5) +\n      \"px; left: \" + (e.clientX - 5) + \"px; z-index: 1000; background: white; outline: none;\" +\n      \"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);\";\n    focusInput(cm);\n    resetInput(cm, true);\n    // Adds \"Select all\" to context menu in FF\n    if (posEq(sel.from, sel.to)) display.input.value = display.prevInput = \" \";\n\n    function prepareSelectAllHack() {\n      if (display.input.selectionStart != null) {\n        var extval = display.input.value = \" \" + (posEq(sel.from, sel.to) ? \"\" : display.input.value);\n        display.prevInput = \" \";\n        display.input.selectionStart = 1; display.input.selectionEnd = extval.length;\n      }\n    }\n    function rehide() {\n      display.inputDiv.style.position = \"relative\";\n      display.input.style.cssText = oldCSS;\n      if (ie_lt9) display.scrollbarV.scrollTop = display.scroller.scrollTop = scrollPos;\n      slowPoll(cm);\n\n      // Try to detect the user choosing select-all\n      if (display.input.selectionStart != null) {\n        if (!ie || ie_lt9) prepareSelectAllHack();\n        clearTimeout(detectingSelectAll);\n        var i = 0, poll = function(){\n          if (display.prevInput == \" \" && display.input.selectionStart == 0)\n            operation(cm, commands.selectAll)(cm);\n          else if (i++ < 10) detectingSelectAll = setTimeout(poll, 500);\n          else resetInput(cm);\n        };\n        detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && !ie_lt9) prepareSelectAllHack();\n    if (captureMiddleClick) {\n      e_stop(e);\n      var mouseup = function() {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  }\n\n  // UPDATING\n\n  var changeEnd = CodeMirror.changeEnd = function(change) {\n    if (!change.text) return change.to;\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  };\n\n  // Make sure a position will be valid after the given change.\n  function clipPostChange(doc, change, pos) {\n    if (!posLess(change.from, pos)) return clipPos(doc, pos);\n    var diff = (change.text.length - 1) - (change.to.line - change.from.line);\n    if (pos.line > change.to.line + diff) {\n      var preLine = pos.line - diff, lastLine = doc.first + doc.size - 1;\n      if (preLine > lastLine) return Pos(lastLine, getLine(doc, lastLine).text.length);\n      return clipToLen(pos, getLine(doc, preLine).text.length);\n    }\n    if (pos.line == change.to.line + diff)\n      return clipToLen(pos, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0) +\n                       getLine(doc, change.to.line).text.length - change.to.ch);\n    var inside = pos.line - change.from.line;\n    return clipToLen(pos, change.text[inside].length + (inside ? 0 : change.from.ch));\n  }\n\n  // Hint can be null|\"end\"|\"start\"|\"around\"|{anchor,head}\n  function computeSelAfterChange(doc, change, hint) {\n    if (hint && typeof hint == \"object\") // Assumed to be {anchor, head} object\n      return {anchor: clipPostChange(doc, change, hint.anchor),\n              head: clipPostChange(doc, change, hint.head)};\n\n    if (hint == \"start\") return {anchor: change.from, head: change.from};\n\n    var end = changeEnd(change);\n    if (hint == \"around\") return {anchor: change.from, head: end};\n    if (hint == \"end\") return {anchor: end, head: end};\n\n    // hint is null, leave the selection alone as much as possible\n    var adjustPos = function(pos) {\n      if (posLess(pos, change.from)) return pos;\n      if (!posLess(change.to, pos)) return end;\n\n      var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n      if (pos.line == change.to.line) ch += end.ch - change.to.ch;\n      return Pos(line, ch);\n    };\n    return {anchor: adjustPos(doc.sel.anchor), head: adjustPos(doc.sel.head)};\n  }\n\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function() { this.canceled = true; }\n    };\n    if (update) obj.update = function(from, to, text, origin) {\n      if (from) this.from = clipPos(doc, from);\n      if (to) this.to = clipPos(doc, to);\n      if (text) this.text = text;\n      if (origin !== undefined) this.origin = origin;\n    };\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) signal(doc.cm, \"beforeChange\", doc.cm, obj);\n\n    if (obj.canceled) return null;\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin};\n  }\n\n  // Replace the range from from to to by the strings in replacement.\n  // change is a {from, to, text [, origin]} object\n  function makeChange(doc, change, selUpdate, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, selUpdate, ignoreReadOnly);\n      if (doc.cm.state.suppressEdits) return;\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) return;\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 1; --i)\n        makeChangeNoReadonly(doc, {from: split[i].from, to: split[i].to, text: [\"\"]});\n      if (split.length)\n        makeChangeNoReadonly(doc, {from: split[0].from, to: split[0].to, text: change.text}, selUpdate);\n    } else {\n      makeChangeNoReadonly(doc, change, selUpdate);\n    }\n  }\n\n  function makeChangeNoReadonly(doc, change, selUpdate) {\n    var selAfter = computeSelAfterChange(doc, change, selUpdate);\n    addToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function(doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  function makeChangeFromHistory(doc, type) {\n    if (doc.cm && doc.cm.state.suppressEdits) return;\n\n    var hist = doc.history;\n    var event = (type == \"undo\" ? hist.done : hist.undone).pop();\n    if (!event) return;\n\n    var anti = {changes: [], anchorBefore: event.anchorAfter, headBefore: event.headAfter,\n                anchorAfter: event.anchorBefore, headAfter: event.headBefore,\n                generation: hist.generation};\n    (type == \"undo\" ? hist.undone : hist.done).push(anti);\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    for (var i = event.changes.length - 1; i >= 0; --i) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        (type == \"undo\" ? hist.done : hist.undone).length = 0;\n        return;\n      }\n\n      anti.changes.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change, null)\n                    : {anchor: event.anchorBefore, head: event.headBefore};\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      var rebased = [];\n\n      linkedDocs(doc, function(doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    }\n  }\n\n  function shiftDoc(doc, distance) {\n    function shiftPos(pos) {return Pos(pos.line + distance, pos.ch);}\n    doc.first += distance;\n    if (doc.cm) regChange(doc.cm, doc.first, doc.first, distance);\n    doc.sel.head = shiftPos(doc.sel.head); doc.sel.anchor = shiftPos(doc.sel.anchor);\n    doc.sel.from = shiftPos(doc.sel.from); doc.sel.to = shiftPos(doc.sel.to);\n  }\n\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n    if (change.from.line > doc.lastLine()) return;\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) selAfter = computeSelAfterChange(doc, change, null);\n    if (doc.cm) makeChangeSingleDocInEditor(doc.cm, change, spans, selAfter);\n    else updateDoc(doc, change, spans, selAfter);\n  }\n\n  function makeChangeSingleDocInEditor(cm, change, spans, selAfter) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(doc, getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function(line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (!posLess(doc.sel.head, change.from) && !posLess(change.to, doc.sel.head))\n      cm.curOp.cursorActivity = true;\n\n    updateDoc(doc, change, spans, selAfter, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {\n        var len = lineLength(doc, line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) cm.curOp.updateMaxLine = true;\n    }\n\n    // Adjust frontier, schedule worker\n    doc.frontier = Math.min(doc.frontier, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    regChange(cm, from.line, to.line + 1, lendiff);\n\n    if (hasHandler(cm, \"change\")) {\n      var changeObj = {from: from, to: to,\n                       text: change.text,\n                       removed: change.removed,\n                       origin: change.origin};\n      if (cm.curOp.textChanged) {\n        for (var cur = cm.curOp.textChanged; cur.next; cur = cur.next) {}\n        cur.next = changeObj;\n      } else cm.curOp.textChanged = changeObj;\n    }\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    if (!to) to = from;\n    if (posLess(to, from)) { var tmp = to; to = from; from = tmp; }\n    if (typeof code == \"string\") code = splitLines(code);\n    makeChange(doc, {from: from, to: to, text: code, origin: origin}, null);\n  }\n\n  // POSITION OBJECT\n\n  function Pos(line, ch) {\n    if (!(this instanceof Pos)) return new Pos(line, ch);\n    this.line = line; this.ch = ch;\n  }\n  CodeMirror.Pos = Pos;\n\n  function posEq(a, b) {return a.line == b.line && a.ch == b.ch;}\n  function posLess(a, b) {return a.line < b.line || (a.line == b.line && a.ch < b.ch);}\n  function copyPos(x) {return Pos(x.line, x.ch);}\n\n  // SELECTION\n\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) return Pos(doc.first, 0);\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) return Pos(last, getLine(doc, last).text.length);\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) return Pos(pos.line, linelen);\n    else if (ch < 0) return Pos(pos.line, 0);\n    else return pos;\n  }\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size;}\n\n  // If shift is held, this will move the selection anchor. Otherwise,\n  // it'll set the whole selection.\n  function extendSelection(doc, pos, other, bias) {\n    if (doc.sel.shift || doc.sel.extend) {\n      var anchor = doc.sel.anchor;\n      if (other) {\n        var posBefore = posLess(pos, anchor);\n        if (posBefore != posLess(other, anchor)) {\n          anchor = pos;\n          pos = other;\n        } else if (posBefore != posLess(pos, other)) {\n          pos = other;\n        }\n      }\n      setSelection(doc, anchor, pos, bias);\n    } else {\n      setSelection(doc, pos, other || pos, bias);\n    }\n    if (doc.cm) doc.cm.curOp.userSelChange = true;\n  }\n\n  function filterSelectionChange(doc, anchor, head) {\n    var obj = {anchor: anchor, head: head};\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    obj.anchor = clipPos(doc, obj.anchor); obj.head = clipPos(doc, obj.head);\n    return obj;\n  }\n\n  // Update the selection. Last two args are only used by\n  // updateDoc, since they have to be expressed in the line\n  // numbers before the update.\n  function setSelection(doc, anchor, head, bias, checkAtomic) {\n    if (!checkAtomic && hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n      var filtered = filterSelectionChange(doc, anchor, head);\n      head = filtered.head;\n      anchor = filtered.anchor;\n    }\n\n    var sel = doc.sel;\n    sel.goalColumn = null;\n    // Skip over atomic spans.\n    if (checkAtomic || !posEq(anchor, sel.anchor))\n      anchor = skipAtomic(doc, anchor, bias, checkAtomic != \"push\");\n    if (checkAtomic || !posEq(head, sel.head))\n      head = skipAtomic(doc, head, bias, checkAtomic != \"push\");\n\n    if (posEq(sel.anchor, anchor) && posEq(sel.head, head)) return;\n\n    sel.anchor = anchor; sel.head = head;\n    var inv = posLess(head, anchor);\n    sel.from = inv ? head : anchor;\n    sel.to = inv ? anchor : head;\n\n    if (doc.cm)\n      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged =\n        doc.cm.curOp.cursorActivity = true;\n\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  function reCheckSelection(cm) {\n    setSelection(cm.doc, cm.doc.sel.from, cm.doc.sel.to, null, \"push\");\n  }\n\n  function skipAtomic(doc, pos, bias, mayClear) {\n    var flipped = false, curPos = pos;\n    var dir = bias || 1;\n    doc.cantEdit = false;\n    search: for (;;) {\n      var line = getLine(doc, curPos.line);\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var sp = line.markedSpans[i], m = sp.marker;\n          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) &&\n              (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {\n            if (mayClear) {\n              signal(m, \"beforeCursorEnter\");\n              if (m.explicitlyCleared) {\n                if (!line.markedSpans) break;\n                else {--i; continue;}\n              }\n            }\n            if (!m.atomic) continue;\n            var newPos = m.find()[dir < 0 ? \"from\" : \"to\"];\n            if (posEq(newPos, curPos)) {\n              newPos.ch += dir;\n              if (newPos.ch < 0) {\n                if (newPos.line > doc.first) newPos = clipPos(doc, Pos(newPos.line - 1));\n                else newPos = null;\n              } else if (newPos.ch > line.text.length) {\n                if (newPos.line < doc.first + doc.size - 1) newPos = Pos(newPos.line + 1, 0);\n                else newPos = null;\n              }\n              if (!newPos) {\n                if (flipped) {\n                  // Driven in a corner -- no valid cursor position found at all\n                  // -- try again *with* clearing, if we didn't already\n                  if (!mayClear) return skipAtomic(doc, pos, bias, true);\n                  // Otherwise, turn off editing until further notice, and return the start of the doc\n                  doc.cantEdit = true;\n                  return Pos(doc.first, 0);\n                }\n                flipped = true; newPos = pos; dir = -dir;\n              }\n            }\n            curPos = newPos;\n            continue search;\n          }\n        }\n      }\n      return curPos;\n    }\n  }\n\n  // SCROLLING\n\n  function scrollCursorIntoView(cm) {\n    var coords = scrollPosIntoView(cm, cm.doc.sel.head, cm.options.cursorScrollMargin);\n    if (!cm.state.focused) return;\n    var display = cm.display, box = getRect(display.sizer), doScroll = null;\n    if (coords.top + box.top < 0) doScroll = true;\n    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) doScroll = false;\n    if (doScroll != null && !phantom) {\n      var hidden = display.cursor.style.display == \"none\";\n      if (hidden) {\n        display.cursor.style.display = \"\";\n        display.cursor.style.left = coords.left + \"px\";\n        display.cursor.style.top = (coords.top - display.viewOffset) + \"px\";\n      }\n      display.cursor.scrollIntoView(doScroll);\n      if (hidden) display.cursor.style.display = \"none\";\n    }\n  }\n\n  function scrollPosIntoView(cm, pos, margin) {\n    if (margin == null) margin = 0;\n    for (;;) {\n      var changed = false, coords = cursorCoords(cm, pos);\n      var scrollPos = calculateScrollPos(cm, coords.left, coords.top - margin, coords.left, coords.bottom + margin);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        setScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) changed = true;\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) changed = true;\n      }\n      if (!changed) return coords;\n    }\n  }\n\n  function scrollIntoView(cm, x1, y1, x2, y2) {\n    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);\n    if (scrollPos.scrollTop != null) setScrollTop(cm, scrollPos.scrollTop);\n    if (scrollPos.scrollLeft != null) setScrollLeft(cm, scrollPos.scrollLeft);\n  }\n\n  function calculateScrollPos(cm, x1, y1, x2, y2) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (y1 < 0) y1 = 0;\n    var screen = display.scroller.clientHeight - scrollerCutOff, screentop = display.scroller.scrollTop, result = {};\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;\n    if (y1 < screentop) {\n      result.scrollTop = atTop ? 0 : y1;\n    } else if (y2 > screentop + screen) {\n      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);\n      if (newTop != screentop) result.scrollTop = newTop;\n    }\n\n    var screenw = display.scroller.clientWidth - scrollerCutOff, screenleft = display.scroller.scrollLeft;\n    x1 += display.gutters.offsetWidth; x2 += display.gutters.offsetWidth;\n    var gutterw = display.gutters.offsetWidth;\n    var atLeft = x1 < gutterw + 10;\n    if (x1 < screenleft + gutterw || atLeft) {\n      if (atLeft) x1 = 0;\n      result.scrollLeft = Math.max(0, x1 - 10 - gutterw);\n    } else if (x2 > screenw + screenleft - 3) {\n      result.scrollLeft = x2 + 10 - screenw;\n    }\n    return result;\n  }\n\n  function updateScrollPos(cm, left, top) {\n    cm.curOp.updateScrollPos = {scrollLeft: left == null ? cm.doc.scrollLeft : left,\n                                scrollTop: top == null ? cm.doc.scrollTop : top};\n  }\n\n  function addToScrollPos(cm, left, top) {\n    var pos = cm.curOp.updateScrollPos || (cm.curOp.updateScrollPos = {scrollLeft: cm.doc.scrollLeft, scrollTop: cm.doc.scrollTop});\n    var scroll = cm.display.scroller;\n    pos.scrollTop = Math.max(0, Math.min(scroll.scrollHeight - scroll.clientHeight, pos.scrollTop + top));\n    pos.scrollLeft = Math.max(0, Math.min(scroll.scrollWidth - scroll.clientWidth, pos.scrollLeft + left));\n  }\n\n  // API UTILITIES\n\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc;\n    if (how == null) how = \"add\";\n    if (how == \"smart\") {\n      if (!cm.doc.mode.indent) how = \"prev\";\n      else var state = getStateBefore(cm, n);\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (how == \"smart\") {\n      indentation = cm.doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass) {\n        if (!aggressive) return;\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) indentation = countColumn(getLine(doc, n-1).text, null, tabSize);\n      else indentation = 0;\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";}\n    if (pos < indentation) indentString += spaceStr(indentation - pos);\n\n    if (indentString != curSpaceString)\n      replaceRange(cm.doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n    line.stateAfter = null;\n  }\n\n  function changeLine(cm, handle, op) {\n    var no = handle, line = handle, doc = cm.doc;\n    if (typeof handle == \"number\") line = getLine(doc, clipLine(doc, handle));\n    else no = lineNo(handle);\n    if (no == null) return null;\n    if (op(line, no)) regChange(cm, no, no + 1);\n    else return null;\n    return line;\n  }\n\n  function findPosH(doc, pos, dir, unit, visually) {\n    var line = pos.line, ch = pos.ch, origDir = dir;\n    var lineObj = getLine(doc, line);\n    var possible = true;\n    function findNextLine() {\n      var l = line + dir;\n      if (l < doc.first || l >= doc.first + doc.size) return (possible = false);\n      line = l;\n      return lineObj = getLine(doc, l);\n    }\n    function moveOnce(boundToLine) {\n      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          if (visually) ch = (dir < 0 ? lineRight : lineLeft)(lineObj);\n          else ch = dir < 0 ? lineObj.text.length : 0;\n        } else return (possible = false);\n      } else ch = next;\n      return true;\n    }\n\n    if (unit == \"char\") moveOnce();\n    else if (unit == \"column\") moveOnce(true);\n    else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) break;\n        var cur = lineObj.text.charAt(ch) || \"\\n\";\n        var type = isWordChar(cur) ? \"w\"\n          : !group ? null\n          : /\\s/.test(cur) ? null\n          : \"p\";\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce();}\n          break;\n        }\n        if (type) sawType = type;\n        if (dir > 0 && !moveOnce(!first)) break;\n      }\n    }\n    var result = skipAtomic(doc, Pos(line, ch), origDir, true);\n    if (!possible) result.hitSide = true;\n    return result;\n  }\n\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    for (;;) {\n      var target = coordsChar(cm, x, y);\n      if (!target.outside) break;\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break; }\n      y += dir * 5;\n    }\n    return target;\n  }\n\n  function findWordAt(line, pos) {\n    var start = pos.ch, end = pos.ch;\n    if (line) {\n      if ((pos.xRel < 0 || end == line.length) && start) --start; else ++end;\n      var startChar = line.charAt(start);\n      var check = isWordChar(startChar) ? isWordChar\n        : /\\s/.test(startChar) ? function(ch) {return /\\s/.test(ch);}\n        : function(ch) {return !/\\s/.test(ch) && !isWordChar(ch);};\n      while (start > 0 && check(line.charAt(start - 1))) --start;\n      while (end < line.length && check(line.charAt(end))) ++end;\n    }\n    return {from: Pos(pos.line, start), to: Pos(pos.line, end)};\n  }\n\n  function selectLine(cm, line) {\n    extendSelection(cm.doc, Pos(line, 0), clipPos(cm.doc, Pos(line + 1, 0)));\n  }\n\n  // PROTOTYPE\n\n  // The publicly visible API. Note that operation(null, f) means\n  // 'wrap f in an operation, performed on its `this` parameter'\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); focusInput(this); onFocus(this); fastPoll(this);},\n\n    setOption: function(option, value) {\n      var options = this.options, old = options[option];\n      if (options[option] == value && option != \"mode\") return;\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        operation(this, optionHandlers[option])(this, value, old);\n    },\n\n    getOption: function(option) {return this.options[option];},\n    getDoc: function() {return this.doc;},\n\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](map);\n    },\n    removeKeyMap: function(map) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        if (maps[i] == map || (typeof maps[i] != \"string\" && maps[i].name == map)) {\n          maps.splice(i, 1);\n          return true;\n        }\n    },\n\n    addOverlay: operation(null, function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState) throw new Error(\"Overlays may not be stateful.\");\n      this.state.overlays.push({mode: mode, modeSpec: spec, opaque: options && options.opaque});\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: operation(null, function(spec) {\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this.state.modeGen++;\n          regChange(this);\n          return;\n        }\n      }\n    }),\n\n    indentLine: operation(null, function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) dir = this.options.smartIndent ? \"smart\" : \"prev\";\n        else dir = dir ? \"add\" : \"subtract\";\n      }\n      if (isLine(this.doc, n)) indentLine(this, n, dir, aggressive);\n    }),\n    indentSelection: operation(null, function(how) {\n      var sel = this.doc.sel;\n      if (posEq(sel.from, sel.to)) return indentLine(this, sel.from.line, how);\n      var e = sel.to.line - (sel.to.ch ? 0 : 1);\n      for (var i = sel.from.line; i <= e; ++i) indentLine(this, i, how);\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      var doc = this.doc;\n      pos = clipPos(doc, pos);\n      var state = getStateBefore(this, pos.line, precise), mode = this.doc.mode;\n      var line = getLine(doc, pos.line);\n      var stream = new StringStream(line.text, this.options.tabSize);\n      while (stream.pos < pos.ch && !stream.eol()) {\n        stream.start = stream.pos;\n        var style = mode.token(stream, state);\n      }\n      return {start: stream.start,\n              end: stream.pos,\n              string: stream.current(),\n              className: style || null, // Deprecated, use 'type' instead\n              type: style || null,\n              state: state};\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n      if (ch == 0) return styles[2];\n      for (;;) {\n        var mid = (before + after) >> 1;\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) after = mid;\n        else if (styles[mid * 2 + 1] < ch) before = mid + 1;\n        else return styles[mid * 2 + 2];\n      }\n    },\n\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode) return mode;\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n    },\n\n    getHelper: function(pos, type) {\n      if (!helpers.hasOwnProperty(type)) return;\n      var help = helpers[type], mode = this.getModeAt(pos);\n      return mode[type] && help[mode[type]] ||\n        mode.helperType && help[mode.helperType] ||\n        help[mode.name];\n    },\n\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n      return getStateBefore(this, line + 1, precise);\n    },\n\n    cursorCoords: function(start, mode) {\n      var pos, sel = this.doc.sel;\n      if (start == null) pos = sel.head;\n      else if (typeof start == \"object\") pos = clipPos(this.doc, start);\n      else pos = start ? sel.from : sel.to;\n      return cursorCoords(this, pos, mode || \"page\");\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\");\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top);\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset);\n    },\n    heightAtLine: function(line, mode) {\n      var end = false, last = this.doc.first + this.doc.size - 1;\n      if (line < this.doc.first) line = this.doc.first;\n      else if (line > last) { line = last; end = true; }\n      var lineObj = getLine(this.doc, line);\n      return intoCoordSystem(this, getLine(this.doc, line), {top: 0, left: 0}, mode || \"page\").top +\n        (end ? lineObj.height : 0);\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display); },\n    defaultCharWidth: function() { return charWidth(this.display); },\n\n    setGutterMarker: operation(null, function(line, gutterID, value) {\n      return changeLine(this, line, function(line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) line.gutterMarkers = null;\n        return true;\n      });\n    }),\n\n    clearGutter: operation(null, function(gutterID) {\n      var cm = this, doc = cm.doc, i = doc.first;\n      doc.iter(function(line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          line.gutterMarkers[gutterID] = null;\n          regChange(cm, i, i + 1);\n          if (isEmpty(line.gutterMarkers)) line.gutterMarkers = null;\n        }\n        ++i;\n      });\n    }),\n\n    addLineClass: operation(null, function(handle, where, cls) {\n      return changeLine(this, handle, function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : \"wrapClass\";\n        if (!line[prop]) line[prop] = cls;\n        else if (new RegExp(\"(?:^|\\\\s)\" + cls + \"(?:$|\\\\s)\").test(line[prop])) return false;\n        else line[prop] += \" \" + cls;\n        return true;\n      });\n    }),\n\n    removeLineClass: operation(null, function(handle, where, cls) {\n      return changeLine(this, handle, function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) return false;\n        else if (cls == null) line[prop] = null;\n        else {\n          var found = cur.match(new RegExp(\"(?:^|\\\\s+)\" + cls + \"(?:$|\\\\s+)\"));\n          if (!found) return false;\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true;\n      });\n    }),\n\n    addLineWidget: operation(null, function(handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    lineInfo: function(line) {\n      if (typeof line == \"number\") {\n        if (!isLine(this.doc, line)) return null;\n        var n = line;\n        line = getLine(this.doc, line);\n        if (!line) return null;\n      } else {\n        var n = lineNo(line);\n        if (n == null) return null;\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets};\n    },\n\n    getViewport: function() { return {from: this.display.showingFrom, to: this.display.showingTo};},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom, left = pos.left;\n      node.style.position = \"absolute\";\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          top = pos.top - node.offsetHeight;\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          top = pos.bottom;\n        if (left + node.offsetWidth > hspace)\n          left = hspace - node.offsetWidth;\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\") left = 0;\n        else if (horiz == \"middle\") left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);\n    },\n\n    triggerOnKeyDown: operation(null, onKeyDown),\n\n    execCommand: function(cmd) {return commands[cmd](this);},\n\n    findPosH: function(from, amount, unit, visually) {\n      var dir = 1;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {\n        cur = findPosH(this.doc, cur, dir, unit, visually);\n        if (cur.hitSide) break;\n      }\n      return cur;\n    },\n\n    moveH: operation(null, function(dir, unit) {\n      var sel = this.doc.sel, pos;\n      if (sel.shift || sel.extend || posEq(sel.from, sel.to))\n        pos = findPosH(this.doc, sel.head, dir, unit, this.options.rtlMoveVisually);\n      else\n        pos = dir < 0 ? sel.from : sel.to;\n      extendSelection(this.doc, pos, pos, dir);\n    }),\n\n    deleteH: operation(null, function(dir, unit) {\n      var sel = this.doc.sel;\n      if (!posEq(sel.from, sel.to)) replaceRange(this.doc, \"\", sel.from, sel.to, \"+delete\");\n      else replaceRange(this.doc, \"\", sel.from, findPosH(this.doc, sel.head, dir, unit, false), \"+delete\");\n      this.curOp.userSelChange = true;\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      var dir = 1, x = goalColumn;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {\n        var coords = cursorCoords(this, cur, \"div\");\n        if (x == null) x = coords.left;\n        else coords.left = x;\n        cur = findPosV(this, coords, dir, unit);\n        if (cur.hitSide) break;\n      }\n      return cur;\n    },\n\n    moveV: operation(null, function(dir, unit) {\n      var sel = this.doc.sel;\n      var pos = cursorCoords(this, sel.head, \"div\");\n      if (sel.goalColumn != null) pos.left = sel.goalColumn;\n      var target = findPosV(this, pos, dir, unit);\n\n      if (unit == \"page\") addToScrollPos(this, 0, charCoords(this, target, \"div\").top - pos.top);\n      extendSelection(this.doc, target, target, dir);\n      sel.goalColumn = pos.left;\n    }),\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) return;\n      if (this.state.overwrite = !this.state.overwrite)\n        this.display.cursor.className += \" CodeMirror-overwrite\";\n      else\n        this.display.cursor.className = this.display.cursor.className.replace(\" CodeMirror-overwrite\", \"\");\n    },\n    hasFocus: function() { return this.state.focused; },\n\n    scrollTo: operation(null, function(x, y) {\n      updateScrollPos(this, x, y);\n    }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller, co = scrollerCutOff;\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - co, width: scroller.scrollWidth - co,\n              clientHeight: scroller.clientHeight - co, clientWidth: scroller.clientWidth - co};\n    },\n\n    scrollIntoView: operation(null, function(pos, margin) {\n      if (typeof pos == \"number\") pos = Pos(pos, 0);\n      if (!margin) margin = 0;\n      var coords = pos;\n\n      if (!pos || pos.line != null) {\n        this.curOp.scrollToPos = pos ? clipPos(this.doc, pos) : this.doc.sel.head;\n        this.curOp.scrollToPosMargin = margin;\n        coords = cursorCoords(this, this.curOp.scrollToPos);\n      }\n      var sPos = calculateScrollPos(this, coords.left, coords.top - margin, coords.right, coords.bottom + margin);\n      updateScrollPos(this, sPos.scrollLeft, sPos.scrollTop);\n    }),\n\n    setSize: operation(null, function(width, height) {\n      function interpret(val) {\n        return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n      }\n      if (width != null) this.display.wrapper.style.width = interpret(width);\n      if (height != null) this.display.wrapper.style.height = interpret(height);\n      if (this.options.lineWrapping)\n        this.display.measureLineCache.length = this.display.measureLineCachePos = 0;\n      this.curOp.forceUpdate = true;\n    }),\n\n    operation: function(f){return runInOp(this, f);},\n\n    refresh: operation(null, function() {\n      clearCaches(this);\n      updateScrollPos(this, this.doc.scrollLeft, this.doc.scrollTop);\n      regChange(this);\n    }),\n\n    swapDoc: operation(null, function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      resetInput(this, true);\n      updateScrollPos(this, doc.scrollLeft, doc.scrollTop);\n      return old;\n    }),\n\n    getInputField: function(){return this.display.input;},\n    getWrapperElement: function(){return this.display.wrapper;},\n    getScrollerElement: function(){return this.display.scroller;},\n    getGutterElement: function(){return this.display.gutters;}\n  };\n  eventMixin(CodeMirror);\n\n  // OPTION DEFAULTS\n\n  var optionHandlers = CodeMirror.optionHandlers = {};\n\n  // The default configuration options.\n  var defaults = CodeMirror.defaults = {};\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle) optionHandlers[name] =\n      notOnInit ? function(cm, val, old) {if (old != Init) handle(cm, val, old);} : handle;\n  }\n\n  var Init = CodeMirror.Init = {toString: function(){return \"CodeMirror.Init\";}};\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", function(cm, val) {\n    cm.setValue(val);\n  }, true);\n  option(\"mode\", null, function(cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function(cm) {\n    loadMode(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n  option(\"electricChars\", true);\n  option(\"rtlMoveVisually\", !windows);\n\n  option(\"theme\", \"default\", function(cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", keyMapChanged);\n  option(\"extraKeys\", null);\n\n  option(\"onKeyEvent\", null);\n  option(\"onDragEvent\", null);\n\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function(cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, updateScrollbars, true);\n  option(\"lineNumbers\", false, function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function(integer) {return integer;}, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n  option(\"readOnly\", false, function(cm, val) {\n    if (val == \"nocursor\") {onBlur(cm); cm.display.input.blur();}\n    else if (!val) resetInput(cm, true);\n  });\n  option(\"dragDrop\", true);\n\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 40, function(cm, val){cm.doc.history.undoDepth = val;});\n  option(\"historyEventDelay\", 500);\n  option(\"viewportMargin\", 10, function(cm){cm.refresh();}, true);\n  option(\"maxHighlightLength\", 10000, function(cm){loadMode(cm); cm.refresh();}, true);\n  option(\"moveInputWithCursor\", true, function(cm, val) {\n    if (!val) cm.display.inputDiv.style.top = cm.display.inputDiv.style.left = 0;\n  });\n\n  option(\"tabindex\", null, function(cm, val) {\n    cm.display.input.tabIndex = val || \"\";\n  });\n  option(\"autofocus\", null);\n\n  // MODE DEFINITION AND QUERYING\n\n  // Known modes, by name and by MIME\n  var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};\n\n  CodeMirror.defineMode = function(name, mode) {\n    if (!CodeMirror.defaults.mode && name != \"null\") CodeMirror.defaults.mode = name;\n    if (arguments.length > 2) {\n      mode.dependencies = [];\n      for (var i = 2; i < arguments.length; ++i) mode.dependencies.push(arguments[i]);\n    }\n    modes[name] = mode;\n  };\n\n  CodeMirror.defineMIME = function(mime, spec) {\n    mimeModes[mime] = spec;\n  };\n\n  CodeMirror.resolveMode = function(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return CodeMirror.resolveMode(\"application/xml\");\n    }\n    if (typeof spec == \"string\") return {name: spec};\n    else return spec || {name: \"null\"};\n  };\n\n  CodeMirror.getMode = function(options, spec) {\n    var spec = CodeMirror.resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) return CodeMirror.getMode(options, \"text/plain\");\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) continue;\n        if (modeObj.hasOwnProperty(prop)) modeObj[\"_\" + prop] = modeObj[prop];\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n\n    return modeObj;\n  };\n\n  CodeMirror.defineMode(\"null\", function() {\n    return {token: function(stream) {stream.skipToEnd();}};\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  var modeExtensions = CodeMirror.modeExtensions = {};\n  CodeMirror.extendMode = function(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  };\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function(name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function(name, func) {\n    Doc.prototype[name] = func;\n  };\n  CodeMirror.defineOption = option;\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function(f) {initHooks.push(f);};\n\n  var helpers = CodeMirror.helpers = {};\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) helpers[type] = CodeMirror[type] = {};\n    helpers[type][name] = value;\n  };\n\n  // UTILITIES\n\n  CodeMirror.isWordChar = isWordChar;\n\n  // MODE STATE HANDLING\n\n  // Utility functions for working with state. Exported because modes\n  // sometimes need to do this.\n  function copyState(mode, state) {\n    if (state === true) return state;\n    if (mode.copyState) return mode.copyState(state);\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) val = val.concat([]);\n      nstate[n] = val;\n    }\n    return nstate;\n  }\n  CodeMirror.copyState = copyState;\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  }\n  CodeMirror.startState = startState;\n\n  CodeMirror.innerMode = function(mode, state) {\n    while (mode.innerMode) {\n      var info = mode.innerMode(state);\n      if (!info || info.mode == mode) break;\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state};\n  };\n\n  // STANDARD COMMANDS\n\n  var commands = CodeMirror.commands = {\n    selectAll: function(cm) {cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()));},\n    killLine: function(cm) {\n      var from = cm.getCursor(true), to = cm.getCursor(false), sel = !posEq(from, to);\n      if (!sel && cm.getLine(from.line).length == from.ch)\n        cm.replaceRange(\"\", from, Pos(from.line + 1, 0), \"+delete\");\n      else cm.replaceRange(\"\", from, sel ? to : Pos(from.line), \"+delete\");\n    },\n    deleteLine: function(cm) {\n      var l = cm.getCursor().line;\n      cm.replaceRange(\"\", Pos(l, 0), Pos(l), \"+delete\");\n    },\n    delLineLeft: function(cm) {\n      var cur = cm.getCursor();\n      cm.replaceRange(\"\", Pos(cur.line, 0), cur, \"+delete\");\n    },\n    undo: function(cm) {cm.undo();},\n    redo: function(cm) {cm.redo();},\n    goDocStart: function(cm) {cm.extendSelection(Pos(cm.firstLine(), 0));},\n    goDocEnd: function(cm) {cm.extendSelection(Pos(cm.lastLine()));},\n    goLineStart: function(cm) {\n      cm.extendSelection(lineStart(cm, cm.getCursor().line));\n    },\n    goLineStartSmart: function(cm) {\n      var cur = cm.getCursor(), start = lineStart(cm, cur.line);\n      var line = cm.getLineHandle(start.line);\n      var order = getOrder(line);\n      if (!order || order[0].level == 0) {\n        var firstNonWS = Math.max(0, line.text.search(/\\S/));\n        var inWS = cur.line == start.line && cur.ch <= firstNonWS && cur.ch;\n        cm.extendSelection(Pos(start.line, inWS ? 0 : firstNonWS));\n      } else cm.extendSelection(start);\n    },\n    goLineEnd: function(cm) {\n      cm.extendSelection(lineEnd(cm, cm.getCursor().line));\n    },\n    goLineRight: function(cm) {\n      var top = cm.charCoords(cm.getCursor(), \"div\").top + 5;\n      cm.extendSelection(cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\"));\n    },\n    goLineLeft: function(cm) {\n      var top = cm.charCoords(cm.getCursor(), \"div\").top + 5;\n      cm.extendSelection(cm.coordsChar({left: 0, top: top}, \"div\"));\n    },\n    goLineUp: function(cm) {cm.moveV(-1, \"line\");},\n    goLineDown: function(cm) {cm.moveV(1, \"line\");},\n    goPageUp: function(cm) {cm.moveV(-1, \"page\");},\n    goPageDown: function(cm) {cm.moveV(1, \"page\");},\n    goCharLeft: function(cm) {cm.moveH(-1, \"char\");},\n    goCharRight: function(cm) {cm.moveH(1, \"char\");},\n    goColumnLeft: function(cm) {cm.moveH(-1, \"column\");},\n    goColumnRight: function(cm) {cm.moveH(1, \"column\");},\n    goWordLeft: function(cm) {cm.moveH(-1, \"word\");},\n    goGroupRight: function(cm) {cm.moveH(1, \"group\");},\n    goGroupLeft: function(cm) {cm.moveH(-1, \"group\");},\n    goWordRight: function(cm) {cm.moveH(1, \"word\");},\n    delCharBefore: function(cm) {cm.deleteH(-1, \"char\");},\n    delCharAfter: function(cm) {cm.deleteH(1, \"char\");},\n    delWordBefore: function(cm) {cm.deleteH(-1, \"word\");},\n    delWordAfter: function(cm) {cm.deleteH(1, \"word\");},\n    delGroupBefore: function(cm) {cm.deleteH(-1, \"group\");},\n    delGroupAfter: function(cm) {cm.deleteH(1, \"group\");},\n    indentAuto: function(cm) {cm.indentSelection(\"smart\");},\n    indentMore: function(cm) {cm.indentSelection(\"add\");},\n    indentLess: function(cm) {cm.indentSelection(\"subtract\");},\n    insertTab: function(cm) {cm.replaceSelection(\"\\t\", \"end\", \"+input\");},\n    defaultTab: function(cm) {\n      if (cm.somethingSelected()) cm.indentSelection(\"add\");\n      else cm.replaceSelection(\"\\t\", \"end\", \"+input\");\n    },\n    transposeChars: function(cm) {\n      var cur = cm.getCursor(), line = cm.getLine(cur.line);\n      if (cur.ch > 0 && cur.ch < line.length - 1)\n        cm.replaceRange(line.charAt(cur.ch) + line.charAt(cur.ch - 1),\n                        Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1));\n    },\n    newlineAndIndent: function(cm) {\n      operation(cm, function() {\n        cm.replaceSelection(\"\\n\", \"end\", \"+input\");\n        cm.indentLine(cm.getCursor().line, null, true);\n      })();\n    },\n    toggleOverwrite: function(cm) {cm.toggleOverwrite();}\n  };\n\n  // STANDARD KEYMAPS\n\n  var keyMap = CodeMirror.keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. Unknown commands are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Alt-Up\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Down\": \"goDocEnd\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    fallthrough: \"basic\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineStart\", \"Cmd-Right\": \"goLineEnd\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delLineLeft\",\n    fallthrough: [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\"\n  };\n\n  // KEYMAP DISPATCH\n\n  function getKeyMap(val) {\n    if (typeof val == \"string\") return keyMap[val];\n    else return val;\n  }\n\n  function lookupKey(name, maps, handle) {\n    function lookup(map) {\n      map = getKeyMap(map);\n      var found = map[name];\n      if (found === false) return \"stop\";\n      if (found != null && handle(found)) return true;\n      if (map.nofallthrough) return \"stop\";\n\n      var fallthrough = map.fallthrough;\n      if (fallthrough == null) return false;\n      if (Object.prototype.toString.call(fallthrough) != \"[object Array]\")\n        return lookup(fallthrough);\n      for (var i = 0, e = fallthrough.length; i < e; ++i) {\n        var done = lookup(fallthrough[i]);\n        if (done) return done;\n      }\n      return false;\n    }\n\n    for (var i = 0; i < maps.length; ++i) {\n      var done = lookup(maps[i]);\n      if (done) return done != \"stop\";\n    }\n  }\n  function isModifierKey(event) {\n    var name = keyNames[event.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  }\n  function keyName(event, noShift) {\n    if (opera && event.keyCode == 34 && event[\"char\"]) return false;\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) return false;\n    if (event.altKey) name = \"Alt-\" + name;\n    if (flipCtrlCmd ? event.metaKey : event.ctrlKey) name = \"Ctrl-\" + name;\n    if (flipCtrlCmd ? event.ctrlKey : event.metaKey) name = \"Cmd-\" + name;\n    if (!noShift && event.shiftKey) name = \"Shift-\" + name;\n    return name;\n  }\n  CodeMirror.lookupKey = lookupKey;\n  CodeMirror.isModifierKey = isModifierKey;\n  CodeMirror.keyName = keyName;\n\n  // FROMTEXTAREA\n\n  CodeMirror.fromTextArea = function(textarea, options) {\n    if (!options) options = {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabindex)\n      options.tabindex = textarea.tabindex;\n    if (!options.placeholder && textarea.placeholder)\n      options.placeholder = textarea.placeholder;\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = document.body;\n      // doc.activeElement occasionally throws on IE\n      try { hasFocus = document.activeElement; } catch(e) {}\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form, realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function() {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function(node) {\n      textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    cm.save = save;\n    cm.getTextArea = function() { return textarea; };\n    cm.toTextArea = function() {\n      save();\n      textarea.parentNode.removeChild(cm.getWrapperElement());\n      textarea.style.display = \"\";\n      if (textarea.form) {\n        off(textarea.form, \"submit\", save);\n        if (typeof textarea.form.submit == \"function\")\n          textarea.form.submit = realSubmit;\n      }\n    };\n    return cm;\n  };\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  // The character stream used by a mode's parser.\n  function StringStream(string, tabSize) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n  }\n\n  StringStream.prototype = {\n    eol: function() {return this.pos >= this.string.length;},\n    sol: function() {return this.pos == 0;},\n    peek: function() {return this.string.charAt(this.pos) || undefined;},\n    next: function() {\n      if (this.pos < this.string.length)\n        return this.string.charAt(this.pos++);\n    },\n    eat: function(match) {\n      var ch = this.string.charAt(this.pos);\n      if (typeof match == \"string\") var ok = ch == match;\n      else var ok = ch && (match.test ? match.test(ch) : match(ch));\n      if (ok) {++this.pos; return ch;}\n    },\n    eatWhile: function(match) {\n      var start = this.pos;\n      while (this.eat(match)){}\n      return this.pos > start;\n    },\n    eatSpace: function() {\n      var start = this.pos;\n      while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) ++this.pos;\n      return this.pos > start;\n    },\n    skipToEnd: function() {this.pos = this.string.length;},\n    skipTo: function(ch) {\n      var found = this.string.indexOf(ch, this.pos);\n      if (found > -1) {this.pos = found; return true;}\n    },\n    backUp: function(n) {this.pos -= n;},\n    column: function() {\n      if (this.lastColumnPos < this.start) {\n        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n        this.lastColumnPos = this.start;\n      }\n      return this.lastColumnValue;\n    },\n    indentation: function() {return countColumn(this.string, null, this.tabSize);},\n    match: function(pattern, consume, caseInsensitive) {\n      if (typeof pattern == \"string\") {\n        var cased = function(str) {return caseInsensitive ? str.toLowerCase() : str;};\n        var substr = this.string.substr(this.pos, pattern.length);\n        if (cased(substr) == cased(pattern)) {\n          if (consume !== false) this.pos += pattern.length;\n          return true;\n        }\n      } else {\n        var match = this.string.slice(this.pos).match(pattern);\n        if (match && match.index > 0) return null;\n        if (match && consume !== false) this.pos += match[0].length;\n        return match;\n      }\n    },\n    current: function(){return this.string.slice(this.start, this.pos);}\n  };\n  CodeMirror.StringStream = StringStream;\n\n  // TEXTMARKERS\n\n  function TextMarker(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n  }\n  CodeMirror.TextMarker = TextMarker;\n  eventMixin(TextMarker);\n\n  TextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared) return;\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) startOperation(cm);\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) signalLater(this, \"clear\", found.from, found.to);\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.to != null) max = lineNo(line);\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from != null)\n        min = lineNo(line);\n      else if (this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        updateLineHeight(line, textHeight(cm.display));\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) for (var i = 0; i < this.lines.length; ++i) {\n      var visual = visualLine(cm.doc, this.lines[i]), len = lineLength(cm.doc, visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    }\n\n    if (min != null && cm) regChange(cm, min, max + 1);\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) reCheckSelection(cm);\n    }\n    if (withOp) endOperation(cm);\n  };\n\n  TextMarker.prototype.find = function() {\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null || span.to != null) {\n        var found = lineNo(line);\n        if (span.from != null) from = Pos(found, span.from);\n        if (span.to != null) to = Pos(found, span.to);\n      }\n    }\n    if (this.type == \"bookmark\") return from;\n    return from && {from: from, to: to};\n  };\n\n  TextMarker.prototype.changed = function() {\n    var pos = this.find(), cm = this.doc.cm;\n    if (!pos || !cm) return;\n    if (this.type != \"bookmark\") pos = pos.from;\n    var line = getLine(this.doc, pos.line);\n    clearCachedMeasurement(cm, line);\n    if (pos.line >= cm.display.showingFrom && pos.line < cm.display.showingTo) {\n      for (var node = cm.display.lineDiv.firstChild; node; node = node.nextSibling) if (node.lineObj == line) {\n        if (node.offsetHeight != line.height) updateLineHeight(line, node.offsetHeight);\n        break;\n      }\n      runInOp(cm, function() {\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = cm.curOp.updateMaxLine = true;\n      });\n    }\n  };\n\n  TextMarker.prototype.attachLine = function(line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n    }\n    this.lines.push(line);\n  };\n  TextMarker.prototype.detachLine = function(line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  function markText(doc, from, to, options, type) {\n    if (options && options.shared) return markTextShared(doc, from, to, options, type);\n    if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);\n\n    var marker = new TextMarker(doc, type);\n    if (type == \"range\" && !posLess(from, to)) return marker;\n    if (options) copyObj(options, marker);\n    if (marker.replacedWith) {\n      marker.collapsed = true;\n      marker.replacedWith = elt(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) marker.replacedWith.ignoreEvents = true;\n    }\n    if (marker.collapsed) sawCollapsedSpans = true;\n\n    if (marker.addToHistory)\n      addToHistory(doc, {from: from, to: to, origin: \"markText\"},\n                   {head: doc.sel.head, anchor: doc.sel.anchor}, NaN);\n\n    var curLine = from.line, size = 0, collapsedAtStart, collapsedAtEnd, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function(line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(doc, line) == cm.display.maxLine)\n        updateMaxLine = true;\n      var span = {from: null, to: null, marker: marker};\n      size += line.text.length;\n      if (curLine == from.line) {span.from = from.ch; size -= from.ch;}\n      if (curLine == to.line) {span.to = to.ch; size -= line.text.length - to.ch;}\n      if (marker.collapsed) {\n        if (curLine == to.line) collapsedAtEnd = collapsedSpanAt(line, to.ch);\n        if (curLine == from.line) collapsedAtStart = collapsedSpanAt(line, from.ch);\n        else updateLineHeight(line, 0);\n      }\n      addMarkedSpan(line, span);\n      ++curLine;\n    });\n    if (marker.collapsed) doc.iter(from.line, to.line + 1, function(line) {\n      if (lineIsHidden(doc, line)) updateLineHeight(line, 0);\n    });\n\n    if (marker.clearOnEnter) on(marker, \"beforeCursorEnter\", function() { marker.clear(); });\n\n    if (marker.readOnly) {\n      sawReadOnlySpans = true;\n      if (doc.history.done.length || doc.history.undone.length)\n        doc.clearHistory();\n    }\n    if (marker.collapsed) {\n      if (collapsedAtStart != collapsedAtEnd)\n        throw new Error(\"Inserting collapsed marker overlapping an existing one\");\n      marker.size = size;\n      marker.atomic = true;\n    }\n    if (cm) {\n      if (updateMaxLine) cm.curOp.updateMaxLine = true;\n      if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.collapsed)\n        regChange(cm, from.line, to.line + 1);\n      if (marker.atomic) reCheckSelection(cm);\n    }\n    return marker;\n  }\n\n  // SHARED TEXTMARKERS\n\n  function SharedTextMarker(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0, me = this; i < markers.length; ++i) {\n      markers[i].parent = this;\n      on(markers[i], \"clear\", function(){me.clear();});\n    }\n  }\n  CodeMirror.SharedTextMarker = SharedTextMarker;\n  eventMixin(SharedTextMarker);\n\n  SharedTextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared) return;\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      this.markers[i].clear();\n    signalLater(this, \"clear\");\n  };\n  SharedTextMarker.prototype.find = function() {\n    return this.primary.find();\n  };\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.replacedWith;\n    linkedDocs(doc, function(doc) {\n      if (widget) options.replacedWith = widget.cloneNode(true);\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        if (doc.linked[i].isParent) return;\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  // TEXTMARKER SPANS\n\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) return span;\n    }\n  }\n  function removeMarkedSpan(spans, span) {\n    for (var r, i = 0; i < spans.length; ++i)\n      if (spans[i] != span) (r || (r = [])).push(spans[i]);\n    return r;\n  }\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  function markedSpansBefore(old, startCh, isInsert) {\n    if (old) for (var i = 0, nw; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || marker.type == \"bookmark\" && span.from == startCh && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n        (nw || (nw = [])).push({from: span.from,\n                                to: endsAfter ? null : span.to,\n                                marker: marker});\n      }\n    }\n    return nw;\n  }\n\n  function markedSpansAfter(old, endCh, isInsert) {\n    if (old) for (var i = 0, nw; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || marker.type == \"bookmark\" && span.from == endCh && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n        (nw || (nw = [])).push({from: startsBefore ? null : span.from - endCh,\n                                to: span.to == null ? null : span.to - endCh,\n                                marker: marker});\n      }\n    }\n    return nw;\n  }\n\n  function stretchSpansOverChange(doc, change) {\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) return null;\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = posEq(change.from, change.to);\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) span.to = startCh;\n          else if (sameLine) span.to = found.to == null ? null : found.to + offset;\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i = 0; i < last.length; ++i) {\n        var span = last[i];\n        if (span.to != null) span.to += offset;\n        if (span.from == null) {\n          var found = getMarkedSpanFor(first, span.marker);\n          if (!found) {\n            span.from = offset;\n            if (sameLine) (first || (first = [])).push(span);\n          }\n        } else {\n          span.from += offset;\n          if (sameLine) (first || (first = [])).push(span);\n        }\n      }\n    }\n    if (sameLine && first) {\n      // Make sure we didn't create any zero-length spans\n      for (var i = 0; i < first.length; ++i)\n        if (first[i].from != null && first[i].from == first[i].to && first[i].marker.type != \"bookmark\")\n          first.splice(i--, 1);\n      if (!first.length) first = null;\n    }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        for (var i = 0; i < first.length; ++i)\n          if (first[i].to == null)\n            (gapMarkers || (gapMarkers = [])).push({from: null, to: null, marker: first[i].marker});\n      for (var i = 0; i < gap; ++i)\n        newMarkers.push(gapMarkers);\n      newMarkers.push(last);\n    }\n    return newMarkers;\n  }\n\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) return stretched;\n    if (!stretched) return old;\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            if (oldCur[k].marker == span.marker) continue spans;\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old;\n  }\n\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function(line) {\n      if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          (markers || (markers = [])).push(mark);\n      }\n    });\n    if (!markers) return null;\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find();\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (posLess(p.to, m.from) || posLess(m.to, p.from)) continue;\n        var newParts = [j, 1];\n        if (posLess(p.from, m.from) || !mk.inclusiveLeft && posEq(p.from, m.from))\n          newParts.push({from: p.from, to: m.from});\n        if (posLess(m.to, p.to) || !mk.inclusiveRight && posEq(p.to, m.to))\n          newParts.push({from: m.to, to: p.to});\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 1;\n      }\n    }\n    return parts;\n  }\n\n  function collapsedSpanAt(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) for (var sp, i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) continue;\n      if ((sp.from == null || sp.from < ch) &&\n          (sp.to == null || sp.to > ch) &&\n          (!found || found.width < sp.marker.width))\n        found = sp.marker;\n    }\n    return found;\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAt(line, -1); }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAt(line, line.text.length + 1); }\n\n  function visualLine(doc, line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      line = getLine(doc, merged.find().from.line);\n    return line;\n  }\n\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) for (var sp, i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) continue;\n      if (sp.from == null) return true;\n      if (sp.marker.replacedWith) continue;\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        return true;\n    }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find().to, endLine = getLine(doc, end.line);\n      return lineIsHiddenInner(doc, endLine, getMarkedSpanFor(endLine.markedSpans, span.marker));\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      return true;\n    for (var sp, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.replacedWith && sp.from == span.to &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) return true;\n    }\n  }\n\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.detachLine(line);\n    line.markedSpans = null;\n  }\n\n  function attachMarkedSpans(line, spans) {\n    if (!spans) return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.attachLine(line);\n    line.markedSpans = spans;\n  }\n\n  // LINE WIDGETS\n\n  var LineWidget = CodeMirror.LineWidget = function(cm, node, options) {\n    if (options) for (var opt in options) if (options.hasOwnProperty(opt))\n      this[opt] = options[opt];\n    this.cm = cm;\n    this.node = node;\n  };\n  eventMixin(LineWidget);\n  function widgetOperation(f) {\n    return function() {\n      var withOp = !this.cm.curOp;\n      if (withOp) startOperation(this.cm);\n      try {var result = f.apply(this, arguments);}\n      finally {if (withOp) endOperation(this.cm);}\n      return result;\n    };\n  }\n  LineWidget.prototype.clear = widgetOperation(function() {\n    var ws = this.line.widgets, no = lineNo(this.line);\n    if (no == null || !ws) return;\n    for (var i = 0; i < ws.length; ++i) if (ws[i] == this) ws.splice(i--, 1);\n    if (!ws.length) this.line.widgets = null;\n    var aboveVisible = heightAtLine(this.cm, this.line) < this.cm.doc.scrollTop;\n    updateLineHeight(this.line, Math.max(0, this.line.height - widgetHeight(this)));\n    if (aboveVisible) addToScrollPos(this.cm, 0, -this.height);\n    regChange(this.cm, no, no + 1);\n  });\n  LineWidget.prototype.changed = widgetOperation(function() {\n    var oldH = this.height;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) return;\n    updateLineHeight(this.line, this.line.height + diff);\n    var no = lineNo(this.line);\n    regChange(this.cm, no, no + 1);\n  });\n\n  function widgetHeight(widget) {\n    if (widget.height != null) return widget.height;\n    if (!widget.node.parentNode || widget.node.parentNode.nodeType != 1)\n      removeChildrenAndAdd(widget.cm.display.measure, elt(\"div\", [widget.node], null, \"position: relative\"));\n    return widget.height = widget.node.offsetHeight;\n  }\n\n  function addLineWidget(cm, handle, node, options) {\n    var widget = new LineWidget(cm, node, options);\n    if (widget.noHScroll) cm.display.alignWidgets = true;\n    changeLine(cm, handle, function(line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) widgets.push(widget);\n      else widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      widget.line = line;\n      if (!lineIsHidden(cm.doc, line) || widget.showIfHidden) {\n        var aboveVisible = heightAtLine(cm, line) < cm.doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) addToScrollPos(cm, 0, widget.height);\n      }\n      return true;\n    });\n    return widget;\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n  eventMixin(Line);\n\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) line.stateAfter = null;\n    if (line.styles) line.styles = null;\n    if (line.order != null) line.order = null;\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) updateLineHeight(line, estHeight);\n  }\n\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Run the given mode's parser over a line, update the styles\n  // array, which contains alternating fragments of text and CSS\n  // classes.\n  function runMode(cm, text, mode, state, f) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) flattenSpans = cm.options.flattenSpans;\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize), style;\n    if (text == \"\" && mode.blankLine) mode.blankLine(state);\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        // Webkit seems to refuse to render text nodes longer than 57444 characters\n        stream.pos = Math.min(text.length, stream.start + 50000);\n        style = null;\n      } else {\n        style = mode.token(stream, state);\n      }\n      if (!flattenSpans || curStyle != style) {\n        if (curStart < stream.start) f(stream.start, curStyle);\n        curStart = stream.start; curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    if (curStart < stream.pos) f(stream.pos, curStyle);\n  }\n\n  function highlightLine(cm, line, state) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen];\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {st.push(end, style);});\n\n    // Run overlays, adjust style array.\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      runMode(cm, line.text, overlay.mode, true, function(end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            st.splice(i, 1, end, st[i+1], i_end);\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) return;\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = cur ? cur + \" \" + style : style;\n          }\n        }\n      });\n    }\n\n    return st;\n  }\n\n  function getLineStyles(cm, line) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen)\n      line.styles = highlightLine(cm, line, line.stateAfter = getStateBefore(cm, lineNo(line)));\n    return line.styles;\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array.\n  function processLine(cm, line, state) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(line.text, cm.options.tabSize);\n    if (line.text == \"\" && mode.blankLine) mode.blankLine(state);\n    while (!stream.eol() && stream.pos <= cm.options.maxHighlightLength) {\n      mode.token(stream, state);\n      stream.start = stream.pos;\n    }\n  }\n\n  var styleToClassCache = {};\n  function styleToClass(style) {\n    if (!style) return null;\n    return styleToClassCache[style] ||\n      (styleToClassCache[style] = \"cm-\" + style.replace(/ +/g, \" cm-\"));\n  }\n\n  function lineContent(cm, realLine, measure, copyWidgets) {\n    var merged, line = realLine, empty = true;\n    while (merged = collapsedSpanAtStart(line))\n      line = getLine(cm.doc, merged.find().from.line);\n\n    var builder = {pre: elt(\"pre\"), col: 0, pos: 0,\n                   measure: null, measuredSomething: false, cm: cm,\n                   copyWidgets: copyWidgets};\n    if (line.textClass) builder.pre.className = line.textClass;\n\n    do {\n      if (line.text) empty = false;\n      builder.measure = line == realLine && measure;\n      builder.pos = 0;\n      builder.addToken = builder.measure ? buildTokenMeasure : buildToken;\n      if ((ie || webkit) && cm.getOption(\"lineWrapping\"))\n        builder.addToken = buildTokenSplitSpaces(builder.addToken);\n      var next = insertLineContent(line, builder, getLineStyles(cm, line));\n      if (measure && line == realLine && !builder.measuredSomething) {\n        measure[0] = builder.pre.appendChild(zeroWidthElement(cm.display.measure));\n        builder.measuredSomething = true;\n      }\n      if (next) line = getLine(cm.doc, next.to.line);\n    } while (next);\n\n    if (measure && !builder.measuredSomething && !measure[0])\n      measure[0] = builder.pre.appendChild(empty ? elt(\"span\", \"\\u00a0\") : zeroWidthElement(cm.display.measure));\n    if (!builder.pre.firstChild && !lineIsHidden(cm.doc, realLine))\n      builder.pre.appendChild(document.createTextNode(\"\\u00a0\"));\n\n    var order;\n    // Work around problem with the reported dimensions of single-char\n    // direction spans on IE (issue #1129). See also the comment in\n    // cursorCoords.\n    if (measure && ie && (order = getOrder(line))) {\n      var l = order.length - 1;\n      if (order[l].from == order[l].to) --l;\n      var last = order[l], prev = order[l - 1];\n      if (last.from + 1 == last.to && prev && last.level < prev.level) {\n        var span = measure[builder.pos - 1];\n        if (span) span.parentNode.insertBefore(span.measureRight = zeroWidthElement(cm.display.measure),\n                                               span.nextSibling);\n      }\n    }\n\n    signal(cm, \"renderLine\", cm, realLine, builder.pre);\n    return builder.pre;\n  }\n\n  var tokenSpecialChars = /[\\t\\u0000-\\u0019\\u00ad\\u200b\\u2028\\u2029\\uFEFF]/g;\n  function buildToken(builder, text, style, startStyle, endStyle, title) {\n    if (!text) return;\n    if (!tokenSpecialChars.test(text)) {\n      builder.col += text.length;\n      var content = document.createTextNode(text);\n    } else {\n      var content = document.createDocumentFragment(), pos = 0;\n      while (true) {\n        tokenSpecialChars.lastIndex = pos;\n        var m = tokenSpecialChars.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          content.appendChild(document.createTextNode(text.slice(pos, pos + skipped)));\n          builder.col += skipped;\n        }\n        if (!m) break;\n        pos += skipped + 1;\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          builder.col += tabWidth;\n        } else {\n          var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n          token.title = \"\\\\u\" + m[0].charCodeAt(0).toString(16);\n          content.appendChild(token);\n          builder.col += 1;\n        }\n      }\n    }\n    if (style || startStyle || endStyle || builder.measure) {\n      var fullStyle = style || \"\";\n      if (startStyle) fullStyle += startStyle;\n      if (endStyle) fullStyle += endStyle;\n      var token = elt(\"span\", [content], fullStyle);\n      if (title) token.title = title;\n      return builder.pre.appendChild(token);\n    }\n    builder.pre.appendChild(content);\n  }\n\n  function buildTokenMeasure(builder, text, style, startStyle, endStyle) {\n    var wrapping = builder.cm.options.lineWrapping;\n    for (var i = 0; i < text.length; ++i) {\n      var ch = text.charAt(i), start = i == 0;\n      if (ch >= \"\\ud800\" && ch < \"\\udbff\" && i < text.length - 1) {\n        ch = text.slice(i, i + 2);\n        ++i;\n      } else if (i && wrapping && spanAffectsWrapping(text, i)) {\n        builder.pre.appendChild(elt(\"wbr\"));\n      }\n      var old = builder.measure[builder.pos];\n      var span = builder.measure[builder.pos] =\n        buildToken(builder, ch, style,\n                   start && startStyle, i == text.length - 1 && endStyle);\n      if (old) span.leftSide = old.leftSide || old;\n      // In IE single-space nodes wrap differently than spaces\n      // embedded in larger text nodes, except when set to\n      // white-space: normal (issue #1268).\n      if (ie && wrapping && ch == \" \" && i && !/\\s/.test(text.charAt(i - 1)) &&\n          i < text.length - 1 && !/\\s/.test(text.charAt(i + 1)))\n        span.style.whiteSpace = \"normal\";\n      builder.pos += ch.length;\n    }\n    if (text.length) builder.measuredSomething = true;\n  }\n\n  function buildTokenSplitSpaces(inner) {\n    function split(old) {\n      var out = \" \";\n      for (var i = 0; i < old.length - 2; ++i) out += i % 2 ? \" \" : \"\\u00a0\";\n      out += \" \";\n      return out;\n    }\n    return function(builder, text, style, startStyle, endStyle, title) {\n      return inner(builder, text.replace(/ {3,}/, split), style, startStyle, endStyle, title);\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.replacedWith;\n    if (widget) {\n      if (builder.copyWidgets) widget = widget.cloneNode(true);\n      builder.pre.appendChild(widget);\n      if (builder.measure) {\n        if (size) {\n          builder.measure[builder.pos] = widget;\n        } else {\n          var elt = zeroWidthElement(builder.cm.display.measure);\n          if (marker.type == \"bookmark\" && !marker.insertLeft)\n            builder.measure[builder.pos] = builder.pre.appendChild(elt);\n          else if (builder.measure[builder.pos])\n            return;\n          else\n            builder.measure[builder.pos] = builder.pre.insertBefore(elt, widget);\n        }\n        builder.measuredSomething = true;\n      }\n    }\n    builder.pos += size;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i = 1; i < styles.length; i+=2)\n        builder.addToken(builder, allText.slice(at, at = styles[i]), styleToClass(styles[i+1]));\n      return;\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = title = \"\";\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [];\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (sp.from <= pos && (sp.to == null || sp.to > pos)) {\n            if (sp.to != null && nextChange > sp.to) { nextChange = sp.to; spanEndStyle = \"\"; }\n            if (m.className) spanStyle += \" \" + m.className;\n            if (m.startStyle && sp.from == pos) spanStartStyle += \" \" + m.startStyle;\n            if (m.endStyle && sp.to == nextChange) spanEndStyle += \" \" + m.endStyle;\n            if (m.title && !title) title = m.title;\n            if (m.collapsed && (!collapsed || collapsed.marker.size < m.size))\n              collapsed = sp;\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n          if (m.type == \"bookmark\" && sp.from == pos && m.replacedWith) foundBookmarks.push(m);\n        }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) return collapsed.marker.find();\n        }\n        if (!collapsed && foundBookmarks.length) for (var j = 0; j < foundBookmarks.length; ++j)\n          buildCollapsedSpan(builder, 0, foundBookmarks[j]);\n      }\n      if (pos >= len) break;\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break;}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = styleToClass(styles[i++]);\n      }\n    }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  function updateDoc(doc, change, markedSpans, selAfter, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null;}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // First adjust the line structure\n    if (from.ch == 0 && to.ch == 0 && lastText == \"\") {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      for (var i = 0, e = text.length - 1, added = []; i < e; ++i)\n        added.push(new Line(text[i], spansFor(i), estimateHeight));\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) doc.remove(from.line, nlines);\n      if (added.length) doc.insert(from.line, added);\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        for (var added = [], i = 1, e = text.length - 1; i < e; ++i)\n          added.push(new Line(text[i], spansFor(i), estimateHeight));\n        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      for (var i = 1, e = text.length - 1, added = []; i < e; ++i)\n        added.push(new Line(text[i], spansFor(i), estimateHeight));\n      if (nlines > 1) doc.remove(from.line + 1, nlines - 1);\n      doc.insert(from.line + 1, added);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n    setSelection(doc, selAfter.anchor, selAfter.head, null, true);\n  }\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    for (var i = 0, e = lines.length, height = 0; i < e; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length; },\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n    collapse: function(lines) {\n      lines.splice.apply(lines, [lines.length, 0].concat(this.lines));\n    },\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0, e = lines.length; i < e; ++i) lines[i].parent = this;\n    },\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        if (op(this.lines[at])) return true;\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0, e = children.length; i < e; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size; },\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) break;\n          at = 0;\n        } else at -= sz;\n      }\n      if (this.size - n < 25) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function(lines) {\n      for (var i = 0, e = this.children.length; i < e; ++i) this.children[i].collapse(lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0, e = this.children.length; i < e; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            while (child.lines.length > 50) {\n              var spilled = child.lines.splice(child.lines.length - 25, 25);\n              var newleaf = new LeafChunk(spilled);\n              child.height -= newleaf.height;\n              this.children.splice(i + 1, 0, newleaf);\n              newleaf.parent = this;\n            }\n            this.maybeSpill();\n          }\n          break;\n        }\n        at -= sz;\n      }\n    },\n    maybeSpill: function() {\n      if (this.children.length <= 10) return;\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n      me.parent.maybeSpill();\n    },\n    iterN: function(at, n, op) {\n      for (var i = 0, e = this.children.length; i < e; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) return true;\n          if ((n -= used) == 0) break;\n          at = 0;\n        } else at -= sz;\n      }\n    }\n  };\n\n  var nextDocId = 0;\n  var Doc = CodeMirror.Doc = function(text, mode, firstLine) {\n    if (!(this instanceof Doc)) return new Doc(text, mode, firstLine);\n    if (firstLine == null) firstLine = 0;\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.history = makeHistory();\n    this.cleanGeneration = 1;\n    this.frontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = {from: start, to: start, head: start, anchor: start, shift: false, extend: false, goalColumn: null};\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n\n    if (typeof text == \"string\") text = splitLines(text);\n    updateDoc(this, {from: start, to: start, text: text}, null, {head: start, anchor: start});\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    iter: function(from, to, op) {\n      if (op) this.iterN(from - this.first, to - from, op);\n      else this.iterN(this.first, this.first + this.size, from);\n    },\n\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0, e = lines.length; i < e; ++i) height += lines[i].height;\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) return lines;\n      return lines.join(lineSep || \"\\n\");\n    },\n    setValue: function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: splitLines(code), origin: \"setValue\"},\n                 {head: top, anchor: top}, true);\n    },\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) return lines;\n      return lines.join(lineSep || \"\\n\");\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text;},\n    setLine: function(line, text) {\n      if (isLine(this, line))\n        replaceRange(this, text, Pos(line, 0), clipPos(this, Pos(line)));\n    },\n    removeLine: function(line) {\n      if (line) replaceRange(this, \"\", clipPos(this, Pos(line - 1)), clipPos(this, Pos(line)));\n      else replaceRange(this, \"\", Pos(0, 0), clipPos(this, Pos(1, 0)));\n    },\n\n    getLineHandle: function(line) {if (isLine(this, line)) return getLine(this, line);},\n    getLineNumber: function(line) {return lineNo(line);},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") line = getLine(this, line);\n      return visualLine(this, line);\n    },\n\n    lineCount: function() {return this.size;},\n    firstLine: function() {return this.first;},\n    lastLine: function() {return this.first + this.size - 1;},\n\n    clipPos: function(pos) {return clipPos(this, pos);},\n\n    getCursor: function(start) {\n      var sel = this.sel, pos;\n      if (start == null || start == \"head\") pos = sel.head;\n      else if (start == \"anchor\") pos = sel.anchor;\n      else if (start == \"end\" || start === false) pos = sel.to;\n      else pos = sel.from;\n      return copyPos(pos);\n    },\n    somethingSelected: function() {return !posEq(this.sel.head, this.sel.anchor);},\n\n    setCursor: docOperation(function(line, ch, extend) {\n      var pos = clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line);\n      if (extend) extendSelection(this, pos);\n      else setSelection(this, pos, pos);\n    }),\n    setSelection: docOperation(function(anchor, head, bias) {\n      setSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), bias);\n    }),\n    extendSelection: docOperation(function(from, to, bias) {\n      extendSelection(this, clipPos(this, from), to && clipPos(this, to), bias);\n    }),\n\n    getSelection: function(lineSep) {return this.getRange(this.sel.from, this.sel.to, lineSep);},\n    replaceSelection: function(code, collapse, origin) {\n      makeChange(this, {from: this.sel.from, to: this.sel.to, text: splitLines(code), origin: origin}, collapse || \"around\");\n    },\n    undo: docOperation(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docOperation(function() {makeChangeFromHistory(this, \"redo\");}),\n\n    setExtending: function(val) {this.sel.extend = val;},\n\n    historySize: function() {\n      var hist = this.history;\n      return {undo: hist.done.length, redo: hist.undone.length};\n    },\n    clearHistory: function() {this.history = makeHistory(this.history.maxGeneration);},\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration();\n    },\n    changeGeneration: function() {\n      this.history.lastOp = this.history.lastOrigin = null;\n      return this.history.generation;\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)};\n    },\n    setHistory: function(histData) {\n      var hist = this.history = makeHistory(this.history.maxGeneration);\n      hist.done = histData.done.slice(0);\n      hist.undone = histData.undone.slice(0);\n    },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, \"range\");\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          markers.push(span.marker.parent || span.marker);\n      }\n      return markers;\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function(line) {\n        var sps = line.markedSpans;\n        if (sps) for (var i = 0; i < sps.length; ++i)\n          if (sps[i].from != null) markers.push(sps[i].marker);\n      });\n      return markers;\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first;\n      this.iter(function(line) {\n        var sz = line.text.length + 1;\n        if (sz > off) { ch = off; return true; }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) return 0;\n      this.iter(this.first, coords.line, function (line) {\n        index += line.text.length + 1;\n      });\n      return index;\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = {from: this.sel.from, to: this.sel.to, head: this.sel.head, anchor: this.sel.anchor,\n                 shift: this.sel.shift, extend: false, goalColumn: this.sel.goalColumn};\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc;\n    },\n\n    linkedDoc: function(options) {\n      if (!options) options = {};\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) from = options.from;\n      if (options.to != null && options.to < to) to = options.to;\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from);\n      if (options.sharedHist) copy.history = this.history;\n      (this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      return copy;\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) other = other.doc;\n      if (this.linked) for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) continue;\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        break;\n      }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function(doc) {splitIds.push(doc.id);}, true);\n        other.history = makeHistory();\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode;},\n    getEditor: function() {return this.cm;}\n  });\n\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // The Doc methods that should be available on CodeMirror instances\n  var dontDelegate = \"iter insert remove copy getEditor\".split(\" \");\n  for (var prop in Doc.prototype) if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments);};\n    })(Doc.prototype[prop]);\n\n  eventMixin(Doc);\n\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) continue;\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) continue;\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      }\n    }\n    propagate(doc, null, true);\n  }\n\n  function attachDoc(cm, doc) {\n    if (doc.cm) throw new Error(\"This document is already in use.\");\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    if (!cm.options.lineWrapping) computeMaxLength(cm);\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  // LINE UTILITIES\n\n  function getLine(chunk, n) {\n    n -= chunk.first;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break; }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n];\n  }\n\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function(line) {\n      var text = line.text;\n      if (n == end.line) text = text.slice(0, end.ch);\n      if (n == start.line) text = text.slice(start.ch);\n      out.push(text);\n      ++n;\n    });\n    return out;\n  }\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function(line) { out.push(line.text); });\n    return out;\n  }\n\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    for (var n = line; n; n = n.parent) n.height += diff;\n  }\n\n  function lineNo(line) {\n    if (line.parent == null) return null;\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) break;\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first;\n  }\n\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i = 0, e = chunk.children.length; i < e; ++i) {\n        var child = chunk.children[i], ch = child.height;\n        if (h < ch) { chunk = child; continue outer; }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n;\n    } while (!chunk.lines);\n    for (var i = 0, e = chunk.lines.length; i < e; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) break;\n      h -= lh;\n    }\n    return n + i;\n  }\n\n  function heightAtLine(cm, lineObj) {\n    lineObj = visualLine(cm.doc, lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) break;\n      else h += line.height;\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i = 0; i < p.children.length; ++i) {\n        var cur = p.children[i];\n        if (cur == chunk) break;\n        else h += cur.height;\n      }\n    }\n    return h;\n  }\n\n  function getOrder(line) {\n    var order = line.order;\n    if (order == null) order = line.order = bidiOrdering(line.text);\n    return order;\n  }\n\n  // HISTORY\n\n  function makeHistory(startGen) {\n    return {\n      // Arrays of history events. Doing something adds an event to\n      // done and clears undo. Undoing moves events from done to\n      // undone, redoing moves them in the other direction.\n      done: [], undone: [], undoDepth: Infinity,\n      // Used to track when changes can be merged into a single undo\n      // event\n      lastTime: 0, lastOp: null, lastOrigin: null,\n      // Used by the isClean() method\n      generation: startGen || 1, maxGeneration: startGen || 1\n    };\n  }\n\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {\n      if (line.markedSpans)\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      ++n;\n    });\n  }\n\n  function historyChangeFromChange(doc, change) {\n    var from = { line: change.from.line, ch: change.from.ch };\n    var histChange = {from: from, to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function(doc) {attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);}, true);\n    return histChange;\n  }\n\n  function addToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur = lst(hist.done);\n\n    if (cur &&\n        (hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastTime > time - doc.cm.options.historyEventDelay) ||\n          change.origin.charAt(0) == \"*\"))) {\n      // Merge this change into the last event\n      var last = lst(cur.changes);\n      if (posEq(change.from, change.to) && posEq(change.from, last.to)) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n      cur.anchorAfter = selAfter.anchor; cur.headAfter = selAfter.head;\n    } else {\n      // Can not be merged, start a new event.\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation,\n             anchorBefore: doc.sel.anchor, headBefore: doc.sel.head,\n             anchorAfter: selAfter.anchor, headAfter: selAfter.head};\n      hist.done.push(cur);\n      hist.generation = ++hist.maxGeneration;\n      while (hist.done.length > hist.undoDepth)\n        hist.done.shift();\n    }\n    hist.lastTime = time;\n    hist.lastOp = opId;\n    hist.lastOrigin = change.origin;\n  }\n\n  function removeClearedSpans(spans) {\n    if (!spans) return null;\n    for (var i = 0, out; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) out = spans.slice(0, i); }\n      else if (out) out.push(spans[i]);\n    }\n    return !out ? spans : out.length ? out : null;\n  }\n\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) return null;\n    for (var i = 0, nw = []; i < change.text.length; ++i)\n      nw.push(removeClearedSpans(found[i]));\n    return nw;\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup) {\n    for (var i = 0, copy = []; i < events.length; ++i) {\n      var event = events[i], changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges, anchorBefore: event.anchorBefore, headBefore: event.headBefore,\n                 anchorAfter: event.anchorAfter, headAfter: event.headAfter});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m;\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) for (var prop in change) if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        }\n      }\n    }\n    return copy;\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSel(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      for (var j = 0; j < sub.changes.length; ++j) {\n        var cur = sub.changes[j];\n        if (!sub.copied) { cur.from = copyPos(cur.from); cur.to = copyPos(cur.to); }\n        if (to < cur.from.line) {\n          cur.from.line += diff;\n          cur.to.line += diff;\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n      if (!sub.copied) {\n        sub.anchorBefore = copyPos(sub.anchorBefore); sub.headBefore = copyPos(sub.headBefore);\n        sub.anchorAfter = copyPos(sub.anchorAfter); sub.readAfter = copyPos(sub.headAfter);\n        sub.copied = true;\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      } else {\n        rebaseHistSel(sub.anchorBefore); rebaseHistSel(sub.headBefore);\n        rebaseHistSel(sub.anchorAfter); rebaseHistSel(sub.headAfter);\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // EVENT OPERATORS\n\n  function stopMethod() {e_stop(this);}\n  // Ensure an event has a stop method.\n  function addStop(event) {\n    if (!event.stop) event.stop = stopMethod;\n    return event;\n  }\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) e.preventDefault();\n    else e.returnValue = false;\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) e.stopPropagation();\n    else e.cancelBubble = true;\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n  CodeMirror.e_stop = e_stop;\n  CodeMirror.e_preventDefault = e_preventDefault;\n  CodeMirror.e_stopPropagation = e_stopPropagation;\n\n  function e_target(e) {return e.target || e.srcElement;}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) b = 1;\n      else if (e.button & 2) b = 3;\n      else if (e.button & 4) b = 2;\n    }\n    if (mac && e.ctrlKey && b == 1) b = 3;\n    return b;\n  }\n\n  // EVENT HANDLING\n\n  function on(emitter, type, f) {\n    if (emitter.addEventListener)\n      emitter.addEventListener(type, f, false);\n    else if (emitter.attachEvent)\n      emitter.attachEvent(\"on\" + type, f);\n    else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      var arr = map[type] || (map[type] = []);\n      arr.push(f);\n    }\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener)\n      emitter.removeEventListener(type, f, false);\n    else if (emitter.detachEvent)\n      emitter.detachEvent(\"on\" + type, f);\n    else {\n      var arr = emitter._handlers && emitter._handlers[type];\n      if (!arr) return;\n      for (var i = 0; i < arr.length; ++i)\n        if (arr[i] == f) { arr.splice(i, 1); break; }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var arr = emitter._handlers && emitter._handlers[type];\n    if (!arr) return;\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < arr.length; ++i) arr[i].apply(null, args);\n  }\n\n  var delayedCallbacks, delayedCallbackDepth = 0;\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = emitter._handlers && emitter._handlers[type];\n    if (!arr) return;\n    var args = Array.prototype.slice.call(arguments, 2);\n    if (!delayedCallbacks) {\n      ++delayedCallbackDepth;\n      delayedCallbacks = [];\n      setTimeout(fireDelayed, 0);\n    }\n    function bnd(f) {return function(){f.apply(null, args);};};\n    for (var i = 0; i < arr.length; ++i)\n      delayedCallbacks.push(bnd(arr[i]));\n  }\n\n  function signalDOMEvent(cm, e, override) {\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function fireDelayed() {\n    --delayedCallbackDepth;\n    var delayed = delayedCallbacks;\n    delayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) delayed[i]();\n  }\n\n  function hasHandler(emitter, type) {\n    var arr = emitter._handlers && emitter._handlers[type];\n    return arr && arr.length > 0;\n  }\n\n  CodeMirror.on = on; CodeMirror.off = off; CodeMirror.signal = signal;\n\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // MISC UTILITIES\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerCutOff = 30;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = CodeMirror.Pass = {toString: function(){return \"CodeMirror.Pass\";}};\n\n  function Delayed() {this.id = null;}\n  Delayed.prototype = {set: function(ms, f) {clearTimeout(this.id); this.id = setTimeout(f, ms);}};\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) end = string.length;\n    }\n    for (var i = startIndex || 0, n = startValue || 0; i < end; ++i) {\n      if (string.charAt(i) == \"\\t\") n += tabSize - (n % tabSize);\n      else ++n;\n    }\n    return n;\n  }\n  CodeMirror.countColumn = countColumn;\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    return spaceStrs[n];\n  }\n\n  function lst(arr) { return arr[arr.length-1]; }\n\n  function selectInput(node) {\n    if (ios) { // Mobile Safari apparently has a bug where select() is broken.\n      node.selectionStart = 0;\n      node.selectionEnd = node.value.length;\n    } else {\n      // Suppress mysterious IE10 errors\n      try { node.select(); }\n      catch(_e) {}\n    }\n  }\n\n  function indexOf(collection, elt) {\n    if (collection.indexOf) return collection.indexOf(elt);\n    for (var i = 0, e = collection.length; i < e; ++i)\n      if (collection[i] == elt) return i;\n    return -1;\n  }\n\n  function createObj(base, props) {\n    function Obj() {}\n    Obj.prototype = base;\n    var inst = new Obj();\n    if (props) copyObj(props, inst);\n    return inst;\n  }\n\n  function copyObj(obj, target) {\n    if (!target) target = {};\n    for (var prop in obj) if (obj.hasOwnProperty(prop)) target[prop] = obj[prop];\n    return target;\n  }\n\n  function emptyArray(size) {\n    for (var a = [], i = 0; i < size; ++i) a.push(undefined);\n    return a;\n  }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args);};\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordChar(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return false;\n    return true;\n  }\n\n  var isExtendingChar = /[\\u0300-\\u036F\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1-\\u05C2\\u05C4-\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7-\\u06E8\\u06EA-\\u06ED\\uA66F\\uA670-\\uA672\\uA674-\\uA67D\\uA69F\\udc00-\\udfff]/;\n\n  // DOM UTILITIES\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) e.className = className;\n    if (style) e.style.cssText = style;\n    if (typeof content == \"string\") setTextContent(e, content);\n    else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);\n    return e;\n  }\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      e.removeChild(e.firstChild);\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  function setTextContent(e, str) {\n    if (ie_lt9) {\n      e.innerHTML = \"\";\n      e.appendChild(document.createTextNode(str));\n    } else e.textContent = str;\n  }\n\n  function getRect(node) {\n    return node.getBoundingClientRect();\n  }\n  CodeMirror.replaceGetRect = function(f) { getRect = f; };\n\n  // FEATURE DETECTION\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie_lt9) return false;\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  // For a reason I have yet to figure out, some browsers disallow\n  // word wrapping between certain characters *only* if a new inline\n  // element is started between them. This makes it hard to reliably\n  // measure the position of things, since that requires inserting an\n  // extra span. This terribly fragile set of tests matches the\n  // character combinations that suffer from this phenomenon on the\n  // various browsers.\n  function spanAffectsWrapping() { return false; }\n  if (gecko) // Only for \"$'\"\n    spanAffectsWrapping = function(str, i) {\n      return str.charCodeAt(i - 1) == 36 && str.charCodeAt(i) == 39;\n    };\n  else if (safari && !/Version\\/([6-9]|\\d\\d)\\b/.test(navigator.userAgent))\n    spanAffectsWrapping = function(str, i) {\n      return /\\-[^ \\-?]|\\?[^ !\\'\\\"\\),.\\-\\/:;\\?\\]\\}]/.test(str.slice(i - 1, i + 1));\n    };\n  else if (webkit && !/Chrome\\/(?:29|[3-9]\\d|\\d\\d\\d)\\./.test(navigator.userAgent))\n    spanAffectsWrapping = function(str, i) {\n      if (i > 1 && str.charCodeAt(i - 1) == 45) {\n        if (/\\w/.test(str.charAt(i - 2)) && /[^\\-?\\.]/.test(str.charAt(i))) return true;\n        if (i > 2 && /[\\d\\.,]/.test(str.charAt(i - 2)) && /[\\d\\.,]/.test(str.charAt(i))) return false;\n      }\n      return /[~!#%&*)=+}\\]|\\\"\\.>,:;][({[<]|-[^\\-?\\.\\u2010-\\u201f\\u2026]|\\?[\\w~`@#$%\\^&*(_=+{[|><]|…[\\w~`@#$%\\^&*(_=+{[><]/.test(str.slice(i - 1, i + 1));\n    };\n\n  var knownScrollbarWidth;\n  function scrollbarWidth(measure) {\n    if (knownScrollbarWidth != null) return knownScrollbarWidth;\n    var test = elt(\"div\", null, null, \"width: 50px; height: 50px; overflow-x: scroll\");\n    removeChildrenAndAdd(measure, test);\n    if (test.offsetWidth)\n      knownScrollbarWidth = test.offsetHeight - test.clientHeight;\n    return knownScrollbarWidth || 0;\n  }\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !ie_lt8;\n    }\n    if (zwspSupported) return elt(\"span\", \"\\u200b\");\n    else return elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLines = \"\\n\\nb\".split(/\\n/).length != 3 ? function(string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) nl = string.length;\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result;\n  } : function(string){return string.split(/\\r\\n?|\\n/);};\n  CodeMirror.splitLines = splitLines;\n\n  var hasSelection = window.getSelection ? function(te) {\n    try { return te.selectionStart != te.selectionEnd; }\n    catch(e) { return false; }\n  } : function(te) {\n    try {var range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) return false;\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n\n  var hasCopyEvent = (function() {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) return true;\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == 'function';\n  })();\n\n  // KEY NAMING\n\n  var keyNames = {3: \"Enter\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n                  19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n                  36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n                  46: \"Delete\", 59: \";\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\", 109: \"-\", 107: \"=\", 127: \"Delete\",\n                  186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n                  221: \"]\", 222: \"'\", 63276: \"PageUp\", 63277: \"PageDown\", 63275: \"End\", 63273: \"Home\",\n                  63234: \"Left\", 63232: \"Up\", 63235: \"Right\", 63233: \"Down\", 63302: \"Insert\", 63272: \"Delete\"};\n  CodeMirror.keyNames = keyNames;\n  (function() {\n    // Number keys\n    for (var i = 0; i < 10; i++) keyNames[i + 48] = String(i);\n    // Alphabetic keys\n    for (var i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);\n    // Function keys\n    for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = \"F\" + i;\n  })();\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) return f(from, to, \"ltr\");\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n        found = true;\n      }\n    }\n    if (!found) f(from, to, \"ltr\");\n  }\n\n  function bidiLeft(part) { return part.level % 2 ? part.to : part.from; }\n  function bidiRight(part) { return part.level % 2 ? part.from : part.to; }\n\n  function lineLeft(line) { var order = getOrder(line); return order ? bidiLeft(order[0]) : 0; }\n  function lineRight(line) {\n    var order = getOrder(line);\n    if (!order) return line.text.length;\n    return bidiRight(lst(order));\n  }\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(cm.doc, line);\n    if (visual != line) lineN = lineNo(visual);\n    var order = getOrder(visual);\n    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);\n    return Pos(lineN, ch);\n  }\n  function lineEnd(cm, lineN) {\n    var merged, line;\n    while (merged = collapsedSpanAtEnd(line = getLine(cm.doc, lineN)))\n      lineN = merged.find().to.line;\n    var order = getOrder(line);\n    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);\n    return Pos(lineN, ch);\n  }\n\n  function compareBidiLevel(order, a, b) {\n    var linedir = order[0].level;\n    if (a == linedir) return true;\n    if (b == linedir) return false;\n    return a < b;\n  }\n  var bidiOther;\n  function getBidiPartAt(order, pos) {\n    for (var i = 0, found; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < pos && cur.to > pos) { bidiOther = null; return i; }\n      if (cur.from == pos || cur.to == pos) {\n        if (found == null) {\n          found = i;\n        } else if (compareBidiLevel(order, cur.level, order[found].level)) {\n          bidiOther = found;\n          return i;\n        } else {\n          bidiOther = i;\n          return found;\n        }\n      }\n    }\n    bidiOther = null;\n    return found;\n  }\n\n  function moveInLine(line, pos, dir, byUnit) {\n    if (!byUnit) return pos + dir;\n    do pos += dir;\n    while (pos > 0 && isExtendingChar.test(line.text.charAt(pos)));\n    return pos;\n  }\n\n  // This is somewhat involved. It is needed in order to move\n  // 'visually' through bi-directional text -- i.e., pressing left\n  // should make the cursor go left, even when in RTL text. The\n  // tricky part is the 'jumps', where RTL and LTR text touch each\n  // other. This often requires the cursor offset to move more than\n  // one unit, in order to visually move one unit.\n  function moveVisually(line, start, dir, byUnit) {\n    var bidi = getOrder(line);\n    if (!bidi) return moveLogically(line, start, dir, byUnit);\n    var pos = getBidiPartAt(bidi, start), part = bidi[pos];\n    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);\n\n    for (;;) {\n      if (target > part.from && target < part.to) return target;\n      if (target == part.from || target == part.to) {\n        if (getBidiPartAt(bidi, target) == pos) return target;\n        part = bidi[pos += dir];\n        return (dir > 0) == part.level % 2 ? part.to : part.from;\n      } else {\n        part = bidi[pos += dir];\n        if (!part) return null;\n        if ((dir > 0) == part.level % 2)\n          target = moveInLine(line, part.to, -1, byUnit);\n        else\n          target = moveInLine(line, part.from, 1, byUnit);\n      }\n    }\n  }\n\n  function moveLogically(line, start, dir, byUnit) {\n    var target = start + dir;\n    if (byUnit) while (target > 0 && isExtendingChar.test(line.text.charAt(target))) target += dir;\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL\";\n    // Character types for codepoints 0x600 to 0x6ff\n    var arabicTypes = \"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr\";\n    function charType(code) {\n      if (code <= 0xff) return lowTypes.charAt(code);\n      else if (0x590 <= code && code <= 0x5f4) return \"R\";\n      else if (0x600 <= code && code <= 0x6ff) return arabicTypes.charAt(code - 0x600);\n      else if (0x700 <= code && code <= 0x8ac) return \"r\";\n      else return \"L\";\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n    // Browsers seem to always treat the boundaries of block elements as being L.\n    var outerType = \"L\";\n\n    return function(str) {\n      if (!bidiRE.test(str)) return false;\n      var len = str.length, types = [];\n      for (var i = 0, type; i < len; ++i)\n        types.push(type = charType(str.charCodeAt(i)));\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i = 0, prev = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"m\") types[i] = prev;\n        else prev = type;\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i = 0, cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"1\" && cur == \"r\") types[i] = \"n\";\n        else if (isStrong.test(type)) { cur = type; if (type == \"r\") types[i] = \"R\"; }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i = 1, prev = types[0]; i < len - 1; ++i) {\n        var type = types[i];\n        if (type == \"+\" && prev == \"1\" && types[i+1] == \"1\") types[i] = \"1\";\n        else if (type == \",\" && prev == types[i+1] &&\n                 (prev == \"1\" || prev == \"n\")) types[i] = prev;\n        prev = type;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i = 0; i < len; ++i) {\n        var type = types[i];\n        if (type == \",\") types[i] = \"N\";\n        else if (type == \"%\") {\n          for (var end = i + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i && types[i-1] == \"!\") || (end < len - 1 && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i; j < end; ++j) types[j] = replace;\n          i = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i = 0, cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (cur == \"L\" && type == \"1\") types[i] = \"L\";\n        else if (isStrong.test(type)) cur = type;\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i = 0; i < len; ++i) {\n        if (isNeutral.test(types[i])) {\n          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}\n          var before = (i ? types[i-1] : outerType) == \"L\";\n          var after = (end < len - 1 ? types[end] : outerType) == \"L\";\n          var replace = before || after ? \"L\" : \"R\";\n          for (var j = i; j < end; ++j) types[j] = replace;\n          i = end - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i = 0; i < len;) {\n        if (countsAsLeft.test(types[i])) {\n          var start = i;\n          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}\n          order.push({from: start, to: i, level: 0});\n        } else {\n          var pos = i, at = order.length;\n          for (++i; i < len && types[i] != \"L\"; ++i) {}\n          for (var j = pos; j < i;) {\n            if (countsAsNum.test(types[j])) {\n              if (pos < j) order.splice(at, 0, {from: pos, to: j, level: 1});\n              var nstart = j;\n              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}\n              order.splice(at, 0, {from: nstart, to: j, level: 2});\n              pos = j;\n            } else ++j;\n          }\n          if (pos < i) order.splice(at, 0, {from: pos, to: i, level: 1});\n        }\n      }\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length;\n        order.unshift({from: 0, to: m[0].length, level: 0});\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length;\n        order.push({from: len - m[0].length, to: len, level: 0});\n      }\n      if (order[0].level != lst(order).level)\n        order.push({from: len, to: len, level: order[0].level});\n\n      return order;\n    };\n  })();\n\n  // THE END\n\n  CodeMirror.version = \"3.16.0\";\n\n  return CodeMirror;\n})();\n\ndefine(\"codemirror/codemirror\", [\"css!../components/codemirror/codemirror.css\"], (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.CodeMirror;\n    };\n}(this)));\n\n",
    "// Editor for \"code\" which can be styled via some arbitrary class\ndefine('tantaman/web/widgets/CodeEditor',['libs/backbone', 'codemirror/codemirror'],\nfunction(Backbone, CodeMirror) {\n\t// TODO: provide a meaningful way to cancel edits (e.g. restore previous state of\n\t// the editor, not just ignore changes)\n\treturn Backbone.View.extend({\n\t\tclassName: 'CodeEditor modal hide',\n\t\tevents: {\n\t\t\t'click .ok': 'saveCode',\n\t\t\t'click .cancel': 'hide',\n\t\t\t'hidden': '_hidden'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis.template = JST['tantaman.web.widgets/CodeEditor'];\n\t\t},\n\n\t\tsaveCode: function() {\n\t\t\tvar code = this.mirror.getValue();\n\t\t\tthis._saveCb(code);\n\t\t},\n\n\t\tshow: function(savecb, code) {\n\t\t\tthis._saveCb = savecb;\n\t\t\tthis.$el.modal('show');\n\n\t\t\tif (!this.mirror) {\n\t\t\t\tthis.mirror = CodeMirror.fromTextArea(this.$input[0], {\n\t\t\t\t\tmode: this.options.mode\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (code)\n\t\t\t\tthis.mirror.setValue(code);\n\t\t},\n\n\t\thide: function() {\n\t\t\tthis.$el.modal('hide');\n\t\t},\n\n\t\t_hidden: function() {\n\t\t\tthis.$input.val('');\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this.template(this.options));\n\t\t\tthis.$el.addClass(this.options.class);\n\t\t\tthis.$input = this.$el.find('.codeInput');\n\n\t\t\tthis.$el.modal({\n\t\t\t\t/*backdrop: 'static',\n\t\t\t\tkeyboard: false,*/\n\t\t\t\tshow: false\n\t\t\t});\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function CodeEditor() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('tantaman/web/widgets/Button',['libs/backbone'],\nfunction(Backbone) {\n\t'use strict';\n\n\t/**\n\t * @class Button\n\t */\n\treturn Backbone.View.extend({\n\t\tclassName: 'btn btn-plast',\n\t\ttagName: 'a',\n\n\t\tevents: {\n\t\t\t'click': '_clicked'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t},\n\n\t\t_clicked: function() {\n\t\t\tif (!this._disabled)\n\t\t\t\tthis.options.cb();\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html('<i class=\"' + this.options.icon + ' icon-white\"></i>' + this.options.name);\n\t\t\treturn this;\n\t\t},\n\n\t\tdisable: function() {\n\t\t\tthis.$el.addClass('disabled');\n\t\t\tthis._disabled = true;\n\t\t},\n\n\t\tenable: function() {\n\t\t\tthis._disabled = false;\n\t\t\tthis.$el.removeClass('disabled');\n\t\t},\n\n\t\tconstructor: function ThemeButton() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('tantaman/web/css_manip/CssManip',[],function() {\n\t// var ident = /-?[_a-zA-Z]+[_a-zA-Z0-9-]*/;\n\tvar classesReg = /\\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g;\n\n\treturn {\n\t\tcreateStyleElem: function(options) {\n\t\t\tvar sheet = document.createElement('style');\n\t\t\tsheet.type = 'text/css';\n\t\t\tif (options.id)\n\t\t\t\tsheet.id = options.id;\n\n\t\t\treturn sheet;\n\t\t},\n\n\t\tgetStyleElem: function(options) {\n\t\t\tvar sheet = document.getElementById(options.id);\n\t\t\tif (!sheet && options.create) {\n\t\t\t\tsheet = this.createStyleElem(options);\n\t\t\t\tthis.appendStyleElem(sheet);\n\t\t\t}\n\n\t\t\treturn sheet;\n\t\t},\n\n\t\tappendStyleElem: function(elem) {\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(elem);\n\t\t},\n\n\t\textractClasses: function(sheet) {\n\t\t\tvar rules = sheet.rules || sheet.cssRules;\n\n\t\t\tvar result = {};\n\t\t\tfor (var j = 0; j < rules.length; ++j) {\n\t\t\t\tvar rule = rules[j];\n\t\t\t\tvar matches = rule.selectorText.match(classesReg);\n\t\t\t\tif (matches) {\n\t\t\t\t\tfor (var i = 0; i < matches.length; ++i) {\n\t\t\t\t\t\tvar match = matches[i].substring(1);\n\t\t\t\t\t\tresult[match] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t};\n});\n",
    "\n",
    ";(function(glob, undefined) {\n\t'use strict'\n\n\tfunction buildRules(ruleMap) {\n\t\tvar ruleKeys = Object.keys(ruleMap);\n\n\t\tvar rules = [];\n\t\truleKeys.forEach(function(ruleKey) {\n\t\t\tif (ruleKey[0] == '^') {\n\t\t\t\tthrow \"rules with ^ as their first character are currently unsupported.\"\n\t\t\t} else {\n\t\t\t\tvar rule = {\n\t\t\t\t\tregex: new RegExp('^(' + ruleKey + ')'),\n\t\t\t\t\taction: ruleMap[ruleKey]\n\t\t\t\t};\n\n\t\t\t\trules.push(rule);\n\t\t\t}\n\t\t});\n\n\t\treturn rules;\n\t}\n\n\tfunction normalize(ruleMap, statedRuleMap) {\n\t\truleMap || (ruleMap = {});\n\t\tstatedRuleMap || (statedRuleMap = {});\n\n\t\tvar initial = statedRuleMap.initial;\n\t\tif (initial) {\n\t\t\tfor (var key in ruleMap) {\n\t\t\t\tinitial[key] = ruleMap[key];\n\t\t\t}\n\t\t} else {\n\t\t\tstatedRuleMap.initial = ruleMap;\n\t\t}\n\n\t\treturn statedRuleMap;\n\t}\n\n\tfunction Lexed(textStream, ruleMap, statedRuleMap) {\n\t\tif (typeof textStream === 'string') {\n\t\t\ttextStream = new Lexed.StringStream(textStream);\n\t\t}\n\n\t\tthis._stream = textStream;\n\t\tthis._currString = '';\n\t\tthis._state = 'initial';\n\n\t\truleMap = normalize(ruleMap, statedRuleMap);\n\t\t\n\t\tthis._rules = {};\n\n\t\tfor (var state in ruleMap) {\n\t\t\tthis._rules[state] = buildRules(ruleMap[state]);\n\t\t}\n\t}\n\n\tLexed.EOF = {\n\t\ttoString: function() {\n\t\t\treturn \"eof\"\n\t\t}\n\t};\n\tLexed.IGNORE = {\n\t\ttoString: function() {\n\t\t\treturn \"ignored\";\n\t\t}\n\t};\n\tLexed.NO_MATCH = {msg: \"NO SUITABLE CONTINUOUS MATCH\"};\n\tLexed.StringStream = function StringStream(string) {\n\t\tthis._string = string;\n\t};\n\n\tLexed.StringStream.prototype = {\n\t\tnextString: function() {\n\t\t\tvar temp = this._string;\n\t\t\tthis._string = undefined;\n\t\t\treturn temp;\n\t\t}\n\t}\n\n\tLexed.prototype = {\n\t\tlex: function() {\n\t\t\tvar input = this._getInput();\n\t\t\tif (!input && (this._currString == '' || !this._currString))\n\t\t\t\treturn Lexed.EOF;\n\n\t\t\tthis._currString += input;\n\n\t\t\tvar match;\n\t\t\t// Doing this iteratively even though it is\n\t\t\t// a bit uglier than the recursive solution.\n\t\t\tvar index;\n\t\t\tvar rules = this._rules[this._state];\n\t\t\twhile (!match) {\n\t\t\t\tfor (var i = 0; i < rules.length; ++i) {\n\t\t\t\t\tvar rule = rules[i];\n\t\t\t\t\tvar tempMatch = rule.regex.exec(this._currString);\n\t\t\t\t\tif (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n\t\t\t\t\t\tmatch = tempMatch;\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!match) {\n\t\t\t\t\tvar input = this._getInput(true);\n\t\t\t\t\tif (!input) {\n\t\t\t\t\t\tthrow Lexed.NO_MATCH;\n\t\t\t\t\t}\n\t\t\t\t\tthis._currString += input;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._currString = this._currString.substring(match[0].length);\n\n\t\t\tvar rule = rules[index];\n\t\t\tif (typeof rule.action === 'function') {\n\t\t\t\tvar result = rule.action(match[0], this);\n\t\t\t\tif (result === Lexed.IGNORE)\n\t\t\t\t\treturn this.lex();\n\t\t\t\treturn result;\n\t\t\t} else if (rule.action === Lexed.IGNORE) {\n\t\t\t\tvar t;\n\t\t\t\treturn this.lex();\n\t\t\t} else {\n\t\t\t\treturn rule.action;\n\t\t\t}\n\t\t},\n\n\t\t_getInput: function(needsInput) {\n\t\t\tif (!this._currString || this._currString == '' || needsInput) {\n\t\t\t\treturn this._stream.nextString();\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\n\t\tstate: function(newState) {\n\t\t\tif (!newState)\n\t\t\t\treturn this._state;\n\t\t\tthis._state = newState;\n\t\t}\n\t};\n\n\tif (typeof define === 'function') {\n\t\tdefine('lexed',[],function() {\n\t\t\treturn Lexed;\n\t\t});\n\t} else {\n\t\tglob.Lexed = Lexed;\n\t}\n}(this));\n",
    "define('strut/themes/StylesheetPreProcessor',['lexed'],\nfunction(Lexed) {\n\tvar rules = {\n\t\t\tinitial: {\n\t\t\t\t'/\\\\*': function(text, lexed) {\n\t\t\t\t\tlexed.state('comment');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'@[^\\\\n{]+': function(text, lexed) {\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'\\\\s+': function(text, lexed) {\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'{': function(text, lexed) {\n\t\t\t\t\tlexed.state('ruleDefinition');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t',': function(text, lexed) { return text; },\n\n\t\t\t\t'[^{\\\\s\\\\/,@]+': function(text, lexed) {\n\t\t\t\t\tlexed.state('ruleName');\n\t\t\t\t\treturn {text: text};\n\t\t\t\t}\n\t\t\t},\n\n\t\t\truleName: {\n\t\t\t\t'{': function(text, lexed) {\n\t\t\t\t\tlexed.state('ruleDefinition');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t',': function(text, lexed) {\n\t\t\t\t\tlexed.state('initial');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'[^{,]+': function(text, lexed) {\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcomment: {\n\t\t\t\t'\\\\*/': function(text, lexed) {\n\t\t\t\t\tlexed.state('initial');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\t\t\t\t'\\\\*': function(text) {return text;},\n\t\t\t\t'[^*]': function(text) {return text;}\n\t\t\t},\n\n\t\t\truleDefinition: {\n\t\t\t\t'/\\\\*': function(text, lexed) {\n\t\t\t\t\tlexed.state('comment');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'{': function(text, lexed) {\n\t\t\t\t\tconsole.log('inner rule');\n\t\t\t\t\tlexed.state('innerRule');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'[^{}]': function(text) {\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'}': function(text, lexed) {\n\t\t\t\t\tconsole.log('initial');\n\t\t\t\t\tlexed.state('initial');\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinnerRule: {\n\t\t\t\t'/\\\\*': function(text, lexed) {\n\t\t\t\t\tlexed.state('comment');\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'[^}]': function(text) {\n\t\t\t\t\treturn text;\n\t\t\t\t},\n\n\t\t\t\t'}': function(text, lexed) {\n\t\t\t\t\tlexed.state('ruleDefinition');\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\treturn {\n\t\tbeforeSave: function(cssText) {\n\t\t\tvar allText = '';\n\t\t\tvar l = new Lexed(cssText, null, rules);\n\t\t\twhile((token = l.lex()) != Lexed.EOF) {\n\t\t\t\tif (token.text)\n\t\t\t\t\tallText += \".strut-surface \" + token.text;\n\t\t\t\telse\n\t\t\t\t\tallText += token;\n\t\t\t}\n\n\t\t\treturn allText;\n\t\t},\n\n\t\tbeforeEdit: function(cssText) {\n\t\t\tif (cssText)\n\t\t\t\treturn cssText.replace(/.strut-surface /g, \"\");\n\t\t\treturn '';\n\t\t}\n\t};\n});\n",
    "CodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  \"use strict\";\n\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      hooks = parserConfig.hooks || {},\n      atMediaTypes = parserConfig.atMediaTypes || {},\n      atMediaFeatures = parserConfig.atMediaFeatures || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = !!parserConfig.allowNested,\n      type = null;\n\n  function ret(style, tp) { type = tp; return style; }\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (hooks[ch]) {\n      // result[0] is style and result[1] is type\n      var result = hooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {stream.eatWhile(/[\\w\\\\\\-]/); return ret(\"def\", stream.current());}\n    else if (ch == \"=\") ret(null, \"compare\");\n    else if ((ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) return ret(null, \"compare\");\n    else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    }\n    else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    }\n    else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    }\n    else if (/\\d/.test(ch)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    }\n    else if (ch === \"-\") {\n      if (/\\d/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^[^-]+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    }\n    else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    }\n    else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    }\n    else if (ch == \":\") {\n      return ret(\"operator\", ch);\n    }\n    else if (/[;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    }\n    else if (ch == \"u\" && stream.match(\"rl(\")) {\n      stream.backUp(1);\n      state.tokenize = tokenParenthesized;\n      return ret(\"property\", \"variable\");\n    }\n    else {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"variable\");\n    }\n  }\n\n  function tokenString(quote, nonInclusive) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped)\n          break;\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (!escaped) {\n        if (nonInclusive) stream.backUp(1);\n        state.tokenize = tokenBase;\n      }\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/\\s*[\\\"\\']/, false))\n      state.tokenize = tokenString(\")\", true);\n    else\n      state.tokenize = tokenBase;\n    return ret(null, \"(\");\n  }\n\n  return {\n    startState: function(base) {\n      return {tokenize: tokenBase,\n              baseIndent: base || 0,\n              stack: [],\n              lastToken: null};\n    },\n\n    token: function(stream, state) {\n\n      // Use these terms when applicable (see http://www.xanthir.com/blog/b4E50)\n      //\n      // rule** or **ruleset:\n      // A selector + braces combo, or an at-rule.\n      //\n      // declaration block:\n      // A sequence of declarations.\n      //\n      // declaration:\n      // A property + colon + value combo.\n      //\n      // property value:\n      // The entire value of a property.\n      //\n      // component value:\n      // A single piece of a property value. Like the 5px in\n      // text-shadow: 0 0 5px blue;. Can also refer to things that are\n      // multiple terms, like the 1-4 terms that make up the background-size\n      // portion of the background shorthand.\n      //\n      // term:\n      // The basic unit of author-facing CSS, like a single number (5),\n      // dimension (5px), string (\"foo\"), or function. Officially defined\n      //  by the CSS 2.1 grammar (look for the 'term' production)\n      //\n      //\n      // simple selector:\n      // A single atomic selector, like a type selector, an attr selector, a\n      // class selector, etc.\n      //\n      // compound selector:\n      // One or more simple selectors without a combinator. div.example is\n      // compound, div > .example is not.\n      //\n      // complex selector:\n      // One or more compound selectors chained with combinators.\n      //\n      // combinator:\n      // The parts of selectors that express relationships. There are four\n      // currently - the space (descendant combinator), the greater-than\n      // bracket (child combinator), the plus sign (next sibling combinator),\n      // and the tilda (following sibling combinator).\n      //\n      // sequence of selectors:\n      // One or more of the named type of selector chained with commas.\n\n      state.tokenize = state.tokenize || tokenBase;\n      if (state.tokenize == tokenBase && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (style && typeof style != \"string\") style = ret(style[0], style[1]);\n\n      // Changing style returned based on context\n      var context = state.stack[state.stack.length-1];\n      if (style == \"variable\") {\n        if (type == \"variable-definition\") state.stack.push(\"propertyValue\");\n        return state.lastToken = \"variable-2\";\n      } else if (style == \"property\") {\n        var word = stream.current().toLowerCase();\n        if (context == \"propertyValue\") {\n          if (valueKeywords.hasOwnProperty(word)) {\n            style = \"string-2\";\n          } else if (colorKeywords.hasOwnProperty(word)) {\n            style = \"keyword\";\n          } else {\n            style = \"variable-2\";\n          }\n        } else if (context == \"rule\") {\n          if (!propertyKeywords.hasOwnProperty(word)) {\n            style += \" error\";\n          }\n        } else if (context == \"block\") {\n          // if a value is present in both property, value, or color, the order\n          // of preference is property -> color -> value\n          if (propertyKeywords.hasOwnProperty(word)) {\n            style = \"property\";\n          } else if (colorKeywords.hasOwnProperty(word)) {\n            style = \"keyword\";\n          } else if (valueKeywords.hasOwnProperty(word)) {\n            style = \"string-2\";\n          } else {\n            style = \"tag\";\n          }\n        } else if (!context || context == \"@media{\") {\n          style = \"tag\";\n        } else if (context == \"@media\") {\n          if (atMediaTypes[stream.current()]) {\n            style = \"attribute\"; // Known attribute\n          } else if (/^(only|not)$/.test(word)) {\n            style = \"keyword\";\n          } else if (word == \"and\") {\n            style = \"error\"; // \"and\" is only allowed in @mediaType\n          } else if (atMediaFeatures.hasOwnProperty(word)) {\n            style = \"error\"; // Known property, should be in @mediaType(\n          } else {\n            // Unknown, expecting keyword or attribute, assuming attribute\n            style = \"attribute error\";\n          }\n        } else if (context == \"@mediaType\") {\n          if (atMediaTypes.hasOwnProperty(word)) {\n            style = \"attribute\";\n          } else if (word == \"and\") {\n            style = \"operator\";\n          } else if (/^(only|not)$/.test(word)) {\n            style = \"error\"; // Only allowed in @media\n          } else {\n            // Unknown attribute or property, but expecting property (preceded\n            // by \"and\"). Should be in parentheses\n            style = \"error\";\n          }\n        } else if (context == \"@mediaType(\") {\n          if (propertyKeywords.hasOwnProperty(word)) {\n            // do nothing, remains \"property\"\n          } else if (atMediaTypes.hasOwnProperty(word)) {\n            style = \"error\"; // Known property, should be in parentheses\n          } else if (word == \"and\") {\n            style = \"operator\";\n          } else if (/^(only|not)$/.test(word)) {\n            style = \"error\"; // Only allowed in @media\n          } else {\n            style += \" error\";\n          }\n        } else if (context == \"@import\") {\n          style = \"tag\";\n        } else {\n          style = \"error\";\n        }\n      } else if (style == \"atom\") {\n        if(!context || context == \"@media{\" || context == \"block\") {\n          style = \"builtin\";\n        } else if (context == \"propertyValue\") {\n          if (!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(stream.current())) {\n            style += \" error\";\n          }\n        } else {\n          style = \"error\";\n        }\n      } else if (context == \"@media\" && type == \"{\") {\n        style = \"error\";\n      }\n\n      // Push/pop context stack\n      if (type == \"{\") {\n        if (context == \"@media\" || context == \"@mediaType\") {\n          state.stack[state.stack.length-1] = \"@media{\";\n        }\n        else {\n          var newContext = allowNested ? \"block\" : \"rule\";\n          state.stack.push(newContext);\n        }\n      }\n      else if (type == \"}\") {\n        if (context == \"interpolation\") style = \"operator\";\n        state.stack.pop();\n        if (context == \"propertyValue\") state.stack.pop();\n      }\n      else if (type == \"interpolation\") state.stack.push(\"interpolation\");\n      else if (type == \"@media\") state.stack.push(\"@media\");\n      else if (type == \"@import\") state.stack.push(\"@import\");\n      else if (context == \"@media\" && /\\b(keyword|attribute)\\b/.test(style))\n        state.stack[state.stack.length-1] = \"@mediaType\";\n      else if (context == \"@mediaType\" && stream.current() == \",\")\n        state.stack[state.stack.length-1] = \"@media\";\n      else if (type == \"(\") {\n        if (context == \"@media\" || context == \"@mediaType\") {\n          // Make sure @mediaType is used to avoid error on {\n          state.stack[state.stack.length-1] = \"@mediaType\";\n          state.stack.push(\"@mediaType(\");\n        }\n        else state.stack.push(\"(\");\n      }\n      else if (type == \")\") {\n        if (context == \"propertyValue\") {\n          // In @mediaType( without closing ; after propertyValue\n          state.stack.pop();\n        }\n        state.stack.pop();\n      }\n      else if (type == \":\" && state.lastToken == \"property\") state.stack.push(\"propertyValue\");\n      else if (context == \"propertyValue\" && type == \";\") state.stack.pop();\n      else if (context == \"@import\" && type == \";\") state.stack.pop();\n\n      return state.lastToken = style;\n    },\n\n    indent: function(state, textAfter) {\n      var n = state.stack.length;\n      if (/^\\}/.test(textAfter))\n        n -= state.stack[n-1] == \"propertyValue\" ? 2 : 1;\n      return state.baseIndent + n * indentUnit;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    fold: \"brace\"\n  };\n});\n\n(function() {\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i]] = true;\n    }\n    return keys;\n  }\n\n  var atMediaTypes = keySet([\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ]);\n\n  var atMediaFeatures = keySet([\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\"\n  ]);\n\n  var propertyKeywords = keySet([\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-iteration-count\",\n    \"animation-name\", \"animation-play-state\", \"animation-timing-function\",\n    \"appearance\", \"azimuth\", \"backface-visibility\", \"background\",\n    \"background-attachment\", \"background-clip\", \"background-color\",\n    \"background-image\", \"background-origin\", \"background-position\",\n    \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\",\n    \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\",\n    \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\",\n    \"border-bottom-left-radius\", \"border-bottom-right-radius\",\n    \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\",\n    \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\",\n    \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\",\n    \"border-right-color\", \"border-right-style\", \"border-right-width\",\n    \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\",\n    \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\",\n    \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\",\n    \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\",\n    \"caption-side\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\",\n    \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\",\n    \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\",\n    \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\",\n    \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\",\n    \"dominant-baseline\", \"drop-initial-after-adjust\",\n    \"drop-initial-after-align\", \"drop-initial-before-adjust\",\n    \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\",\n    \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\",\n    \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\",\n    \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\",\n    \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\",\n    \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\",\n    \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\",\n    \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\",\n    \"font-weight\", \"grid-cell\", \"grid-column\", \"grid-column-align\",\n    \"grid-column-sizing\", \"grid-column-span\", \"grid-columns\", \"grid-flow\",\n    \"grid-row\", \"grid-row-align\", \"grid-row-sizing\", \"grid-row-span\",\n    \"grid-rows\", \"grid-template\", \"hanging-punctuation\", \"height\", \"hyphens\",\n    \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\",\n    \"inline-box-align\", \"justify-content\", \"left\", \"letter-spacing\",\n    \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n    \"marker-offset\", \"marks\", \"marquee-direction\", \"marquee-loop\",\n    \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\",\n    \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\",\n    \"nav-left\", \"nav-right\", \"nav-up\", \"opacity\", \"order\", \"orphans\", \"outline\",\n    \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\",\n    \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\",\n    \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\",\n    \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\",\n    \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\",\n    \"perspective-origin\", \"pitch\", \"pitch-range\", \"play-during\", \"position\",\n    \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\",\n    \"region-break-before\", \"region-break-inside\", \"region-fragment\",\n    \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\",\n    \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\",\n    \"ruby-position\", \"ruby-span\", \"shape-inside\", \"shape-outside\", \"size\",\n    \"speak\", \"speak-as\", \"speak-header\",\n    \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\",\n    \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\",\n    \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\",\n    \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\",\n    \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\",\n    \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\",\n    \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"unicode-bidi\",\n    \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\",\n    \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\",\n    \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"word-break\",\n    \"word-spacing\", \"word-wrap\", \"z-index\", \"zoom\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\", \"color-profile\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"kerning\", \"text-anchor\", \"writing-mode\"\n  ]);\n\n  var colorKeywords = keySet([\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\", \"salmon\",\n    \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ]);\n\n  var valueKeywords = keySet([\n    \"above\", \"absolute\", \"activeborder\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"auto\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"column\", \"compact\", \"condensed\", \"contain\", \"content\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\",\n    \"disc\", \"discard\", \"document\", \"dot-dash\", \"dot-dot-dash\", \"dotted\",\n    \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\",\n    \"ethiopic-halehame-tig\", \"ew-resize\", \"expanded\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"justify\", \"kannada\", \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\",\n    \"line-through\", \"linear\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"malayalam\", \"match\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"plus-darker\", \"plus-lighter\", \"pointer\",\n    \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\", \"progress\", \"push-button\",\n    \"radio\", \"read-only\", \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\", \"rgb\", \"rgba\",\n    \"ridge\", \"right\", \"round\", \"row-resize\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"scroll\", \"scrollbar\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"single\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\",\n    \"sub\", \"subpixel-antialiased\", \"super\", \"sw-resize\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ]);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    atMediaTypes: atMediaTypes,\n    atMediaFeatures: atMediaFeatures,\n    propertyKeywords: propertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    hooks: {\n      \"<\": function(stream, state) {\n        function tokenSGMLComment(stream, state) {\n          var dashes = 0, ch;\n          while ((ch = stream.next()) != null) {\n            if (dashes >= 2 && ch == \">\") {\n              state.tokenize = null;\n              break;\n            }\n            dashes = (ch == \"-\") ? dashes + 1 : 0;\n          }\n          return [\"comment\", \"comment\"];\n        }\n        if (stream.eat(\"!\")) {\n          state.tokenize = tokenSGMLComment;\n          return tokenSGMLComment(stream, state);\n        }\n      },\n      \"/\": function(stream, state) {\n        if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        }\n        return false;\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    atMediaTypes: atMediaTypes,\n    atMediaFeatures: atMediaFeatures,\n    propertyKeywords: propertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    allowNested: true,\n    hooks: {\n      \":\": function(stream) {\n        if (stream.match(/\\s*{/)) {\n          return [null, \"{\"];\n        }\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.peek() == \":\") {\n          return [\"variable\", \"variable-definition\"];\n        }\n        return [\"variable\", \"variable\"];\n      },\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"#\": function(stream) {\n        if (stream.eat(\"{\")) {\n          return [\"operator\", \"interpolation\"];\n        } else {\n          stream.eatWhile(/[\\w\\\\\\-]/);\n          return [\"atom\", \"hash\"];\n        }\n      }\n    },\n    name: \"css\"\n  });\n})();\ndefine(\"codemirror/modes/css\", [\"codemirror/codemirror\"], function(){});\n\n",
    "define('strut/themes/StylesheetProvider',['tantaman/web/widgets/CodeEditor',\n\t\t'tantaman/web/widgets/Button',\n\t\t'tantaman/web/css_manip/CssManip',\n\t\t'css!styles/strut.themes/stylesheetEditor.css',\n\t\t'./StylesheetPreProcessor',\n\t\t'codemirror/modes/css'],\nfunction(CodeEditor, Button, CssManip, empty, preProcessor, cssmode) {\n\tvar cssEditor = new CodeEditor({\n\t\t\tclass: 'stylesheetEditor',\n\t\t\ttitle: 'Edit CSS',\n\t\t\tplaceholder: \"/*.example {\\n\" +\n\t\t\t\t\t\t \"\\tborder: 4px groove orange;\\n\" +\n\t\t\t\t\t\t \"}*/\",\n\t\t\tmode: 'css'\n\t\t});\n\tvar sheetId = 'userStylesheet';\n\n\tvar userStylesheet = CssManip.getStyleElem({\n\t\tid: sheetId,\n\t\tcreate: true\n\t});\n\n\tvar sheetInitialized = false;\n\n\t$('#modals').append(cssEditor.render().$el);\n\n\tfunction StylesheetProvider(editorModel) {\n\t\tthis._cssEditor = cssEditor;\n\t\tthis._editorModel = editorModel;\n\t\tuserStylesheet.innerHTML = editorModel.customStylesheet();\n\n\t\teditorModel.deck().on(\n\t\t\t'change:customStylesheet', this._editorSheetChanged, this);\n\n\t\tthis._button = new Button({\n\t\t\ticon: 'icon-edit',\n\t\t\tcb: this._launch.bind(this),\n\t\t\tname: 'CSS'\n\t\t});\n\n\t\tthis._button.$el.addClass('iconBtns btn-grouped');\n\t\tthis._cssSaved = this._cssSaved.bind(this);\n\n\t\t// initialize the sheet from the deck attributes.\n\t\tif (!sheetInitialized) {\n\t\t\tsheetInitialized = true;\n\t\t}\n\t}\n\n\tStylesheetProvider.prototype = {\n\t\tview: function() {\n\t\t\treturn this._button;\n\t\t},\n\n\t\t_launch: function() {\n\t\t\tvar css = this._editorModel.customStylesheet();\n\t\t\tthis._cssEditor.show(this._cssSaved, preProcessor.beforeEdit(css));\n\t\t},\n\n\t\t_cssSaved: function(css) {\n\t\t\tcss = preProcessor.beforeSave(css);\n\t\t\tuserStylesheet.innerHTML = css;\n\t\t\tthis._editorModel.customStylesheet(css);\n\t\t\tthis._cssEditor.hide();\n\t\t},\n\n\t\t_editorSheetChanged: function(deck, sheet) {\n\t\t\tuserStylesheet.innerHTML = sheet;\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis._editorModel.deck().off(null, null, this);\n\t\t}\n\t};\n\n\treturn StylesheetProvider;\n});\n",
    "define('tantaman/web/widgets/PopoverTextbox',['libs/backbone'],\nfunction(Backbone) {\n\treturn Backbone.View.extend({\n\t\tevents: {\n\t\t\t'click .ok': '_save',\n\t\t\t'click .cancel': 'hide',\n\t\t\t'click': '_stopProp',\n\t\t\t'mousedown': '_stopProp'\n\t\t},\n\n\t\tclassName: 'popover',\n\n\t\tinitialize: function() {\n\t\t\tthis.hide = this.hide.bind(this);\n\t\t\t// $(document).bind('click', this.hide);\n\t\t\tthis.template = JST['tantaman.web.widgets/PopoverTextbox'];\n\t\t},\n\n\t\tshow: function(position, cb, text) {\n\t\t\tconsole.log('Showing popover');\n\t\t\tthis._cb = cb;\n\t\t\tthis.$el.css(position);\n\t\t\tthis.$el.css('display', 'block');\n\t\t\tthis.$input.val(text);\n\t\t\tthis.$input.focus();\n\t\t},\n\n\t\thide: function() {\n\t\t\tthis.$el.css('display', '');\n\t\t\tthis.$input.val('');\n\t\t},\n\n\t\t_save: function(e) {\n\t\t\te.stopPropagation();\n\t\t\tthis._cb(this.$input.val());\n\t\t},\n\n\t\t_stopProp: function(e) {\n\t\t\te.stopPropagation();\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this.template(this.options));\n\t\t\tthis.$input = this.$el.find('input');\n\n\t\t\treturn this;\n\t\t},\n\n\t\tremove: function() {\n\t\t\tBackbone.View.prototype.remove.apply(this, arguments);\n\t\t\t// $(document).unbind('click', this.hide);\n\t\t},\n\n\t\tconstructor: function PopoverTextbox() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('strut/themes/ClassEditor',['tantaman/web/widgets/Button',\n\t'tantaman/web/widgets/PopoverTextbox'],\n\tfunction(Button, PopoverTextbox) {\n\t\t/**\n\t\t * Allows to assign custom css classes to elements on slide.\n\t\t *\n\t\t * @param editorModel\n\t\t * @constructor\n\t\t */\n\t\tfunction ClassEditor(editorModel) {\n\t\t\tthis._button = new Button({\n\t\t\t\ticon: 'icon-plus',\n\t\t\t\tcb: this._launch.bind(this),\n\t\t\t\tname: 'Class'\n\t\t\t});\n\n\t\t\tthis._appended = false;\n\n\t\t\tthis._button.$el.addClass('iconBtns btn-grouped');\n\t\t\tthis._button.disable();\n\n\t\t\tthis._deck = editorModel.deck();\n\t\t\tthis._popover = new PopoverTextbox({title: 'Classes: '});\n\t\t\tthis._popover.render();\n\t\t\tvar activeSlide = this._deck.get('activeSlide');\n\t\t\tif (activeSlide) {\n\t\t\t\tthis._activeSlideChanged(this._deck, activeSlide);\n\t\t\t}\n\n\t\t\tthis._deck.on('change:activeSlide', this._activeSlideChanged, this);\n\t\t\tthis._classesSaved = this._classesSaved.bind(this);\n\t\t}\n\n\t\tClassEditor.prototype = {\n\t\t\t/**\n\t\t\t * Returns ClassEditor button to be placed in main menu.\n\t\t\t *\n\t\t\t * @returns {Button}\n\t\t\t */\n\t\t\tview: function() {\n\t\t\t\treturn this._button;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Reacts on an active slide change.\n\t\t\t *\n\t\t\t * @param {Deck} deck\n\t\t\t * @param {Slide} slide\n\t\t\t * @private\n\t\t\t */\n\t\t\t_activeSlideChanged: function(deck, slide) {\n\t\t\t\tif (this._activeSlide) {\n\t\t\t\t\tthis._activeSlide.off(null, null, this);\n\t\t\t\t}\n\n\t\t\t\tthis._activeSlide = slide;\n\t\t\t\tif (this._activeSlide) {\n\t\t\t\t\tthis._activeSlide.on('change:activeComponent', this._activeComponentsChanged, this);\n\t\t\t\t\tthis._activeComponentsChanged(slide);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Reacts on an active component change.\n\t\t\t *\n\t\t\t * @param {Slide} slide Parent slide of the component being changed.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_activeComponentsChanged: function(slide) {\n\t\t\t\tthis._activeComponents = this._activeSlide.selected;\n\t\t\t\tif (this._activeComponents.length) {\n\t\t\t\t\tthis._button.enable();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis._button.disable();\n\t\t\t\t}\n\t\t\t\tthis._popover.hide();\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * Menu button click callback.\n\t\t\t *\n\t\t\t * @private\n\t\t\t */\n\t\t\t_launch: function() {\n\t\t\t\tif (!this._appended) {\n\t\t\t\t\tvar $slideEditArea = $('.slideContainer');\n\t\t\t\t\t$slideEditArea.append(this._popover.$el);\n\t\t\t\t\tthis._appended = true;\n\t\t\t\t}\n\n\t\t\t\tif (this._activeComponents.length) {\n\t\t\t\t\tthis._popover.show({\n\t\t\t\t\t\tleft: this._activeComponents[0].get('x'),\n\t\t\t\t\t\ttop: this._activeComponents[0].get('y')\n\t\t\t\t\t}, this._classesSaved, this._activeComponents[0].customClasses());\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\talert('Please, select some component first.');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Popover save callback.\n\t\t\t *\n\t\t\t * @param {string} classes Text which contains list of classes.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_classesSaved: function(classes) {\n\t\t\t\tthis._activeComponents.forEach(function(component) {\n\t\t\t\t\tcomponent.customClasses(classes);\n\t\t\t\t});\n\t\t\t\tthis._popover.hide();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Removes ClassEditor from the editor.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tif (this._activeSlide)\n\t\t\t\t\tthis._activeSlide.off(null, null, this);\n\t\t\t\tthis._deck.off(null, null, this);\n\t\t\t\tthis._popover.remove();\n\t\t\t}\n\t\t};\n\n\t\treturn ClassEditor;\n\t});\n",
    "define('strut/themes/main',['./BackgroundProvider',\n\t\t'./AvailableBackgrounds',\n\t\t'./AvailableSurfaces',\n\t\t'./StylesheetProvider',\n\t\t'./ClassEditor'],\nfunction(BackgroundProvider, Backgrounds, Surfaces, StylesheetProvider, ClassEditor) {\n\t'use strict';\n\n\tvar slideBgProviderFactory = {\n\t\tcreate: function(editorModel) {\n\t\t\treturn new BackgroundProvider({\n\t\t\t\tbackgrounds: Backgrounds,\n\t\t\t\teditorModel: editorModel,\n\t\t\t\tselector: '.operatingTable .slideContainer',\n\t\t\t\tattr: 'Background',\n\t\t\t\ttemplate: JST['strut.themes/BackgroundChooserDropdown']\n\t\t\t});\n\t\t}\n\t};\n\n\tvar surfaceBgProviderFactory = {\n\t\tcreate: function(editorModel) {\n\t\t\treturn new BackgroundProvider({\n\t\t\t\tbackgrounds: Surfaces,\n\t\t\t\teditorModel: editorModel,\n\t\t\t\tselector: '.strut-surface',\n\t\t\t\tattr: 'Surface',\n\t\t\t\ttemplate: JST['strut.themes/SurfaceChooserDropdown']\n\t\t\t});\n\t\t}\n\t};\n\n\tvar stylesheetProviderFactory = {\n\t\tcreate: function(editorModel) {\n\t\t\treturn new StylesheetProvider(editorModel);\n\t\t}\n\t};\n\n\tvar classEditorFactory = {\n\t\tcreate: function(editorModel) {\n\t\t\treturn new ClassEditor(editorModel);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\t'slide-editor': true,\n\t\t\t\t\t\t'overview': true\n\t\t\t\t\t},\n\t\t\t\t\toverflow: false\n\t\t\t\t}\n\t\t\t}, slideBgProviderFactory);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\t'slide-editor': true,\n\t\t\t\t\t\t'overview': true,\n\t\t\t\t\t},\n\t\t\t\t\toverflow: false\n\t\t\t\t}\n\t\t\t}, surfaceBgProviderFactory);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\t'overview': true,\n\t\t\t\t\t\t'slide-editor': true\n\t\t\t\t\t},\n\t\t\t\t\toverflow: true\n\t\t\t\t}\n\t\t\t}, stylesheetProviderFactory);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\t'overview': true,\n\t\t\t\t\t\t'slide-editor': true\n\t\t\t\t\t},\n\t\t\t\t\toverflow: true\n\t\t\t\t}\n\t\t\t}, classEditorFactory);\n\n\t\t\t/*\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\tslideEditor: true\n\t\t\t\t\t},\n\t\t\t\t\tengines: {\n\t\t\t\t\t\tbespoke: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, bespokeThemes)\n\t\t\t*/\n\t\t}\n\t}\n});\n",
    "/*global define:false */\n/**\n * Copyright 2013 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.3.2\n * @url craig.is/killing/mice\n */\n(function() {\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n            8: 'backspace',\n            9: 'tab',\n            13: 'enter',\n            16: 'shift',\n            17: 'ctrl',\n            18: 'alt',\n            20: 'capslock',\n            27: 'esc',\n            32: 'space',\n            33: 'pageup',\n            34: 'pagedown',\n            35: 'end',\n            36: 'home',\n            37: 'left',\n            38: 'up',\n            39: 'right',\n            40: 'down',\n            45: 'ins',\n            46: 'del',\n            91: 'meta',\n            93: 'meta',\n            224: 'meta'\n        },\n\n        /**\n         * mapping for special characters so they can support\n         *\n         * this dictionary is only used incase you want to bind a\n         * keyup or keydown event to one of these keys\n         *\n         * @type {Object}\n         */\n        _KEYCODE_MAP = {\n            106: '*',\n            107: '+',\n            109: '-',\n            110: '.',\n            111 : '/',\n            186: ';',\n            187: '=',\n            188: ',',\n            189: '-',\n            190: '.',\n            191: '/',\n            192: '`',\n            219: '[',\n            220: '\\\\',\n            221: ']',\n            222: '\\''\n        },\n\n        /**\n         * this is a mapping of keys that require shift on a US keypad\n         * back to the non shift equivelents\n         *\n         * this is so you can use keyup events with these keys\n         *\n         * note that this will only work reliably on US keyboards\n         *\n         * @type {Object}\n         */\n        _SHIFT_MAP = {\n            '~': '`',\n            '!': '1',\n            '@': '2',\n            '#': '3',\n            '$': '4',\n            '%': '5',\n            '^': '6',\n            '&': '7',\n            '*': '8',\n            '(': '9',\n            ')': '0',\n            '_': '-',\n            '+': '=',\n            ':': ';',\n            '\\\"': '\\'',\n            '<': ',',\n            '>': '.',\n            '?': '/',\n            '|': '\\\\'\n        },\n\n        /**\n         * this is a list of special strings you can use to map\n         * to modifier keys when you specify your keyboard shortcuts\n         *\n         * @type {Object}\n         */\n        _SPECIAL_ALIASES = {\n            'option': 'alt',\n            'command': 'meta',\n            'return': 'enter',\n            'escape': 'esc'\n        },\n\n        /**\n         * variable to store the flipped version of _MAP from above\n         * needed to check if we should use keypress or not when no action\n         * is specified\n         *\n         * @type {Object|undefined}\n         */\n        _REVERSE_MAP,\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        _callbacks = {},\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        _directMap = {},\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        _sequenceLevels = {},\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        _resetTimer,\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        _ignoreNextKeyup = false,\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        _sequenceType = false;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n        _MAP[i + 96] = i;\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * resets all sequence counters except for the ones passed in\n     *\n     * @param {Object} doNotReset\n     * @returns void\n     */\n    function _resetSequences(doNotReset, maxLevel) {\n        doNotReset = doNotReset || {};\n\n        var activeSequences = false,\n            key;\n\n        for (key in _sequenceLevels) {\n            if (doNotReset[key] && _sequenceLevels[key] > maxLevel) {\n                activeSequences = true;\n                continue;\n            }\n            _sequenceLevels[key] = 0;\n        }\n\n        if (!activeSequences) {\n            _sequenceType = false;\n        }\n    }\n\n    /**\n     * finds all callbacks that match based on the keycode, modifiers,\n     * and action\n     *\n     * @param {string} character\n     * @param {Array} modifiers\n     * @param {Event|Object} e\n     * @param {boolean=} remove - should we remove any matches\n     * @param {string=} combination\n     * @returns {Array}\n     */\n    function _getMatches(character, modifiers, e, remove, combination) {\n        var i,\n            callback,\n            matches = [],\n            action = e.type;\n\n        // if there are no events related to this keycode\n        if (!_callbacks[character]) {\n            return [];\n        }\n\n        // if a modifier key is coming up on its own we should allow it\n        if (action == 'keyup' && _isModifier(character)) {\n            modifiers = [character];\n        }\n\n        // loop through all callbacks for the key that was pressed\n        // and see if any of them match\n        for (i = 0; i < _callbacks[character].length; ++i) {\n            callback = _callbacks[character][i];\n\n            // if this is a sequence but it is not at the right level\n            // then move onto the next match\n            if (callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                continue;\n            }\n\n            // if the action we are looking for doesn't match the action we got\n            // then we should keep going\n            if (action != callback.action) {\n                continue;\n            }\n\n            // if this is a keypress event and the meta key and control key\n            // are not pressed that means that we need to only look at the\n            // character, otherwise check the modifiers as well\n            //\n            // chrome will not fire a keypress if meta or control is down\n            // safari will fire a keypress if meta or meta+shift is down\n            // firefox will fire a keypress if meta or control is down\n            if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                // remove is used so if you change your mind and call bind a\n                // second time with a new function the first one is overwritten\n                if (remove && callback.combo == combination) {\n                    _callbacks[character].splice(i, 1);\n                }\n\n                matches.push(callback);\n            }\n        }\n\n        return matches;\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * actually calls the callback function\n     *\n     * if your callback function returns false this will use the jquery\n     * convention - prevent default and stop propogation on the event\n     *\n     * @param {Function} callback\n     * @param {Event} e\n     * @returns void\n     */\n    function _fireCallback(callback, e, combo) {\n\n        // if this event should not happen stop here\n        if (Mousetrap.stopCallback(e, e.target || e.srcElement, combo)) {\n            return;\n        }\n\n        if (callback(e, combo) === false) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n\n            e.returnValue = false;\n            e.cancelBubble = true;\n        }\n    }\n\n    /**\n     * handles a character key event\n     *\n     * @param {string} character\n     * @param {Array} modifiers\n     * @param {Event} e\n     * @returns void\n     */\n    function _handleKey(character, modifiers, e) {\n        var callbacks = _getMatches(character, modifiers, e),\n            i,\n            doNotReset = {},\n            maxLevel = 0,\n            processedSequenceCallback = false;\n\n        // loop through matching callbacks for this key event\n        for (i = 0; i < callbacks.length; ++i) {\n\n            // fire for all sequence callbacks\n            // this is because if for example you have multiple sequences\n            // bound such as \"g i\" and \"g t\" they both need to fire the\n            // callback for matching g cause otherwise you can only ever\n            // match the first one\n            if (callbacks[i].seq) {\n                processedSequenceCallback = true;\n\n                // as we loop through keep track of the max\n                // any sequence at a lower level will be discarded\n                maxLevel = Math.max(maxLevel, callbacks[i].level);\n\n                // keep a list of which sequences were matches for later\n                doNotReset[callbacks[i].seq] = 1;\n                _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                continue;\n            }\n\n            // if there were no sequence matches but we are still here\n            // that means this is a regular match so we should fire that\n            if (!processedSequenceCallback && !_sequenceType) {\n                _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n            }\n        }\n\n        // if you are inside of a sequence and the key you are pressing\n        // is not a modifier key then we should reset all sequences\n        // that were not matched by this key event\n        if (e.type == _sequenceType && !_isModifier(character)) {\n            _resetSequences(doNotReset, maxLevel);\n        }\n    }\n\n    /**\n     * handles a keydown event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _handleKeyEvent(e) {\n\n        // normalize e.which for key events\n        // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n        if (typeof e.which !== 'number') {\n            e.which = e.keyCode;\n        }\n\n        var character = _characterFromEvent(e);\n\n        // no character found then stop\n        if (!character) {\n            return;\n        }\n\n        if (e.type == 'keyup' && _ignoreNextKeyup == character) {\n            _ignoreNextKeyup = false;\n            return;\n        }\n\n        if (e.type == 'keydown') {\n            Mousetrap.pressed[character] = true;\n        } else if (e.type == 'keyup') {\n            delete Mousetrap.pressed[character];\n        }\n\n        Mousetrap.handleKey(character, _eventModifiers(e), e);\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * called to set a 1 second timeout on the specified sequence\n     *\n     * this is so after each key press in the sequence you have 1 second\n     * to press the next key before you have to start over\n     *\n     * @returns void\n     */\n    function _resetSequenceTimer() {\n        clearTimeout(_resetTimer);\n        _resetTimer = setTimeout(_resetSequences, 1000);\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * binds a key sequence to an event\n     *\n     * @param {string} combo - combo specified in bind call\n     * @param {Array} keys\n     * @param {Function} callback\n     * @param {string=} action\n     * @returns void\n     */\n    function _bindSequence(combo, keys, callback, action) {\n\n        // start off by adding a sequence level record for this combination\n        // and setting the level to 0\n        _sequenceLevels[combo] = 0;\n\n        // if there is no action pick the best one for the first key\n        // in the sequence\n        if (!action) {\n            action = _pickBestAction(keys[0], []);\n        }\n\n        /**\n         * callback to increase the sequence level for this sequence and reset\n         * all other sequences that were active\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        var _increaseSequence = function() {\n                _sequenceType = action;\n                ++_sequenceLevels[combo];\n                _resetSequenceTimer();\n            },\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            _callbackAndReset = function(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            },\n            i;\n\n        // loop through keys one at a time and bind the appropriate callback\n        // function.  for any key leading up to the final one it should\n        // increase the sequence. after the final, it should reset all sequences\n        for (i = 0; i < keys.length; ++i) {\n            _bindSingle(keys[i], i < keys.length - 1 ? _increaseSequence : _callbackAndReset, action, combo, i);\n        }\n    }\n\n    /**\n     * binds a single keyboard combination\n     *\n     * @param {string} combination\n     * @param {Function} callback\n     * @param {string=} action\n     * @param {string=} sequenceName - name of sequence if part of sequence\n     * @param {number=} level - what part of the sequence the command is\n     * @returns void\n     */\n    function _bindSingle(combination, callback, action, sequenceName, level) {\n\n        // store a direct mapped reference for use with Mousetrap.trigger\n        _directMap[combination + ':' + action] = callback;\n\n        // make sure multiple spaces in a row become a single space\n        combination = combination.replace(/\\s+/g, ' ');\n\n        var sequence = combination.split(' '),\n            i,\n            key,\n            keys,\n            modifiers = [];\n\n        // if this pattern is a sequence of keys then run through this method\n        // to reprocess each pattern one key at a time\n        if (sequence.length > 1) {\n            _bindSequence(combination, sequence, callback, action);\n            return;\n        }\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = combination === '+' ? ['+'] : combination.split('+');\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        // make sure to initialize array if this is the first time\n        // a callback is added for this key\n        if (!_callbacks[key]) {\n            _callbacks[key] = [];\n        }\n\n        // remove an existing match if there is one\n        _getMatches(key, modifiers, {type: action}, !sequenceName, combination);\n\n        // add this call back to the array\n        // if it is a sequence put it at the beginning\n        // if not put it at the end\n        //\n        // this is important because the way these are processed expects\n        // the sequence ones to come first\n        _callbacks[key][sequenceName ? 'unshift' : 'push']({\n            callback: callback,\n            modifiers: modifiers,\n            action: action,\n            seq: sequenceName,\n            level: level,\n            combo: combination\n        });\n    }\n\n    /**\n     * binds multiple combinations to the same callback\n     *\n     * @param {Array} combinations\n     * @param {Function} callback\n     * @param {string|undefined} action\n     * @returns void\n     */\n    function _bindMultiple(combinations, callback, action) {\n        for (var i = 0; i < combinations.length; ++i) {\n            _bindSingle(combinations[i], callback, action);\n        }\n    }\n\n    // start!\n    _addEvent(document, 'keypress', _handleKeyEvent);\n    _addEvent(document, 'keydown', _handleKeyEvent);\n    _addEvent(document, 'keyup', _handleKeyEvent);\n\n    var Mousetrap = {\n\n        /**\n         * binds an event to mousetrap\n         *\n         * can be a single key, a combination of keys separated with +,\n         * an array of keys, or a sequence of keys separated by spaces\n         *\n         * be sure to list the modifier keys first to make sure that the\n         * correct key ends up getting bound (the last key in the pattern)\n         *\n         * @param {string|Array} keys\n         * @param {Function} callback\n         * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n         * @returns void\n         */\n        bind: function(keys, callback, action) {\n            keys = keys instanceof Array ? keys : [keys];\n            _bindMultiple(keys, callback, action);\n            return this;\n        },\n\n        /**\n         * unbinds an event to mousetrap\n         *\n         * the unbinding sets the callback function of the specified key combo\n         * to an empty function and deletes the corresponding key in the\n         * _directMap dict.\n         *\n         * TODO: actually remove this from the _callbacks dictionary instead\n         * of binding an empty function\n         *\n         * the keycombo+action has to be exactly the same as\n         * it was defined in the bind method\n         *\n         * @param {string|Array} keys\n         * @param {string} action\n         * @returns void\n         */\n        unbind: function(keys, action) {\n            return Mousetrap.bind(keys, function() {}, action);\n        },\n\n        /**\n         * triggers an event that has already been bound\n         *\n         * @param {string} keys\n         * @param {string=} action\n         * @returns void\n         */\n        trigger: function(keys, action) {\n            if (_directMap[keys + ':' + action]) {\n                _directMap[keys + ':' + action]({}, keys);\n            }\n            return this;\n        },\n\n        /**\n         * resets the library back to its initial state.  this is useful\n         * if you want to clear out the current keyboard shortcuts and bind\n         * new ones - for example if you switch to another page\n         *\n         * @returns void\n         */\n        reset: function() {\n            _callbacks = {};\n            _directMap = {};\n            return this;\n        },\n\n       /**\n        * should we stop this event before firing off callbacks\n        *\n        * @param {Event} e\n        * @param {Element} element\n        * @return {boolean}\n        */\n        stopCallback: function(e, element) {\n\n            // if the element has the class \"mousetrap\" then no need to stop\n            if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n                return false;\n            }\n\n            // stop for input, select, and textarea\n            return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || (element.contentEditable && element.contentEditable == 'true');\n        },\n\n        /**\n         * exposes _handleKey publicly so it can be overwritten by extensions\n         */\n        handleKey: _handleKey,\n\n        pressed: {}\n    };\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define('libs/mousetrap',Mousetrap);\n    }\n}) ();\n\n",
    "define('strut/editor/GlobalEvents',['libs/mousetrap', 'libs/backbone'],\nfunction(mousetrap, Backbone) {\n\t'use strict';\n\n\tvar result = _.extend({\n\t\tpressed: mousetrap.pressed\n\t}, Backbone.Events);\n\n\tmousetrap.bind(['ctrl+x', 'command+x'], function(e) {\n\t\tresult.trigger('cut', e);\n\t});\n\n\tmousetrap.bind(['ctrl+c', 'command+c'], function(e) {\n\t\tresult.trigger('copy', e);\n\t});\n\n\tmousetrap.bind(['ctrl+v', 'command+v'], function(e) {\n\t\tresult.trigger('paste', e);\n\t});\n\n\tmousetrap.bind(['del', 'command+backspace'], function(e) {\n\t\tresult.trigger('delete', e);\n\t});\n\n\tmousetrap.bind(['ctrl+z', 'command+z'], function(e) {\n\t\tresult.trigger('undo', e);\n\t});\n\n\tmousetrap.bind(['ctrl+y', 'command+y'], function(e) {\n\t\tresult.trigger('redo', e);\n\t});\n\n\n\t$(window).blur(function() {\n\t\tvar keys = Object.keys(result.pressed);\n\t\tkeys.forEach(function(key) {\n\t\t\tdelete result.pressed[key];\n\t\t});\n\t});\n\n\treturn result;\n});\n",
    "define('strut/editor/main',['./GlobalEvents',\n\t\t'lang'],\nfunction(GlobalEvents, lang) {\n\t'use strict';\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tvar actions;\n\t\t\tif (navigator.appVersion.indexOf(\"Mac\") != -1) {\n\t\t\t\tactions = [['undo', '⌘+Z'], ['redo', '⌘+Y'],\n\t\t\t\t\t['cut', '⌘+X'], ['copy', '⌘+C'], ['paste', '⌘+V'], ['delete', '⌘+⌫']];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tactions = [['undo', 'Ctrl+Z'], ['redo', 'Ctrl+Y'],\n\t\t\t\t\t['cut', 'Ctrl+X'], ['copy', 'Ctrl+C'], ['paste', 'Ctrl+V'], ['delete', 'Del']];\n\t\t\t}\n\n\t\t\tactions.forEach(function(action) {\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.editor.glob.action',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttitle: lang[action[0]],\n\t\t\t\t\t\taction: action[0],\n\t\t\t\t\t\thotkey: action[1]\n\t\t\t\t\t}\n\t\t\t\t}, function() {\n\t\t\t\t\tGlobalEvents.trigger(action[0]);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n});\n",
    "\n/**\n* @module common\n* @author Matt Crinklaw-Vogt\n*\n*/\n\n\n  define('common/FileUtils',[],function() {\n    /**\n    \t* Utilities for working with files, file paths and URIs.\n    \t* @class common.FileUtils\n    \t*\n    */\n\n    var FileUtils;\n    return FileUtils = {\n      /**\n      \t\t* Returns the base name of the path\n      \t\t* e.g., baseName(\"path/to/some/file.txt\") will return \"file.txt\"\n      \t\t* baseName(\"path/to/some/file.txt\", \"txt\") will return \"file\"\n      \t\t* baseName(\"path/to/some/dir/\") will return \"dir\"\n      \t\t* @method baseName\n      \t\t* @param {String} path the path\n      \t\t* @param {String} [extension] extension to be stripped\n      \t\t* @returns {String} base name\n      \t\t*\n      */\n\n      baseName: function(path, extension) {\n        var idx;\n        if (path[path.length - 1] === \"/\") {\n          path = path.substring(0, path.length - 1);\n        }\n        idx = path.lastIndexOf(\"/\");\n        if (idx !== -1 && idx + 1 < path.length) {\n          path = path.substring(idx + 1, path.length);\n        }\n        if (extension != null) {\n          idx = path.lastIndexOf(extension);\n          if (idx + extension.length === path.length) {\n            path = path.substring(0, idx);\n          }\n        }\n        return path;\n      },\n      /**\n      \t\t* Returns the image type of a URI based on its extension\n      \t\t* or data: attribute if it is a data url.\n      \t\t* @method imageType\n      \t\t* @param {String} uri url or data url to image\n      \t\t* @returns {String} upper case extension or data: type\n      \t\t*\n      */\n\n      imageType: function(uri) {\n        var idx;\n        if (uri.indexOf(\"data:\") === 0) {\n          idx = uri.indexOf(\";\");\n          return uri.substring(11, idx).toUpperCase();\n        } else {\n          return FileUtils.extension(uri);\n        }\n      },\n      /**\n      \t\t* Returns the extension of the file pointed to be the URI\n      \t\t* Ignores query parameters that are a part of the URI\n      \t\t* @method extension\n      \t\t* @param {String} uri uri to file\n      \t\t* @returns {String} upper case extension\n      \t\t*\n      */\n\n      extension: function(uri) {\n        var extension, idx;\n        idx = uri.lastIndexOf(\".\");\n        if (idx !== -1 && idx + 1 < uri.length) {\n          extension = uri.substring(idx + 1, uri.length);\n          idx = extension.lastIndexOf(\"?\");\n          if (idx !== -1) {\n            extension = extension.substring(0, idx);\n          }\n          return extension.toUpperCase();\n        } else {\n          return \"\";\n        }\n      },\n      /**\n      \t\t* Converts an extension to a mime type\n      \t\t* @method type\n      \t\t* @param {String} extension Upper cased extension\n      \t\t* @returns {String} mime type\n      \t\t*\n      */\n\n      type: function(extension) {\n        switch (extension) {\n          case \"MP4\":\n            return \"video/mp4\";\n          case \"WEBM\":\n            return \"video/webm\";\n          case \"OGG\":\n            return \"video/ogg\";\n          default:\n            return \"\";\n        }\n      },\n      createDownloadAttrs: function(mimeType, value, name) {\n        var attrs, blob, href;\n        blob = new Blob([value], {\n          type: mimeType\n        });\n        href = window.URL.createObjectURL(blob);\n        attrs = {\n          href: href,\n          download: name,\n          downloadurl: [mimeType, name, href].join(':')\n        };\n        return attrs;\n      },\n      saveToDB: function(userId,name,value){\n\n      },\n      toText: function(file, cb) {\n        var reader;\n        console.log(file.type);\n        if (file != null) {\n          reader = new FileReader();\n          reader.onload = function(e) {\n            return cb(e.target.result);\n          };\n          return reader.readAsText(file);\n        }\n      }\n    };\n  });\n\n\n",
    "define('strut/exporter/json/View',['libs/backbone', 'common/FileUtils', 'lang'],\n    function (Backbone, FileUtils, lang) {\n        'use strict';\n\n        return Backbone.View.extend({\n            initialize: function () {\n\n\n                this.name = lang.projectname;\n                this._rendered = false;\n                /*\n                 TODO: handle browsers that can't do the download attribute.  Safari?\n                 */\n                this._dlSupported = window.dlSupported;\n\n//\t\t\tthis.$el.html('<div class=\"alert alert-info\">' + lang.strut_exporter_json.explain + '</div>');\n//\t\t\tif (this._dlSupported) {\n//\t\t\t\tthis.$el.append('<div class=\"alert alert-success\">' + lang.strut_exporter_json.click_below + '</div>');\n//\t\t\t}\n                var defaultname = $(\"#projectname\").val();\n                if (defaultname == null) {\n                    defaultname = \"undefined\";\n                }\n                this.$el.html('<input type=\\\"text\\\" id=\\\"fileName\\\" class=\\\"fileName\\\" placeholder=\\\"' + defaultname + '\\\"></input>');\n\n            },\n\n            show: function ($container, $modal, $editormodel) {\n                this._$modal = $modal;\n                var $ok = this._$modal.find('.ok');\n//\t\t\tif (this._dlSupported) {\n                $ok.html('<i class=\"icon-download-alt icon-white\"></i>');\n                this._makeDownloadable($ok, $editormodel);\n//\t\t\t} else {\n//\t\t\t\t$ok.html('');\n//\t\t\t\tif (window.hasFlash)\n//\t\t\t\t\tthis._populateDownloadify();\n//\t\t\t\telse\n//\t\t\t\t\tthis._populateTextArea();\n//\t\t\t}\n\n\n                $container.append(this.$el);\n            },\n\n\n            noshow: function ($container, $modal, $editormodel) {\n                this._$modal = $modal;\n                var b = JSON.stringify(this._exportable.export(), null, 2);\n                var preview=\"\";\n                if ($editormodel != null) {\n                    this._deck = $editormodel.deck();\n                    this._generators = $editormodel.registry.getBest('strut.presentation_generator.GeneratorCollection');\n                    preview = this._generators[0].generate(this._deck);\n                    preview = preview.replace(/(\\n)+|(\\r\\n)+/g, \"\");\n                }\n                var plezenid = $(\"#plezenid\").val();\n                $.ajax({\n                    url: '/impress/update',\n                    type: 'POST',\n                    cache: false,\n                    data: { plezenid: plezenid, content: b.toString(), preview: preview, server: location.origin},\n                    success: function (data) {\n                        alert(lang.savesuccess);\n                    },\n                    error: function (jqXHR, textStatus, err) {\n                        alert('text status ' + textStatus + ', err ' + err)\n                    }\n                });\n\n            },\n\n            _makeDownloadable: function ($ok, $editormodel) {\n//\t\t\tvar attrs = FileUtils.createDownloadAttrs('application\\/json',\n//\t\t\t\tJSON.stringify(this._exportable.export(), null, 2),\n//\t\t\t\tthis._exportable.identifier() + '.json');\n                var b = JSON.stringify(this._exportable.export(), null, 2);\n                var preview=\"\";\n                if ($editormodel != null) {\n                    this._deck = $editormodel.deck();\n                    this._generators = $editormodel.registry.getBest('strut.presentation_generator.GeneratorCollection');\n                    preview = this._generators[0].generate(this._deck);\n                    preview = preview.replace(/(\\n)+|(\\r\\n)+/g, \"\");\n                }\n\n                var a = $ok[0];\n\n                $ok.off(\"click\");\n                $ok.click(function () {\n                    var name = $(\"#fileName\").val();\n                    var email = $(\"#user\").val();\n                    if(preview==\"\")\n                    {\n                        alert(\"Error, Please try play Plezen once\");\n                        return;\n                    }\n                    if(name==\"\")\n                    {\n                        name=\"untitled\";\n                    }\n                    $.ajax({\n                        url: '/impress/create',\n                        type: 'POST',\n                        cache: false,\n                        data: { email: email, name: name, content: b.toString(), preview: preview, server:location.origin },\n                        success: function (data) {\n                            alert(lang.savesuccess);\n                            //设置local filename, 保存菜单取不到该值，显示另存为菜单\n                            localStorage.setItem('filename', name);\n                            $(\".close\").click();\n                        },\n                        error: function (jqXHR, textStatus, err) {\n                            alert('text status ' + textStatus + ', err ' + err)\n                        }\n                    });\n                    return\n                });\n                //a.download = attrs.download\n                //a.href = attrs.href\n                //a.dataset.downloadurl = attrs.downloadurl\n\n            },\n\n            _populateTextArea: function () {\n                var $txt = this.$el.find('textarea');\n                if ($txt.length == 0) {\n                    $txt = $('<textarea style=\"width: 500px; height: 200px;\"></textarea>');\n                    this.$el.append($txt);\n                }\n\n                $txt.val(JSON.stringify(this._exportable.export()));\n            },\n\n            _populateDownloadify: function () {\n                var $dlify = this.$el.find('#downloadify');\n                if ($dlify.length == 0) {\n                    $dlify = $('<p id=\"downloadify\"></p>');\n                    this.$el.append($dlify);\n                    console.log('Puplating downloadify');\n                    var self = this;\n                    setTimeout(function () {\n                        Downloadify.create($dlify[0], {\n                            filename: function () {\n                                return self._exportable.identifier() + '.json';\n                            },\n                            data: function () {\n                                return JSON.stringify(self._exportable.export(), null, 2);\n                            },\n                            onComplete: function () {\n\n                            },\n                            onCancel: function () {\n\n                            },\n                            onError: function () {\n                                alert('Error exporting');\n                            },\n                            swf: 'preview_export/download_assist/downloadify.swf',\n                            downloadImage: 'preview_export/download_assist/download.png',\n                            width: 100,\n                            height: 30,\n                            transparent: false,\n                            append: false\n                        });\n                    }, 0);\n                }\n            },\n\n            hide: function () {\n                this.$el.detach();\n                this.hidden();\n            },\n\n            hidden: function () {\n                // clean up the download link / text area\n                if (this._dlSupported) {\n                    var $ok = this._$modal.find('.ok');\n                    window.URL.revokeObjectURL($ok.attr('href'));\n                } else {\n                    this.$el.find('textarea').val('');\n                }\n            },\n\n            render: function () {\n                // anything really to render?\n            },\n\n            constructor: function JsonExportView(exportable) {\n                this._exportable = exportable;\n                Backbone.View.prototype.constructor.call(this);\n            }\n        });\n    });\n",
    "define('strut/exporter/json/main',['./View'],\nfunction(View) {\n\t'use strict';\n\n\tvar service = {\n\t\tcreateView: function(editorModel) {\n\t\t\treturn new View(editorModel.exportable);\n\t\t}\n\t};\n\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.exporter'\n\t\t\t}, service);\n\t\t}\n\t};\n});\n",
    "/**\n\nJSZip - A Javascript class for generating and reading zip files\n<http://stuartk.com/jszip>\n\n(c) 2009-2012 Stuart Knightley <stuart [at] stuartk.com>\nDual licenced under the MIT license or GPLv3. See LICENSE.markdown.\n\nUsage:\n   zip = new JSZip();\n   zip.file(\"hello.txt\", \"Hello, World!\").file(\"tempfile\", \"nothing\");\n   zip.folder(\"images\").file(\"smile.gif\", base64Data, {base64: true});\n   zip.file(\"Xmas.txt\", \"Ho ho ho !\", {date : new Date(\"December 25, 2007 00:00:01\")});\n   zip.remove(\"tempfile\");\n\n   base64zip = zip.generate();\n\n**/\n\n/**\n * Representation a of zip file in js\n * @constructor\n * @param {String=|ArrayBuffer=|Uint8Array=} data the data to load, if any (optional).\n * @param {Object=} options the options for creating this objects (optional).\n */\ndefine('libs/jszip',[],function() {\nvar JSZip = function(data, options) {\n   // object containing the files :\n   // {\n   //   \"folder/\" : {...},\n   //   \"folder/data.txt\" : {...}\n   // }\n   this.files = {};\n\n   // Where we are in the hierarchy\n   this.root = \"\";\n\n   if (data) {\n      this.load(data, options);\n   }\n};\n\nJSZip.signature = {\n   LOCAL_FILE_HEADER : \"\\x50\\x4b\\x03\\x04\",\n   CENTRAL_FILE_HEADER : \"\\x50\\x4b\\x01\\x02\",\n   CENTRAL_DIRECTORY_END : \"\\x50\\x4b\\x05\\x06\",\n   ZIP64_CENTRAL_DIRECTORY_LOCATOR : \"\\x50\\x4b\\x06\\x07\",\n   ZIP64_CENTRAL_DIRECTORY_END : \"\\x50\\x4b\\x06\\x06\",\n   DATA_DESCRIPTOR : \"\\x50\\x4b\\x07\\x08\"\n};\n\n// Default properties for a new file\nJSZip.defaults = {\n   base64: false,\n   binary: false,\n   dir: false,\n   date: null,\n   compression: null\n};\n\n\nJSZip.prototype = (function () {\n   /**\n    * A simple object representing a file in the zip file.\n    * @constructor\n    * @param {string} name the name of the file\n    * @param {string} data the data\n    * @param {Object} options the options of the file\n    */\n   var ZipObject = function (name, data, options) {\n      this.name = name;\n      this.data = data;\n      this.options = options;\n   };\n\n   ZipObject.prototype = {\n      /**\n       * Return the content as UTF8 string.\n       * @return {string} the UTF8 string.\n       */\n      asText : function () {\n         var result = this.data;\n         if (result === null || typeof result === \"undefined\") {\n            return \"\";\n         }\n         if (this.options.base64) {\n            result = JSZipBase64.decode(result);\n         }\n         if (this.options.binary) {\n            result = JSZip.prototype.utf8decode(result);\n         }\n         return result;\n      },\n      /**\n       * Returns the binary content.\n       * @return {string} the content as binary.\n       */\n      asBinary : function () {\n         var result = this.data;\n         if (result === null || typeof result === \"undefined\") {\n            return \"\";\n         }\n         if (this.options.base64) {\n            result = JSZipBase64.decode(result);\n         }\n         if (!this.options.binary) {\n            result = JSZip.prototype.utf8encode(result);\n         }\n         return result;\n      },\n      /**\n       * Returns the content as an Uint8Array.\n       * @return {Uint8Array} the content as an Uint8Array.\n       */\n      asUint8Array : function () {\n         return JSZip.utils.string2Uint8Array(this.asBinary());\n      },\n      /**\n       * Returns the content as an ArrayBuffer.\n       * @return {ArrayBuffer} the content as an ArrayBufer.\n       */\n      asArrayBuffer : function () {\n         return JSZip.utils.string2Uint8Array(this.asBinary()).buffer;\n      }\n   };\n\n   /**\n    * Transform an integer into a string in hexadecimal.\n    * @private\n    * @param {number} dec the number to convert.\n    * @param {number} bytes the number of bytes to generate.\n    * @returns {string} the result.\n    */\n   var decToHex = function(dec, bytes) {\n      var hex = \"\", i;\n      for(i = 0; i < bytes; i++) {\n         hex += String.fromCharCode(dec&0xff);\n         dec=dec>>>8;\n      }\n      return hex;\n   };\n\n   /**\n    * Merge the objects passed as parameters into a new one.\n    * @private\n    * @param {...Object} var_args All objects to merge.\n    * @return {Object} a new object with the data of the others.\n    */\n   var extend = function () {\n      var result = {}, i, attr;\n      for (i = 0; i < arguments.length; i++) { // arguments is not enumerable in some browsers\n         for (attr in arguments[i]) {\n            if (arguments[i].hasOwnProperty(attr) && typeof result[attr] === \"undefined\") {\n               result[attr] = arguments[i][attr];\n            }\n         }\n      }\n      return result;\n   };\n\n   /**\n    * Transforms the (incomplete) options from the user into the complete\n    * set of options to create a file.\n    * @private\n    * @param {Object} o the options from the user.\n    * @return {Object} the complete set of options.\n    */\n   var prepareFileAttrs = function (o) {\n      o = o || {};\n      if (o.base64 === true && o.binary == null) {\n         o.binary = true;\n      }\n      o = extend(o, JSZip.defaults);\n      o.date = o.date || new Date();\n      if (o.compression !== null) o.compression = o.compression.toUpperCase();\n\n      return o;\n   };\n\n  /**\n   * Add a file in the current folder.\n   * @private\n   * @param {string} name the name of the file\n   * @param {String|ArrayBuffer|Uint8Array} data the data of the file\n   * @param {Object} o the options of the file\n   * @return {Object} the new file.\n   */\n   var fileAdd = function (name, data, o) {\n      // be sure sub folders exist\n      var parent = parentFolder(name);\n      if (parent) {\n         folderAdd.call(this, parent);\n      }\n\n      o = prepareFileAttrs(o);\n\n      if (o.dir || data === null || typeof data === \"undefined\") {\n         o.base64 = false;\n         o.binary = false;\n         data = null;\n      } else if (JSZip.support.uint8array && data instanceof Uint8Array) {\n         o.base64 = false;\n         o.binary = true;\n         data = JSZip.utils.uint8Array2String(data);\n      } else if (JSZip.support.arraybuffer && data instanceof ArrayBuffer) {\n         o.base64 = false;\n         o.binary = true;\n         var bufferView = new Uint8Array(data);\n         data = JSZip.utils.uint8Array2String(bufferView);\n      } else if (o.binary && !o.base64) {\n         // optimizedBinaryString == true means that the file has already been filtered with a 0xFF mask\n         if (o.optimizedBinaryString !== true) {\n            // this is a string, not in a base64 format.\n            // Be sure that this is a correct \"binary string\"\n            data = JSZip.utils.string2binary(data);\n         }\n         // we remove this option since it's only relevant here\n         delete o.optimizedBinaryString;\n      }\n\n      return this.files[name] = new ZipObject(name, data, o);\n   };\n\n\n   /**\n    * Find the parent folder of the path.\n    * @private\n    * @param {string} path the path to use\n    * @return {string} the parent folder, or \"\"\n    */\n   var parentFolder = function (path) {\n      if (path.slice(-1) == '/') {\n         path = path.substring(0, path.length - 1);\n      }\n      var lastSlash = path.lastIndexOf('/');\n      return (lastSlash > 0) ? path.substring(0, lastSlash) : \"\";\n   };\n\n   /**\n    * Add a (sub) folder in the current folder.\n    * @private\n    * @param {string} name the folder's name\n    * @return {Object} the new folder.\n    */\n   var folderAdd = function (name) {\n      // Check the name ends with a /\n      if (name.slice(-1) != \"/\") {\n         name += \"/\"; // IE doesn't like substr(-1)\n      }\n\n      // Does this folder already exist?\n      if (!this.files[name]) {\n         // be sure sub folders exist\n         var parent = parentFolder(name);\n         if (parent) {\n            folderAdd.call(this, parent);\n         }\n\n         fileAdd.call(this, name, null, {dir:true});\n      }\n      return this.files[name];\n   };\n\n   /**\n    * Generate the data found in the local header of a zip file.\n    * Do not create it now, as some parts are re-used later.\n    * @private\n    * @param {Object} file the file to use.\n    * @param {string} utfEncodedFileName the file name, utf8 encoded.\n    * @param {string} compressionType the compression to use.\n    * @return {Object} an object containing header and compressedData.\n    */\n   var prepareLocalHeaderData = function(file, utfEncodedFileName, compressionType) {\n      var useUTF8 = utfEncodedFileName !== file.name,\n          data    = file.asBinary(),\n          o       = file.options,\n          dosTime,\n          dosDate;\n\n      // date\n      // @see http://www.delorie.com/djgpp/doc/rbinter/it/52/13.html\n      // @see http://www.delorie.com/djgpp/doc/rbinter/it/65/16.html\n      // @see http://www.delorie.com/djgpp/doc/rbinter/it/66/16.html\n\n      dosTime = o.date.getHours();\n      dosTime = dosTime << 6;\n      dosTime = dosTime | o.date.getMinutes();\n      dosTime = dosTime << 5;\n      dosTime = dosTime | o.date.getSeconds() / 2;\n\n      dosDate = o.date.getFullYear() - 1980;\n      dosDate = dosDate << 4;\n      dosDate = dosDate | (o.date.getMonth() + 1);\n      dosDate = dosDate << 5;\n      dosDate = dosDate | o.date.getDate();\n\n      var hasData = data !== null && data.length !== 0;\n\n      compressionType = o.compression || compressionType;\n      if (!JSZip.compressions[compressionType]) {\n         throw compressionType + \" is not a valid compression method !\";\n      }\n\n      var compression    = JSZip.compressions[compressionType];\n      var compressedData = hasData ? compression.compress(data) : '';\n\n      var header = \"\";\n\n      // version needed to extract\n      header += \"\\x0A\\x00\";\n      // general purpose bit flag\n      // set bit 11 if utf8\n      header += useUTF8 ? \"\\x00\\x08\" : \"\\x00\\x00\";\n      // compression method\n      header += hasData ? compression.magic : JSZip.compressions['STORE'].magic;\n      // last mod file time\n      header += decToHex(dosTime, 2);\n      // last mod file date\n      header += decToHex(dosDate, 2);\n      // crc-32\n      header += hasData ? decToHex(this.crc32(data), 4) : '\\x00\\x00\\x00\\x00';\n      // compressed size\n      header += hasData ? decToHex(compressedData.length, 4) : '\\x00\\x00\\x00\\x00';\n      // uncompressed size\n      header += hasData ? decToHex(data.length, 4) : '\\x00\\x00\\x00\\x00';\n      // file name length\n      header += decToHex(utfEncodedFileName.length, 2);\n      // extra field length\n      header += \"\\x00\\x00\";\n\n      return {\n         header:header,\n         compressedData:compressedData\n      };\n   };\n\n\n   // return the actual prototype of JSZip\n   return {\n      /**\n       * Read an existing zip and merge the data in the current JSZip object.\n       * The implementation is in jszip-load.js, don't forget to include it.\n       * @param {String|ArrayBuffer|Uint8Array} stream  The stream to load\n       * @param {Object} options Options for loading the stream.\n       *  options.base64 : is the stream in base64 ? default : false\n       * @return {JSZip} the current JSZip object\n       */\n      load : function (stream, options) {\n         throw new Error(\"Load method is not defined. Is the file jszip-load.js included ?\");\n      },\n\n      /**\n       * Filter nested files/folders with the specified function.\n       * @param {Function} search the predicate to use :\n       * function (relativePath, file) {...}\n       * It takes 2 arguments : the relative path and the file.\n       * @return {Array} An array of matching elements.\n       */\n      filter : function (search) {\n         var result = [], filename, relativePath, file, fileClone;\n         for (filename in this.files) {\n            if ( !this.files.hasOwnProperty(filename) ) { continue; }\n            file = this.files[filename];\n            // return a new object, don't let the user mess with our internal objects :)\n            fileClone = new ZipObject(file.name, file.data, extend(file.options));\n            relativePath = filename.slice(this.root.length, filename.length);\n            if (filename.slice(0, this.root.length) === this.root && // the file is in the current root\n                search(relativePath, fileClone)) { // and the file matches the function\n               result.push(fileClone);\n            }\n         }\n         return result;\n      },\n\n      /**\n       * Add a file to the zip file, or search a file.\n       * @param   {string|RegExp} name The name of the file to add (if data is defined),\n       * the name of the file to find (if no data) or a regex to match files.\n       * @param   {String|ArrayBuffer|Uint8Array} data  The file data, either raw or base64 encoded\n       * @param   {Object} o     File options\n       * @return  {JSZip|Object|Array} this JSZip object (when adding a file),\n       * a file (when searching by string) or an array of files (when searching by regex).\n       */\n      file : function(name, data, o) {\n         if (arguments.length === 1) {\n            if (name instanceof RegExp) {\n               var regexp = name;\n               return this.filter(function(relativePath, file) {\n                  return !file.options.dir && regexp.test(relativePath);\n               });\n            } else { // text\n               return this.filter(function (relativePath, file) {\n                  return !file.options.dir && relativePath === name;\n               })[0]||null;\n            }\n         } else { // more than one argument : we have data !\n            name = this.root+name;\n            fileAdd.call(this, name, data, o);\n         }\n         return this;\n      },\n\n      /**\n       * Add a directory to the zip file, or search.\n       * @param   {String|RegExp} arg The name of the directory to add, or a regex to search folders.\n       * @return  {JSZip} an object with the new directory as the root, or an array containing matching folders.\n       */\n      folder : function(arg) {\n         if (!arg) {\n            return this;\n         }\n\n         if (arg instanceof RegExp) {\n            return this.filter(function(relativePath, file) {\n               return file.options.dir && arg.test(relativePath);\n            });\n         }\n\n         // else, name is a new folder\n         var name = this.root + arg;\n         var newFolder = folderAdd.call(this, name);\n\n         // Allow chaining by returning a new object with this folder as the root\n         var ret = this.clone();\n         ret.root = newFolder.name;\n         return ret;\n      },\n\n      /**\n       * Delete a file, or a directory and all sub-files, from the zip\n       * @param {string} name the name of the file to delete\n       * @return {JSZip} this JSZip object\n       */\n      remove : function(name) {\n         name = this.root + name;\n         var file = this.files[name];\n         if (!file) {\n            // Look for any folders\n            if (name.slice(-1) != \"/\") {\n               name += \"/\";\n            }\n            file = this.files[name];\n         }\n\n         if (file) {\n            if (!file.options.dir) {\n               // file\n               delete this.files[name];\n            } else {\n               // folder\n               var kids = this.filter(function (relativePath, file) {\n                  return file.name.slice(0, name.length) === name;\n               });\n               for (var i = 0; i < kids.length; i++) {\n                  delete this.files[kids[i].name];\n               }\n            }\n         }\n\n         return this;\n      },\n\n      /**\n       * Generate the complete zip file\n       * @param {Object} options the options to generate the zip file :\n       * - base64, (deprecated, use type instead) true to generate base64.\n       * - compression, \"STORE\" by default.\n       * - type, \"base64\" by default. Values are : string, base64, uint8array, arraybuffer, blob.\n       * @return {String|Uint8Array|ArrayBuffer|Blob} the zip file\n       */\n      generate : function(options) {\n         options = extend(options || {}, {\n            base64 : true,\n            compression : \"STORE\",\n            type : \"base64\"\n         });\n         var compression = options.compression.toUpperCase();\n\n         if (!JSZip.compressions[compression]) {\n            throw compression + \" is not a valid compression method !\";\n         }\n\n         // The central directory, and files data\n         var directory = [], files = [], fileOffset = 0;\n\n         for (var name in this.files) {\n            if ( !this.files.hasOwnProperty(name) ) { continue; }\n\n            var file = this.files[name];\n\n            var utfEncodedFileName = this.utf8encode(file.name);\n\n            var fileRecord = \"\",\n            dirRecord = \"\",\n            data = prepareLocalHeaderData.call(this, file, utfEncodedFileName, compression);\n            fileRecord = JSZip.signature.LOCAL_FILE_HEADER + data.header + utfEncodedFileName + data.compressedData;\n\n            dirRecord = JSZip.signature.CENTRAL_FILE_HEADER +\n            // version made by (00: DOS)\n            \"\\x14\\x00\" +\n            // file header (common to file and central directory)\n            data.header +\n            // file comment length\n            \"\\x00\\x00\" +\n            // disk number start\n            \"\\x00\\x00\" +\n            // internal file attributes TODO\n            \"\\x00\\x00\" +\n            // external file attributes\n            (this.files[name].options.dir===true?\"\\x10\\x00\\x00\\x00\":\"\\x00\\x00\\x00\\x00\")+\n            // relative offset of local header\n            decToHex(fileOffset, 4) +\n            // file name\n            utfEncodedFileName;\n\n            fileOffset += fileRecord.length;\n\n            files.push(fileRecord);\n            directory.push(dirRecord);\n         }\n\n         var fileData = files.join(\"\");\n         var dirData = directory.join(\"\");\n\n         var dirEnd = \"\";\n\n         // end of central dir signature\n         dirEnd = JSZip.signature.CENTRAL_DIRECTORY_END +\n         // number of this disk\n         \"\\x00\\x00\" +\n         // number of the disk with the start of the central directory\n         \"\\x00\\x00\" +\n         // total number of entries in the central directory on this disk\n         decToHex(files.length, 2) +\n         // total number of entries in the central directory\n         decToHex(files.length, 2) +\n         // size of the central directory   4 bytes\n         decToHex(dirData.length, 4) +\n         // offset of start of central directory with respect to the starting disk number\n         decToHex(fileData.length, 4) +\n         // .ZIP file comment length\n         \"\\x00\\x00\";\n\n         var zip = fileData + dirData + dirEnd;\n\n\n         switch(options.type.toLowerCase()) {\n            case \"uint8array\" :\n               return JSZip.utils.string2Uint8Array(zip);\n            case \"arraybuffer\" :\n               return JSZip.utils.string2Uint8Array(zip).buffer;\n            case \"blob\" :\n               return JSZip.utils.string2Blob(zip);\n            case \"base64\" :\n               return (options.base64) ? JSZipBase64.encode(zip) : zip;\n            default : // case \"string\" :\n               return zip;\n         }\n      },\n\n      /**\n       *\n       *  Javascript crc32\n       *  http://www.webtoolkit.info/\n       *\n       */\n      crc32 : function(str, crc) {\n\n         if (str === \"\" || typeof str === \"undefined\") {\n            return 0;\n         }\n\n         var table = [\n            0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA,\n            0x076DC419, 0x706AF48F, 0xE963A535, 0x9E6495A3,\n            0x0EDB8832, 0x79DCB8A4, 0xE0D5E91E, 0x97D2D988,\n            0x09B64C2B, 0x7EB17CBD, 0xE7B82D07, 0x90BF1D91,\n            0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n            0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7,\n            0x136C9856, 0x646BA8C0, 0xFD62F97A, 0x8A65C9EC,\n            0x14015C4F, 0x63066CD9, 0xFA0F3D63, 0x8D080DF5,\n            0x3B6E20C8, 0x4C69105E, 0xD56041E4, 0xA2677172,\n            0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n            0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940,\n            0x32D86CE3, 0x45DF5C75, 0xDCD60DCF, 0xABD13D59,\n            0x26D930AC, 0x51DE003A, 0xC8D75180, 0xBFD06116,\n            0x21B4F4B5, 0x56B3C423, 0xCFBA9599, 0xB8BDA50F,\n            0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n            0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D,\n            0x76DC4190, 0x01DB7106, 0x98D220BC, 0xEFD5102A,\n            0x71B18589, 0x06B6B51F, 0x9FBFE4A5, 0xE8B8D433,\n            0x7807C9A2, 0x0F00F934, 0x9609A88E, 0xE10E9818,\n            0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n            0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E,\n            0x6C0695ED, 0x1B01A57B, 0x8208F4C1, 0xF50FC457,\n            0x65B0D9C6, 0x12B7E950, 0x8BBEB8EA, 0xFCB9887C,\n            0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3, 0xFBD44C65,\n            0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n            0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB,\n            0x4369E96A, 0x346ED9FC, 0xAD678846, 0xDA60B8D0,\n            0x44042D73, 0x33031DE5, 0xAA0A4C5F, 0xDD0D7CC9,\n            0x5005713C, 0x270241AA, 0xBE0B1010, 0xC90C2086,\n            0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n            0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4,\n            0x59B33D17, 0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD,\n            0xEDB88320, 0x9ABFB3B6, 0x03B6E20C, 0x74B1D29A,\n            0xEAD54739, 0x9DD277AF, 0x04DB2615, 0x73DC1683,\n            0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n            0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1,\n            0xF00F9344, 0x8708A3D2, 0x1E01F268, 0x6906C2FE,\n            0xF762575D, 0x806567CB, 0x196C3671, 0x6E6B06E7,\n            0xFED41B76, 0x89D32BE0, 0x10DA7A5A, 0x67DD4ACC,\n            0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n            0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252,\n            0xD1BB67F1, 0xA6BC5767, 0x3FB506DD, 0x48B2364B,\n            0xD80D2BDA, 0xAF0A1B4C, 0x36034AF6, 0x41047A60,\n            0xDF60EFC3, 0xA867DF55, 0x316E8EEF, 0x4669BE79,\n            0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n            0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F,\n            0xC5BA3BBE, 0xB2BD0B28, 0x2BB45A92, 0x5CB36A04,\n            0xC2D7FFA7, 0xB5D0CF31, 0x2CD99E8B, 0x5BDEAE1D,\n            0x9B64C2B0, 0xEC63F226, 0x756AA39C, 0x026D930A,\n            0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n            0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38,\n            0x92D28E9B, 0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21,\n            0x86D3D2D4, 0xF1D4E242, 0x68DDB3F8, 0x1FDA836E,\n            0x81BE16CD, 0xF6B9265B, 0x6FB077E1, 0x18B74777,\n            0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n            0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45,\n            0xA00AE278, 0xD70DD2EE, 0x4E048354, 0x3903B3C2,\n            0xA7672661, 0xD06016F7, 0x4969474D, 0x3E6E77DB,\n            0xAED16A4A, 0xD9D65ADC, 0x40DF0B66, 0x37D83BF0,\n            0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n            0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6,\n            0xBAD03605, 0xCDD70693, 0x54DE5729, 0x23D967BF,\n            0xB3667A2E, 0xC4614AB8, 0x5D681B02, 0x2A6F2B94,\n            0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B, 0x2D02EF8D\n         ];\n\n         if (typeof(crc) == \"undefined\") { crc = 0; }\n         var x = 0;\n         var y = 0;\n\n         crc = crc ^ (-1);\n         for( var i = 0, iTop = str.length; i < iTop; i++ ) {\n            y = ( crc ^ str.charCodeAt( i ) ) & 0xFF;\n            x = table[y];\n            crc = ( crc >>> 8 ) ^ x;\n         }\n\n         return crc ^ (-1);\n      },\n\n      // Inspired by http://my.opera.com/GreyWyvern/blog/show.dml/1725165\n      clone : function() {\n         var newObj = new JSZip();\n         for (var i in this) {\n            if (typeof this[i] !== \"function\") {\n               newObj[i] = this[i];\n            }\n         }\n         return newObj;\n      },\n\n\n      /**\n       * http://www.webtoolkit.info/javascript-utf8.html\n       */\n      utf8encode : function (string) {\n         var utftext = \"\";\n\n         for (var n = 0; n < string.length; n++) {\n\n            var c = string.charCodeAt(n);\n\n            if (c < 128) {\n               utftext += String.fromCharCode(c);\n            } else if ((c > 127) && (c < 2048)) {\n               utftext += String.fromCharCode((c >> 6) | 192);\n               utftext += String.fromCharCode((c & 63) | 128);\n            } else {\n               utftext += String.fromCharCode((c >> 12) | 224);\n               utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n               utftext += String.fromCharCode((c & 63) | 128);\n            }\n\n         }\n\n         return utftext;\n      },\n\n      /**\n       * http://www.webtoolkit.info/javascript-utf8.html\n       */\n      utf8decode : function (utftext) {\n         var string = \"\";\n         var i = 0;\n         var c = 0, c1 = 0, c2 = 0, c3 = 0;\n\n         while ( i < utftext.length ) {\n\n            c = utftext.charCodeAt(i);\n\n            if (c < 128) {\n               string += String.fromCharCode(c);\n               i++;\n            } else if ((c > 191) && (c < 224)) {\n               c2 = utftext.charCodeAt(i+1);\n               string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n               i += 2;\n            } else {\n               c2 = utftext.charCodeAt(i+1);\n               c3 = utftext.charCodeAt(i+2);\n               string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n               i += 3;\n            }\n\n         }\n\n         return string;\n      }\n   };\n}());\n\n/*\n * Compression methods\n * This object is filled in as follow :\n * name : {\n *    magic // the 2 bytes indentifying the compression method\n *    compress // function, take the uncompressed content and return it compressed.\n *    uncompress // function, take the compressed content and return it uncompressed.\n * }\n *\n * STORE is the default compression method, so it's included in this file.\n * Other methods should go to separated files : the user wants modularity.\n */\nJSZip.compressions = {\n   \"STORE\" : {\n      magic : \"\\x00\\x00\",\n      compress : function (content) {\n         return content; // no compression\n      },\n      uncompress : function (content) {\n         return content; // no compression\n      }\n   }\n};\n\n/*\n * List features that require a modern browser, and if the current browser support them.\n */\nJSZip.support = {\n   // contains true if JSZip can read/generate ArrayBuffer, false otherwise.\n   arraybuffer : (function(){\n      return typeof ArrayBuffer !== \"undefined\" && typeof Uint8Array !== \"undefined\";\n   })(),\n   // contains true if JSZip can read/generate Uint8Array, false otherwise.\n   uint8array : (function(){\n      return typeof Uint8Array !== \"undefined\";\n   })(),\n   // contains true if JSZip can read/generate Blob, false otherwise.\n   blob : (function(){\n      // the spec started with BlobBuilder then replaced it with a construtor for Blob.\n      // Result : we have browsers that :\n      // * know the BlobBuilder (but with prefix)\n      // * know the Blob constructor\n      // * know about Blob but not about how to build them\n      // About the \"=== 0\" test : if given the wrong type, it may be converted to a string.\n      // Instead of an empty content, we will get \"[object Uint8Array]\" for example.\n      if (typeof ArrayBuffer === \"undefined\") {\n         return false;\n      }\n      var buffer = new ArrayBuffer(0);\n      try {\n         return new Blob([buffer], { type: \"application/zip\" }).size === 0;\n      }\n      catch(e) {}\n\n      try {\n         var builder = new (window.BlobBuilder || window.WebKitBlobBuilder ||\n                            window.MozBlobBuilder || window.MSBlobBuilder)();\n         builder.append(buffer);\n         return builder.getBlob('application/zip').size === 0;\n      }\n      catch(e) {}\n\n      return false;\n   })()\n};\n\nJSZip.utils = {\n   /**\n    * Convert a string to a \"binary string\" : a string containing only char codes between 0 and 255.\n    * @param {string} str the string to transform.\n    * @return {String} the binary string.\n    */\n   string2binary : function (str) {\n      var result = \"\";\n      for (var i = 0; i < str.length; i++) {\n         result += String.fromCharCode(str.charCodeAt(i) & 0xff);\n      }\n      return result;\n   },\n   /**\n    * Create a Uint8Array from the string.\n    * @param {string} str the string to transform.\n    * @return {Uint8Array} the typed array.\n    * @throws {Error} an Error if the browser doesn't support the requested feature.\n    */\n   string2Uint8Array : function (str) {\n      if (!JSZip.support.uint8array) {\n         throw new Error(\"Uint8Array is not supported by this browser\");\n      }\n      var buffer = new ArrayBuffer(str.length);\n      var bufferView = new Uint8Array(buffer);\n      for(var i = 0; i < str.length; i++) {\n         bufferView[i] = str.charCodeAt(i);\n      }\n\n      return bufferView;\n   },\n\n   /**\n    * Create a string from the Uint8Array.\n    * @param {Uint8Array} array the array to transform.\n    * @return {string} the string.\n    * @throws {Error} an Error if the browser doesn't support the requested feature.\n    */\n   uint8Array2String : function (array) {\n      if (!JSZip.support.uint8array) {\n         throw new Error(\"Uint8Array is not supported by this browser\");\n      }\n      var result = \"\";\n      for(var i = 0; i < array.length; i++) {\n         result += String.fromCharCode(array[i]);\n      }\n\n      return result;\n   },\n   /**\n    * Create a blob from the given string.\n    * @param {string} str the string to transform.\n    * @return {Blob} the string.\n    * @throws {Error} an Error if the browser doesn't support the requested feature.\n    */\n   string2Blob : function (str) {\n      if (!JSZip.support.blob) {\n         throw new Error(\"Blob is not supported by this browser\");\n      }\n\n      var buffer = JSZip.utils.string2Uint8Array(str).buffer;\n      try {\n         // Blob constructor\n         return new Blob([buffer], { type: \"application/zip\" });\n      }\n      catch(e) {}\n\n      try {\n         // deprecated, browser only, old way\n         var builder = new (window.BlobBuilder || window.WebKitBlobBuilder ||\n                            window.MozBlobBuilder || window.MSBlobBuilder)();\n         builder.append(buffer);\n         return builder.getBlob('application/zip');\n      }\n      catch(e) {}\n\n      // well, fuck ?!\n      throw new Error(\"Bug : can't construct the Blob.\");\n   }\n};\n\n/**\n *\n *  Base64 encode / decode\n *  http://www.webtoolkit.info/\n *\n *  Hacked so that it doesn't utf8 en/decode everything\n **/\nvar JSZipBase64 = (function() {\n   // private property\n   var _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n   return {\n      // public method for encoding\n      encode : function(input, utf8) {\n         var output = \"\";\n         var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n         var i = 0;\n\n         while (i < input.length) {\n\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2)) {\n               enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n               enc4 = 64;\n            }\n\n            output = output +\n               _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\n               _keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n\n         }\n\n         return output;\n      },\n\n      // public method for decoding\n      decode : function(input, utf8) {\n         var output = \"\";\n         var chr1, chr2, chr3;\n         var enc1, enc2, enc3, enc4;\n         var i = 0;\n\n         input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n         while (i < input.length) {\n\n            enc1 = _keyStr.indexOf(input.charAt(i++));\n            enc2 = _keyStr.indexOf(input.charAt(i++));\n            enc3 = _keyStr.indexOf(input.charAt(i++));\n            enc4 = _keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 != 64) {\n               output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 != 64) {\n               output = output + String.fromCharCode(chr3);\n            }\n\n         }\n\n         return output;\n\n      }\n   };\n}());\n\nreturn JSZip;\n});\n// enforcing Stuk's coding style\n// vim: set shiftwidth=3 softtabstop=3:;\n",
    "define('common/Calcium',[\"libs/backbone\"],\nfunction(Backbone) {\n\tfunction isModelish(obj) {\n\t\treturn obj instanceof Backbone.Model ||\n\t\t\tobj instanceof Backbone.Collection;\n\t}\n\n\t/**\n\t * @class Calcium.Model\n\t */\n\tvar Model = Backbone.Model.extend({\n\t\t// ugh.. hax w/ the inspectArrays param...\n\t\t// TODO: we need to detect object loops!!!!!!\n\t\ttoJSON: function(dontRecurse, inspectArrays) {\n\t\t\tif (dontRecurse) {\n\t\t\t\treturn Backbone.Model.prototype.toJSON.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tvar result = {};\n\t\t\t\tfor (var attr in this.attributes) {\n\t\t\t\t\tvar obj = this.attributes[attr];\n\t\t\t\t\tif (isModelish(obj)) {\n\t\t\t\t\t\tresult[attr] = obj.toJSON(dontRecurse, inspectArrays);\n\t\t\t\t\t} else if (inspectArrays && obj instanceof Array) {\n\t\t\t\t\t\tvar resArr = [];\n\t\t\t\t\t\tresult[attr] = resArr;\n\t\t\t\t\t\tobj.forEach(function(elem, idx) {\n\t\t\t\t\t\t\tif (isModelish(elem))\n\t\t\t\t\t\t\t\tresArr.push(elem.toJSON(dontRecurse, inspectArrays))\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresArr.push(elem)\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[attr] = obj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t});\n\n\tvar Collection = Backbone.Collection.extend({\n\t\ttoJSON: function(dontRecurse, inspectArrays) {\n\t\t\tif (dontRecurse) {\n\t\t\t\treturn Backbone.Collection.prototype.toJSON.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tvar resArr = [];\n\t\t\t\tthis.models.forEach(function(model, idx) {\n\t\t\t\t\tresArr.push(model.toJSON(dontRecurse, inspectArrays))\n\t\t\t\t});\n\t\t\t\treturn resArr;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction Disposable(obj, fn, args) {\n\t\tthis.args = args;\n\t\tthis.obj = obj;\n\t\tthis.fn = fn;\n\t}\n\n\tDisposable.prototype = {\n\t\tdispose: function() {\n\t\t\tthis.fn.apply(this.obj, this.args);\n\t\t}\n\t};\n\n\treturn {\n\t\tModel: Model,\n\t\tCollection: Collection\n\t}\n});\n",
    "define('common/Math2',{\n    /**\n    \t* Provides mathematical functions that one would expect to be in\n    \t* Math\n    \t* @class common.Math2\n    \t*\n    */\n\n    /**\n    \t* Rounds a number to the specified decimal place\n    \t* e.g., Math2.round(5.232, 2) will return 5.23\n    \t* @method round\n    \t* @param {Number} num Number to be rounded\n    \t* @param {Integer} [dec] Number of decimal places to keep.  Defaults to 0.\n    \t* @returns {Number} rounder number\n    \t*\n    */\n\n    round: function(num, dec) {\n      var factor;\n      (dec != null) || (dec = 0);\n      factor = Math.pow(10, dec);\n      return Math.round(num * factor) / factor;\n    },\n    /**\n    \t* Converts radians to degrees\n    \t* @method toDeg\n    \t* @param {Number} rads angle in radians\n    \t* @returns {Number} angle in degrees\n    \t*\n    */\n\n    toDeg: function(rads) {\n      return rads * 180 / Math.PI;\n    },\n    /**\n    \t* Converts degrees to radians\n    \t* @method toRads\n    \t* @param {Number} deg Angle in degrees\n    \t* @returns {Number} Angle in radians\n    \t*\n    */\n\n    toRads: function(deg) {\n      return deg * Math.PI / 180;\n    },\n    /**\n    \t* Checks to see if two numbers are withing thresh of one another\n    \t* e.g., Math2.compare(1.5, 1.1, 0.5) would return true since 1.5 is 0.4 away from 1.1\n    \t* @method compare\n    \t* @param {Number} v1 Left hand value\n    \t* @param {Number} v2 Right hand value\n    \t* @param {Number} thresh Threshold for equality\n    \t*\n    */\n\n    compare: function(v1, v2, thresh) {\n      return Math.abs(v1 - v2) < thresh;\n    },\n    /**\n    \t* Rotates the given point by rot radians\n    \t* @method rotatePt\n    \t* @param {Object} pt Point to rotate\n    \t*\t@param {Number} pt.x x coordinate\n    \t*\t@param {Number} pt.y y coordinate\n    \t* @param {Number} rot Angle in radians to rotate pt by\n    \t* @returns {Object} rotated point\n    \t*\n    */\n\n    rotatePt: function(pt, rot) {\n      var newPt;\n      if (rot < 0) {\n        return newPt = {\n          x: pt.x * Math.cos(rot) + pt.y * Math.sin(rot),\n          y: -1 * pt.x * Math.sin(rot) + pt.y * Math.cos(rot)\n        };\n      } else {\n        return newPt = {\n          x: pt.x * Math.cos(rot) - pt.y * Math.sin(rot),\n          y: pt.x * Math.sin(rot) + pt.y * Math.cos(rot)\n        };\n      }\n    },\n    /**\n    \t* Same as rotatePt but expects left and top instead of x and y\n    \t* @method rotatePtE\n    \t*\n    */\n\n    rotatePtE: function(pt, rot) {\n      var newPt;\n      if (rot < 0) {\n        return newPt = {\n          left: pt.left * Math.cos(rot) + pt.top * Math.sin(rot),\n          top: -1 * pt.left * Math.sin(rot) + pt.top * Math.cos(rot)\n        };\n      } else {\n        return newPt = {\n          left: pt.left * Math.cos(rot) - pt.top * Math.sin(rot),\n          top: pt.left * Math.sin(rot) + pt.top * Math.cos(rot)\n        };\n      }\n    }\n  });\n\n",
    "define('strut/deck/SpatialObject',['common/Calcium',\n\t'common/Math2'],\n\tfunction(Calcium, Math2) {\n\t\t'use strict';\n\n\t\t// TODO Add docs\n\t\t/**\n\t\t * @class SpatialObject\n\t\t * @augments Calcium.Model\n\t\t * @augments Backbone.Model\n\t\t */\n\t\treturn Calcium.Model.extend({\n\t\t\tinitialize: function() {\n\n\t\t\t},\n\n\t\t\tsetInt: function(name, value) {\n\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = parseInt(value, 10);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.set(name, Math.round(value));\n\t\t\t},\n\n\t\t\tsetFloat: function(name, value, dec) {\n\t\t\t\tif (typeof value === \"string\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = parseFloat(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvalue = Math2.round(value, dec || 2);\n\t\t\t\tthis.set(name, value);\n\t\t\t},\n\n\t\t\tconstructor: function SpatialObject() {\n\t\t\t\tCalcium.Model.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/ComponentFactory',[],function() {\n\t'use strict';\n\n\t/**\n\t * @class ComponentFactory\n\t * @param {ServiceRegistry} registry\n\t */\n\tfunction ComponentFactory(registry) {\n\t\t// Look up strut.Component s\n\t\t// create our view map based on their component types\n\t\t// ComponentType must be same in model and view.\n\t\t// it is how they are mapped to one another.\n\n\t\tvar modelEntries = registry.get('strut.ComponentModel');\n\t\tthis._modelCtors = {};\n\t\tmodelEntries.forEach(function(entry) {\n\t\t\tthis._modelCtors[entry.meta().type] = entry.service();\n\t\t}, this);\n\n\t\tthis._viewCtors = {};\n\t\tvar viewEntries = registry.get('strut.ComponentView');\n\t\tviewEntries.forEach(function(entry) {\n\t\t\tthis._viewCtors[entry.meta().type] = entry.service();\n\t\t}, this);\n\t}\n\n\tComponentFactory.prototype = {\n\t\t/**\n\t\t * Create view for a given model.\n\t\t *\n\t\t * @param {Component} model\n\t\t * @returns {ComponentView}\n\t\t */\n\t\tcreateView: function(model) {\n\t\t\tvar type = model.get('type');\n\t\t\tvar ctor = this._viewCtors[type];\n\t\t\tif (ctor) {\n\t\t\t\treturn new ctor({model: model});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Create a model from a given raw object.\n\t\t *\n\t\t * @param {Object} rawModel\n\t\t * @param {Object} opts - additional options\n\t\t * @returns {Component}\n\t\t */\n\t\tcreateModel: function(rawModel, opts) {\n\t\t\t// TODO: temporary hack until\n\t\t\t// everyone migrates to the new serialization format\n\t\t\tif (rawModel.type == \"ImageModel\") {\n\t\t\t\trawModel.type = \"Image\"\n\t\t\t}\n\n\t\t\tif (typeof rawModel === 'string') {\n\t\t\t\tvar type = rawModel;\n\t\t\t} else {\n\t\t\t\tvar type = rawModel.type;\n\t\t\t}\n\t\t\tvar ctor = this._modelCtors[type];\n\t\t\tif (ctor) {\n\t\t\t\treturn new ctor(rawModel, opts);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Return drawer object for a given component type.\n\t\t *\n\t\t * @param {string} type\n\t\t * @returns {AbstractDrawer|ImageDrawer|TextBoxDrawer}\n\t\t */\n\t\tgetDrawer: function(type) {\n\t\t\treturn this._drawers[type];\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tlog('Initing');\n\t\t\tif (!this.instance) {\n\t\t\t\tthis.instance = new ComponentFactory(registry);\n\t\t\t}\n\t\t}\n\t};\n});\n\n",
    "define('strut/deck/ComponentCommands',[],function() {\n\tvar Add, Remove, Move;\n\n\t/**\n\t * Base command class for simple attribute changing actions.\n\t *\n\t * @class BaseCommand\n\t * @param {*} initial Initial value of component's attribute.\n\t * @param {Component} component Affected component.\n\t * @param {string} attr Affected component's attribute.\n\t * @param {string} name Name of the command (will be shown in undo history and undo/redo hints).\n\t */\n\tfunction BaseCommand(initial, component, attr, name) {\n\t\tthis.start = initial;\n\t\tthis.end = component.get(attr) || 0;\n\t\tthis.component = component;\n\t\tthis.name = name;\n\t\tthis.attr = attr;\n\t}\n\n\tBaseCommand.prototype = {\n\t\t\"do\": function() {\n\t\t\tif (this.component.slide) {\n\t\t\t\tthis.component.slide.set('active', true);\n\t\t\t}\n\t\t\tthis.component.set(this.attr, this.end);\n\t\t\tthis.component.set('selected', true);\n\t\t},\n\t\tundo: function() {\n\t\t\tif (this.component.slide) {\n\t\t\t\tthis.component.slide.set('active', true);\n\t\t\t}\n\t\t\tthis.component.set(this.attr, this.start);\n\t\t\tthis.component.set('selected', true);\n\t\t}\n\t};\n\n\n\t/**\n\t * Adds component to the slide.\n\t *\n\t * @class Add\n\t * @param {Slide} slide Target slide.\n\t * @param {Component} components Affected component.\n\t */\n\tAdd = function(slide, components) {\n\t\tthis.slide = slide;\n\t\tthis.components = components.slice(0);\n\t};\n\n\tAdd.prototype = {\n\t\t\"do\": function() {\n\t\t\tthis.slide.set('active', true);\n\t\t\tthis.slide.__doAdd(this.components);\n\t\t},\n\t\tundo: function() {\n\t\t\tthis.slide.set('active', true);\n\t\t\tthis.slide.__doRemove(this.components);\n\t\t},\n\t\tname: \"Add Comp\"\n\t};\n\n\t/**\n\t * Removes component from the slide.\n\t *\n\t * @class Remove\n\t * @param {Slide} slide Target slide.\n\t * @param {Component} components Affected component.\n\t */\n\tRemove = function(slide, components) {\n\t\tthis.slide = slide;\n\t\tthis.components = components.slice(0);\n\t};\n\n\tRemove.prototype = {\n\t\t\"do\": function() {\n\t\t\tthis.slide.set('active', true);\n\t\t\tthis.slide.__doRemove(this.components);\n\t\t},\n\t\tundo: function() {\n\t\t\tthis.slide.set('active', true);\n\t\t\tthis.slide.__doAdd(this.components);\n\t\t},\n\t\tname: \"Remove Comp\"\n\t};\n\n\n\t/**\n\t * Moves component from one location to another.\n\t *\n\t * @class Move\n\t * @param {number} startLoc\n\t * @param {Component} component\n\t */\n\tMove = function(startLoc, component) {\n\t\tthis.startLoc = startLoc;\n\t\tthis.component = component;\n\t\tthis.endLoc = {\n\t\t\tx: this.component.get(\"x\"),\n\t\t\ty: this.component.get(\"y\")\n\t\t};\n\t\treturn this;\n\t};\n\tMove.prototype = {\n\t\t\"do\": function() {\n\t\t\tif (this.component.slide) {\n\t\t\t\tthis.component.slide.set('active', true);\n\t\t\t}\n\t\t\tthis.component.set(this.endLoc);\n\t\t\tthis.component.set('selected', true);\n\t\t},\n\t\tundo: function() {\n\t\t\tif (this.component.slide) {\n\t\t\t\tthis.component.slide.set('active', true);\n\t\t\t}\n\t\t\tthis.component.set(this.startLoc);\n\t\t\tthis.component.set('selected', true);\n\t\t},\n\t\tname: \"Move\"\n\t};\n\n\treturn {\n\t\tAdd: Add,\n\t\tRemove: Remove,\n\t\tMove: Move,\n\t\tSkewX: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'skewX', 'Skew X');\n\t\t},\n\t\tSkewY: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'skewY', 'Skew Y');\n\t\t},\n\t\tRotate: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'rotate', 'Rotate');\n\t\t},\n\t\tScale: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'scale', 'Scale');\n\t\t},\n\t\tTextScale: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'size', 'Scale');\n\t\t},\n\t\tText: function(initial, component) {\n\t\t\treturn new BaseCommand(initial, component, 'text', 'Text');\n\t\t}\n\t};\n});\n",
    "/**\n * @module model.presentation\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/deck/Slide',[\"libs/backbone\",\n\t\"./SpatialObject\",\n\t\"strut/slide_components/ComponentFactory\",\n\t\"common/Math2\", \"./ComponentCommands\",\n\t'tantaman/web/undo_support/CmdListFactory',\n\t\"strut/editor/GlobalEvents\"],\n\tfunction(Backbone, SpatialObject, ComponentFactory, Math2, ComponentCommands, CmdListFactory, key) {\n\t\tvar undoHistory = CmdListFactory.managedInstance('editor');\n\t\tvar defaults;\n\n\t\tdefaults = {\n\t\t\tz: 0,\n\t\t\timpScale: 3,\n\t\t\trotateX: 0,\n\t\t\trotateY: 0,\n\t\t\trotateZ: 0\n\t\t};\n\n\t\t/**\n\t\t * Represents a slide in the presentation. Slides contain components (text boxes, videos, images, etc.) Slide fires\n\t\t * a \"contentsChanged\" event whenever any of their components are updated. Slide fires \"change:components.add/remove\"\n\t\t * events when components are added or removed.\n\t\t *\n\t\t * @class Slide\n\t\t * @augments SpatialObject\n\t\t */\n\t\treturn SpatialObject.extend({\n\t\t\ttype: 'slide',\n\n\t\t\t/** @param {Component[]} */\n\t\t\tselected: [],\n\n\t\t\t/**\n\t\t\t * Initialize slide model.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tvar components, hydratedComps;\n\t\t\t\tcomponents = this.get(\"components\");\n\t\t\t\tif (components === undefined) {\n\t\t\t\t\tthis.set(\"components\", []);\n\t\t\t\t} else {\n\t\t\t\t\thydratedComps = [];\n\t\t\t\t\tthis.set(\"components\", hydratedComps);\n\t\t\t\t\tcomponents.forEach(function(rawComp) {\n\t\t\t\t\t\tvar comp;\n\t\t\t\t\t\tif (rawComp instanceof Backbone.Model) {\n\t\t\t\t\t\t\tcomp = rawComp.clone();\n\t\t\t\t\t\t\thydratedComps.push(comp);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcomp = ComponentFactory.instance.createModel(rawComp);\n\t\t\t\t\t\t\thydratedComps.push(comp);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this._registerWithComponent(comp);\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\t_.defaults(this.attributes, defaults);\n\t\t\t\tthis.on(\"unrender\", this.unrendered, this);\n\t\t\t\tthis.on('change:markdown', this._contentsChanged, this);\n\n\t\t\t\tcomponents = this.get('components');\n\t\t\t\tcomponents.forEach(function(comp) {\n\t\t\t\t\tif (comp.get('selected')) {\n\t\t\t\t\t\tthis._selectionChanged(comp, true, { multiselect: true });\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide being unrendered.\n\t\t\t */\n\t\t\tunrendered: function() {\n\t\t\t\tthis.get(\"components\").forEach(function(component) {\n\t\t\t\t\tcomponent.trigger(\"unrender\", true);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Register callbacks on component events.\n\t\t\t *\n\t\t\t * @param {Component} component\n\t\t\t * @private\n\t\t\t */\n\t\t\t_registerWithComponent: function(component) {\n\t\t\t\tcomponent.slide = this;\n\t\t\t\tcomponent.on(\"dispose\", this._selectionChanged, this);\n\t\t\t\tcomponent.on(\"change:selected\", this._selectionChanged, this);\n\t\t\t\tcomponent.on(\"change\", this._contentsChanged, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns custom classes of the slide.\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tcustomClasses: function() {\n\t\t\t\treturn '';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns an object, which represents slide position.\n\t\t\t * @see SlideCollection._swapTransitionPositions\n\t\t\t *\n\t\t\t * @returns {{x: *, y: *, z: *, impScale: *, rotateX: *, rotateY: *, rotateZ: *}}\n\t\t\t */\n\t\t\tgetPositionData: function() {\n\t\t\t\treturn {\n\t\t\t\t\tx: this.get(\"x\"),\n\t\t\t\t\ty: this.get(\"y\"),\n\t\t\t\t\tz: this.get(\"z\"),\n\t\t\t\t\timpScale: this.get(\"impScale\"),\n\t\t\t\t\trotateX: this.get(\"rotateX\"),\n\t\t\t\t\trotateY: this.get(\"rotateY\"),\n\t\t\t\t\trotateZ: this.get(\"rotateZ\")\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Select given components.\n\t\t\t *\n\t\t\t * @param {Component|Component[]} components\n\t\t\t */\n\t\t\tselectComponents: function(components) {\n\t\t\t\tcomponents = _.isArray(components) ? components : [components];\n\t\t\t\tif (components.length) {\n\t\t\t\t\tthis.get('components').forEach(function(comp) {\n\t\t\t\t\t\treturn comp.set(\"selected\", false);\n\t\t\t\t\t});\n\n\t\t\t\t\tcomponents.forEach(function(component) {\n\t\t\t\t\t\tcomponent.set(\"selected\", true, { multiselect: true });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Unselect given components. If no components passed, then all selected coponents will be unselected.\n\t\t\t *\n\t\t\t * @param {Component|Component[]} [components]\n\t\t\t */\n\t\t\tunselectComponents: function(components) {\n\t\t\t\tcomponents = components || this.selected;\n\t\t\t\tcomponents = _.isArray(components) ? components : [components];\n\n\t\t\t\tcomponents.forEach(function(component) {\n\t\t\t\t\tcomponent.set(\"selected\", false);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component selection change.\n\t\t\t *\n\t\t\t * @param {Component} component\n\t\t\t * @param {boolean} selected\n\t\t\t * @param {Object} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectionChanged: function(component, selected, options) {\n\t\t\t\toptions = options || {};\n\t\t\t\tvar multiselect = options.multiselect || (key.pressed.ctrl || key.pressed.meta || key.pressed.shift);\n\n\t\t\t\tif (selected) {\n\t\t\t\t\tif (!multiselect) {\n\t\t\t\t\t\tthis.get('components').forEach(function(comp) {\n\t\t\t\t\t\t\tif (component !== comp) {\n\t\t\t\t\t\t\t\treturn comp.set(\"selected\", false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (this.selected.indexOf(component) == -1) {\n\t\t\t\t\t\tthis.selected.push(component);\n\t\t\t\t\t}\n\t\t\t\t\tthis.trigger(\"change:activeComponent\", this, component, selected);\n\t\t\t\t} else {\n\t\t\t\t\tvar idx = this.selected.indexOf(component);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tthis.selected.splice(idx, 1);\n\t\t\t\t\t}\n\t\t\t\t\tthis.trigger(\"change:activeComponent\", this, undefined);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component being changed.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {*} value\n\t\t\t * @private\n\t\t\t */\n\t\t\t_contentsChanged: function(model, value) {\n\t\t\t\tthis.trigger(\"contentsChanged\");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Adds components in a space that has not already been occupied. Triggers \"contentsChanged\" and\n\t\t\t * \"change:components.add\" events. The contentsChanged event is used by the preview canvas to re-render itself.\n\t\t\t * The change:components.add is used by the operating table to know to render the new component.\n\t\t\t *\n\t\t\t * @method\n\t\t\t * @param {Component|Component[]} components The components to be added (text box, image, video, etc.)\n\t\t\t */\n\t\t\tadd: function(components) {\n\t\t\t\tcomponents = _.isArray(components) ? components.slice() : [components];\n\t\t\t\tcomponents.forEach(function(component) {\n\t\t\t\t\tthis._placeComponent(component);\n\t\t\t\t}, this);\n\t\t\t\tvar cmd = new ComponentCommands.Add(this, components);\n\t\t\t\tcmd.do();\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Callback for component addition command.\n\t\t\t * @see ComponentCommands.Add\n\t\t\t *\n\t\t\t * @method\n\t\t\t * @param {Component[]} components The component to be added (text box, image, video, etc.)\n\t\t\t */\n\t\t\t__doAdd: function(components) {\n\t\t\t\tcomponents.forEach(function(component) {\n\t\t\t\t\tthis.get('components').push(component);\n\t\t\t\t\tthis._registerWithComponent(component);\n\t\t\t\t\tthis.trigger(\"contentsChanged\");\n\t\t\t\t\tthis.trigger(\"change:components.add\", this, component);\n\t\t\t\t}, this);\n\t\t\t\tthis.selectComponents(components);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * A pretty naive implementation but it should do the job just fine. Places a new component in a location that\n\t\t\t * doesn't currently contain a component.\n\t\t\t *\n\t\t\t * @param {Component} component The component to be placed\n\t\t\t * @private\n\t\t\t */\n\t\t\t_placeComponent: function(component) {\n\t\t\t\treturn this.get('components').forEach(function(existingComponent) {\n\t\t\t\t\tvar existingX, existingY;\n\t\t\t\t\texistingX = existingComponent.get(\"x\");\n\t\t\t\t\texistingY = existingComponent.get(\"y\");\n\t\t\t\t\tif (Math2.compare(existingX, component.get(\"x\"), 5) && Math2.compare(existingY, component.get(\"y\"), 5)) {\n\t\t\t\t\t\treturn component.set({\n\t\t\t\t\t\t\tx: existingX + 20,\n\t\t\t\t\t\t\ty: existingY + 20\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove one or more components from the slide.\n\t\t\t *\n\t\t\t * @param {Component|Component[]} components\n\t\t\t */\n\t\t\tremove: function(components) {\n\t\t\t\tcomponents = _.isArray(components) ? components : [components];\n\t\t\t\tundoHistory.pushdo(new ComponentCommands.Remove(this, components));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Callback for component removal command.\n\t\t\t * @see ComponentCommands.Remove\n\t\t\t *\n\t\t\t * @param {Component[]} components\n\t\t\t * @private\n\t\t\t */\n\t\t\t__doRemove: function(components) {\n\t\t\t\tcomponents.forEach(function(component) {\n\t\t\t\t\tvar idx;\n\t\t\t\t\tidx = this.get('components').indexOf(component);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tthis.get('components').splice(idx, 1);\n\t\t\t\t\t\tthis.trigger(\"contentsChanged\");\n\t\t\t\t\t\tthis.trigger(\"change:components.remove\", this, component);\n\t\t\t\t\t\tcomponent.trigger(\"unrender\");\n\t\t\t\t\t\tcomponent.dispose();\n\t\t\t\t\t\treturn component;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Dispose slide from the presentation.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tthis.set({\n\t\t\t\t\tactive: false,\n\t\t\t\t\tselected: false\n\t\t\t\t});\n\t\t\t\tthis.trigger(\"dispose\", this);\n\t\t\t\tthis.off();\n\t\t\t},\n\n\t\t\tconstructor: function Slide() {\n\t\t\t\tSpatialObject.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n\n",
    "/**\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/deck/SlideCollection',[\"common/Calcium\", \"./Slide\"],\n\tfunction(Backbone, Slide) {\n\n\t\t// TODO Is this even used anywhere? If not, should probably be deleted.\n\t\t/**\n\t\t * Comparator function for SlideCollection. Compares slides by their indexes.\n\t\t * @see Backbone.Collection.comparator\n\t\t *\n\t\t * @param {Slide} l\n\t\t * @param {Slide} r\n\t\t * @returns {number}\n\t\t */\n\t\tvar slideComparator = function(l, r) {\n\t\t\treturn l.get(\"index\") - r.get(\"index\");\n\t\t};\n\n\t\t/**\n\t\t * @class SlideCollection\n\t\t * @augments Backbone.Collection\n\t\t */\n\t\treturn Backbone.Collection.extend({\n\t\t\tmodel: Slide,\n\n\t\t\t/**\n\t\t\t * Initialize collection model.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis.on(\"add\", this._updateIndexes, this);\n\t\t\t\tthis.on(\"remove\", this._updateIndexes, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Update slide indexes on any changes to the contents of collection.\n\t\t\t *\n\t\t\t * @private\n\t\t\t */\n\t\t\t_updateIndexes: function() {\n\t\t\t\tthis.models.forEach(function(model, idx) {\n\t\t\t\t\treturn model.set(\"index\", idx);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Update transition positions after slides have moved\n\t\t\t *\n\t\t\t * @param {Slide[]} slidesCopy\n\t\t\t * @returns {SlideCollection} this\n\t\t\t */\n\t\t\tslidesReorganized: function(slidesCopy) {\n\t\t\t\tvar transitions = [];\n\t\t\t\tthis.models.forEach(function(model, i) {\n\t\t\t\t\ttransitions.push(slidesCopy[i].getPositionData());\n\t\t\t\t}, this);\n\n\t\t\t\tvar silent = { silent: true };\n\t\t\t\ttransitions.forEach(function(transition, i) {\n\t\t\t\t\tthis.models[i].set(transition, silent);\n\t\t\t\t}, this);\n\n\t\t\t\tthis.models.forEach(function(model, i) {\n\t\t\t\t\tmodel.set('index', i);\n\t\t\t\t});\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Change position of slides in SlideWell if their order is changed in collection.\n\t\t\t *\n\t\t\t * @param {Slide} l\n\t\t\t * @param {Slide} r\n\t\t\t * @private\n\t\t\t */\n\t\t\t_swapTransitionPositions: function(l, r) {\n\t\t\t\tvar silent, tempPosData;\n\t\t\t\ttempPosData = l.getPositionData();\n\t\t\t\tsilent = {\n\t\t\t\t\tsilent: true\n\t\t\t\t};\n\t\t\t\tl.set(r.getPositionData(), silent);\n\t\t\t\tr.set(tempPosData, silent);\n\t\t\t}\n\t\t});\n\t});\n\n\n",
    "/**\n * @class SlideCommands\n */\ndefine('strut/deck/SlideCommands',['strut/deck/Slide'], function(Slide) {\n\tvar Add, Remove, Move;\n\n\t/**\n\t * @class SlideCommands.Paste\n\t * @param {Deck} deck\n\t * @param {Slide|Slide[]} slides\n\t * @param {number} [index]\n\t * @constructor\n\t */\n\tAdd = function(deck, slides, index) {\n\t\tthis.deck = deck;\n\t\tthis.selected = this.deck.selected.slice(0);\n\t\tthis.activeSlide = this.deck.get('activeSlide');\n\t\tthis.slides = slides ? slides.slice(0) : null;\n\t\tthis.index = index;\n\t};\n\n\tAdd.prototype = {\n\t\tname: 'Add Slide',\n\n\t\t\"do\": function() {\n\t\t\tthis.deck._doAdd(this.slides, {preserveIndexes: false, at: this.index});\n\t\t},\n\n\t\tundo: function() {\n\t\t\tthis.deck._doRemove(this.slides);\n\n\t\t\t// We should restore recent selection after undo, since it may have been screwed by removal of pasted slides.\n\t\t\tthis.deck.selectSlides(this.selected, this.activeSlide);\n\t\t}\n\t};\n\n\t/**\n\t * @class SlideCommands.Remove\n\t */\n\tRemove = function(deck, slides) {\n\t\tthis.deck = deck;\n\t\tthis.slides = slides.slice(0);\n\t};\n\n\tRemove.prototype = {\n\t\tname: \"Remove Slide\",\n\n\t\t\"do\": function() {\n\t\t\tthis.deck._doRemove(this.slides);\n\t\t},\n\n\t\tundo: function() {\n\t\t\tthis.deck._doAdd(this.slides, {preserveIndexes: true});\n\t\t}\n\t};\n\n\t/**\n\t * @class SlideCommands.Move\n\t * @param startIndex\n\t * @param slide\n\t */\n\tMove = function(deck, slides, destination) {\n\t\tthis.deck = deck;\n\t\tthis.slides = slides.slice(0);\n\t\tthis.destination = destination;\n\t\tthis.selected = this.deck.selected.slice(0);\n\t\tthis.activeSlide = this.deck.get('activeSlide');\n\t\treturn this;\n\t};\n\tMove.prototype = {\n\t\t\"do\": function() {\n\t\t\tvar slides = this.deck.get('slides');\n\t\t\tthis.initial_slides_order = slides.models.slice(0);\n\t\t\tthis.initial_selection = this.deck.selected.slice(0);\n\t\t\tthis.initial_active_slide = this.deck.get(\"activeSlide\");\n\n\t\t\tslides.remove(this.slides, {silent: true});\n\t\t\tslides.add(this.slides, {silent: true, at: this.destination});\n\t\t\tslides.slidesReorganized(this.initial_slides_order);\n\n\t\t\tthis.deck.unselectSlides();\n\t\t\tthis.deck.selectSlides(this.selected, this.activeSlide);\n\n\t\t\tthis.deck.trigger('slideMoved');\n\t\t},\n\t\tundo: function() {\n\t\t\tvar previous_slides_order = this.deck.get('slides').models.slice(0);\n\t\t\tthis.deck.get('slides').models = this.initial_slides_order;\n\t\t\tthis.deck.get('slides').slidesReorganized(previous_slides_order);\n\n\t\t\tthis.deck.unselectSlides();\n\t\t\tthis.deck.selectSlides(this.initial_selection, this.initial_active_slide);\n\n\t\t\tthis.deck.trigger('slideMoved');\n\t\t},\n\t\tname: \"Move Slide\"\n\t};\n\n\treturn {\n\t\tAdd: Add,\n\t\tRemove: Remove,\n\t\tMove: Move\n\t};\n});\n\n",
    "define('strut/deck/DeckUpgrade',[],function() {\n\tfunction fixBackgroundAndSurface(obj) {\n\t\tvar bg = obj.background;\n\t\tif (bg) {\n\t\t\tobj.background = undefined;\n\t\t}\n\n\t\tvar surface = obj.surface;\n\t\tif (surface) {\n\t\t\tobj.surface = undefined;\n\t\t}\n\t}\n\n\treturn {\n\t\tto1_0: function(rawDeck) {\n\t\t\tif (rawDeck.deckVersion == '1.0')\n\t\t\t\treturn;\n\n\t\t\trawDeck.deckVersion = '1.0';\n\n\t\t\tfixBackgroundAndSurface(rawDeck);\n\n\t\t\trawDeck.slides.forEach(function(slide) {\n\t\t\t\tfixBackgroundAndSurface(slide);\n\t\t\t});\n\t\t}\n\t};\n});\n",
    "define('strut/deck/CustomBackgrounds',['common/Calcium'],\nfunction(Calcium) {\n\treturn Calcium.Model.extend({\n\t\tinitialize: function() {\n\t\t\tvar bgs = this.get('bgs');\n\t\t\tif (!bgs) {\n\t\t\t\tbgs = [];\n\t\t\t\tthis.set('bgs', bgs);\n\t\t\t}\n\n\t\t\tthis._bgIndex = {};\n\t\t\tbgs.forEach(function(bg) {\n\t\t\t\tthis._bgIndex[bg] = true;\n\t\t\t}, this);\n\n\t\t\tthis._lastPrune = bgs.length;\n\t\t},\n\n\t\t/**\n\t\t * Every time the user selects a new background color\n\t\t * a class is generated for that color.\n\t\t *\n\t\t * In order to ensure that we don't keep creating\n\t\t * classes and leaking ones that are no longer used,\n\t\t * we occasinally need to prune out unused classes.\n\t\t *\n\t\t * @param {string} [ignoredKlass] class to ignore while pruning (optional)\n\t\t */\n\t\tprune: function(ignoredKlass) {\n\t\t\tvar slides = this.deck.get('slides');\n\t\t\tvar dbg = this.deck.get('background');\n\t\t\tvar dsurf = this.deck.get('surface');\n\n\t\t\tvar usedClasses = {};\n\t\t\tvar bgs = this.get('bgs');\n\n\t\t\tif (bgs.length == 0) return;\n\n\t\t\tslides.forEach(function(slide) {\n\t\t\t\tvar bg = slide.get('background');\n\t\t\t\tif (bg)\n\t\t\t\t\tusedClasses[bg] = true;\n\t\t\t\tbg = slide.get('surface');\n\t\t\t\tif (bg)\n\t\t\t\t\tusedClasses[bg] = true;\n\t\t\t});\n\n\t\t\tif (dbg)\n\t\t\t\tusedClasses[dbg] = true;\n\t\t\tif (dsurf)\n\t\t\t\tusedClasses[dsurf] = true;\n\t\t\t\n\t\t\tfor (var i = bgs.length - 1; i > -1; --i) {\n\t\t\t\tvar klass = bgs[i].klass;\n\t\t\t\tif (usedClasses[klass] == null && klass !== ignoredKlass) {\n\t\t\t\t\tbgs.splice(i, 1);\n\t\t\t\t\tdelete this._bgIndex[klass];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._lastPrune = bgs.length;\n\t\t},\n\n\t\t/**\n\t\t * Takes in a color and adds a class for it, unless\n\t\t * that class already exists.\n\t\t * This returns an object that contains the \n\t\t * name of the created class and whether or not\n\t\t * it already existed.\n\t\t *\n\t\t * @param {string} color hex string\n\t\t * @returns {Object}\n\t\t */\n\t\tadd: function(color) {\n\t\t\tvar klass = 'bg-custom-' + color.replace('#', '');\n\n\t\t\tvar exists = this._bgIndex[klass];\n\n\t\t\tif (this.get('bgs').length - this._lastPrune > 10) {\n\t\t\t\tthis.prune(klass);\n\t\t\t}\n\n\t\t\tif (!exists) {\n\t\t\t\tthis.get('bgs').push({\n\t\t\t\t\tklass: klass,\n\t\t\t\t\tstyle: color\n\t\t\t\t});\n\t\t\t\tthis._bgIndex[klass] = true;\n\t\t\t\treturn {\n\t\t\t\t\texisted: false,\n\t\t\t\t\tklass: klass\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\texisted: true,\n\t\t\t\t\tklass: klass\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\n\t\tconstructor: function CustomBackgrounds() {\n\t\t\tCalcium.Model.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "/**\n * @module model.presentation\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/deck/Deck',[\"common/Calcium\",\n\t\"./SlideCollection\",\n\t\"./SlideCommands\",\n\t'tantaman/web/undo_support/CmdListFactory',\n\t'strut/deck/Slide',\n\t\"strut/editor/GlobalEvents\",\n\t'./DeckUpgrade',\n\t'./CustomBackgrounds'],\n\tfunction(Backbone, \n\t\t\t SlideCollection, \n\t\t\t SlideCommands, \n\t\t\t CmdListFactory, \n\t\t\t Slide, \n\t\t\t key, \n\t\t\t DeckUpgrade, \n\t\t\t CustomBackgrounds) {\n\t\t/**\n\t\t * This represents a slide deck.  It has a title, a currently active slide, a collection of slides, the filename on\n\t\t * \"disk\" and the overarching presentation background color.\n\t\t *\n\t\t * @class Deck\n\t\t */\n\t\treturn Backbone.Model.extend({\n\n\t\t\t/** @param {Slide[]} */\n\t\t\tselected: [],\n\n\t\t\t/**\n\t\t\t * Initialize deck model.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tvar slides;\n\t\t\t\tthis.undoHistory = CmdListFactory.managedInstance('editor');\n\t\t\t\tthis.set(\"slides\", new SlideCollection());\n\t\t\t\tslides = this.get(\"slides\");\n\t\t\t\tslides.on(\"add\", this._slideAdded, this);\n\t\t\t\tslides.on(\"remove\", this._slideRemoved, this);\n\t\t\t\tslides.on(\"reset\", this._slidesReset, this);\n\t\t\t\tthis.set('background', 'bg-default');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Set an attribute of the Deck.\n\t\t\t *\n\t\t\t * @param {string} key\n\t\t\t * @param {*} value\n\t\t\t * @param {Object} [options]\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tset: function(key, value, options) {\n\t\t\t\tif (key === \"activeSlide\") {\n\t\t\t\t\tthis._activeSlideChanging(value, options);\n\t\t\t\t}\n\t\t\t\treturn Backbone.Model.prototype.set.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Move slide at a given index to a new index.\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides\n\t\t\t * @param {number} destination\n\t\t\t */\n\t\t\tmoveSlides: function(slides, destination) {\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\t\t\t\tvar positionChanged = false;\n\t\t\t\tslides.forEach(function(slide, i) {\n\t\t\t\t\tif (slides[i].get('index') != destination + i) {\n\t\t\t\t\t\tpositionChanged = true;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tif (positionChanged) {\n\t\t\t\t\tthis.undoHistory.pushdo(new SlideCommands.Move(this, slides, destination));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// TODO add doc\n\t\t\tslideBackground: function() {\n\t\t\t\treturn this.get('background') || 'bg-transparent';\n\t\t\t},\n\n\t\t\t// TODO add doc\n\t\t\tslideSurface: function() {\n\t\t\t\treturn this.get('surface') || 'bg-default';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Given a color, this generates a custom background\n\t\t\t * class for that color.\n\t\t\t * The returned object contains the name of the \n\t\t\t * class for the color and whether or not\n\t\t\t * that class existed previously.\n\t\t\t * \n\t\t\t * @param {string} color hex string\n\t\t\t * @returns {Object}\n\t\t\t */\n\t\t\taddCustomBgClassFor: function(color) {\n\t\t\t\tvar customBgs = this.get('customBackgrounds');\n\t\t\t\treturn customBgs.add(color);\n\t\t\t},\n\n\t\t\t// TODO: this method should be a bit less brittle. If new properties are added to a deck, this won't set them.\n\t\t\t/**\n\t\t\t * Method to import an existing presentation into this deck.\n\t\t\t *\n\t\t\t * @param {Object} rawObj the \"json\" representation of a deck\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\t\"import\": function(rawObj) {\n\t\t\t\tDeckUpgrade.to1_0(rawObj);\n\t\t\t\tvar activeSlide, slides;\n\t\t\t\tslides = this.get(\"slides\");\n\t\t\t\tactiveSlide = this.get(\"activeSlide\");\n\t\t\t\tif (activeSlide !== undefined) {\n\t\t\t\t\tactiveSlide.unselectComponents();\n\t\t\t\t}\n\t\t\t\tthis.set(\"activeSlide\", undefined);\n\t\t\t\tthis.set(\"background\", rawObj.background);\n\t\t\t\tthis.set(\"fileName\", rawObj.fileName);\n\t\t\t\tthis.set('surface', rawObj.surface);\n\t\t\t\tthis.set('customStylesheet', rawObj.customStylesheet);\n\t\t\t\tthis.set('deckVersion', rawObj.deckVersion);\n\t\t\t\tthis.set('cannedTransition', rawObj.cannedTransition);\n\t\t\t\tvar bgs = new CustomBackgrounds(rawObj.customBackgrounds);\n\t\t\t\tthis.set('customBackgrounds', bgs);\n\t\t\t\tthis.undoHistory.clear();\n\n\t\t\t\t// TODO: go through and dispose of all old slides...?\n\n\t\t\t\tslides.reset(rawObj.slides);\n\n\t\t\t\tbgs.deck = this;\n\t\t\t\tbgs.prune();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on change of an active slide.\n\t\t\t *\n\t\t\t * @param {Slide} newActive\n\t\t\t * @param {Object} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_activeSlideChanging: function(newActive, options) {\n\t\t\t\tvar lastActive = this.get(\"activeSlide\");\n\t\t\t\tif (newActive === lastActive) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (lastActive) {\n\t\t\t\t\tlastActive.unselectComponents();\n\t\t\t\t\tlastActive.set({\n\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\tselected: false\n\t\t\t\t\t}, options);\n\t\t\t\t}\n\t\t\t\tif (newActive) {\n\t\t\t\t\tnewActive.set({\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\tactive: true\n\t\t\t\t\t}, options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide being added.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {SlideCollection} collection\n\t\t\t * @param {{at: number}} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideAdded: function(slide, collection, options) {\n\t\t\t\toptions = options || {};\n\t\t\t\toptions.at = _.isNumber(options.at) ? options.at : collection.length;\n\t\t\t\tthis.set(\"activeSlide\", slide, options);\n\t\t\t\tthis.trigger(\"slideAdded\", slide, options);\n\t\t\t\tthis._registerWithSlide(slide);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide being disposed.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideDisposed: function(slide) {\n\t\t\t\tslide.off(null, null, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide being removed.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {SlideCollection} collection\n\t\t\t * @param {{index: number}} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideRemoved: function(slide, collection, options) {\n\t\t\t\toptions = options || {};\n\t\t\t\tif (this.get(\"activeSlide\") === slide) {\n\t\t\t\t\tif (options.index < collection.length) {\n\t\t\t\t\t\tthis.set(\"activeSlide\", collection.at(options.index));\n\t\t\t\t\t} else if (options.index > 0) {\n\t\t\t\t\t\tthis.set(\"activeSlide\", collection.at(options.index - 1));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.set(\"activeSlide\", undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tslide.dispose();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide collection reset.\n\t\t\t *\n\t\t\t * @param {Slide[]} newSlides\n\t\t\t * @param {{previousModels: Slide[]}} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slidesReset: function(newSlides, options) {\n\t\t\t\toptions = options || {};\n\t\t\t\toptions.previousModels.forEach(function(slide) {\n\t\t\t\t\tslide.dispose();\n\t\t\t\t});\n\t\t\t\tthis.trigger('slidesReset', newSlides);\n\t\t\t\treturn newSlides.forEach(function(slide) {\n\t\t\t\t\tthis._registerWithSlide(slide);\n\t\t\t\t\tif (slide.get(\"active\")) {\n\t\t\t\t\t\tslide.trigger(\"change:active\", slide, true);\n\t\t\t\t\t\tslide.trigger(\"change:selected\", slide, true);\n\t\t\t\t\t\tthis._selectionChanged(slide, true);\n\t\t\t\t\t} else if (slide.get(\"selected\")) {\n\t\t\t\t\t\tslide.set(\"selected\", false);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide being set to active.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {boolean} value\n\t\t\t * @param {Object} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideActivated: function(slide, value, options) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis.set(\"activeSlide\", slide, options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Selects given slides.\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides Slides to set active.\n\t\t\t * @param {Slide} [activeSlide] Optional: slide, which will set as active. If not passed, first slide from \"slides\"\n\t\t\t * will be set active.\n\t\t\t */\n\t\t\tselectSlides: function(slides, activeSlide) {\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\t\t\t\tif (slides.length) {\n\t\t\t\t\tactiveSlide = activeSlide || slides[0];\n\t\t\t\t\tthis.get('slides').forEach(function(sl) {\n\t\t\t\t\t\treturn sl.set(\"selected\", false);\n\t\t\t\t\t});\n\n\t\t\t\t\tactiveSlide.set(\"active\", true, { multiselect: true });\n\t\t\t\t\tslides.forEach(function(slide) {\n\t\t\t\t\t\tslide.set(\"selected\", true, { multiselect: true });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Unselect given slides. If no slides passed, all slides will be unselected.\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} [slides] Slides to unselect.\n\t\t\t * @param {boolean} [includeActive=false] If true, even active slide will be unselected (but not deactivated).\n\t\t\t */\n\t\t\tunselectSlides: function(slides, includeActive) {\n\t\t\t\tslides = slides || this.get('slides').models;\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\n\t\t\t\tslides.forEach(function(slide) {\n\t\t\t\t\tif (includeActive || !slide.get('active')) {\n\t\t\t\t\t\tslide.set(\"selected\", false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide selection change.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {boolean} selected\n\t\t\t * @param {{multiselect: Boolean}} [options]\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectionChanged: function(slide, selected, options) {\n\t\t\t\toptions = options || {};\n\t\t\t\tvar multiselect = options.multiselect || (key.pressed.ctrl || key.pressed.meta || key.pressed.shift);\n\t\t\t\tif (selected) {\n\t\t\t\t\tif (!multiselect) {\n\t\t\t\t\t\tthis.get('slides').forEach(function(sl) {\n\t\t\t\t\t\t\tif (slide !== sl) {\n\t\t\t\t\t\t\t\tsl.set(\"selected\", false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (this.selected.indexOf(slide) == -1) {\n\t\t\t\t\t\tthis.selected.push(slide);\n\t\t\t\t\t\tthis._sortSelectedSlides();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar idx = this.selected.indexOf(slide);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tthis.selected.splice(idx, 1);\n\t\t\t\t\t\tthis._sortSelectedSlides();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t_sortSelectedSlides: function() {\n\t\t\t\t// Assign index for each slide and sort slides by this index, so that if you undo, slides would be inserted in\n\t\t\t\t// correct order.\n\t\t\t\tthis.selected.sort(function(a, b) {\n\t\t\t\t\treturn a.get('index') - b.get('index');\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Register callbacks on slide events.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @private\n\t\t\t */\n\t\t\t_registerWithSlide: function(slide) {\n\t\t\t\tslide.on(\"change:active\", this._slideActivated, this);\n\t\t\t\tslide.on(\"change:selected\", this._selectionChanged, this);\n\t\t\t\tslide.on(\"dispose\", this._slideDisposed, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Creates a new slide. The newly created slide is set as the active\n\t\t\t * slide in the deck.\n\t\t\t *\n\t\t\t * @param index If passed, slide will be added at given index. If not, it will be added as the last slide in the deck.\n\t\t\t */\n\t\t\tcreate: function(index) {\n\t\t\t\tthis.undoHistory.pushdo(new SlideCommands.Add(this, null, index));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Adds slides to the deck. First of newly created slides is set as the active slide in the deck.\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides\n\t\t\t * @param {number} [index] If passed, slides will be added at this index. If not, slides will be inserted after the\n\t\t\t * last selected slide.\n\t\t\t */\n\t\t\tadd: function(slides, index) {\n\t\t\t\tthis.undoHistory.pushdo(new SlideCommands.Add(this, slides, index));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Callback for slide addition command.\n\t\t\t * @see SlideCommands.Add\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides\n\t\t\t * @param {Object} options\n\t\t\t * @private\n\t\t\t */\n\t\t\t_doAdd: function(slides, options) {\n\t\t\t\tvar allSlides = this.get(\"slides\");\n\n\t\t\t\tslides = slides || [new Slide()];\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\t\t\t\toptions = options || {};\n\n\t\t\t\tif (!options.preserveIndexes && this.selected.length) {\n\t\t\t\t\tvar lastSelectedSlideIndex = allSlides.indexOf(this.selected[this.selected.length - 1]);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < slides.length; i++) {\n\t\t\t\t\tvar slide = slides[i];\n\t\t\t\t\tslide.on('unrender', slide.unrendered, slide);\n\t\t\t\t\toptions.at = _.isNumber(options.at) ? (options.at + i) : (options.preserveIndexes ? slide.get(\"index\") : lastSelectedSlideIndex + 1 + i) || 0;\n\t\t\t\t\tallSlides.add(slide, options);\n\t\t\t\t}\n\t\t\t\tthis.selectSlides(slides);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Removes set of slides from the deck. Can be undone.\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides\n\t\t\t */\n\t\t\tremove: function(slides) {\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\t\t\t\tthis.undoHistory.pushdo(new SlideCommands.Remove(this, slides));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Callback for slide removal command.\n\t\t\t * @see SlideCommands.Remove\n\t\t\t *\n\t\t\t * @param {Slide|Slide[]} slides\n\t\t\t * @param {Object} options\n\t\t\t * @private\n\t\t\t */\n\t\t\t_doRemove: function(slides, options) {\n\t\t\t\tslides = _.isArray(slides) ? slides : [slides];\n\t\t\t\tvar allSlides = this.get(\"slides\");\n\n\t\t\t\t// We need to remove slides in reverse order in order to keep correct indexes.\n\t\t\t\tvar _slides = slides.slice(0).reverse();\n\t\t\t\t_slides.forEach(function(slide) {\n\t\t\t\t\tallSlides.remove(slide, options);\n\t\t\t\t\tslide.off();\n\t\t\t\t\tslide.dispose();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Undo last command.\n\t\t\t */\n\t\t\tundo: function() {\n\t\t\t\tthis.undoHistory.undo();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Redo next command.\n\t\t\t */\n\t\t\tredo: function() {\n\t\t\t\tthis.undoHistory.redo();\n\t\t\t}\n\t\t});\n\t})\n;\n\n",
    "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment|closed|closing) *(?:\\n{2,}|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', /\\n+(?=(?: *[-*_]){3,} *(?:\\n+|$))/)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += '<a href=\"'\n        + href\n        + '\">'\n        + text\n        + '</a>';\n      continue;\n    }\n\n    // url (gfm)\n    if (cap = this.rules.url.exec(src)) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += '<a href=\"'\n        + href\n        + '\">'\n        + text\n        + '</a>';\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      out += this.outputLink(cap, link);\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += '<strong>'\n        + this.output(cap[2] || cap[1])\n        + '</strong>';\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += '<em>'\n        + this.output(cap[2] || cap[1])\n        + '</em>';\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += '<code>'\n        + escape(cap[2], true)\n        + '</code>';\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += '<br>';\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += '<del>'\n        + this.output(cap[1])\n        + '</del>';\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(this.smartypants(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  if (cap[0].charAt(0) !== '!') {\n    return '<a href=\"'\n      + escape(link.href)\n      + '\"'\n      + (link.title\n      ? ' title=\"'\n      + escape(link.title)\n      + '\"'\n      : '')\n      + '>'\n      + this.output(cap[1])\n      + '</a>';\n  } else {\n    return '<img src=\"'\n      + escape(link.href)\n      + '\" alt=\"'\n      + escape(cap[1])\n      + '\"'\n      + (link.title\n      ? ' title=\"'\n      + escape(link.title)\n      + '\"'\n      : '')\n      + '>';\n  }\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/--/g, '\\u2014')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options) {\n  var parser = new Parser(options);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return '<hr>\\n';\n    }\n    case 'heading': {\n      return '<h'\n        + this.token.depth\n        + ' id=\"'\n        + this.token.text.toLowerCase().replace(/[^\\w]+/g, '-')\n        + '\">'\n        + this.inline.output(this.token.text)\n        + '</h'\n        + this.token.depth\n        + '>\\n';\n    }\n    case 'code': {\n      if (this.options.highlight) {\n        var code = this.options.highlight(this.token.text, this.token.lang);\n        if (code != null && code !== this.token.text) {\n          this.token.escaped = true;\n          this.token.text = code;\n        }\n      }\n\n      if (!this.token.escaped) {\n        this.token.text = escape(this.token.text, true);\n      }\n\n      return '<pre><code'\n        + (this.token.lang\n        ? ' class=\"'\n        + this.options.langPrefix\n        + this.token.lang\n        + '\"'\n        : '')\n        + '>'\n        + this.token.text\n        + '</code></pre>\\n';\n    }\n    case 'table': {\n      var body = ''\n        , heading\n        , i\n        , row\n        , cell\n        , j;\n\n      // header\n      body += '<thead>\\n<tr>\\n';\n      for (i = 0; i < this.token.header.length; i++) {\n        heading = this.inline.output(this.token.header[i]);\n        body += '<th';\n        if (this.token.align[i]) {\n          body += ' style=\"text-align:' + this.token.align[i] + '\"';\n        }\n        body += '>' + heading + '</th>\\n';\n      }\n      body += '</tr>\\n</thead>\\n';\n\n      // body\n      body += '<tbody>\\n'\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n        body += '<tr>\\n';\n        for (j = 0; j < row.length; j++) {\n          cell = this.inline.output(row[j]);\n          body += '<td';\n          if (this.token.align[j]) {\n            body += ' style=\"text-align:' + this.token.align[j] + '\"';\n          }\n          body += '>' + cell + '</td>\\n';\n        }\n        body += '</tr>\\n';\n      }\n      body += '</tbody>\\n';\n\n      return '<table>\\n'\n        + body\n        + '</table>\\n';\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return '<blockquote>\\n'\n        + body\n        + '</blockquote>\\n';\n    }\n    case 'list_start': {\n      var type = this.token.ordered ? 'ol' : 'ul'\n        , body = '';\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return '<'\n        + type\n        + '>\\n'\n        + body\n        + '</'\n        + type\n        + '>\\n';\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return '<li>'\n        + body\n        + '</li>\\n';\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return '<li>'\n        + body\n        + '</li>\\n';\n    }\n    case 'html': {\n      return !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n    }\n    case 'paragraph': {\n      return '<p>'\n        + this.inline.output(this.token.text)\n        + '</p>\\n';\n    }\n    case 'text': {\n      return '<p>'\n        + this.parseText()\n        + '</p>\\n';\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function() {\n      var out, err;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define('marked',[],function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n",
    "define('strut/presentation_generator/impress/ImpressGenerator',[\"handlebars\", \"common/Math2\", \"marked\", \"strut/deck/Utils\"],\nfunction(Handlebars, Math2, marked, DeckUtils) {\n\tvar ImpressGenerator;\n\tvar slideConfig = window.config.slide;\n\n\tImpressGenerator = (function() {\n\n\t\tfunction ImpressGenerator() {\n\t\t\tvar _this = this;\n\t\t\tHandlebars.registerHelper(\"renderComponent\", function(componentModel, ignore) {\n\t\t\t\tvar result;\n\t\t\t\tresult = \"\";\n\t\t\t\tif (ignore && typeof ignore == 'string') {\n\t\t\t\t\tignore = ignore.split(\" \");\n\t\t\t\t\tif (ignore.indexOf(componentModel.get(\"type\")) != -1)\n\t\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tswitch (componentModel.get(\"type\")) {\n\t\t\t\t\tcase \"Image\":\n\t\t\t\t\t\tif (componentModel.get(\"imageType\") === \"SVG\") {\n\t\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/SVGImage\"](componentModel);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/Image\"](componentModel);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"TextBox\":\n\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/TextBox\"](_this.convertTextBoxData(componentModel));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Video\":\n\t\t\t\t\t\tif (componentModel.get(\"videoType\") === \"html5\") {\n\t\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/Video\"](componentModel);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/Youtube\"](componentModel);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"WebFrame\":\n\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/WebFrame\"](componentModel);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Shape\":\n\t\t\t\t\t\tresult = JST[\"strut.presentation_generator.impress/Shape\"](componentModel);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\treturn new Handlebars.SafeString(result);\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"scaleX\", function(x) {\n\t\t\t\treturn x * slideConfig.size.width / slideConfig.overviewSize.width;\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"scaleY\", function(y) {\n\t\t\t\treturn y * slideConfig.size.height / slideConfig.overviewSize.height;\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"toDeg\", function(v) {\n\t\t\t\treturn v * 180 / Math.PI;\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"negate\", function(v) {\n\t\t\t\treturn -1 * v;\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"round\", function(v) {\n\t\t\t\treturn Math2.round(v, 2);\n\t\t\t});\n\t\t\tHandlebars.registerHelper(\"extractBG\", function(styles) {\n\t\t\t\tvar browsers, prefix, result, style, _i, _len;\n\t\t\t\tif ((styles != null) && styles.length > 0) {\n\t\t\t\t\tresult = \"\";\n\t\t\t\t\tstyle = styles[0];\n\t\t\t\t\tbrowsers = [\"-moz-\", \"-webkit-\", \"-o-\", \"-ms-\", \"\"];\n\t\t\t\t\tfor (_i = 0, _len = browsers.length; _i < _len; _i++) {\n\t\t\t\t\t\tprefix = browsers[_i];\n\t\t\t\t\t\tresult += \"background-image: \" + prefix + style + \"; \";\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn \"\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"or\", function(a, b) {\n\t\t\t\treturn a || b;\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"determineBG\", function(slide, deck) {\n\t\t\t\tvar bg = DeckUtils.slideBackground(slide, deck, {surfaceForDefault: true, transparentForSurface: true});\n\t\t\t\tif (bg && bg.indexOf('img:') == 0)\n\t\t\t\t\treturn '';\n\t\t\t\treturn bg;\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"determineSurface\", function(slide, deck) {\n\t\t\t\tvar bg = DeckUtils.slideSurface(slide, deck);\n\t\t\t\tif (bg && bg != 'bg-default' && bg.indexOf('img:') == -1)\n\t\t\t\t\treturn ' ' + bg + ' ';\n\t\t\t\treturn '';\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"slideBGImg\", function(slide) {\n\t\t\t\tvar bg = slide.get('background');\n\t\t\t\tif (bg && bg.indexOf('img:') == 0)\n\t\t\t\t\treturn 'background-image: url(' + bg.substring(4) + ');';\n\t\t\t\treturn '';\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"marked\", function(string) {\n\t\t\t\tif (string)\n\t\t\t\t\treturn new Handlebars.SafeString(marked(string));\n\t\t\t\treturn '';\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"shapeSvg\", function() {\n//\t\t\t\tif (this.fill && this.markup) {\n//\t\t\t\t\tvar string = '<svg fill=\"' + this.fill + '\" ' + this.markup.substring(4);\n//\t\t\t\t\treturn new Handlebars.SafeString(string);\n//\t\t\t\t} else if (this.markup) {\n//\t\t\t\t\treturn new Handlebars.SafeString(this.markup);\n//\t\t\t\t} else\n//\t\t\t\t\treturn '';\n                var attr_insert = '';\n                var retval = '';\n                if (this.markup) {\n                    if (this.fill) {\n                        attr_insert += ' fill=\"' + this.fill + '\" ';\n                    }\n                    if (this.scale) {\n                        attr_insert += ' height=\"' + this.scale.height + '\" ';\n                        attr_insert += ' width=\"'  + this.scale.width  + '\" ';\n                    }\n                    retval = new Handlebars.SafeString(this.markup.replace('<svg ', '<svg ' + attr_insert));\n                }\n                return retval;\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"isBGImg\", function(string, options) {\n\t\t\t\tif (string && string.indexOf(\"img:\") == 0) {\n\t\t\t\t\treturn options.fn(this);\n\t\t\t\t} else {\n\t\t\t\t\treturn options.inverse(this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"isBGClass\", function(string, options) {\n\t\t\t\tif (string && string.indexOf(\"img:\") == 0) {\n\t\t\t\t\treturn options.inverse(this);\n\t\t\t\t} else {\n\t\t\t\t\treturn options.fn(this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"getBGImgStyle\", function(string) {\n\t\t\t\treturn 'background-image: url(' + string.substring(4) + ');';\n\t\t\t});\n\n\t\t\tvar counters = {};\n\t\t\tHandlebars.registerHelper(\"counter_set\", function(name, val) {\n\t\t\t\tcounters[name] = val;\n\t\t\t});\n\n\t\t\tHandlebars.registerHelper(\"counter_incAndGet\", function(name) {\n\t\t\t\treturn (counters[name] = counters[name] + 1);\n\t\t\t});\n\n\t\t\tHandlebars.registerPartial(\"ComponentContainer\", JST[\"strut.presentation_generator.impress/ComponentContainer\"]);\n\t\t\tHandlebars.registerPartial(\"TransformContainer\", JST[\"strut.presentation_generator.impress/TransformContainer\"]);\n\t\t\tHandlebars.registerPartial(\"SVGContainer\", JST[\"strut.presentation_generator.impress/SVGContainer\"]);\n\t\t\tHandlebars.registerPartial(\"PerSlideSurfaceStylesheet\", JST[\"strut.presentation_generator/PerSlideSurfaceStylesheet\"]);\n\t\t\tHandlebars.registerPartial(\"CustomBgStylesheet\", JST[\"strut.presentation_generator/CustomBgStylesheet\"]);\n\t\t}\n\n\t\tImpressGenerator.prototype.render = function(deck) {\n\t\t\tvar cnt, colCnt, slides,\n\t\t\t\t_this = this;\n\t\t\tvar deckAttrs = deck.attributes;\n\t\t\tslides = deckAttrs.slides;\n\t\t\tcolCnt = 6;\n\t\t\tcnt = 0;\n\n\t\t\tvar minX, minY, maxX, maxY;\n\n\t\t\tslides.each(function(slide) {\n\t\t\t\tvar x;\n\t\t\t\tx = slide.get(\"x\");\n\t\t\t\ty = slide.get('y');\n\t\t\t\tif (!(x != null)) {\n\t\t\t\t\tslide.set(\"x\", cnt * 280 + 180);\n\t\t\t\t\tslide.set(\"y\", ((cnt / colCnt) | 0) * 280 + 180);\n\t\t\t\t}\n\n\t\t\t\tif (minX == null || x < minX)\n\t\t\t\t\tminX = x;\n\t\t\t\tif (minY == null || y < minY)\n\t\t\t\t\tminY = y;\n\t\t\t\tif (maxX == null || x > maxX)\n\t\t\t\t\tmaxX = x;\n\t\t\t\tif (maxY == null || y > maxY)\n\t\t\t\t\tmaxY = y;\n\n\t\t\t\treturn ++cnt;\n\t\t\t});\n\n\t\t\tdeckAttrs.overviewX = (maxX + minX) / 2;\n\t\t\tdeckAttrs.overviewY = (maxY + minY) / 2;\n\n\t\t\treturn JST[\"strut.presentation_generator.impress/ImpressTemplate\"](deck);\n\t\t};\n\n\t\tImpressGenerator.prototype.getStartPreviewFn = function(editorModel, sourceWind, previewStr) {\n\t\t\tfunction cb() {\n\t\t\t\tconsole.log('Loaded!');\n\t\t\t\twindow.location.hash = '#/step-' + (editorModel.activeSlideIndex() + 1);\n\t\t\t\tsourceWind.previewWind.document.open();\n\t\t\t\tsourceWind.\n\t\t\t\t\t\tpreviewWind.document.write(previewStr);\n\t\t\t\tsourceWind.previewWind.document.close();\n\t\t\t}\n\n\t\t\treturn cb;\n\t\t};\n\n\t\tImpressGenerator.prototype.convertTextBoxData = function(attrs) {\n\t\t\tvar copy;\n\t\t\tcopy = _.extend({}, attrs);\n\t\t\tcopy.text = new Handlebars.SafeString(attrs.text);\n\t\t\treturn copy;\n\t\t};\n\n\t\treturn ImpressGenerator;\n\n\t})();\n\treturn new ImpressGenerator();\n});\n\n",
    " define('strut/exporter/zip/browser/Archiver',[\"libs/jszip\",\n         \"strut/deck/Deck\",\n         \"strut/presentation_generator/impress/ImpressGenerator\", // TODO: this should go thru the service registry\n         \"common/FileUtils\"],\n  function(JSZip, Deck, ImpressRenderer, FileUtils) {\n    var Archiver, defaults;\n    defaults = {\n      includeImages: true,\n      includeFonts: true\n    };\n    return Archiver = (function() {\n      function Archiver(presentation, options) {\n        this.presentation = presentation;\n        this.options = options;\n        this.options || (this.options = {});\n        this.canvas = $(\"<canvas></canvas>\")[0];\n        this._archivedImages = {};\n        this._imageIdx = 0;\n        _.defaults(this.options, defaults);\n      }\n\n      Archiver.prototype.create = function() {\n        var presentationCopy, showStr,\n          _this = this;\n        this.archive = new JSZip();\n        this.previewExportDir = this.archive.folder(\"preview_export\");\n        this.imagesDir = this.previewExportDir.folder(\"images\");\n        this.scriptsDir = this.previewExportDir.folder(\"scripts\");\n        this.fontsDir = this.previewExportDir.folder(\"fonts\");\n        this.cssDir = this.previewExportDir.folder(\"css\");\n        presentationCopy = new Deck();\n        presentationCopy[\"import\"](this.presentation.toJSON(false, true));\n        presentationCopy.get(\"slides\").each(function(slide) {\n          return _this.processComponents(slide.get(\"components\"));\n        });\n        showStr = \"<!doctype html><html>\" + ImpressRenderer.render(presentationCopy.attributes) + \"</html>\";\n        this._archiveIndexHtml(showStr);\n        this._archiveScripts();\n        this._archiveFonts();\n        this._archiveCss();\n        this._archivedImages = {};\n        return this.archive.generate();\n      };\n\n      Archiver.prototype.createSimple = function(cb, opts) {\n        var showStr,\n          _this = this;\n        this.archive = new JSZip();\n        this.previewExportDir = this.archive.folder(\"preview_export\");\n        this.scriptsDir = this.previewExportDir.folder(\"scripts\");\n        this.cssDir = this.previewExportDir.folder(\"css\");\n        showStr = \"<!doctype html><html>\" + ImpressRenderer.render(this.presentation.attributes) + \"</html>\";\n        this._archiveIndexHtml(showStr);\n        return this._archiveScripts(function() {\n          return _this._archiveCss(function() {\n            return cb(_this.archive.generate(opts));\n          });\n        });\n      };\n\n      Archiver.prototype.processComponents = function(components) {\n        var _this = this;\n        return components.forEach(function(component) {\n          return _this.processComponent(component);\n        });\n      };\n\n      Archiver.prototype.processComponent = function(component) {\n        if (component.get(\"type\") === \"ImageModel\") {\n          if (this.options.includeImages) {\n            return this._archiveImage(component);\n          }\n        }\n      };\n\n      Archiver.prototype._archiveIndexHtml = function(str) {\n        return this.archive.file(\"index.html\", str);\n      };\n\n      Archiver.prototype._archiveScripts = function(cb) {\n        var _this = this;\n        return $.get('preview_export/scripts/impress.js', function(impress) {\n          _this.scriptsDir.file('impress.js', impress);\n          return cb();\n        });\n      };\n\n      Archiver.prototype._archiveFonts = function() {};\n\n      Archiver.prototype._archiveCss = function(cb) {\n        var _this = this;\n        return $.get('zip/main.css', function(css) {\n          _this.cssDir.file('main.css', css);\n          return cb();\n        });\n      };\n\n      Archiver.prototype._archiveImage = function(component) {\n        var fileName, img;\n        if (!this._archivedImages[component.get(\"src\")]) {\n          this._archivedImages[component.get(\"src\")] = true;\n          img = component.cachedImage;\n          this.canvas.width = img.naturalWidth;\n          this.canvas.height = img.naturalHeight;\n          this.canvas.getContext(\"2d\").drawImage(img, 0, 0);\n          fileName = this._imageIdx + FileUtils.baseName(component.get(\"src\"));\n          this.imagesDir.file(fileName, this.canvas.toDataURL().replace(/^data:image\\/(png|jpg);base64,/, \"\"), {\n            base64: true\n          });\n          return component.set(\"src\", \"preview_export/images/\" + fileName);\n        }\n      };\n\n      return Archiver;\n\n    })();\n    /*\n    \t\tvar zip = new JSZip();\n    \t\tzip.file(\"Hello.txt\", \"Hello World\\n\");\n    \t\tvar img = zip.folder(\"images\");\n    \t\timg.file(\"smile.gif\", imgData, {base64: true});\n    \t\tvar content = zip.generate();\n    \t\tlocation.href=\"data:application/zip;base64,\"+content;\n    */\n\n  });\n",
    "define('strut/exporter/zip/browser/View',['libs/backbone', './Archiver', 'lang'],\nfunction(Backbone, Archiver, lang) {\n\treturn Backbone.View.extend({\n//\t\tname: \"Zip\",\n//\t\tinitialize: function() {\n//\t\t\tthis.$el.html(\n//\t\t\t\t'<div class=\"alert alert-info\">The most effective way to archive your rendered presentation is to:<p>' +\n//\t\t\t\t'<ol><li>Click the <div class=\"btn-group iconBtns\"><button class=\"btn btn-success disabled\"><i class=\"icon-play icon-white\"></i>Present</button></div> button</li><li>Press <code>Ctrl+S</code>(windows) or <code>⌘+S</code>(Mac) to save the entire presentation to disk.</li></ol></p>'\n//\t\t\t\t//+ '</div><div class=\"alert alert-success\">Click below to continue downloading the generated zip</div>'\n//\t\t\t\t);\n//\t\t},\n//\n//\t\tshow: function($container, $modal) {\n//\t\t\tthis._$modal = $modal;\n//\t\t\tvar $ok = this._$modal.find('.ok');\n//\t\t\t//this._makeDownloadable($ok);\n//\n//\t\t\t$ok.html('');\n//\t\t\t$container.append(this.$el);\n//\t\t},\n//\n//\t\t_makeDownloadable: function($ok) {\n//\t\t\t// TODO: shouldn't be reaching into adapted.\n//\t\t\t// This'll require a re-work of the impress renderer to break\n//\t\t\t// the dependencies.\n//\t\t\tvar archiver = new Archiver(this._exportable.adapted.deck());\n//\t\t\tvar self = this;\n//\t\t\tarchiver.createSimple(function(data) {\n//\t\t\t\tvar a = $ok[0];\n//\t\t\t\ta.href = window.URL.createObjectURL(data);\n//\t\t\t\ta.download = self._exportable.identifier() + '.zip';\n//\t\t\t\ta.dataset.downloadurl = ['application/json', a.download, a.href].join(':');\n//\t\t\t}, {type: 'blob'});\n//\t\t},\n//\n//\t\thide: function() {\n//\t\t\tthis.$el.detach();\n//\t\t\tthis.hidden();\n//\t\t},\n//\n//\t\thidden: function() {\n//\t\t\tvar $ok = this._$modal.find('.ok');\n//\t\t\t// window.URL.revokeObjectURL($ok.attr('href'));\n//\t\t},\n//\n//\t\trender: function() {\n//\t\t\tthis.$el.html('Zipping while running Strut from file:// URLs is currently not supported due to browser security restrictions.  The best way zip your presentation in this case is to:<br/>'\n//\t\t\t\t+ '<ol><li>Click Preview, then</li><li>Use your browser\\'s <code>Save Page As</code> functionality<br/>to save the entire presentation to disk.</li></ol>');\n//\t\t\treturn this;\n//\t\t},\n//\n//\t\tconstructor: function ZipExportView(exportable) {\n//\t\t\tthis._exportable = exportable;\n//\t\t\tBackbone.View.prototype.constructor.call(this);\n//\t\t}\n\t});\n});\n",
    "/*\nFunctionality to export a zipped presentation from within the browser\nhoster off the local filesystem.\n*/\ndefine('strut/exporter/zip/browser/main',['./View'],\nfunction(View) {\n\t'use strict';\n\n\tvar service = {\n\t\tcreateView: function(editorModel) {\n\t\t\treturn new View(editorModel.exportable);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.exporter'\n\t\t\t}, service);\n\t\t}\n\t}\n});\n",
    "define('strut/importer/json/main',['common/FileUtils'],\nfunction(FileUtils) {\n\t'use strict';\n\t\n\tvar importer = {\n\t\timport: function(file, editorModel, next) {\n\t\t\t// TODO: Since browsers seem to pick any type they want\n\t\t\t// Should we just ignore the mime type?\n\t\t\t// Need to do some research on this subject.\n\t\t\tif (file.type == 'text/json' || file.type == ''\n\t\t\t || file.type == 'application/json'\n\t\t\t || file.type == 'application/xrd+json') {\n\t\t\t\tFileUtils.toText(file, function(json) {\n                    //数据库取出的content可以赋给json, 然后调用EditorModel.js的importPresentation方法\n\t\t\t\t\teditorModel.importPresentation(JSON.parse(json));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.importer'\n\t\t\t}, importer);\n\t\t}\n\t};\n});\n",
    "define('tantaman/web/widgets/HiddenOpen',['libs/backbone'], function(Backbone) {\n  return Backbone.View.extend({\n    className: 'dispNone',\n    events: {\n      \"change input[type='file']\": '_fileChosen'\n    },\n    initialize: function(triggerElem, cb) {\n      this._cb = cb;\n      if (triggerElem != null) {\n        return triggerElem.on('click', this.trigger.bind(this));\n      }\n    },\n    trigger: function(cb) {\n      if (cb != null) {\n        this._cb = cb;\n      }\n      return this.$input.click();\n    },\n    _fileChosen: function(e) {\n        //返回选择的文件，URL解析后从数据库取得的JSON传到这里？\n      var f;\n      f = e.target.files[0];\n      return this._cb(f);\n    },\n    render: function() {\n      this.$input = $('<input type=\"file\"></input>');\n      this.$el.html(this.$input);\n      return this;\n    }\n  });\n});\n\n",
    "define('framework/Iterator',[],function() {\n\tfunction Factory(val) {\n\t\tif (Array.isArray(val) || val instanceof Array) {\n\t\t\treturn new ArrayIterator(val);\n\t\t} else {\n\t\t\treturn new ObjectIterator(val);\n\t\t}\n\t}\n\n\tfunction ArrayIterator(val) {\n\t\tthis._val = val;\n\t\tthis._crsr = 0;\n\t}\n\n\tArrayIterator.prototype = {\n\t\tnext: function() {\n\t\t\treturn this._val[this._crsr++];\n\t\t},\n\n\t\thasNext: function() {\n\t\t\treturn this._crsr < this._val.length;\n\t\t}\n\t};\n\n\tfunction ObjectIterator(val) {\n\t\tthis._object = val;\n\t\tthis._iter = new ArrayIterator(Object.keys(val));\n\t}\n\n\tObjectIterator.prototype = {\n\t\tnext: function() {\n\t\t\treturn this._object[this._iter.next()];\n\t\t},\n\n\t\thasNext: function() {\n\t\t\treturn this._iter.hasNext();\n\t\t}\n\t};\n\n\treturn Factory;\n});\n",
    "define('strut/importer/main',['tantaman/web/widgets/MenuItem',\n        'framework/ServiceCollection',\n        'tantaman/web/widgets/HiddenOpen',\n        'framework/Iterator',\n        'lang'],\n    function (MenuItem, ServiceCollection, HiddenOpen, Iterator, lang) {\n        'use strict';\n\n        // Very boiler-platey.  Need to get\n        // some dynamic dependency injection to declarative\n        // wire all this type of stuff up\n        var importerCollection = null;\n        var hiddenOpen = new HiddenOpen();\n        $('body').append(hiddenOpen.render().$el);\n\n        function fileBrowserLauncher(editorModel) {\n            // Launch the file browser\n            // forward the file chosen event off to the various registered services...\n            //点击导入按钮触发\n            hiddenOpen.trigger(function (file) {\n                fileChosen(file, editorModel, lang);\n            });\n        }\n\n        //选择文件后触发，随后调用到strut.importer.json.main.js进行JSON解析\n        function fileChosen(file, editorModel, lang) {\n//\t\tvar iter = new Iterator(importerCollection);\n//\t\tfunction next() {\n//\t\t\tif (iter.hasNext()) {\n//\t\t\t\titer.next().import(file, editorModel, next);\n//\t\t\t}\n//\t\t}\n//\n//\t\tnext();\n            if (file.type == 'application/vnd.openxmlformats-officedocument.presentationml.presentation') {\n                $.ajax({\n                    url: '/impress/convert',\n                    type: 'POST',\n                    cache: false,\n                    data: { filepath: file.name},\n                    success: function (data) {\n                        alert(lang.importsuccess);\n                        localStorage.setItem('strut-exitsave', data);\n                        window.location = \"/impress/import\";\n                    },\n                    error: function (jqXHR, textStatus, err) {\n                        alert('text status ' + textStatus + ', err ' + err)\n                    }\n                });\n\n            } else {\n                alert(lang.notsupport);\n            }\n\n        }\n\n        var menuProvider = {\n            createMenuItems: function (editorModel) {\n                return new MenuItem({ title: lang.import, handler: fileBrowserLauncher, model: editorModel});\n            }\n        };\n\n        return {\n            initialize: function (registry) {\n                importerCollection = new ServiceCollection(\n                    registry, 'strut.importer',\n                    ServiceCollection.toServiceConverter\n                );\n\n                registry.register({\n                    interfaces: 'strut.LogoMenuItemProvider'\n                }, menuProvider);\n            }\n        };\n    });\n",
    "/**\n * Created by Humphrey on 14-10-19.\n */\ndefine('strut/exit/main',['tantaman/web/widgets/MenuItem',\n        'lang'],\n    function(MenuItem, lang) {\n        'use strict';\n\n        var menuProvider = {\n            createMenuItems: function() {\n                return new MenuItem({ title: lang.exit, handler: exit});\n            }\n        };\n\n        function exit(){\n            if(confirm(lang.exitconfirm))\n            {\n                window.location.href=\"../../your\";\n            }\n            else\n            {\n            }\n        }\n\n        return {\n            initialize: function(registry) {\n                registry.register({\n                    interfaces: 'strut.LogoMenuItemProvider'\n                }, menuProvider);\n            }\n        };\n    });\n\n",
    "define('strut/presentation_generator/impress/main',['./ImpressGenerator',\n        'lang'],\nfunction(ImpressGenerator,lang) {\n\t'use strict';\n\n\tvar service = {\n\t\tdisplayName: lang.play,\n\t\tid: 'impress',\n\t\tcapabilities: {\n\t\t\tfreeformStepping: true\n\t\t},\n\t\tgenerate: function(deck) {\n            //触发impressGenerator.js\n\t\t\treturn ImpressGenerator.render(deck);\n\t\t},\n\n\t\tgetSlideHash: function(editorModel) {\n\t\t\treturn '#/step-' + (editorModel.activeSlideIndex() + 1);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.presentation_generator'\n\t\t\t}, service);\n\t\t}\n\t};\n});\n",
    "define('strut/presentation_generator/main',['framework/ServiceCollection'],\nfunction(ServiceCollection) {\n\t// Service will be a service collection of the available backends?\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tvar service = new ServiceCollection(registry,\n\t\t\t\t'strut.presentation_generator',\n\t\t\t\tfunction(entry) { return entry.service(); });\n\n\t\t\tregistry.register('strut.presentation_generator.GeneratorCollection',\n\t\t\t\tservice);\n\t\t}\n\t};\n});\n",
    "define('tantaman/web/saver/Saver',[],function() {\n\t'use strict';\n\n\tfunction Saver(exportables, storageInterface) {\n\t\tthis.storageInterface = storageInterface;\n\t\tif (Array.isArray(exportables)) {\n\t\t\tthis.exportables = exportables;\n\t\t} else {\n\t\t\tthis.exportables = [exportables];\n\t\t}\n\t}\n\n\tSaver.prototype = {\n\t\t__save: function() {\n\t\t\t// var data = exportable.export();\n\t\t\t// var identifier = exportable.identifier();\n\t\t\tif (!this.storageInterface.ready()) return;\n\t\t\t\n\t\t\tthis.exportables.forEach(function(exportable) {\n\t\t\t\tvar data = exportable.export();\n\t\t\t\tvar identifier = exportable.identifier();\n\t\t\t\tthis.storageInterface.store(identifier, data);\n\t\t\t}, this);\n\t\t},\n\n\t\tsave: function() {\n\t\t\tthis.__save();\n\t\t}\n\t};\n\n\treturn Saver;\n});\n\n",
    "define('tantaman/web/saver/ExitSaver',['./Saver'],\n    function (Saver) {\n        'use strict';\n        function ExitSaver(exportable, options) {\n            this.exportable = exportable;\n            this.options = options || {};\n            this._unloaded = this._unloaded.bind(this);\n            $(window).unload(this._unloaded);\n        }\n\n        var proto = ExitSaver.prototype;\n\n        proto._unloaded = function () {\n            var identifier;\n            if (this.options.identifier) {\n                identifier = this.options.identifier;\n            } else {\n                identifier = this.exportable.identifier();\n            }\n\n            var data = this.exportable.export();\n            try {\n                if (localStorage.getItem(\"strut-exitsave\") == \"\") { //set by humphrey\n                    localStorage.setItem(identifier, JSON.stringify(data));\n                }\n            } catch (e) {\n                // TODO: throw up an alert about the presentation\n                // not having been saved.\n                localStorage.setItem(identifier, '');\n            }\n\n            if (this.options.cb)\n                this.options.cb();\n        };\n\n        proto.dispose = function () {\n            $(window).off('unload', this._unloaded);\n        }\n\n        return ExitSaver;\n    });\n",
    "define('tantaman/web/saver/TimedSaver',['./Saver'],\nfunction(Saver) {\n\t'use strict';\n\tfunction TimedSaver(exportables, duration, storageInterface) {\n\t\tSaver.call(this, exportables, storageInterface);\n\n\t\tthis._intervalH = setInterval(this.__save.bind(this), duration);\n\t}\n\n\tvar proto = TimedSaver.prototype = Object.create(Saver.prototype);\n\n\tproto.dispose = function() {\n\t\tclearInterval(this._intervalH);\n\t};\n\n\treturn TimedSaver;\n});\n\n",
    "define('tantaman/web/saver/main',['./ExitSaver', './TimedSaver', './Saver'],\nfunction(ExitSaver, TimedSaver) {\n\t/*\n\tservice will be an auto-saver factory\n\tso you can get new instance of the auto saver.\n\n\tThe auto saver takes an object that is exportable.\n\t*/\n\n\tvar service = {\n\t\ttimedSaver: function(exportable, duration, storageInterface) {\n\t\t\treturn new TimedSaver(exportable, duration, storageInterface);\n\t\t},\n\n\t\texitSaver: function(exportable, storageInterface) {\n\t\t\treturn new ExitSaver(exportable, storageInterface);\n\t\t},\n\n\t\tmanualSaver: function(exportable, storageInterface) {\n\t\t\treturn new Saver(exportable, storageInterface);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'tantaman.web.saver.AutoSavers'\n\t\t\t}, service);\n\t\t}\n\t};\n});\n",
    "define('strut/slide_editor/model/SlideEditorModel',['libs/backbone'],\nfunction(Backbone) {\n\treturn Backbone.Model.extend({\n\t\tinitialize: function() {\n\t\t\tthis._editorModel.on('launch:preview', this._triggerSave, this);\n\t\t\tthis._editorModel.on('change:modeId', this._triggerSave, this);\n\t\t},\n\n\t\tdeck: function() {\n\t\t\treturn this._editorModel.deck();\n\t\t},\n\n\t\tactiveSlide: function() {\n\t\t\treturn this._editorModel.deck().get('activeSlide');\n\t\t},\n\n\t\tisMarkdownMode: function() { return this.get('mode') == 'markdown'; },\n\n\t\ttoggleMarkdown: function() {\n\t\t\tif (this.isMarkdownMode()) {\n\t\t\t\tthis.set('mode', 'preview');\n\t\t\t} else {\n\t\t\t\tthis.set('mode', 'markdown');\n\t\t\t}\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis._editorModel.off(null, null, this);\n\t\t\tthis.off();\n\t\t},\n\n\t\t_triggerSave: function() {\n\t\t\tthis.trigger('saveEdits', null);\n\t\t},\n\n\t\tconstructor: function SlideEditorModel(opts) {\n\t\t\tthis._editorModel = opts.editorModel;\n\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "/*! jQuery UI - v1.10.3 - 2013-09-17\n * http://jqueryui.com\n * Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.selectable.js, jquery.ui.sortable.js\n * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */\n\n(function( $, undefined ) {\n\n\tvar uuid = 0,\n\t\truniqueId = /^ui-id-\\d+$/;\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n\t$.ui = $.ui || {};\n\n\t$.extend( $.ui, {\n\t\tversion: \"1.10.3\",\n\n\t\tkeyCode: {\n\t\t\tBACKSPACE: 8,\n\t\t\tCOMMA: 188,\n\t\t\tDELETE: 46,\n\t\t\tDOWN: 40,\n\t\t\tEND: 35,\n\t\t\tENTER: 13,\n\t\t\tESCAPE: 27,\n\t\t\tHOME: 36,\n\t\t\tLEFT: 37,\n\t\t\tNUMPAD_ADD: 107,\n\t\t\tNUMPAD_DECIMAL: 110,\n\t\t\tNUMPAD_DIVIDE: 111,\n\t\t\tNUMPAD_ENTER: 108,\n\t\t\tNUMPAD_MULTIPLY: 106,\n\t\t\tNUMPAD_SUBTRACT: 109,\n\t\t\tPAGE_DOWN: 34,\n\t\t\tPAGE_UP: 33,\n\t\t\tPERIOD: 190,\n\t\t\tRIGHT: 39,\n\t\t\tSPACE: 32,\n\t\t\tTAB: 9,\n\t\t\tUP: 38\n\t\t}\n\t});\n\n// plugins\n\t$.fn.extend({\n\t\tfocus: (function( orig ) {\n\t\t\treturn function( delay, fn ) {\n\t\t\t\treturn typeof delay === \"number\" ?\n\t\t\t\t\tthis.each(function() {\n\t\t\t\t\t\tvar elem = this;\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t$( elem ).focus();\n\t\t\t\t\t\t\tif ( fn ) {\n\t\t\t\t\t\t\t\tfn.call( elem );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, delay );\n\t\t\t\t\t}) :\n\t\t\t\t\torig.apply( this, arguments );\n\t\t\t};\n\t\t})( $.fn.focus ),\n\n\t\tscrollParent: function() {\n\t\t\tvar scrollParent;\n\t\t\tif (($.ui.ie && (/(static|relative)/).test(this.css(\"position\"))) || (/absolute/).test(this.css(\"position\"))) {\n\t\t\t\tscrollParent = this.parents().filter(function() {\n\t\t\t\t\treturn (/(relative|absolute|fixed)/).test($.css(this,\"position\")) && (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n\t\t\t\t}).eq(0);\n\t\t\t} else {\n\t\t\t\tscrollParent = this.parents().filter(function() {\n\t\t\t\t\treturn (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n\t\t\t\t}).eq(0);\n\t\t\t}\n\n\t\t\treturn (/fixed/).test(this.css(\"position\")) || !scrollParent.length ? $(document) : scrollParent;\n\t\t},\n\n\t\tzIndex: function( zIndex ) {\n\t\t\tif ( zIndex !== undefined ) {\n\t\t\t\treturn this.css( \"zIndex\", zIndex );\n\t\t\t}\n\n\t\t\tif ( this.length ) {\n\t\t\t\tvar elem = $( this[ 0 ] ), position, value;\n\t\t\t\twhile ( elem.length && elem[ 0 ] !== document ) {\n\t\t\t\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t\t\t\t// This makes behavior of this function consistent across browsers\n\t\t\t\t\t// WebKit always returns auto if the element is positioned\n\t\t\t\t\tposition = elem.css( \"position\" );\n\t\t\t\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\t\t\t\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t\t\t\t// other browsers return a string\n\t\t\t\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\t\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\t\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telem = elem.parent();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t},\n\n\t\tuniqueId: function() {\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( !this.id ) {\n\t\t\t\t\tthis.id = \"ui-id-\" + (++uuid);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tremoveUniqueId: function() {\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( runiqueId.test( this.id ) ) {\n\t\t\t\t\t$( this ).removeAttr( \"id\" );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n// selectors\n\tfunction focusable( element, isTabIndexNotNaN ) {\n\t\tvar map, mapName, img,\n\t\t\tnodeName = element.nodeName.toLowerCase();\n\t\tif ( \"area\" === nodeName ) {\n\t\t\tmap = element.parentNode;\n\t\t\tmapName = map.name;\n\t\t\tif ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\timg = $( \"img[usemap=#\" + mapName + \"]\" )[0];\n\t\t\treturn !!img && visible( img );\n\t\t}\n\t\treturn ( /input|select|textarea|button|object/.test( nodeName ) ?\n\t\t\t!element.disabled :\n\t\t\t\"a\" === nodeName ?\n\t\t\t\telement.href || isTabIndexNotNaN :\n\t\t\t\tisTabIndexNotNaN) &&\n\t\t\t// the element and all of its ancestors must be visible\n\t\t\tvisible( element );\n\t}\n\n\tfunction visible( element ) {\n\t\treturn $.expr.filters.visible( element ) &&\n\t\t\t!$( element ).parents().addBack().filter(function() {\n\t\t\t\treturn $.css( this, \"visibility\" ) === \"hidden\";\n\t\t\t}).length;\n\t}\n\n\t$.extend( $.expr[ \":\" ], {\n\t\tdata: $.expr.createPseudo ?\n\t\t\t$.expr.createPseudo(function( dataName ) {\n\t\t\t\treturn function( elem ) {\n\t\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t\t};\n\t\t\t}) :\n\t\t\t// support: jQuery <1.8\n\t\t\tfunction( elem, i, match ) {\n\t\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t\t},\n\n\t\tfocusable: function( element ) {\n\t\t\treturn focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n\t\t},\n\n\t\ttabbable: function( element ) {\n\t\t\tvar tabIndex = $.attr( element, \"tabindex\" ),\n\t\t\t\tisTabIndexNaN = isNaN( tabIndex );\n\t\t\treturn ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n\t\t}\n\t});\n\n// support: jQuery <1.8\n\tif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n\t\t$.each( [ \"Width\", \"Height\" ], function( i, name ) {\n\t\t\tvar side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n\t\t\t\ttype = name.toLowerCase(),\n\t\t\t\torig = {\n\t\t\t\t\tinnerWidth: $.fn.innerWidth,\n\t\t\t\t\tinnerHeight: $.fn.innerHeight,\n\t\t\t\t\touterWidth: $.fn.outerWidth,\n\t\t\t\t\touterHeight: $.fn.outerHeight\n\t\t\t\t};\n\n\t\t\tfunction reduce( elem, size, border, margin ) {\n\t\t\t\t$.each( side, function() {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n\t\t\t\t\tif ( border ) {\n\t\t\t\t\t\tsize -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n\t\t\t\t\t}\n\t\t\t\t\tif ( margin ) {\n\t\t\t\t\t\tsize -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn size;\n\t\t\t}\n\n\t\t\t$.fn[ \"inner\" + name ] = function( size ) {\n\t\t\t\tif ( size === undefined ) {\n\t\t\t\t\treturn orig[ \"inner\" + name ].call( this );\n\t\t\t\t}\n\n\t\t\t\treturn this.each(function() {\n\t\t\t\t\t$( this ).css( type, reduce( this, size ) + \"px\" );\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t$.fn[ \"outer\" + name] = function( size, margin ) {\n\t\t\t\tif ( typeof size !== \"number\" ) {\n\t\t\t\t\treturn orig[ \"outer\" + name ].call( this, size );\n\t\t\t\t}\n\n\t\t\t\treturn this.each(function() {\n\t\t\t\t\t$( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t}\n\n// support: jQuery <1.8\n\tif ( !$.fn.addBack ) {\n\t\t$.fn.addBack = function( selector ) {\n\t\t\treturn this.add( selector == null ?\n\t\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t\t);\n\t\t};\n\t}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\n\tif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n\t\t$.fn.removeData = (function( removeData ) {\n\t\t\treturn function( key ) {\n\t\t\t\tif ( arguments.length ) {\n\t\t\t\t\treturn removeData.call( this, $.camelCase( key ) );\n\t\t\t\t} else {\n\t\t\t\t\treturn removeData.call( this );\n\t\t\t\t}\n\t\t\t};\n\t\t})( $.fn.removeData );\n\t}\n\n\n\n\n\n// deprecated\n\t$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n\t$.support.selectstart = \"onselectstart\" in document.createElement( \"div\" );\n\t$.fn.extend({\n\t\tdisableSelection: function() {\n\t\t\treturn this.bind( ( $.support.selectstart ? \"selectstart\" : \"mousedown\" ) +\n\t\t\t\t\".ui-disableSelection\", function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t},\n\n\t\tenableSelection: function() {\n\t\t\treturn this.unbind( \".ui-disableSelection\" );\n\t\t}\n\t});\n\n\t$.extend( $.ui, {\n\t\t// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n\t\tplugin: {\n\t\t\tadd: function( module, option, set ) {\n\t\t\t\tvar i,\n\t\t\t\t\tproto = $.ui[ module ].prototype;\n\t\t\t\tfor ( i in set ) {\n\t\t\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t\t\t}\n\t\t\t},\n\t\t\tcall: function( instance, name, args ) {\n\t\t\t\tvar i,\n\t\t\t\t\tset = instance.plugins[ name ];\n\t\t\t\tif ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// only used by resizable\n\t\thasScroll: function( el, a ) {\n\n\t\t\t//If overflow is hidden, the element might have extra content, but the user wants to hide it\n\t\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\") {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\n\t\t\t\thas = false;\n\n\t\t\tif ( el[ scroll ] > 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// TODO: determine which cases actually cause this to happen\n\t\t\t// if the element doesn't have the scroll set, see if it's possible to\n\t\t\t// set the scroll\n\t\t\tel[ scroll ] = 1;\n\t\t\thas = ( el[ scroll ] > 0 );\n\t\t\tel[ scroll ] = 0;\n\t\t\treturn has;\n\t\t}\n\t});\n\n})( jQuery );\n(function( $, undefined ) {\n\n\tvar uuid = 0,\n\t\tslice = Array.prototype.slice,\n\t\t_cleanData = $.cleanData;\n\t$.cleanData = function( elems ) {\n\t\tfor ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n\t\t\ttry {\n\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t// http://bugs.jquery.com/ticket/8235\n\t\t\t} catch( e ) {}\n\t\t}\n\t\t_cleanData( elems );\n\t};\n\n\t$.widget = function( name, base, prototype ) {\n\t\tvar fullName, existingConstructor, constructor, basePrototype,\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\n\t\t\tproxiedPrototype = {},\n\t\t\tnamespace = name.split( \".\" )[ 0 ];\n\n\t\tname = name.split( \".\" )[ 1 ];\n\t\tfullName = namespace + \"-\" + name;\n\n\t\tif ( !prototype ) {\n\t\t\tprototype = base;\n\t\t\tbase = $.Widget;\n\t\t}\n\n\t\t// create selector for plugin\n\t\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\t\treturn !!$.data( elem, fullName );\n\t\t};\n\n\t\t$[ namespace ] = $[ namespace ] || {};\n\t\texistingConstructor = $[ namespace ][ name ];\n\t\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\t\t\t// allow instantiation without \"new\" keyword\n\t\t\tif ( !this._createWidget ) {\n\t\t\t\treturn new constructor( options, element );\n\t\t\t}\n\n\t\t\t// allow instantiation without initializing for simple inheritance\n\t\t\t// must use \"new\" keyword (the code above always passes args)\n\t\t\tif ( arguments.length ) {\n\t\t\t\tthis._createWidget( options, element );\n\t\t\t}\n\t\t};\n\t\t// extend with the existing constructor to carry over any static properties\n\t\t$.extend( constructor, existingConstructor, {\n\t\t\tversion: prototype.version,\n\t\t\t// copy the object used to create the prototype in case we need to\n\t\t\t// redefine the widget later\n\t\t\t_proto: $.extend( {}, prototype ),\n\t\t\t// track widgets that inherit from this widget in case this widget is\n\t\t\t// redefined after a widget inherits from it\n\t\t\t_childConstructors: []\n\t\t});\n\n\t\tbasePrototype = new base();\n\t\t// we need to make the options hash a property directly on the new instance\n\t\t// otherwise we'll modify the options hash on the prototype that we're\n\t\t// inheriting from\n\t\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t\t$.each( prototype, function( prop, value ) {\n\t\t\tif ( !$.isFunction( value ) ) {\n\t\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tproxiedPrototype[ prop ] = (function() {\n\t\t\t\tvar _super = function() {\n\t\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t\t\t},\n\t\t\t\t\t_superApply = function( args ) {\n\t\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t\t\t};\n\t\t\t\treturn function() {\n\t\t\t\t\tvar __super = this._super,\n\t\t\t\t\t\t__superApply = this._superApply,\n\t\t\t\t\t\treturnValue;\n\n\t\t\t\t\tthis._super = _super;\n\t\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\t\tthis._super = __super;\n\t\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\t\treturn returnValue;\n\t\t\t\t};\n\t\t\t})();\n\t\t});\n\t\tconstructor.prototype = $.widget.extend( basePrototype, {\n\t\t\t// TODO: remove support for widgetEventPrefix\n\t\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t\t// don't prefix for widgets that aren't DOM-based\n\t\t\twidgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name\n\t\t}, proxiedPrototype, {\n\t\t\tconstructor: constructor,\n\t\t\tnamespace: namespace,\n\t\t\twidgetName: name,\n\t\t\twidgetFullName: fullName\n\t\t});\n\n\t\t// If this widget is being redefined then we need to find all widgets that\n\t\t// are inheriting from it and redefine all of them so that they inherit from\n\t\t// the new version of this widget. We're essentially trying to replace one\n\t\t// level in the prototype chain.\n\t\tif ( existingConstructor ) {\n\t\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t\t// redefine the child widget using the same prototype that was\n\t\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n\t\t\t});\n\t\t\t// remove the list of existing child constructors from the old constructor\n\t\t\t// so the old child constructors can be garbage collected\n\t\t\tdelete existingConstructor._childConstructors;\n\t\t} else {\n\t\t\tbase._childConstructors.push( constructor );\n\t\t}\n\n\t\t$.widget.bridge( name, constructor );\n\t};\n\n\t$.widget.extend = function( target ) {\n\t\tvar input = slice.call( arguments, 1 ),\n\t\t\tinputIndex = 0,\n\t\t\tinputLength = input.length,\n\t\t\tkey,\n\t\t\tvalue;\n\t\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\t\t\t\t\t// Clone objects\n\t\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\t\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t\t$.widget.extend( {}, value );\n\t\t\t\t\t\t// Copy everything else by reference\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn target;\n\t};\n\n\t$.widget.bridge = function( name, object ) {\n\t\tvar fullName = object.prototype.widgetFullName || name;\n\t\t$.fn[ name ] = function( options ) {\n\t\t\tvar isMethodCall = typeof options === \"string\",\n\t\t\t\targs = slice.call( arguments, 1 ),\n\t\t\t\treturnValue = this;\n\n\t\t\t// allow multiple hashes to be passed on init\n\t\t\toptions = !isMethodCall && args.length ?\n\t\t\t\t$.widget.extend.apply( null, [ options ].concat(args) ) :\n\t\t\t\toptions;\n\n\t\t\tif ( isMethodCall ) {\n\t\t\t\tthis.each(function() {\n\t\t\t\t\tvar methodValue,\n\t\t\t\t\t\tinstance = $.data( this, fullName );\n\t\t\t\t\tif ( !instance ) {\n\t\t\t\t\t\treturn $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n\t\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t\t}\n\t\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n\t\t\t\t\t}\n\t\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\t\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\t\tmethodValue;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.each(function() {\n\t\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\t\tif ( instance ) {\n\t\t\t\t\t\tinstance.option( options || {} )._init();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn returnValue;\n\t\t};\n\t};\n\n\t$.Widget = function( /* options, element */ ) {};\n\t$.Widget._childConstructors = [];\n\n\t$.Widget.prototype = {\n\t\twidgetName: \"widget\",\n\t\twidgetEventPrefix: \"\",\n\t\tdefaultElement: \"<div>\",\n\t\toptions: {\n\t\t\tdisabled: false,\n\n\t\t\t// callbacks\n\t\t\tcreate: null\n\t\t},\n\t\t_createWidget: function( options, element ) {\n\t\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\t\tthis.element = $( element );\n\t\t\tthis.uuid = uuid++;\n\t\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\t\t\tthis.options = $.widget.extend( {},\n\t\t\t\tthis.options,\n\t\t\t\tthis._getCreateOptions(),\n\t\t\t\toptions );\n\n\t\t\tthis.bindings = $();\n\t\t\tthis.hoverable = $();\n\t\t\tthis.focusable = $();\n\n\t\t\tif ( element !== this ) {\n\t\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\t\tthis._on( true, this.element, {\n\t\t\t\t\tremove: function( event ) {\n\t\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.document = $( element.style ?\n\t\t\t\t\t// element within the document\n\t\t\t\t\telement.ownerDocument :\n\t\t\t\t\t// element is window or document\n\t\t\t\t\telement.document || element );\n\t\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n\t\t\t}\n\n\t\t\tthis._create();\n\t\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\t\tthis._init();\n\t\t},\n\t\t_getCreateOptions: $.noop,\n\t\t_getCreateEventData: $.noop,\n\t\t_create: $.noop,\n\t\t_init: $.noop,\n\n\t\tdestroy: function() {\n\t\t\tthis._destroy();\n\t\t\t// we can probably remove the unbind calls in 2.0\n\t\t\t// all event bindings should go through this._on()\n\t\t\tthis.element\n\t\t\t\t.unbind( this.eventNamespace )\n\t\t\t\t// 1.9 BC for #7810\n\t\t\t\t// TODO remove dual storage\n\t\t\t\t.removeData( this.widgetName )\n\t\t\t\t.removeData( this.widgetFullName )\n\t\t\t\t// support: jquery <1.6.3\n\t\t\t\t// http://bugs.jquery.com/ticket/9413\n\t\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\n\t\t\tthis.widget()\n\t\t\t\t.unbind( this.eventNamespace )\n\t\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t\t.removeClass(\n\t\t\t\t\tthis.widgetFullName + \"-disabled \" +\n\t\t\t\t\t\t\"ui-state-disabled\" );\n\n\t\t\t// clean up events and states\n\t\t\tthis.bindings.unbind( this.eventNamespace );\n\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t\t},\n\t\t_destroy: $.noop,\n\n\t\twidget: function() {\n\t\t\treturn this.element;\n\t\t},\n\n\t\toption: function( key, value ) {\n\t\t\tvar options = key,\n\t\t\t\tparts,\n\t\t\t\tcurOption,\n\t\t\t\ti;\n\n\t\t\tif ( arguments.length === 0 ) {\n\t\t\t\t// don't return a reference to the internal hash\n\t\t\t\treturn $.widget.extend( {}, this.options );\n\t\t\t}\n\n\t\t\tif ( typeof key === \"string\" ) {\n\t\t\t\t// handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\t\toptions = {};\n\t\t\t\tparts = key.split( \".\" );\n\t\t\t\tkey = parts.shift();\n\t\t\t\tif ( parts.length ) {\n\t\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t\t}\n\t\t\t\t\tkey = parts.pop();\n\t\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t\t}\n\t\t\t\t\tcurOption[ key ] = value;\n\t\t\t\t} else {\n\t\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t\t}\n\t\t\t\t\toptions[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._setOptions( options );\n\n\t\t\treturn this;\n\t\t},\n\t\t_setOptions: function( options ) {\n\t\t\tvar key;\n\n\t\t\tfor ( key in options ) {\n\t\t\t\tthis._setOption( key, options[ key ] );\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\t_setOption: function( key, value ) {\n\t\t\tthis.options[ key ] = value;\n\n\t\t\tif ( key === \"disabled\" ) {\n\t\t\t\tthis.widget()\n\t\t\t\t\t.toggleClass( this.widgetFullName + \"-disabled ui-state-disabled\", !!value )\n\t\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tenable: function() {\n\t\t\treturn this._setOption( \"disabled\", false );\n\t\t},\n\t\tdisable: function() {\n\t\t\treturn this._setOption( \"disabled\", true );\n\t\t},\n\n\t\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\t\tvar delegateElement,\n\t\t\t\tinstance = this;\n\n\t\t\t// no suppressDisabledCheck flag, shuffle arguments\n\t\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\t\thandlers = element;\n\t\t\t\telement = suppressDisabledCheck;\n\t\t\t\tsuppressDisabledCheck = false;\n\t\t\t}\n\n\t\t\t// no element argument, shuffle and use this.element\n\t\t\tif ( !handlers ) {\n\t\t\t\thandlers = element;\n\t\t\t\telement = this.element;\n\t\t\t\tdelegateElement = this.widget();\n\t\t\t} else {\n\t\t\t\t// accept selectors, DOM elements\n\t\t\t\telement = delegateElement = $( element );\n\t\t\t\tthis.bindings = this.bindings.add( element );\n\t\t\t}\n\n\t\t\t$.each( handlers, function( event, handler ) {\n\t\t\t\tfunction handlerProxy() {\n\t\t\t\t\t// allow widgets to customize the disabled handling\n\t\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t\t.apply( instance, arguments );\n\t\t\t\t}\n\n\t\t\t\t// copy the guid so direct unbinding works\n\t\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t\t}\n\n\t\t\t\tvar match = event.match( /^(\\w+)\\s*(.*)$/ ),\n\t\t\t\t\teventName = match[1] + instance.eventNamespace,\n\t\t\t\t\tselector = match[2];\n\t\t\t\tif ( selector ) {\n\t\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\n\t\t\t\t} else {\n\t\t\t\t\telement.bind( eventName, handlerProxy );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_off: function( element, eventName ) {\n\t\t\teventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) + this.eventNamespace;\n\t\t\telement.unbind( eventName ).undelegate( eventName );\n\t\t},\n\n\t\t_delay: function( handler, delay ) {\n\t\t\tfunction handlerProxy() {\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\t\t\tvar instance = this;\n\t\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t\t},\n\n\t\t_hoverable: function( element ) {\n\t\t\tthis.hoverable = this.hoverable.add( element );\n\t\t\tthis._on( element, {\n\t\t\t\tmouseenter: function( event ) {\n\t\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-hover\" );\n\t\t\t\t},\n\t\t\t\tmouseleave: function( event ) {\n\t\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-hover\" );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_focusable: function( element ) {\n\t\t\tthis.focusable = this.focusable.add( element );\n\t\t\tthis._on( element, {\n\t\t\t\tfocusin: function( event ) {\n\t\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-focus\" );\n\t\t\t\t},\n\t\t\t\tfocusout: function( event ) {\n\t\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-focus\" );\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_trigger: function( type, event, data ) {\n\t\t\tvar prop, orig,\n\t\t\t\tcallback = this.options[ type ];\n\n\t\t\tdata = data || {};\n\t\t\tevent = $.Event( event );\n\t\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\t\ttype :\n\t\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\t\t\t// the original event may come from any element\n\t\t\t// so we need to reset the target on the new event\n\t\t\tevent.target = this.element[ 0 ];\n\n\t\t\t// copy original event properties over to the new event\n\t\t\torig = event.originalEvent;\n\t\t\tif ( orig ) {\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.element.trigger( event, data );\n\t\t\treturn !( $.isFunction( callback ) &&\n\t\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n\t\t\t\tevent.isDefaultPrevented() );\n\t\t}\n\t};\n\n\t$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\t\tif ( typeof options === \"string\" ) {\n\t\t\t\toptions = { effect: options };\n\t\t\t}\n\t\t\tvar hasOptions,\n\t\t\t\teffectName = !options ?\n\t\t\t\t\tmethod :\n\t\t\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\t\t\tdefaultEffect :\n\t\t\t\t\t\toptions.effect || defaultEffect;\n\t\t\toptions = options || {};\n\t\t\tif ( typeof options === \"number\" ) {\n\t\t\t\toptions = { duration: options };\n\t\t\t}\n\t\t\thasOptions = !$.isEmptyObject( options );\n\t\t\toptions.complete = callback;\n\t\t\tif ( options.delay ) {\n\t\t\t\telement.delay( options.delay );\n\t\t\t}\n\t\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\t\telement[ method ]( options );\n\t\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t\t} else {\n\t\t\t\telement.queue(function( next ) {\n\t\t\t\t\t$( this )[ method ]();\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t\t}\n\t\t\t\t\tnext();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n\n})( jQuery );\n(function( $, undefined ) {\n\n\tvar mouseHandled = false;\n\t$( document ).mouseup( function() {\n\t\tmouseHandled = false;\n\t});\n\n\t$.widget(\"ui.mouse\", {\n\t\tversion: \"1.10.3\",\n\t\toptions: {\n\t\t\tcancel: \"input,textarea,button,select,option\",\n\t\t\tdistance: 1,\n\t\t\tdelay: 0\n\t\t},\n\t\t_mouseInit: function() {\n\t\t\tvar that = this;\n\n\t\t\tthis.element\n\t\t\t\t.bind(\"mousedown.\"+this.widgetName, function(event) {\n\t\t\t\t\treturn that._mouseDown(event);\n\t\t\t\t})\n\t\t\t\t.bind(\"click.\"+this.widgetName, function(event) {\n\t\t\t\t\tif (true === $.data(event.target, that.widgetName + \".preventClickEvent\")) {\n\t\t\t\t\t\t$.removeData(event.target, that.widgetName + \".preventClickEvent\");\n\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tthis.started = false;\n\t\t},\n\n\t\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t\t// other instances of mouse\n\t\t_mouseDestroy: function() {\n\t\t\tthis.element.unbind(\".\"+this.widgetName);\n\t\t\tif ( this._mouseMoveDelegate ) {\n\t\t\t\t$(document)\n\t\t\t\t\t.unbind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\n\t\t\t\t\t.unbind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\n\t\t\t}\n\t\t},\n\n\t\t_mouseDown: function(event) {\n\t\t\t// don't let more than one widget handle mouseStart\n\t\t\tif( mouseHandled ) { return; }\n\n\t\t\t// we may have missed mouseup (out of window)\n\t\t\t(this._mouseStarted && this._mouseUp(event));\n\n\t\t\tthis._mouseDownEvent = event;\n\n\t\t\tvar that = this,\n\t\t\t\tbtnIsLeft = (event.which === 1),\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\t\telIsCancel = (typeof this.options.cancel === \"string\" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);\n\t\t\tif (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.mouseDelayMet = !this.options.delay;\n\t\t\tif (!this.mouseDelayMet) {\n\t\t\t\tthis._mouseDelayTimer = setTimeout(function() {\n\t\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t\t}, this.options.delay);\n\t\t\t}\n\n\t\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\t\tthis._mouseStarted = (this._mouseStart(event) !== false);\n\t\t\t\tif (!this._mouseStarted) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Click event may never have fired (Gecko & Opera)\n\t\t\tif (true === $.data(event.target, this.widgetName + \".preventClickEvent\")) {\n\t\t\t\t$.removeData(event.target, this.widgetName + \".preventClickEvent\");\n\t\t\t}\n\n\t\t\t// these delegates are required to keep context\n\t\t\tthis._mouseMoveDelegate = function(event) {\n\t\t\t\treturn that._mouseMove(event);\n\t\t\t};\n\t\t\tthis._mouseUpDelegate = function(event) {\n\t\t\t\treturn that._mouseUp(event);\n\t\t\t};\n\t\t\t$(document)\n\t\t\t\t.bind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\n\t\t\t\t.bind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\n\n\t\t\tevent.preventDefault();\n\n\t\t\tmouseHandled = true;\n\t\t\treturn true;\n\t\t},\n\n\t\t_mouseMove: function(event) {\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {\n\t\t\t\treturn this._mouseUp(event);\n\t\t\t}\n\n\t\t\tif (this._mouseStarted) {\n\t\t\t\tthis._mouseDrag(event);\n\t\t\t\treturn event.preventDefault();\n\t\t\t}\n\n\t\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\t\tthis._mouseStarted =\n\t\t\t\t\t(this._mouseStart(this._mouseDownEvent, event) !== false);\n\t\t\t\t(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));\n\t\t\t}\n\n\t\t\treturn !this._mouseStarted;\n\t\t},\n\n\t\t_mouseUp: function(event) {\n\t\t\t$(document)\n\t\t\t\t.unbind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\n\t\t\t\t.unbind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\n\n\t\t\tif (this._mouseStarted) {\n\t\t\t\tthis._mouseStarted = false;\n\n\t\t\t\tif (event.target === this._mouseDownEvent.target) {\n\t\t\t\t\t$.data(event.target, this.widgetName + \".preventClickEvent\", true);\n\t\t\t\t}\n\n\t\t\t\tthis._mouseStop(event);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_mouseDistanceMet: function(event) {\n\t\t\treturn (Math.max(\n\t\t\t\tMath.abs(this._mouseDownEvent.pageX - event.pageX),\n\t\t\t\tMath.abs(this._mouseDownEvent.pageY - event.pageY)\n\t\t\t) >= this.options.distance\n\t\t\t\t);\n\t\t},\n\n\t\t_mouseDelayMet: function(/* event */) {\n\t\t\treturn this.mouseDelayMet;\n\t\t},\n\n\t\t// These are placeholder methods, to be overriden by extending plugin\n\t\t_mouseStart: function(/* event */) {},\n\t\t_mouseDrag: function(/* event */) {},\n\t\t_mouseStop: function(/* event */) {},\n\t\t_mouseCapture: function(/* event */) { return true; }\n\t});\n\n})(jQuery);\n(function( $, undefined ) {\n\n\t$.widget(\"ui.selectable\", $.ui.mouse, {\n\t\tversion: \"1.10.3\",\n\t\toptions: {\n\t\t\tappendTo: \"body\",\n\t\t\tautoRefresh: true,\n\t\t\tdistance: 0,\n\t\t\tfilter: \"*\",\n\t\t\ttolerance: \"touch\",\n\n\t\t\t// callbacks\n\t\t\tselected: null,\n\t\t\tselecting: null,\n\t\t\tstart: null,\n\t\t\tstop: null,\n\t\t\tunselected: null,\n\t\t\tunselecting: null\n\t\t},\n\t\t_create: function() {\n\t\t\tvar selectees,\n\t\t\t\tthat = this;\n\n\t\t\tthis.element.addClass(\"ui-selectable\");\n\n\t\t\tthis.dragged = false;\n\n\t\t\t// cache selectee children based on filter\n\t\t\tthis.refresh = function() {\n\t\t\t\tselectees = $(that.options.filter, that.element[0]);\n\t\t\t\tselectees.addClass(\"ui-selectee\");\n\t\t\t\tselectees.each(function() {\n\t\t\t\t\tvar $this = $(this),\n\t\t\t\t\t\tpos = $this.offset();\n\t\t\t\t\t$.data(this, \"selectable-item\", {\n\t\t\t\t\t\telement: this,\n\t\t\t\t\t\t$element: $this,\n\t\t\t\t\t\tleft: pos.left,\n\t\t\t\t\t\ttop: pos.top,\n\t\t\t\t\t\tright: pos.left + $this.outerWidth(),\n\t\t\t\t\t\tbottom: pos.top + $this.outerHeight(),\n\t\t\t\t\t\tstartselected: false,\n\t\t\t\t\t\tselected: $this.hasClass(\"ui-selected\"),\n\t\t\t\t\t\tselecting: $this.hasClass(\"ui-selecting\"),\n\t\t\t\t\t\tunselecting: $this.hasClass(\"ui-unselecting\")\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\t\tthis.refresh();\n\n\t\t\tthis.selectees = selectees.addClass(\"ui-selectee\");\n\n\t\t\tthis._mouseInit();\n\n\t\t\tthis.helper = $(\"<div class='ui-selectable-helper'></div>\");\n\t\t},\n\n\t\t_destroy: function() {\n\t\t\tthis.selectees\n\t\t\t\t.removeClass(\"ui-selectee\")\n\t\t\t\t.removeData(\"selectable-item\");\n\t\t\tthis.element\n\t\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled\");\n\t\t\tthis._mouseDestroy();\n\t\t},\n\n\t\t_mouseStart: function(event) {\n\t\t\tvar that = this,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis.opos = [event.pageX, event.pageY];\n\n\t\t\tif (this.options.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectees = $(options.filter, this.element[0]);\n\n\t\t\tthis._trigger(\"start\", event);\n\n\t\t\t$(options.appendTo).append(this.helper);\n\t\t\t// position helper (lasso)\n\t\t\tthis.helper.css({\n\t\t\t\t\"left\": event.pageX,\n\t\t\t\t\"top\": event.pageY,\n\t\t\t\t\"width\": 0,\n\t\t\t\t\"height\": 0\n\t\t\t});\n\n\t\t\tif (options.autoRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\n\t\t\tthis.selectees.filter(\".ui-selected\").each(function() {\n\t\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\t\tselectee.startselected = true;\n\t\t\t\tif (!event.metaKey && !event.ctrlKey) {\n\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\tselectee.selected = false;\n\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(event.target).parents().addBack().each(function() {\n\t\t\t\tvar doSelect,\n\t\t\t\t\tselectee = $.data(this, \"selectable-item\");\n\t\t\t\tif (selectee) {\n\t\t\t\t\tdoSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass(\"ui-selected\");\n\t\t\t\t\tselectee.$element\n\t\t\t\t\t\t.removeClass(doSelect ? \"ui-unselecting\" : \"ui-selected\")\n\t\t\t\t\t\t.addClass(doSelect ? \"ui-selecting\" : \"ui-unselecting\");\n\t\t\t\t\tselectee.unselecting = !doSelect;\n\t\t\t\t\tselectee.selecting = doSelect;\n\t\t\t\t\tselectee.selected = doSelect;\n\t\t\t\t\t// selectable (UN)SELECTING callback\n\t\t\t\t\tif (doSelect) {\n\t\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\n\t\t_mouseDrag: function(event) {\n\n\t\t\tthis.dragged = true;\n\n\t\t\tif (this.options.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar tmp,\n\t\t\t\tthat = this,\n\t\t\t\toptions = this.options,\n\t\t\t\tx1 = this.opos[0],\n\t\t\t\ty1 = this.opos[1],\n\t\t\t\tx2 = event.pageX,\n\t\t\t\ty2 = event.pageY;\n\n\t\t\tif (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }\n\t\t\tif (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }\n\t\t\tthis.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});\n\n\t\t\tthis.selectees.each(function() {\n\t\t\t\tvar selectee = $.data(this, \"selectable-item\"),\n\t\t\t\t\thit = false;\n\n\t\t\t\t//prevent helper from being selected if appendTo: selectable\n\t\t\t\tif (!selectee || selectee.element === that.element[0]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (options.tolerance === \"touch\") {\n\t\t\t\t\thit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );\n\t\t\t\t} else if (options.tolerance === \"fit\") {\n\t\t\t\t\thit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);\n\t\t\t\t}\n\n\t\t\t\tif (hit) {\n\t\t\t\t\t// SELECT\n\t\t\t\t\tif (selectee.selected) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\t\tselectee.selected = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (selectee.unselecting) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\t\t\t\tselectee.unselecting = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (!selectee.selecting) {\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-selecting\");\n\t\t\t\t\t\tselectee.selecting = true;\n\t\t\t\t\t\t// selectable SELECTING callback\n\t\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// UNSELECT\n\t\t\t\t\tif (selectee.selecting) {\n\t\t\t\t\t\tif ((event.metaKey || event.ctrlKey) && selectee.startselected) {\n\t\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-selected\");\n\t\t\t\t\t\t\tselectee.selected = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\t\tif (selectee.startselected) {\n\t\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (selectee.selected) {\n\t\t\t\t\t\tif (!event.metaKey && !event.ctrlKey && !selectee.startselected) {\n\t\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\t\t\tselectee.selected = false;\n\n\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_mouseStop: function(event) {\n\t\t\tvar that = this;\n\n\t\t\tthis.dragged = false;\n\n\t\t\t$(\".ui-unselecting\", this.element[0]).each(function() {\n\t\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\t\tselectee.unselecting = false;\n\t\t\t\tselectee.startselected = false;\n\t\t\t\tthat._trigger(\"unselected\", event, {\n\t\t\t\t\tunselected: selectee.element\n\t\t\t\t});\n\t\t\t});\n\t\t\t$(\".ui-selecting\", this.element[0]).each(function() {\n\t\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\t\tselectee.$element.removeClass(\"ui-selecting\").addClass(\"ui-selected\");\n\t\t\t\tselectee.selecting = false;\n\t\t\t\tselectee.selected = true;\n\t\t\t\tselectee.startselected = true;\n\t\t\t\tthat._trigger(\"selected\", event, {\n\t\t\t\t\tselected: selectee.element\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis._trigger(\"stop\", event);\n\n\t\t\tthis.helper.remove();\n\n\t\t\treturn false;\n\t\t}\n\n\t});\n\n})(jQuery);\n(function( $, undefined ) {\n\n\t/*jshint loopfunc: true */\n\n\tfunction isOverAxis( x, reference, size ) {\n\t\treturn ( x > reference ) && ( x < ( reference + size ) );\n\t}\n\n\tfunction isFloating(item) {\n\t\treturn (/left|right/).test(item.css(\"float\")) || (/inline|table-cell/).test(item.css(\"display\"));\n\t}\n\n\t$.widget(\"ui.sortable\", $.ui.mouse, {\n\t\tversion: \"1.10.3\",\n\t\twidgetEventPrefix: \"sort\",\n\t\tready: false,\n\t\toptions: {\n\t\t\tappendTo: \"parent\",\n\t\t\taxis: false,\n\t\t\tconnectWith: false,\n\t\t\tcontainment: false,\n\t\t\tcursor: \"auto\",\n\t\t\tcursorAt: false,\n\t\t\tdropOnEmpty: true,\n\t\t\tforcePlaceholderSize: false,\n\t\t\tforceHelperSize: false,\n\t\t\tgrid: false,\n\t\t\thandle: false,\n\t\t\thelper: \"original\",\n\t\t\titems: \"> *\",\n\t\t\topacity: false,\n\t\t\tplaceholder: false,\n\t\t\trevert: false,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 20,\n\t\t\tscrollSpeed: 20,\n\t\t\tscope: \"default\",\n\t\t\ttolerance: \"intersect\",\n\t\t\tzIndex: 1000,\n\n\t\t\t// callbacks\n\t\t\tactivate: null,\n\t\t\tbeforeStop: null,\n\t\t\tchange: null,\n\t\t\tdeactivate: null,\n\t\t\tout: null,\n\t\t\tover: null,\n\t\t\treceive: null,\n\t\t\tremove: null,\n\t\t\tsort: null,\n\t\t\tstart: null,\n\t\t\tstop: null,\n\t\t\tupdate: null\n\t\t},\n\t\t_create: function() {\n\n\t\t\tvar o = this.options;\n\t\t\tthis.containerCache = {};\n\t\t\tthis.element.addClass(\"ui-sortable\");\n\n\t\t\t//Get the items\n\t\t\tthis.refresh();\n\n\t\t\t//Let's determine if the items are being displayed horizontally\n\t\t\tthis.floating = this.items.length ? o.axis === \"x\" || isFloating(this.items[0].item) : false;\n\n\t\t\t//Let's determine the parent's offset\n\t\t\tthis.offset = this.element.offset();\n\n\t\t\t//Initialize mouse events for interaction\n\t\t\tthis._mouseInit();\n\n\t\t\t//We're ready to go\n\t\t\tthis.ready = true;\n\n\t\t},\n\n\t\t_destroy: function() {\n\t\t\tthis.element\n\t\t\t\t.removeClass(\"ui-sortable ui-sortable-disabled\");\n\t\t\tthis._mouseDestroy();\n\n\t\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\n\t\t\t\tthis.items[i].item.removeData(this.widgetName + \"-item\");\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_setOption: function(key, value){\n\t\t\tif ( key === \"disabled\" ) {\n\t\t\t\tthis.options[ key ] = value;\n\n\t\t\t\tthis.widget().toggleClass( \"ui-sortable-disabled\", !!value );\n\t\t\t} else {\n\t\t\t\t// Don't call widget base _setOption for disable as it adds ui-state-disabled class\n\t\t\t\t$.Widget.prototype._setOption.apply(this, arguments);\n\t\t\t}\n\t\t},\n\n\t\t_mouseCapture: function(event, overrideHandle) {\n\t\t\tvar currentItem = null,\n\t\t\t\tvalidHandle = false,\n\t\t\t\tthat = this;\n\n\t\t\tif (this.reverting) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif(this.options.disabled || this.options.type === \"static\") {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t//We have to refresh the items data once first\n\t\t\tthis._refreshItems(event);\n\n\t\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\n\t\t\t$(event.target).parents().each(function() {\n\t\t\t\tif($.data(this, that.widgetName + \"-item\") === that) {\n\t\t\t\t\tcurrentItem = $(this);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif($.data(event.target, that.widgetName + \"-item\") === that) {\n\t\t\t\tcurrentItem = $(event.target);\n\t\t\t}\n\n\t\t\tif(!currentItem) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(this.options.handle && !overrideHandle) {\n\t\t\t\t$(this.options.handle, currentItem).find(\"*\").addBack().each(function() {\n\t\t\t\t\tif(this === event.target) {\n\t\t\t\t\t\tvalidHandle = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(!validHandle) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.currentItem = currentItem;\n\t\t\tthis._removeCurrentsFromItems();\n\t\t\treturn true;\n\n\t\t},\n\n\t\t_mouseStart: function(event, overrideHandle, noActivation) {\n\n\t\t\tvar i, body,\n\t\t\t\to = this.options;\n\n\t\t\tthis.currentContainer = this;\n\n\t\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\n\t\t\tthis.refreshPositions();\n\n\t\t\t//Create and append the visible helper\n\t\t\tthis.helper = this._createHelper(event);\n\n\t\t\t//Cache the helper size\n\t\t\tthis._cacheHelperProportions();\n\n\t\t\t/*\n\t\t\t * - Position generation -\n\t\t\t * This block generates everything position related - it's the core of draggables.\n\t\t\t */\n\n\t\t\t//Cache the margins of the original element\n\t\t\tthis._cacheMargins();\n\n\t\t\t//Get the next scrolling parent\n\t\t\tthis.scrollParent = this.helper.scrollParent();\n\n\t\t\t//The element's absolute position on the page minus margins\n\t\t\tthis.offset = this.currentItem.offset();\n\t\t\tthis.offset = {\n\t\t\t\ttop: this.offset.top - this.margins.top,\n\t\t\t\tleft: this.offset.left - this.margins.left\n\t\t\t};\n\n\t\t\t$.extend(this.offset, {\n\t\t\t\tclick: { //Where the click happened, relative to the element\n\t\t\t\t\tleft: event.pageX - this.offset.left,\n\t\t\t\t\ttop: event.pageY - this.offset.top\n\t\t\t\t},\n\t\t\t\tparent: this._getParentOffset(),\n\t\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\n\t\t\t});\n\n\t\t\t// Only after we got the offset, we can change the helper's position to absolute\n\t\t\t// TODO: Still need to figure out a way to make relative sorting possible\n\t\t\tthis.helper.css(\"position\", \"absolute\");\n\t\t\tthis.cssPosition = this.helper.css(\"position\");\n\n\t\t\t//Generate the original position\n\t\t\tthis.originalPosition = this._generatePosition(event);\n\t\t\tthis.originalPageX = event.pageX;\n\t\t\tthis.originalPageY = event.pageY;\n\n\t\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t\t//Cache the former DOM position\n\t\t\tthis.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\n\n\t\t\t//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way\n\t\t\tif(this.helper[0] !== this.currentItem[0]) {\n\t\t\t\tthis.currentItem.hide();\n\t\t\t}\n\n\t\t\t//Create the placeholder\n\t\t\tthis._createPlaceholder();\n\n\t\t\t//Set a containment if given in the options\n\t\t\tif(o.containment) {\n\t\t\t\tthis._setContainment();\n\t\t\t}\n\n\t\t\tif( o.cursor && o.cursor !== \"auto\" ) { // cursor option\n\t\t\t\tbody = this.document.find( \"body\" );\n\n\t\t\t\t// support: IE\n\t\t\t\tthis.storedCursor = body.css( \"cursor\" );\n\t\t\t\tbody.css( \"cursor\", o.cursor );\n\n\t\t\t\tthis.storedStylesheet = $( \"<style>*{ cursor: \"+o.cursor+\" !important; }</style>\" ).appendTo( body );\n\t\t\t}\n\n\t\t\tif(o.opacity) { // opacity option\n\t\t\t\tif (this.helper.css(\"opacity\")) {\n\t\t\t\t\tthis._storedOpacity = this.helper.css(\"opacity\");\n\t\t\t\t}\n\t\t\t\tthis.helper.css(\"opacity\", o.opacity);\n\t\t\t}\n\n\t\t\tif(o.zIndex) { // zIndex option\n\t\t\t\tif (this.helper.css(\"zIndex\")) {\n\t\t\t\t\tthis._storedZIndex = this.helper.css(\"zIndex\");\n\t\t\t\t}\n\t\t\t\tthis.helper.css(\"zIndex\", o.zIndex);\n\t\t\t}\n\n\t\t\t//Prepare scrolling\n\t\t\tif(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== \"HTML\") {\n\t\t\t\tthis.overflowOffset = this.scrollParent.offset();\n\t\t\t}\n\n\t\t\t//Call callbacks\n\t\t\tthis._trigger(\"start\", event, this._uiHash());\n\n\t\t\t//Recache the helper size\n\t\t\tif(!this._preserveHelperProportions) {\n\t\t\t\tthis._cacheHelperProportions();\n\t\t\t}\n\n\n\t\t\t//Post \"activate\" events to possible containers\n\t\t\tif( !noActivation ) {\n\t\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Prepare possible droppables\n\t\t\tif($.ui.ddmanager) {\n\t\t\t\t$.ui.ddmanager.current = this;\n\t\t\t}\n\n\t\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\n\t\t\tthis.helper.addClass(\"ui-sortable-helper\");\n\t\t\tthis._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\t\t\treturn true;\n\n\t\t},\n\n\t\t_mouseDrag: function(event) {\n\t\t\tvar i, item, itemElement, intersection,\n\t\t\t\to = this.options,\n\t\t\t\tscrolled = false;\n\n\t\t\t//Compute the helpers position\n\t\t\tthis.position = this._generatePosition(event);\n\t\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t\tif (!this.lastPositionAbs) {\n\t\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t\t}\n\n\t\t\t//Do scrolling\n\t\t\tif(this.options.scroll) {\n\t\t\t\tif(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== \"HTML\") {\n\n\t\t\t\t\tif((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\n\t\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\n\t\t\t\t\t} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {\n\t\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\n\t\t\t\t\t}\n\n\t\t\t\t\tif((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\n\t\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\n\t\t\t\t\t} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {\n\t\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\n\t\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n\t\t\t\t\t} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\n\t\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\n\t\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n\t\t\t\t\t} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\n\t\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Regenerate the absolute position used for position checks\n\t\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t\t//Set the helper position\n\t\t\tif(!this.options.axis || this.options.axis !== \"y\") {\n\t\t\t\tthis.helper[0].style.left = this.position.left+\"px\";\n\t\t\t}\n\t\t\tif(!this.options.axis || this.options.axis !== \"x\") {\n\t\t\t\tthis.helper[0].style.top = this.position.top+\"px\";\n\t\t\t}\n\n\t\t\t//Rearrange\n\t\t\tfor (i = this.items.length - 1; i >= 0; i--) {\n\n\t\t\t\t//Cache variables and intersection, continue if no intersection\n\t\t\t\titem = this.items[i];\n\t\t\t\titemElement = item.item[0];\n\t\t\t\tintersection = this._intersectsWithPointer(item);\n\t\t\t\tif (!intersection) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Only put the placeholder inside the current Container, skip all\n\t\t\t\t// items form other containers. This works because when moving\n\t\t\t\t// an item from one container to another the\n\t\t\t\t// currentContainer is switched before the placeholder is moved.\n\t\t\t\t//\n\t\t\t\t// Without this moving items in \"sub-sortables\" can cause the placeholder to jitter\n\t\t\t\t// beetween the outer and inner container.\n\t\t\t\tif (item.instance !== this.currentContainer) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// cannot intersect with itself\n\t\t\t\t// no useless actions that have been done before\n\t\t\t\t// no action if the item moved is the parent of the item checked\n\t\t\t\tif (itemElement !== this.currentItem[0] &&\n\t\t\t\t\tthis.placeholder[intersection === 1 ? \"next\" : \"prev\"]()[0] !== itemElement &&\n\t\t\t\t\t!$.contains(this.placeholder[0], itemElement) &&\n\t\t\t\t\t(this.options.type === \"semi-dynamic\" ? !$.contains(this.element[0], itemElement) : true)\n\t\t\t\t\t) {\n\n\t\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\n\n\t\t\t\t\tif (this.options.tolerance === \"pointer\" || this._intersectsWithSides(item)) {\n\t\t\t\t\t\tthis._rearrange(event, item);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Post events to containers\n\t\t\tthis._contactContainers(event);\n\n\t\t\t//Interconnect with droppables\n\t\t\tif($.ui.ddmanager) {\n\t\t\t\t$.ui.ddmanager.drag(this, event);\n\t\t\t}\n\n\t\t\t//Call callbacks\n\t\t\tthis._trigger(\"sort\", event, this._uiHash());\n\n\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t\treturn false;\n\n\t\t},\n\n\t\t_mouseStop: function(event, noPropagation) {\n\n\t\t\tif(!event) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//If we are using droppables, inform the manager about the drop\n\t\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\n\t\t\t\t$.ui.ddmanager.drop(this, event);\n\t\t\t}\n\n\t\t\tif(this.options.revert) {\n\t\t\t\tvar that = this,\n\t\t\t\t\tcur = this.placeholder.offset(),\n\t\t\t\t\taxis = this.options.axis,\n\t\t\t\t\tanimation = {};\n\n\t\t\t\tif ( !axis || axis === \"x\" ) {\n\t\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);\n\t\t\t\t}\n\t\t\t\tif ( !axis || axis === \"y\" ) {\n\t\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);\n\t\t\t\t}\n\t\t\t\tthis.reverting = true;\n\t\t\t\t$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {\n\t\t\t\t\tthat._clear(event);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._clear(event, noPropagation);\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcancel: function() {\n\n\t\t\tif(this.dragging) {\n\n\t\t\t\tthis._mouseUp({ target: null });\n\n\t\t\t\tif(this.options.helper === \"original\") {\n\t\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.currentItem.show();\n\t\t\t\t}\n\n\t\t\t\t//Post deactivating events to containers\n\t\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\t\tthis.containers[i]._trigger(\"deactivate\", null, this._uiHash(this));\n\t\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\t\tthis.containers[i]._trigger(\"out\", null, this._uiHash(this));\n\t\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.placeholder) {\n\t\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\t\t\tif(this.placeholder[0].parentNode) {\n\t\t\t\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\t\t\t\t}\n\t\t\t\tif(this.options.helper !== \"original\" && this.helper && this.helper[0].parentNode) {\n\t\t\t\t\tthis.helper.remove();\n\t\t\t\t}\n\n\t\t\t\t$.extend(this, {\n\t\t\t\t\thelper: null,\n\t\t\t\t\tdragging: false,\n\t\t\t\t\treverting: false,\n\t\t\t\t\t_noFinalSort: null\n\t\t\t\t});\n\n\t\t\t\tif(this.domPosition.prev) {\n\t\t\t\t\t$(this.domPosition.prev).after(this.currentItem);\n\t\t\t\t} else {\n\t\t\t\t\t$(this.domPosition.parent).prepend(this.currentItem);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tserialize: function(o) {\n\n\t\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\t\tstr = [];\n\t\t\to = o || {};\n\n\t\t\t$(items).each(function() {\n\t\t\t\tvar res = ($(o.item || this).attr(o.attribute || \"id\") || \"\").match(o.expression || (/(.+)[\\-=_](.+)/));\n\t\t\t\tif (res) {\n\t\t\t\t\tstr.push((o.key || res[1]+\"[]\")+\"=\"+(o.key && o.expression ? res[1] : res[2]));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(!str.length && o.key) {\n\t\t\t\tstr.push(o.key + \"=\");\n\t\t\t}\n\n\t\t\treturn str.join(\"&\");\n\n\t\t},\n\n\t\ttoArray: function(o) {\n\n\t\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\t\tret = [];\n\n\t\t\to = o || {};\n\n\t\t\titems.each(function() { ret.push($(o.item || this).attr(o.attribute || \"id\") || \"\"); });\n\t\t\treturn ret;\n\n\t\t},\n\n\t\t/* Be careful with the following core functions */\n\t\t_intersectsWith: function(item) {\n\n\t\t\tvar x1 = this.positionAbs.left,\n\t\t\t\tx2 = x1 + this.helperProportions.width,\n\t\t\t\ty1 = this.positionAbs.top,\n\t\t\t\ty2 = y1 + this.helperProportions.height,\n\t\t\t\tl = item.left,\n\t\t\t\tr = l + item.width,\n\t\t\t\tt = item.top,\n\t\t\t\tb = t + item.height,\n\t\t\t\tdyClick = this.offset.click.top,\n\t\t\t\tdxClick = this.offset.click.left,\n\t\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),\n\t\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),\n\t\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\n\n\t\t\tif ( this.options.tolerance === \"pointer\" ||\n\t\t\t\tthis.options.forcePointerForContainers ||\n\t\t\t\t(this.options.tolerance !== \"pointer\" && this.helperProportions[this.floating ? \"width\" : \"height\"] > item[this.floating ? \"width\" : \"height\"])\n\t\t\t\t) {\n\t\t\t\treturn isOverElement;\n\t\t\t} else {\n\n\t\t\t\treturn (l < x1 + (this.helperProportions.width / 2) && // Right Half\n\t\t\t\t\tx2 - (this.helperProportions.width / 2) < r && // Left Half\n\t\t\t\t\tt < y1 + (this.helperProportions.height / 2) && // Bottom Half\n\t\t\t\t\ty2 - (this.helperProportions.height / 2) < b ); // Top Half\n\n\t\t\t}\n\t\t},\n\n\t\t_intersectsWithPointer: function(item) {\n\n\t\t\tvar isOverElementHeight = (this.options.axis === \"x\") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\n\t\t\t\tisOverElementWidth = (this.options.axis === \"y\") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\n\t\t\t\tisOverElement = isOverElementHeight && isOverElementWidth,\n\t\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\t\tif (!isOverElement) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.floating ?\n\t\t\t\t( ((horizontalDirection && horizontalDirection === \"right\") || verticalDirection === \"down\") ? 2 : 1 )\n\t\t\t\t: ( verticalDirection && (verticalDirection === \"down\" ? 2 : 1) );\n\n\t\t},\n\n\t\t_intersectsWithSides: function(item) {\n\n\t\t\tvar isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),\n\t\t\t\tisOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),\n\t\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\t\tif (this.floating && horizontalDirection) {\n\t\t\t\treturn ((horizontalDirection === \"right\" && isOverRightHalf) || (horizontalDirection === \"left\" && !isOverRightHalf));\n\t\t\t} else {\n\t\t\t\treturn verticalDirection && ((verticalDirection === \"down\" && isOverBottomHalf) || (verticalDirection === \"up\" && !isOverBottomHalf));\n\t\t\t}\n\n\t\t},\n\n\t\t_getDragVerticalDirection: function() {\n\t\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\n\t\t\treturn delta !== 0 && (delta > 0 ? \"down\" : \"up\");\n\t\t},\n\n\t\t_getDragHorizontalDirection: function() {\n\t\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\n\t\t\treturn delta !== 0 && (delta > 0 ? \"right\" : \"left\");\n\t\t},\n\n\t\trefresh: function(event) {\n\t\t\tthis._refreshItems(event);\n\t\t\tthis.refreshPositions();\n\t\t\treturn this;\n\t\t},\n\n\t\t_connectWith: function() {\n\t\t\tvar options = this.options;\n\t\t\treturn options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;\n\t\t},\n\n\t\t_getItemsAsjQuery: function(connected) {\n\n\t\t\tvar i, j, cur, inst,\n\t\t\t\titems = [],\n\t\t\t\tqueries = [],\n\t\t\t\tconnectWith = this._connectWith();\n\n\t\t\tif(connectWith && connected) {\n\t\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\t\tcur = $(connectWith[i]);\n\t\t\t\t\tfor ( j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), inst]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tqueries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), this]);\n\n\t\t\tfor (i = queries.length - 1; i >= 0; i--){\n\t\t\t\tqueries[i][0].each(function() {\n\t\t\t\t\titems.push(this);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn $(items);\n\n\t\t},\n\n\t\t_removeCurrentsFromItems: function() {\n\n\t\t\tvar list = this.currentItem.find(\":data(\" + this.widgetName + \"-item)\");\n\n\t\t\tthis.items = $.grep(this.items, function (item) {\n\t\t\t\tfor (var j=0; j < list.length; j++) {\n\t\t\t\t\tif(list[j] === item.item[0]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t},\n\n\t\t_refreshItems: function(event) {\n\n\t\t\tthis.items = [];\n\t\t\tthis.containers = [this];\n\n\t\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\n\t\t\t\titems = this.items,\n\t\t\t\tqueries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],\n\t\t\t\tconnectWith = this._connectWith();\n\n\t\t\tif(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down\n\t\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\t\tcur = $(connectWith[i]);\n\t\t\t\t\tfor (j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\n\t\t\t\t\t\t\tthis.containers.push(inst);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = queries.length - 1; i >= 0; i--) {\n\t\t\t\ttargetData = queries[i][1];\n\t\t\t\t_queries = queries[i][0];\n\n\t\t\t\tfor (j=0, queriesLength = _queries.length; j < queriesLength; j++) {\n\t\t\t\t\titem = $(_queries[j]);\n\n\t\t\t\t\titem.data(this.widgetName + \"-item\", targetData); // Data for target checking (mouse manager)\n\n\t\t\t\t\titems.push({\n\t\t\t\t\t\titem: item,\n\t\t\t\t\t\tinstance: targetData,\n\t\t\t\t\t\twidth: 0, height: 0,\n\t\t\t\t\t\tleft: 0, top: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\trefreshPositions: function(fast) {\n\n\t\t\t//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change\n\t\t\tif(this.offsetParent && this.helper) {\n\t\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t\t}\n\n\t\t\tvar i, item, t, p;\n\n\t\t\tfor (i = this.items.length - 1; i >= 0; i--){\n\t\t\t\titem = this.items[i];\n\n\t\t\t\t//We ignore calculating positions of all connected containers when we're not over them\n\t\t\t\tif(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tt = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\n\n\t\t\t\tif (!fast) {\n\t\t\t\t\titem.width = t.outerWidth();\n\t\t\t\t\titem.height = t.outerHeight();\n\t\t\t\t}\n\n\t\t\t\tp = t.offset();\n\t\t\t\titem.left = p.left;\n\t\t\t\titem.top = p.top;\n\t\t\t}\n\n\t\t\tif(this.options.custom && this.options.custom.refreshContainers) {\n\t\t\t\tthis.options.custom.refreshContainers.call(this);\n\t\t\t} else {\n\t\t\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\t\tp = this.containers[i].element.offset();\n\t\t\t\t\tthis.containers[i].containerCache.left = p.left;\n\t\t\t\t\tthis.containers[i].containerCache.top = p.top;\n\t\t\t\t\tthis.containers[i].containerCache.width\t= this.containers[i].element.outerWidth();\n\t\t\t\t\tthis.containers[i].containerCache.height = this.containers[i].element.outerHeight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_createPlaceholder: function(that) {\n\t\t\tthat = that || this;\n\t\t\tvar className,\n\t\t\t\to = that.options;\n\n\t\t\tif(!o.placeholder || o.placeholder.constructor === String) {\n\t\t\t\tclassName = o.placeholder;\n\t\t\t\to.placeholder = {\n\t\t\t\t\telement: function() {\n\n\t\t\t\t\t\tvar nodeName = that.currentItem[0].nodeName.toLowerCase(),\n\t\t\t\t\t\t\telement = $( \"<\" + nodeName + \">\", that.document[0] )\n\t\t\t\t\t\t\t\t.addClass(className || that.currentItem[0].className+\" ui-sortable-placeholder\")\n\t\t\t\t\t\t\t\t.removeClass(\"ui-sortable-helper\");\n\n\t\t\t\t\t\tif ( nodeName === \"tr\" ) {\n\t\t\t\t\t\t\tthat.currentItem.children().each(function() {\n\t\t\t\t\t\t\t\t$( \"<td>&#160;</td>\", that.document[0] )\n\t\t\t\t\t\t\t\t\t.attr( \"colspan\", $( this ).attr( \"colspan\" ) || 1 )\n\t\t\t\t\t\t\t\t\t.appendTo( element );\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if ( nodeName === \"img\" ) {\n\t\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !className ) {\n\t\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn element;\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function(container, p) {\n\n\t\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that\n\t\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified\n\t\t\t\t\t\tif(className && !o.forcePlaceholderSize) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\n\t\t\t\t\t\tif(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\"paddingTop\")||0, 10) - parseInt(that.currentItem.css(\"paddingBottom\")||0, 10)); }\n\t\t\t\t\t\tif(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\"paddingLeft\")||0, 10) - parseInt(that.currentItem.css(\"paddingRight\")||0, 10)); }\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t//Create the placeholder\n\t\t\tthat.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\n\n\t\t\t//Append it after the actual current item\n\t\t\tthat.currentItem.after(that.placeholder);\n\n\t\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\n\t\t\to.placeholder.update(that, that.placeholder);\n\n\t\t},\n\n\t\t_contactContainers: function(event) {\n\t\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,\n\t\t\t\tinnermostContainer = null,\n\t\t\t\tinnermostIndex = null;\n\n\t\t\t// get innermost container that intersects with item\n\t\t\tfor (i = this.containers.length - 1; i >= 0; i--) {\n\n\t\t\t\t// never consider a container that's located within the item itself\n\t\t\t\tif($.contains(this.currentItem[0], this.containers[i].element[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(this._intersectsWith(this.containers[i].containerCache)) {\n\n\t\t\t\t\t// if we've already found a container and it's more \"inner\" than this, then continue\n\t\t\t\t\tif(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tinnermostContainer = this.containers[i];\n\t\t\t\t\tinnermostIndex = i;\n\n\t\t\t\t} else {\n\t\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\n\t\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\t\tthis.containers[i]._trigger(\"out\", event, this._uiHash(this));\n\t\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// if no intersecting containers found, return\n\t\t\tif(!innermostContainer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// move the item into the container if it's not there already\n\t\t\tif(this.containers.length === 1) {\n\t\t\t\tif (!this.containers[innermostIndex].containerCache.over) {\n\t\t\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t//When entering a new container, we will find the item with the least distance and append our item near it\n\t\t\t\tdist = 10000;\n\t\t\t\titemWithLeastDistance = null;\n\t\t\t\tfloating = innermostContainer.floating || isFloating(this.currentItem);\n\t\t\t\tposProperty = floating ? \"left\" : \"top\";\n\t\t\t\tsizeProperty = floating ? \"width\" : \"height\";\n\t\t\t\tbase = this.positionAbs[posProperty] + this.offset.click[posProperty];\n\t\t\t\tfor (j = this.items.length - 1; j >= 0; j--) {\n\t\t\t\t\tif(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.items[j].item[0] === this.currentItem[0]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcur = this.items[j].item.offset()[posProperty];\n\t\t\t\t\tnearBottom = false;\n\t\t\t\t\tif(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){\n\t\t\t\t\t\tnearBottom = true;\n\t\t\t\t\t\tcur += this.items[j][sizeProperty];\n\t\t\t\t\t}\n\n\t\t\t\t\tif(Math.abs(cur - base) < dist) {\n\t\t\t\t\t\tdist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];\n\t\t\t\t\t\tthis.direction = nearBottom ? \"up\": \"down\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Check if dropOnEmpty is enabled\n\t\t\t\tif(!itemWithLeastDistance && !this.options.dropOnEmpty) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(this.currentContainer === this.containers[innermostIndex]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\titemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\n\t\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\t\tthis.containers[innermostIndex]._trigger(\"change\", event, this._uiHash(this));\n\t\t\t\tthis.currentContainer = this.containers[innermostIndex];\n\n\t\t\t\t//Update the placeholder\n\t\t\t\tthis.options.placeholder.update(this.currentContainer, this.placeholder);\n\n\t\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t\t}\n\n\n\t\t},\n\n\t\t_createHelper: function(event) {\n\n\t\t\tvar o = this.options,\n\t\t\t\thelper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem);\n\n\t\t\t//Add the helper to the DOM if that didn't happen already\n\t\t\tif(!helper.parents(\"body\").length) {\n\t\t\t\t$(o.appendTo !== \"parent\" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\n\t\t\t}\n\n\t\t\tif(helper[0] === this.currentItem[0]) {\n\t\t\t\tthis._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css(\"position\"), top: this.currentItem.css(\"top\"), left: this.currentItem.css(\"left\") };\n\t\t\t}\n\n\t\t\tif(!helper[0].style.width || o.forceHelperSize) {\n\t\t\t\thelper.width(this.currentItem.width());\n\t\t\t}\n\t\t\tif(!helper[0].style.height || o.forceHelperSize) {\n\t\t\t\thelper.height(this.currentItem.height());\n\t\t\t}\n\n\t\t\treturn helper;\n\n\t\t},\n\n\t\t_adjustOffsetFromHelper: function(obj) {\n\t\t\tif (typeof obj === \"string\") {\n\t\t\t\tobj = obj.split(\" \");\n\t\t\t}\n\t\t\tif ($.isArray(obj)) {\n\t\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\n\t\t\t}\n\t\t\tif (\"left\" in obj) {\n\t\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t\t}\n\t\t\tif (\"right\" in obj) {\n\t\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t\t}\n\t\t\tif (\"top\" in obj) {\n\t\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t\t}\n\t\t\tif (\"bottom\" in obj) {\n\t\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t\t}\n\t\t},\n\n\t\t_getParentOffset: function() {\n\n\n\t\t\t//Get the offsetParent and cache its position\n\t\t\tthis.offsetParent = this.helper.offsetParent();\n\t\t\tvar po = this.offsetParent.offset();\n\n\t\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\n\t\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\n\t\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n\t\t\tif(this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t\t}\n\n\t\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this information\n\t\t\t// with an ugly IE fix\n\t\t\tif( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\n\t\t\t\tpo = { top: 0, left: 0 };\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"),10) || 0),\n\t\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"),10) || 0)\n\t\t\t};\n\n\t\t},\n\n\t\t_getRelativeOffset: function() {\n\n\t\t\tif(this.cssPosition === \"relative\") {\n\t\t\t\tvar p = this.currentItem.position();\n\t\t\t\treturn {\n\t\t\t\t\ttop: p.top - (parseInt(this.helper.css(\"top\"),10) || 0) + this.scrollParent.scrollTop(),\n\t\t\t\t\tleft: p.left - (parseInt(this.helper.css(\"left\"),10) || 0) + this.scrollParent.scrollLeft()\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn { top: 0, left: 0 };\n\t\t\t}\n\n\t\t},\n\n\t\t_cacheMargins: function() {\n\t\t\tthis.margins = {\n\t\t\t\tleft: (parseInt(this.currentItem.css(\"marginLeft\"),10) || 0),\n\t\t\t\ttop: (parseInt(this.currentItem.css(\"marginTop\"),10) || 0)\n\t\t\t};\n\t\t},\n\n\t\t_cacheHelperProportions: function() {\n\t\t\tthis.helperProportions = {\n\t\t\t\twidth: this.helper.outerWidth(),\n\t\t\t\theight: this.helper.outerHeight()\n\t\t\t};\n\t\t},\n\n\t\t_setContainment: function() {\n\n\t\t\tvar ce, co, over,\n\t\t\t\to = this.options;\n\t\t\tif(o.containment === \"parent\") {\n\t\t\t\to.containment = this.helper[0].parentNode;\n\t\t\t}\n\t\t\tif(o.containment === \"document\" || o.containment === \"window\") {\n\t\t\t\tthis.containment = [\n\t\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t\t$(o.containment === \"document\" ? document : window).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t\t($(o.containment === \"document\" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tif(!(/^(document|window|parent)$/).test(o.containment)) {\n\t\t\t\tce = $(o.containment)[0];\n\t\t\t\tco = $(o.containment).offset();\n\t\t\t\tover = ($(ce).css(\"overflow\") !== \"hidden\");\n\n\t\t\t\tthis.containment = [\n\t\t\t\t\tco.left + (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingLeft\"),10) || 0) - this.margins.left,\n\t\t\t\t\tco.top + (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingTop\"),10) || 0) - this.margins.top,\n\t\t\t\t\tco.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingRight\"),10) || 0) - this.helperProportions.width - this.margins.left,\n\t\t\t\t\tco.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingBottom\"),10) || 0) - this.helperProportions.height - this.margins.top\n\t\t\t\t];\n\t\t\t}\n\n\t\t},\n\n\t\t_convertPositionTo: function(d, pos) {\n\n\t\t\tif(!pos) {\n\t\t\t\tpos = this.position;\n\t\t\t}\n\t\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\n\t\t\t\tscrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\t\treturn {\n\t\t\t\ttop: (\n\t\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\n\t\t\t\t\t),\n\t\t\t\tleft: (\n\t\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\n\t\t\t\t\t)\n\t\t\t};\n\n\t\t},\n\n\t\t_generatePosition: function(event) {\n\n\t\t\tvar top, left,\n\t\t\t\to = this.options,\n\t\t\t\tpageX = event.pageX,\n\t\t\t\tpageY = event.pageY,\n\t\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\t\t// This is another very weird special case that only happens for relative elements:\n\t\t\t// 1. If the css position is relative\n\t\t\t// 2. and the scroll parent is the document or similar to the offset parent\n\t\t\t// we have to refresh the relative offset during the scroll so there are no jumps\n\t\t\tif(this.cssPosition === \"relative\" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {\n\t\t\t\tthis.offset.relative = this._getRelativeOffset();\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * - Position constraining -\n\t\t\t * Constrain the position to a mix of grid, containment.\n\t\t\t */\n\n\t\t\tif(this.originalPosition) { //If we are not dragging yet, we won't check for options\n\n\t\t\t\tif(this.containment) {\n\t\t\t\t\tif(event.pageX - this.offset.click.left < this.containment[0]) {\n\t\t\t\t\t\tpageX = this.containment[0] + this.offset.click.left;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.pageY - this.offset.click.top < this.containment[1]) {\n\t\t\t\t\t\tpageY = this.containment[1] + this.offset.click.top;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.pageX - this.offset.click.left > this.containment[2]) {\n\t\t\t\t\t\tpageX = this.containment[2] + this.offset.click.left;\n\t\t\t\t\t}\n\t\t\t\t\tif(event.pageY - this.offset.click.top > this.containment[3]) {\n\t\t\t\t\t\tpageY = this.containment[3] + this.offset.click.top;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(o.grid) {\n\t\t\t\t\ttop = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\n\t\t\t\t\tpageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\t\tleft = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\n\t\t\t\t\tpageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttop: (\n\t\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t\t\tthis.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\t\t\tthis.offset.relative.top\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\n\t\t\t\t\t),\n\t\t\t\tleft: (\n\t\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\t\t\tthis.offset.relative.left\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\n\t\t\t\t\t)\n\t\t\t};\n\n\t\t},\n\n\t\t_rearrange: function(event, i, a, hardRefresh) {\n\n\t\t\ta ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === \"down\" ? i.item[0] : i.item[0].nextSibling));\n\n\t\t\t//Various things done here to improve the performance:\n\t\t\t// 1. we create a setTimeout, that calls refreshPositions\n\t\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\n\t\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same\n\t\t\t// 4. this lets only the last addition to the timeout stack through\n\t\t\tthis.counter = this.counter ? ++this.counter : 1;\n\t\t\tvar counter = this.counter;\n\n\t\t\tthis._delay(function() {\n\t\t\t\tif(counter === this.counter) {\n\t\t\t\t\tthis.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\n\t\t_clear: function(event, noPropagation) {\n\n\t\t\tthis.reverting = false;\n\t\t\t// We delay all events that have to be triggered to after the point where the placeholder has been removed and\n\t\t\t// everything else normalized again\n\t\t\tvar i,\n\t\t\t\tdelayedTriggers = [];\n\n\t\t\t// We first have to update the dom position of the actual currentItem\n\t\t\t// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)\n\t\t\tif(!this._noFinalSort && this.currentItem.parent().length) {\n\t\t\t\tthis.placeholder.before(this.currentItem);\n\t\t\t}\n\t\t\tthis._noFinalSort = null;\n\n\t\t\tif(this.helper[0] === this.currentItem[0]) {\n\t\t\t\tfor(i in this._storedCSS) {\n\t\t\t\t\tif(this._storedCSS[i] === \"auto\" || this._storedCSS[i] === \"static\") {\n\t\t\t\t\t\tthis._storedCSS[i] = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t\t} else {\n\t\t\t\tthis.currentItem.show();\n\t\t\t}\n\n\t\t\tif(this.fromOutside && !noPropagation) {\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"receive\", event, this._uiHash(this.fromOutside)); });\n\t\t\t}\n\t\t\tif((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(\".ui-sortable-helper\")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"update\", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\n\t\t\t}\n\n\t\t\t// Check if the items Container has Changed and trigger appropriate\n\t\t\t// events.\n\t\t\tif (this !== this.currentContainer) {\n\t\t\t\tif(!noPropagation) {\n\t\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"remove\", event, this._uiHash()); });\n\t\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"receive\", event, this._uiHash(this)); };  }).call(this, this.currentContainer));\n\t\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"update\", event, this._uiHash(this));  }; }).call(this, this.currentContainer));\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t//Post events to containers\n\t\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tif(!noPropagation) {\n\t\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"deactivate\", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\n\t\t\t\t}\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"out\", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Do what was originally in plugins\n\t\t\tif ( this.storedCursor ) {\n\t\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\n\t\t\t\tthis.storedStylesheet.remove();\n\t\t\t}\n\t\t\tif(this._storedOpacity) {\n\t\t\t\tthis.helper.css(\"opacity\", this._storedOpacity);\n\t\t\t}\n\t\t\tif(this._storedZIndex) {\n\t\t\t\tthis.helper.css(\"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex);\n\t\t\t}\n\n\t\t\tthis.dragging = false;\n\t\t\tif(this.cancelHelperRemoval) {\n\t\t\t\tif(!noPropagation) {\n\t\t\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\n\t\t\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\n\t\t\t\t\t\tdelayedTriggers[i].call(this, event);\n\t\t\t\t\t} //Trigger all delayed events\n\t\t\t\t\tthis._trigger(\"stop\", event, this._uiHash());\n\t\t\t\t}\n\n\t\t\t\tthis.fromOutside = false;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif(!noPropagation) {\n\t\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\n\t\t\t}\n\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\n\t\t\tif(this.helper[0] !== this.currentItem[0]) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\t\t\tthis.helper = null;\n\n\t\t\tif(!noPropagation) {\n\t\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\n\t\t\t\t\tdelayedTriggers[i].call(this, event);\n\t\t\t\t} //Trigger all delayed events\n\t\t\t\tthis._trigger(\"stop\", event, this._uiHash());\n\t\t\t}\n\n\t\t\tthis.fromOutside = false;\n\t\t\treturn true;\n\n\t\t},\n\n\t\t_trigger: function() {\n\t\t\tif ($.Widget.prototype._trigger.apply(this, arguments) === false) {\n\t\t\t\tthis.cancel();\n\t\t\t}\n\t\t},\n\n\t\t_uiHash: function(_inst) {\n\t\t\tvar inst = _inst || this;\n\t\t\treturn {\n\t\t\t\thelper: inst.helper,\n\t\t\t\tplaceholder: inst.placeholder || $([]),\n\t\t\t\tposition: inst.position,\n\t\t\t\toriginalPosition: inst.originalPosition,\n\t\t\t\toffset: inst.positionAbs,\n\t\t\t\titem: inst.currentItem,\n\t\t\t\tsender: _inst ? _inst.element : null\n\t\t\t};\n\t\t}\n\n\t});\n\n})(jQuery);\n\ndefine(\"jqueryui\", [\"jquery\"], function(){});\n\n",
    "/**\n * jquery.multisortable.js - v0.2\n * https://github.com/shvetsgroup/jquery.multisortable\n *\n * Author: Ethan Atlakson, Jay Hayes, Gabriel Such, Alexander Shvets\n * Last Revision 3/16/2012\n * multi-selectable, multi-sortable jQuery plugin\n */\n\n!function($) {\n\n\t$.fn.multiselectable = function(options) {\n\t\tif (!options) {\n\t\t\toptions = {}\n\t\t}\n\t\toptions = $.extend({}, $.fn.multiselectable.defaults, options);\n\n\t\tfunction mouseDown(e) {\n\t\t\tvar item = $(this),\n\t\t\t\tparent = item.parent(),\n\t\t\t\tmyIndex = item.index();\n\n\t\t\tvar prev = parent.find('.multiselectable-previous');\n\t\t\t// If no previous selection found, start selecting from first selected item.\n\t\t\tprev = prev.length ? prev : $(parent.find('.' + options.selectedClass)[0]).addClass('multiselectable-previous');\n\t\t\tvar prevIndex = prev.index();\n\n\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\tif (item.hasClass(options.selectedClass)) {\n\t\t\t\t\titem.removeClass(options.selectedClass).removeClass('multiselectable-previous')\n\t\t\t\t\tif (item.not('.child').length) {\n\t\t\t\t\t\titem.nextUntil(':not(.child)').removeClass(options.selectedClass);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tparent.find('.multiselectable-previous').removeClass('multiselectable-previous');\n\t\t\t\t\titem.addClass(options.selectedClass).addClass('multiselectable-previous')\n\t\t\t\t\tif (item.not('.child').length) {\n\t\t\t\t\t\titem.nextUntil(':not(.child)').addClass(options.selectedClass);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.shiftKey) {\n\t\t\t\tvar last_shift_range = parent.find('.multiselectable-shift');\n\t\t\t\tlast_shift_range.removeClass(options.selectedClass).removeClass('multiselectable-shift');\n\n\t\t\t\tvar shift_range;\n\t\t\t\tif (prevIndex < myIndex) {\n\t\t\t\t\tshift_range = item.prevUntil('.multiselectable-previous').add(prev).add(item);\n\t\t\t\t}\n\t\t\t\telse if (prevIndex > myIndex) {\n\t\t\t\t\tshift_range = item.nextUntil('.multiselectable-previous').add(prev).add(item);\n\t\t\t\t}\n\t\t\t\tshift_range.addClass(options.selectedClass).addClass('multiselectable-shift');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tparent.find('.multiselectable-shift').removeClass('multiselectable-shift');\n\t\t\t}\n\n\t\t\tif (!e.ctrlKey && !e.metaKey && !e.shiftKey) {\n\t\t\t\tparent.find('.multiselectable-previous').removeClass('multiselectable-previous');\n\t\t\t\tif (!item.hasClass(options.selectedClass)) {\n\t\t\t\t\tparent.find('.' + options.selectedClass).removeClass(options.selectedClass);\n\t\t\t\t\titem.addClass(options.selectedClass).addClass('multiselectable-previous');\n\t\t\t\t\tif (item.not('.child').length) {\n\t\t\t\t\t\titem.nextUntil(':not(.child)').addClass(options.selectedClass);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.mousedown(e, item);\n\t\t}\n\n\t\tfunction click(e) {\n\t\t\tif ( $(this).is('.ui-draggable-dragging') ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar item = $(this),\tparent = item.parent();\n\n\t\t\t// If item wasn't draged and is not multiselected, it should reset selection for other items.\n\t\t\tif (!e.ctrlKey && !e.metaKey && !e.shiftKey) {\n\t\t\t\tparent.find('.multiselectable-previous').removeClass('multiselectable-previous');\n\t\t\t\tparent.find('.' + options.selectedClass).removeClass(options.selectedClass);\n\t\t\t\titem.addClass(options.selectedClass).addClass('multiselectable-previous');\n\t\t\t\tif (item.not('.child').length) {\n\t\t\t\t\titem.nextUntil(':not(.child)').addClass(options.selectedClass);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.click(e, item);\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar list = $(this);\n\n\t\t\tif (!list.data('multiselectable')) {\n\t\t\t\tlist.data('multiselectable', true)\n\t\t\t\t\t.delegate(options.items, 'mousedown', mouseDown)\n\t\t\t\t\t.delegate(options.items, 'click', click)\n\t\t\t\t\t.disableSelection();\n\t\t\t}\n\t\t})\n\t};\n\n\t$.fn.multiselectable.defaults = {\n\t\tclick: function(event, elem) {\n\t\t},\n\t\tmousedown: function() {},\n\t\tselectedClass: 'ui-selected',\n\t\titems: 'li'\n\t};\n\n\n\t$.fn.multisortable = function(options) {\n\t\tif (!options) {\n\t\t\toptions = {}\n\t\t}\n\t\tvar settings = $.extend({}, $.fn.multisortable.defaults, options);\n\n\t\tfunction regroup(item, list) {\n\t\t\tif (list.find('.' + settings.selectedClass).length > 0) {\n\t\t\t\tvar myIndex = item.data('i');\n\n\t\t\t\tvar itemsBefore = list.find('.' + settings.selectedClass).filter(function() {\n\t\t\t\t\treturn $(this).data('i') < myIndex\n\t\t\t\t}).css({\n\t\t\t\t\t\tposition: '',\n\t\t\t\t\t\twidth: '',\n\t\t\t\t\t\tleft: '',\n\t\t\t\t\t\ttop: '',\n\t\t\t\t\t\tzIndex: ''\n\t\t\t\t\t});\n\n\t\t\t\titem.before(itemsBefore);\n\n\t\t\t\tvar itemsAfter = list.find('.' + settings.selectedClass).filter(function() {\n\t\t\t\t\treturn $(this).data('i') > myIndex\n\t\t\t\t}).css({\n\t\t\t\t\t\tposition: '',\n\t\t\t\t\t\twidth: '',\n\t\t\t\t\t\tleft: '',\n\t\t\t\t\t\ttop: '',\n\t\t\t\t\t\tzIndex: ''\n\t\t\t\t\t});\n\n\t\t\t\titem.after(itemsAfter);\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\titemsAfter.add(itemsBefore).addClass(settings.selectedClass);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar list = $(this);\n\n\t\t\t//enable multi-selection\n\t\t\tlist.multiselectable({\n\t\t\t\tselectedClass: settings.selectedClass,\n\t\t\t\tclick: settings.click,\n\t\t\t\titems: settings.items,\n\t\t\t\tmousedown: settings.mousedown\n\t\t\t});\n\n\t\t\t//enable sorting\n\t\t\toptions.cancel = settings.items + ':not(.' + settings.selectedClass + ')';\n\t\t\toptions.placeholder = settings.placeholder;\n\t\t\toptions.start = function(event, ui) {\n\t\t\t\tif (ui.item.hasClass(settings.selectedClass)) {\n\t\t\t\t\tvar parent = ui.item.parent();\n\n\t\t\t\t\t//assign indexes to all selected items\n\t\t\t\t\tparent.find('.' + settings.selectedClass).each(function(i) {\n\t\t\t\t\t\t$(this).data('i', i);\n\t\t\t\t\t});\n\n\t\t\t\t\t// adjust placeholder size to be size of items\n\t\t\t\t\tvar height = parent.find('.' + settings.selectedClass).length * ui.item.outerHeight();\n\t\t\t\t\tui.placeholder.height(height);\n\t\t\t\t}\n\n\t\t\t\tsettings.start(event, ui);\n\t\t\t};\n\n\t\t\toptions.stop = function(event, ui) {\n\t\t\t\tregroup(ui.item, ui.item.parent());\n\t\t\t\tsettings.stop(event, ui);\n\t\t\t};\n\n\t\t\toptions.sort = function(event, ui) {\n\t\t\t\tvar parent = ui.item.parent(),\n\t\t\t\t\tmyIndex = ui.item.data('i'),\n\t\t\t\t\ttop = parseInt(ui.item.css('top').replace('px', '')),\n\t\t\t\t\tleft = parseInt(ui.item.css('left').replace('px', ''));\n\n\t\t\t\t// fix to keep compatibility using prototype.js and jquery together\n\t\t\t\tif (typeof []._reverse == 'undefined') {\n\t\t\t\t\t$.fn.reverse = Array.prototype.reverse;\n\t\t\t\t} else {\n\t\t\t\t\t$.fn.reverse = Array.prototype._reverse;\n\t\t\t\t}\n\n\t\t\t\tvar height = 0;\n\t\t\t\t$('.' + settings.selectedClass, parent).filter(function() {\n\t\t\t\t\treturn $(this).data('i') < myIndex;\n\t\t\t\t}).reverse().each(function() {\n\t\t\t\t\t\theight += $(this).outerHeight();\n\t\t\t\t\t\t$(this).css({\n\t\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\t\ttop: top - height,\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tzIndex: 1000,\n\t\t\t\t\t\t\twidth: ui.item.width()\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\n\t\t\t\theight = ui.item.outerHeight();\n\t\t\t\t$('.' + settings.selectedClass, parent).filter(function() {\n\t\t\t\t\treturn $(this).data('i') > myIndex;\n\t\t\t\t}).each(function() {\n\t\t\t\t\t\tvar item = $(this);\n\t\t\t\t\t\titem.css({\n\t\t\t\t\t\t\tleft: left,\n\t\t\t\t\t\t\ttop: top + height,\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tzIndex: 1000,\n\t\t\t\t\t\t\twidth: ui.item.width()\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\theight += item.outerHeight();\n\t\t\t\t\t});\n\n\t\t\t\tsettings.sort(event, ui);\n\t\t\t};\n\n\t\t\toptions.receive = function(event, ui) {\n\t\t\t\tregroup(ui.item, ui.sender);\n\t\t\t\tsettings.receive(event, ui);\n\t\t\t};\n\n\t\t\tlist.sortable(options).disableSelection();\n\t\t})\n\t};\n\n\t$.fn.multisortable.defaults = {\n\t\tstart: function(event, ui) {\n\t\t},\n\t\tstop: function(event, ui) {\n\t\t},\n\t\tsort: function(event, ui) {\n\t\t},\n\t\treceive: function(event, ui) {\n\t\t},\n\t\tclick: function(event, elem) {\n\t\t},\n\t\tselectedClass: 'ui-selected',\n\t\tplaceholder: 'placeholder',\n\t\titems: 'li'\n\t};\n\n}(jQuery);\ndefine(\"jquery.multisortable\", [\"jquery\",\"jqueryui\"], function(){});\n\n",
    "define('strut/slide_snapshot/SlideDrawer',['strut/deck/Utils'],\n\tfunction(DeckUtils) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * Slide snapshot drawer. Paints all elements on little slide thumbnail in slide well.\n\t\t *\n\t\t * @param {Slide} model\n\t\t * @param {CanvasRenderingContext2D} g2d\n\t\t * @param {ServiceRegistry} registry\n\t\t * @constructor\n\t\t */\n\t\tfunction SlideDrawer(model, $el, size) {\n\t\t\tthis.$el = $el;\n\t\t\tthis.model = model;\n\n\t\t\tthis.$el.css(config.slide.size);\n\n\t\t\tthis._template = JST['strut.slide_snapshot/SlideDrawer'];\n\n\t\t\tthis.setSize(size);\n\n\t\t\tthis.render = this.render.bind(this);\n\t\t\tthis.render = _.debounce(this.render, 250);\n\n\t\t\tthis.model.on('contentsChanged', this.render, this);\n\t\t}\n\n\t\tSlideDrawer.prototype = {\n\t\t\trender: function() {\n\t\t\t\tthis.$el.html(this._template(this.model.attributes));\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\trescale: function() {\n\t\t\t\tthis.$el.css(window.browserPrefix + 'transform',\n\t\t\t\t\t'scale(' + this.scale.x + ',' + this.scale.y + ')');\n\t\t\t},\n\n\t\t\tapplyBackground: function(model, deck, opts) {\n\t\t\t\tDeckUtils.applyBackground(this.$el, model, deck, opts);\n\t\t\t},\n\n\t\t\tdispose: function() {\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\t},\n\n\t\t\tsetSize: function(size) {\n\t\t\t\tif (size) {\n\t\t\t\t\tthis.size = size;\n\t\t\t\t\tthis.scale = {\n\t\t\t\t\t\tx: this.size.width / config.slide.size.width,\n\t\t\t\t\t\ty: this.size.height / config.slide.size.height\n\t\t\t\t\t};\n\t\t\t\t\tthis.rescale();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn SlideDrawer;\n\t});\n\n",
    "\n",
    "define('strut/slide_snapshot/SlideSnapshot',['libs/backbone',\n\t'./SlideDrawer',\n\t'css!styles/slide_snapshot/slideSnapshot.css',\n\t'strut/deck/Utils',\n\t\"strut/editor/GlobalEvents\"],\n\tfunction(Backbone, SlideDrawer, css, DeckUtils, key) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * This class is responsible for creating little slide previews on the left of the editor.\n\t\t *\n\t\t * @class SlideSnapshot\n\t\t */\n\t\treturn Backbone.View.extend({\n\t\t\tclassName: 'slideSnapshot',\n\t\t\tevents: {\n\t\t\t\t'select': '_selected',\n\t\t\t\t'click .removeBtn': '_removeClicked',\n\t\t\t\t'mousedown .removeBtn': '_removePressed',\n\t\t\t\tdestroyed: 'dispose'\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize slide snapshot view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis.model.on('change:selected', this._selectedChanged, this);\n\t\t\t\tthis.model.on('change:active', this._activeChanged, this);\n\t\t\t\tthis.model.on('dispose', this.dispose, this);\n\t\t\t\tthis.model.on('change:background', this._bgChanged, this);\n\t\t\t\tthis.model.on('change:surface', this._bgChanged, this);\n\t\t\t\tthis.options.deck.on('change:background', this._bgChanged, this);\n\t\t\t\tthis.options.deck.on('change:surface', this._bgChanged, this);\n\n\t\t\t\tthis._template = JST['strut.slide_snapshot/SlideSnapshot'];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: element selection is being changed by user.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @param {{selected: boolean, active: boolean}} options Whether or not element should be selected and active.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selected: function(e, options) {\n\t\t\t\tif (options.selected) {\n\t\t\t\t\tif (options.active) {\n\t\t\t\t\t\tthis.model.set('active', true, options);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.model.set('selected', true, options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.model.set('selected', false, options);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide model's selection change.\n\t\t\t *\n\t\t\t * @param {Slide} model\n\t\t\t * @param {boolean} value\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectedChanged: function(model, value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis.$el.addClass('ui-selected');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.$el.removeClass('ui-selected');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide model's \"active\" attribute change.\n\t\t\t *\n\t\t\t * @param {Slide} model\n\t\t\t * @param {boolean} value\n\t\t\t * @private\n\t\t\t */\n\t\t\t_activeChanged: function(model, value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis.$el.addClass('active');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.$el.removeClass('active');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide background being changed.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_bgChanged: function() {\n\t\t\t\tthis._slideDrawer.applyBackground(this.model, this.options.deck, {surfaceForDefault: true});\n\t\t\t\t// this.$el.css('background-image', bg.styles[0]);\n\t\t\t\t// this.$el.css('background-image', bg.styles[1]);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render slide snapshot.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tif (this._slideDrawer) {\n\t\t\t\t\tthis._slideDrawer.dispose();\n\t\t\t\t}\n\n\t\t\t\tthis.$el.html(this._template(this.model.attributes));\n\t\t\t\tvar $el = this.$el.find('.slideDrawer');\n\t\t\t\tthis._slideDrawer = new SlideDrawer(this.model, $el, {width: 170, height: 128});\n\t\t\t\tvar self = this;\n\t\t\t\tself._slideDrawer.render();\n\n\t\t\t\tif (this.model.get('selected')) {\n\t\t\t\t\tthis.$el.addClass('ui-selected');\n\t\t\t\t}\n\n\t\t\t\tif (this.model.get('active')) {\n\t\t\t\t\tthis.$el.addClass('active');\n\t\t\t\t}\n\n\t\t\t\tthis._bgChanged();\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user has pressed X button.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_removeClicked: function(e) {\n\t\t\t\tthis.remove(true);\n\t\t\t\te.stopPropagation();\n\t\t\t},\n\n\t\t\t_removePressed: function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove slide from the presentation.\n\t\t\t *\n\t\t\t * @param {boolean} removeModel\n\t\t\t */\n\t\t\tremove: function(removeModel) {\n\t\t\t\tthis._slideDrawer.dispose();\n\t\t\t\tthis.off();\n\t\t\t\tthis.$el.data('jsView', null);\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\t\tthis.options.deck.off(null, null, this);\n\t\t\t\tBackbone.View.prototype.remove.apply(this, arguments);\n\n\t\t\t\tif (removeModel) {\n\t\t\t\t\tthis.options.deck.remove(this.model);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Dispose slide snapshot.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tif (!this.disposed) {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t\tthis.remove();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tconstructor: function SlideSnapshot() {\n\t\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "/**\nA basic queue abstraction.\n\n@author Matt Crinklaw\n*/\ndefine('common/Queue',[],function() {\n\tfunction Queue() {\n\t\tthis._queue = [];\n\t}\n\t\n\tQueue.prototype = {\n\t\ttake: function() {\n\t\t\tif (this._queue.length != 0)\n\t\t\t\treturn this._queue.shift();\n\t\t\telse\n\t\t\t\treturn null;\n\t\t},\n\t\t\n\t\tenqueue: function(item) {\n\t\t\tthis._queue.push(item);\n\t\t}\n\t};\n\t\n\tfunction create() {\n\t\treturn new Queue();\n\t}\n\t\n\treturn { create: create };\n});\n",
    "/**\nThrottles an event back to occur at most 1 time in delay ms.\n\n@author Matt Crinklaw\n*/\ndefine('common/Throttler',['common/Queue'],\nfunction(Queue) {\n\t/**\n\t@param integer delay - minimum interval between execution of\n\tsubmitted tasks.  Throttler.submit takes various \n\tparameters that control what is done with the submitted tasks.\n\tSubmitted tasks can be queued or dropped.\n\t*/\n\tfunction Throttler(delay, context) {\n\t\tthis._handle = null;\n\t\tthis._delay = delay;\n\t\tthis._queue = Queue.create();\n\t\tthis._context = context;\n\t}\n\t\n\tThrottler.prototype = {\n\t\t/**\n\t\tRuns the cb after delay if nothing is currently executing.\n\t\t\n\t\tadds the callback to a queue of infinite length\n\t\tif options.rejectionPolicy == queue.\n\t\t\n\t\tadds the callback to a queue of length 1 if\n\t\toptions.rejectionPolicy == runLast.  If the queue is filled,\n\t\tit replaces the element already in the queue.\n\t\t*/\n\t\tsubmit: function(cb, options) {\n\t\t\tif (!this._handle) {\n\t\t\t\tthis._internalSubmit(cb, options);\n\t\t\t} else {\n\t\t\t\tif (options) {\n\t\t\t\t\tthis._handleFailedSubmit(cb, options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcancel: function() {\n\t\t\tthis._queue = Queue.create();\n\t\t\tthis._runLast = null;\n\t\t\tif (this._handle != null) {\n\t\t\t\tclearTimeout(this._handle);\n\t\t\t\tthis._handle = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t_internalSubmit: function(cb, options) {\n\t\t\tvar self = this;\n\t\t\tthis._handle = setTimeout(function() {\n\t\t\t\tif (options && options.arguments)\n\t\t\t\t\tcb.apply(self._context, options.arguments)\n\t\t\t\telse\n\t\t\t\t\tcb.call(self._context);\n\t\t\t\tself._internalCB();\n\t\t\t}, this._delay);\n\t\t},\n\t\t\n\t\t_internalCB: function() {\n\t\t\tvar queued = this._queue.take();\n\t\t\tif (queued) {\n\t\t\t\tthis._handle = this._internalSubmit(queued);\n\t\t\t} else if (this._runLast) {\n\t\t\t\tvar runLast = this._runLast;\n\t\t\t\tthis._runLast = null;\n\t\t\t\tthis._internalSubmit(runLast[0], runLast[1]);\n\t\t\t} else {\n\t\t\t\tthis._handle = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t_handleFailedSubmit: function(cb, options) {\n\t\t\tswitch (options.rejectionPolicy) {\n\t\t\tcase 'queue':\n\t\t\t\tthis._queue.enqueue(cb);\n\t\t\t\tbreak;\n\t\t\tcase 'runLast':\n\t\t\t\tthis._runLast = [cb, options];\n\t\t\t\tbreak;\n\t\t\tcase 'drop':\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\treturn Throttler;\n});\n",
    "define('strut/slide_editor/model/WellContextMenuModel',['libs/backbone'],\nfunction(Backbone) {\n\t'use strict';\n\n\treturn Backbone.Model.extend({\n\t\tinitialize: function() {\n\t\t\tthis.subs = [];\n\t\t\tthis._registry = this.editorModel.registry;\n\t\t\t// this._createButtons();\n\t\t\tthis.set('contextButtons', []);\n\n\t\t\tthis.subs.push(this._registry.on('registered:strut.WellContextButtonProvider',\n\t\t\tthis._buttonRegistered, this));\n      \t\tthis._slideIndex = 0;\n\t\t},\n\n\t\t// TODO: good opportunity to start using Mixers.js...\n\t\t_createButtons: function() {\n\t\t\tvar buttonEntries = this._registry.get('strut.WellContextButtonProvider');\n\t\t\tvar contextButtons = [];\n\t\t\tbuttonEntries.forEach(function(buttonEntry) {\n\t\t\t\tcontextButtons = \n\t\t\t\t\tcontextButtons.concat(buttonEntry.service().createButtons(this.editorModel, this));\n\t\t\t}, this);\n\n\t\t\tthis.set('contextButtons', contextButtons);\n\t\t},\n\n    \tslideIndex: function(i) {\n      \t\tif (i == null)\n        \t\treturn this._slideIndex;\n      \t\telse\n         \t\tthis._slideIndex = i;\n    \t},\n\n    \tdispose: function() {\n    \t\tconsole.log('DISPOSING CONTEXT MENU!');\n    \t\tthis.subs.forEach(function(sub) {\n    \t\t\tsub.dispose();\n    \t\t});\n    \t},\n\n\t\t_buttonRegistered: function(buttonEntry) {\n\t\t\tvar newButtons = buttonEntry.service().createButtons(this.editorModel, this);\n\n\t\t\tvar contextButtons = this.get('contextButtons');\n\t\t\tnewButtons.forEach(function(newButton) {\n\t\t\t\tcontextButtons.push(newButton);\n\t\t\t\tthis.trigger('change:contextButtons.push', contextButtons, newButton);\n\t\t\t}, this);\n\t\t},\n\n\t\tconstructor: function WellContextMenuModel(editorModel) {\n\t\t\tthis.editorModel = editorModel;\n\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n\n",
    "\n",
    "define('strut/slide_editor/view/WellContextMenu',['libs/backbone',\n\t\t'../model/WellContextMenuModel',\n    'css!styles/slide_editor/wellContextMenu.css'],\nfunction(Backbone, Model) {\n\t'use strict';\n\n\treturn Backbone.View.extend({\n\t\tclassName: 'wellContextMenu absolute',\n\n\t\tinitialize: function() {\n\t\t\tthis.model = new Model(this._editorModel);\n\t\t\tthis._template = JST['strut.slide_editor/WellContextMenu'];\n\n\t\t\t//this.model.on('')\n\t\t\tthis._currentPos = -1;\n\t\t},\n\n\t\treposition: function(newPos) {\n\t\t\tif (newPos.y == this._currentPos.y) return;\n\n\t\t\tthis.$el.css('top', newPos.y);\n\t\t\tthis.$el.css('left', newPos.x);\n\n\t\t\tthis._currentPos = newPos;\n\t\t},\n\n    \tslideIndex: function(i) {\n      \t\tthis.model.slideIndex(i);\n    \t},\n\n    \tdispose: function() {\n    \t\tthis.model.dispose();\n    \t},\n\n\t\trender: function() {\n\t\t\t// this.$el.html(this._template(this.model.get('contextButtons')));\n\t\t\tthis.$el.html('');\n\t\t\tthis.model.get('contextButtons').forEach(function(button) {\n\t\t\t\tthis.$el.append(button.render().$el);\n\t\t\t}, this);\n\t\t},\n\n\t\tconstructor: function WellContextMenu(editorModel) {\n\t\t\tthis._editorModel = editorModel;\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n\n",
    "\n",
    "define('strut/slide_editor/view/SlideWell',['libs/backbone',\n\t'jquery.multisortable',\n\t'strut/slide_snapshot/SlideSnapshot',\n\t'common/Throttler',\n\t'./WellContextMenu',\n\t'strut/editor/GlobalEvents',\n\t'css!styles/slide_editor/slideWell.css',\n\t\"tantaman/web/undo_support/CmdListFactory\"],\n\tfunction(Backbone, multisortable, SlideSnapshot, Throttler, WellContextMenu, GlobalEvents, css, CmdListFactory) {\n\t\t'use strict';\n\t\tvar undoHistory = CmdListFactory.managedInstance('editor');\n\n\t\t/**\n\t\t * This class is responsible for rendering left sidebar with little slide previews.\n\t\t *\n\t\t * @class SlideWell\n\t\t */\n\t\treturn Backbone.View.extend({\n\t\t\tevents: {\n\t\t\t\tmousemove: '_showContextMenu',\n\t\t\t\tdestroyed: 'dispose',\n\t\t\t\tmousedown: '_focused'\n\t\t\t},\n\n\t\t\tclassName: 'slideWell',\n\n\t\t\t/**\n\t\t\t * Initialize slide well.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis._deck.on('slideAdded', this._slideAdded, this);\n\t\t\t\tthis._deck.on('slideMoved', this._slideMoved, this);\n\t\t\t\tthis._deck.on('slidesReset', this._slidesReset, this);\n\t\t\t\tthis._doShowContextMenu = this._doShowContextMenu.bind(this);\n\t\t\t\tthis._throttler = new Throttler(100);\n\t\t\t\tthis._contextMenu = new WellContextMenu(this._editorModel);\n\t\t\t\tthis._contextMenu.render();\n\n\t\t\t\tthis.$slides = $('<div class=\"' + this.className + 'List\">');\n\t\t\t\tthis.$slides.multisortable({\n\t\t\t\t\titems: \"div.slideSnapshot\",\n\t\t\t\t\tplaceholder: \"slidePlaceholder\",\n\t\t\t\t\tstop: this._dragStopped.bind(this),\n\t\t\t\t\tmousedown: this._mousedown.bind(this),\n\t\t\t\t\tclick: this._clicked.bind(this),\n\t\t\t\t\taxis: 'y'\n\t\t\t\t});\n\n\t\t\t\tGlobalEvents.on('cut', this._cut, this);\n\t\t\t\tGlobalEvents.on('copy', this._copy, this);\n\t\t\t\tGlobalEvents.on('paste', this._paste, this);\n\t\t\t\tGlobalEvents.on('delete', this._delete, this);\n\n\t\t\t\tthis._clipboard = this._editorModel.clipboard;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: mouse down.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_focused: function(e) {\n\t\t\t\tthis._editorModel.set('scope', 'slideWell');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on Cut shortcut.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_cut: function() {\n\t\t\t\tif (this._editorModel.get('scope') == 'slideWell') {\n\t\t\t\t\tvar slides = this._deck.selected;\n\t\t\t\t\tthis._clipboard.setItems(slides);\n\t\t\t\t\tthis._deck.remove(slides);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on Copy shortcut.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_copy: function() {\n\t\t\t\tif (this._editorModel.get('scope') == 'slideWell') {\n\t\t\t\t\tvar slides = this._deck.selected;\n\t\t\t\t\tthis._clipboard.setItems(slides);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on Paste shortcut.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_paste: function() {\n\t\t\t\tvar slides = this._clipboard.getItems();\n\t\t\t\tif (slides != null && slides.length && slides[0].type != undefined && slides[0].type == 'slide') {\n\t\t\t\t\tthis._deck.add(slides);\n\t\t\t\t}\n\t\t\t\t// TODO: scroll to the new item...\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on Delete shortcut.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_delete: function() {\n\t\t\t\tif (this._editorModel.get('scope') == 'slideWell') {\n\t\t\t\t\tvar slides = this._deck.selected;\n\t\t\t\t\tthis._deck.remove(slides);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user has clicked one of the slide snapshots.\n\t\t\t * \n\t\t\t * Clicking a slide forces that one to become the active\n\t\t\t * slide.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_clicked: function(e, $target_item) {\n\t\t\t\tvar multiselect = e.ctrlKey || e.metaKey || e.shiftKey;\n\n\t\t\t\t$target_item.trigger('select', {\n\t\t\t\t\tselected: true,\n\t\t\t\t\tactive: !multiselect,\n\t\t\t\t\tmultiselect: multiselect\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user has pressed their mouse on a slide snapshot\n\t\t\t *\n\t\t\t * The jquery.multisortable plugin is computing the selections\n\t\t\t * for us so we need to update our model to reflect\n\t\t\t * the computed selections.\n\t\t\t*/\n\t\t\t_mousedown: function(e, $target_item) {\n\t\t\t\tvar multiselect = e.ctrlKey || e.metaKey || e.shiftKey;\n\n\t\t\t\tvar activate = false;\n\n\t\t\t\tthis.$slides.find('> .ui-selected').trigger('select', {\n\t\t\t\t\tselected: true,\n\t\t\t\t\tmultiselect: multiselect\n\t\t\t\t});\n\n\t\t\t\tif (!this.$slides.find('.active').is('.ui-selected') && !multiselect) {\n\t\t\t\t\t$target_item.trigger('select', {\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\tactive: !multiselect,\n\t\t\t\t\t\tmultiselect: multiselect\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user has finished dragging slide snapshots. We need to re-order slides accordingly.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} event\n\t\t\t * @param ui\n\t\t\t * @private\n\t\t\t */\n\t\t\t_dragStopped: function(event, ui) {\n\t\t\t\tvar destination = this.$slides.children().index(this.$slides.find('.ui-selected')[0]);\n\t\t\t\tvar slides = this._deck.selected;\n\t\t\t\tthis._initiatedMove = true;\n\t\t\t\tthis._deck.moveSlides(slides, destination);\n\t\t\t\tthis._initiatedMove = false;\n\t\t\t},\n\n\t\t\t// TODO Add doc (describe why this one is binded to mousemove)\n\t\t\t_showContextMenu: function(e) {\n\t\t\t\t//if (e.target != this.$el[0]) return;\n\t\t\t\tthis._throttler.submit(this._doShowContextMenu, {\n\t\t\t\t\trejectionPolicy: 'runLast',\n\t\t\t\t\targuments: [e]\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Shoe the context menu for the slide.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_doShowContextMenu: function(e) {\n\t\t\t\tvar offsetY = e.pageY - this.$slides.position().top;\n\n\t\t\t\t// TODO: too much magic and silliness going on here\n//\t\t\t\tvar newPos = (((offsetY + 40) / 114) | 0) * 114 - 5;\n                var m=152;\n                var newPos = (((offsetY + 40) / m) | 0) * m - 5;\n\t\t\t\tthis._contextMenu.reposition({x: this.$slides.width() / 2 - this._contextMenu.$el.outerWidth() / 2, y: newPos});\n\t\t\t\tthis._contextMenu.slideIndex(Math.ceil(newPos / m));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Refresh slide snapshots on slides reset.\n\t\t\t *\n\t\t\t * @param {Slide[]} newSlides\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slidesReset: function(newSlides) {\n\t\t\t\tvar i = 0;\n\t\t\t\tvar opts = {at: 0};\n\t\t\t\tnewSlides.forEach(function(slide) {\n\t\t\t\t\topts.at = i;\n\t\t\t\t\tthis._slideAdded(slide, opts);\n\t\t\t\t\ti += 1;\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Create a slide snapshot for the new slide.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {number} index\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideAdded: function(slide, opts) {\n\t\t\t\tvar index = opts.at;\n\t\t\t\t// Append it in the correct position in the well\n\t\t\t\tvar snapshot = new SlideSnapshot({model: slide, deck: this._deck, registry: this._registry});\n\t\t\t\tif (index == 0) {\n\t\t\t\t\tthis.$slides.prepend(snapshot.render().$el);\n\t\t\t\t} else {\n\t\t\t\t\tvar $slides = $('.slideSnapshot');\n\t\t\t\t\tif (index >= $slides.length) {\n\t\t\t\t\t\tthis.$slides.append(snapshot.render().$el);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$($slides[index]).before(snapshot.render().$el);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Move slide snapshot to a new position.\n\t\t\t *\n\t\t\t * @param {Slide} slide\n\t\t\t * @param {number} destination\n\t\t\t * @private\n\t\t\t */\n\t\t\t_slideMoved: function(slide, destination) {\n\t\t\t\tif (this._initiatedMove) return;\n\t\t\t\t// How expensive is this for very large decks?\n\t\t\t\tthis.$slides.empty();\n\t\t\t\tthis._slidesReset(this._deck.get('slides').models);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render slide well.\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tthis.$slides.html('');\n\t\t\t\tthis.$el.html(this.$slides);\n\t\t\t\tthis._deck.get('slides').forEach(function(slide) {\n\t\t\t\t\tvar snapshot = new SlideSnapshot({model: slide, deck: this._deck, registry: this._registry});\n\t\t\t\t\tthis.$slides.append(snapshot.render().$el);\n\t\t\t\t}, this);\n\t\t\t\tthis.$el.append(this._contextMenu.$el);\n\n\t\t\t\tvar self = this;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself._doShowContextMenu({pageY: 100});\n\t\t\t\t}, 0);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Dispose slide well.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tthis._deck.off(null, null, this);\n\t\t\t\tthis._contextMenu.dispose();\n\t\t\t\tGlobalEvents.off(null, null, this);\n\t\t\t},\n\n\t\t\tconstructor: function SlideWell(editorModel) {\n\t\t\t\tthis._deck = editorModel.deck();\n\t\t\t\tthis._registry = editorModel.registry;\n\t\t\t\tthis._editorModel = editorModel;\n\t\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t\t}\n\t\t});\n\t});\n\n",
    "\n",
    "/**\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/deck/Component',[\"./SpatialObject\"], function(SpatialObject) {\n\tvar defaultScale, defaults;\n\tdefaults = {\n\t\tx: config.slide.size.width / 3,\n\t\ty: config.slide.size.height / 3\n\t};\n\n\tdefaultScale = {\n\t\tx: 1,\n\t\ty: 1\n\t};\n\n\t/**\n\t * Base class for all slide elements.\n\t *\n\t * @class Component\n\t * @augments SpatialObject\n\t */\n\treturn SpatialObject.extend({\n\n\t\t/**\n\t\t * Initialize component model.\n\t\t * @returns {Object}\n\t\t */\n\t\tinitialize: function() {\n\t\t\t_.defaults(this.attributes, defaults);\n\t\t\tif (this.attributes.scale === undefined) {\n\t\t\t\tthis.attributes.scale = {};\n\t\t\t\treturn _.defaults(this.attributes.scale, defaultScale);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets or returns custom classes of the element.\n\t\t *\n\t\t * @param {string} [classes] If passed, element will take these classes.\n\t\t * @returns {string}\n\t\t */\n\t\tcustomClasses: function(classes) {\n\t\t\tif (classes == null) {\n\t\t\t\treturn this.get('customClasses');\n\t\t\t} else {\n\t\t\t\tthis.set('customClasses', classes);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Dispose the element.\n\t\t */\n\t\tdispose: function() {\n\t\t\tthis.trigger(\"dispose\", this);\n\t\t\tthis.off();\n\t\t},\n\n\t\tconstructor: function Component() {\n\t\t\tSpatialObject.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n\n",
    "define('strut/slide_editor/view/Utils',{\n\tcomputeSlideDimensions: function($opTable) {\n\t\tvar width = $opTable.width();\n\t\tvar height = $opTable.height();\n\n\t\tif (height < 300)\n\t\t\theight = 300;\n\n\t\tvar slideSize = config.slide.size;\n\n\t\tvar xScale = width / slideSize.width;\n\t\tvar yScale = (height - 20) / slideSize.height;\n\n\t\tvar newHeight = slideSize.height * xScale;\n\t\tif (newHeight > height) {\n\t\t\tvar scale = yScale;\n\t\t} else {\n\t\t\tvar scale = xScale;\n\t\t}\n\n\t\tvar scaledWidth = scale * slideSize.width;\n\n\t\tvar remainingWidth = width - scaledWidth;\n\n\t\treturn {\n\t\t\tscale: scale,\n\t\t\tremainingWidth: remainingWidth,\n\t\t\tscaledWidth: scaledWidth\n\t\t}\n\t}\n});\n",
    "define('strut/slide_editor/view/OperatingTable',['libs/backbone',\n\t\t'css!styles/slide_editor/operatingTable.css',\n\t\t'strut/slide_components/ComponentFactory',\n\t\t'strut/editor/GlobalEvents',\n\t\t'strut/deck/Component',\n\t\t'strut/deck/Utils',\n\t\t'./Utils',\n\t\t'marked'],\nfunction(Backbone, empty, ComponentFactory, GlobalEvents, Component,\n\tDeckUtils,\n\tUtils,\n\tmarked) {\n\t'use strict';\n\n\treturn Backbone.View.extend({\n\t\tclassName: 'operatingTable strut-surface',\n\t\tevents: {\n\t\t\t\"click\": \"_clicked\",\n\t\t\t\"focused\": \"_focus\",\n\t\t\t// \"dragover\": \"_dragover\",\n\t\t\t// \"drop\": \"_drop\",\n\t\t\tdestroyed: 'dispose'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis._resize = this._resize.bind(this);\n\t\t\t$(window).resize(this._resize);\n\n\t\t\t// Re-render when active slide changes in the deck\n\t\t\tthis._deck.on('change:activeSlide', function(deck, model) {\n\t\t\t\tthis.setModel(model);\n\t\t\t}, this);\n\t\t\tthis._deck.on('change:background', this._updateBg, this);\n\t\t\tthis._deck.on('change:surface', this._updateSurface, this);\n\t\t\tthis.setModel(this._deck.get('activeSlide'));\n\n\t\t\tGlobalEvents.on('cut', this._cut, this);\n\t\t\tGlobalEvents.on('copy', this._copy, this);\n\t\t\tGlobalEvents.on('paste', this._paste, this);\n\t\t\tGlobalEvents.on('delete', this._delete, this);\n\n\t\t\tthis._clipboard = this._editorModel.clipboard;\n\n\t\t\t// ContextMenu.setModel(this._menuModel);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis._$slideContainer = $('<div class=\"slideContainer\"></div>')\n\t\t\tthis.$el.html(this._$slideContainer);\n\t\t\tthis._$slideContainer.css(config.slide.size);\n\n\t\t\tDeckUtils.applyBackground(this._$slideContainer, this.model, this._deck, {transparentForSurface: true, surfaceForDefault: true, transparentForDeckSurface: true});\n\t\t\tthis._$markdownContent = $('<div class=\"markdownArea themedArea\"></div>');\n\t\t\tthis._$slideContainer.append(this._$markdownContent);\n\n\t\t\tthis._$slideContainer.selectable({\n\t\t\t\tfilter: \".component\",\n\t\t\t\tselected: function(event, ui) {\n\t\t\t\t\t$(ui.selected).trigger('select', ui);\n\t\t\t\t},\n\t\t\t\tunselected: function(event, ui) {\n\t\t\t\t\t$(ui.unselected).trigger('unselect', ui);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar self = this;\n\t\t\tsetTimeout(function() {\n\t\t\t\tself._rendered = true;\n\t\t\t\tself._resize();\n\t\t\t\tself._renderContents();\n\t\t\t}, 0);\n\n\t\t\tthis.$el.addClass((this._deck.get('surface') || 'bg-default'));\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_updateBg: function(model, bg) {\n\t\t\tif (!this._$slideContainer) return;\n\t\t\tthis._$slideContainer.removeClass();\n\t\t\tthis._$slideContainer.addClass('slideContainer ui-selectable');\n\t\t\tDeckUtils.applyBackground(this._$slideContainer, this.model, this._deck, {transparentForSurface: true, surfaceForDefault: true});\n\t\t},\n\n\t\t_updateSurface: function(model, bg) {\n\t\t\tbg = DeckUtils.slideSurface(model, this._deck);\n\t\t\tif (bg) {\n\t\t\t\tif (!DeckUtils.isImg(bg)) {\n\t\t\t\t\tthis.$el.css('background-image', '');\n\t\t\t\t\tthis.$el.removeClass();\n\t\t\t\t\t// TODO: we can do this more intelligently\n\t\t\t\t\tthis.$el.addClass('operatingTable strut-surface ' + bg);\n\t\t\t\t} else {\n\t\t\t\t\tthis.$el.css('background-image', DeckUtils.getImgUrl(bg));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// TODO: make the cut/copy/paste interfaces identical for\n\t\t// slides and slide components so we can mix this code into both?\n\t\t_cut: function() {\n\t\t\tif (this._editorModel.get('scope') == 'operatingTable') {\n\t\t\t\tvar components = this.model.selected;\n\t\t\t\tif (components.length) {\n\t\t\t\t\tthis._clipboard.setItems(components);\n\t\t\t\t\tthis.model.remove(components);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_copy: function() {\n\t\t\tif (this._editorModel.get('scope') == 'operatingTable') {\n\t\t\t\tvar components = this.model.selected;\n\t\t\t\tif (components.length) {\n\t\t\t\t\tthis._clipboard.setItems(components);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_paste: function() {\n\t\t\tvar components = this._clipboard.getItems();\n\t\t\tif (components != null && components.length && components[0] instanceof Component) {\n\t\t\t\tthis.model.add(components);\n\t\t\t}\n\t\t},\n\n\t\t_delete: function() {\n\t\t\tif (this._editorModel.get('scope') == 'operatingTable') {\n\t\t\t\tvar components = this.model.selected;\n\t\t\t\tif (components.length) {\n\t\t\t\t\tthis.model.remove(components);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_clicked: function() {\n\t\t\tthis._focus();\n\t\t\tthis.model.get('components').forEach(function(comp) {\n\t\t\t\tif (comp.get('selected')) {\n\t\t\t\t\tcomp.set('selected', false);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.$el.find('.editable').removeClass('editable').attr('contenteditable', false)\n\t\t\t\t.trigger('editComplete');\n\n\t\t\tthis._focus();\n\t\t},\n\n\t\t_focus: function() {\n\t\t\tthis._editorModel.set('scope', 'operatingTable');\n\t\t},\n\n\t\t_dragover: function(e) {\n\t\t\te.stopPropagation()\n\t\t\te.preventDefault()\n\t\t\te.originalEvent.dataTransfer.dropEffect = 'copy'\n\t\t},\n\n\t\t_drop: function(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tvar f = e.originalEvent.dataTransfer.files[0];\n\n\t\t\t//dnd from another website?\n\t\t\t//var url = $(e.originalEvent.dataTransfer.getData('text/html')).filter('img').attr('src');?\n\n\t\t\tif (!f.type.match('image.*'))\n\t\t\t\treturn\n\n\t\t\t// TODO: some sort of feedback\n\t\t\t// to indicate that the image is being\n\t\t\t// imported...\n\t\t\tif (this._editorModel.hasStorage()) {\n\t\t\t\tthis._editorModel.addComponent({\n\t\t\t\t\tsrc: {\n\t\t\t\t\t\tfile: f\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'Image'\n\t\t\t\t}, this.model);\n\t\t\t}\n\t\t},\n\n\t\t_componentAdded: function(model, comp) {\n\t\t\tvar view = ComponentFactory.instance.createView(comp);\n\t\t\tthis._$slideContainer.append(view.render());\n\t\t},\n\n\t\tsetModel: function(model) {\n\t\t\tvar prevModel = this.model;\n\t\t\tif (this.model === model) return;\n\n\t\t\tif (this.model != null) {\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\t}\n\t\t\tthis.model = model;\n\t\t\tif (this.model != null) {\n\t\t\t\tthis.model.on('change:components.add', this._componentAdded, this);\n\t\t\t\tthis.model.on('change:background', this._updateBg, this);\n\t\t\t\tthis.model.on('change:markdown', this._renderMarkdown, this);\n\t\t\t\tthis.model.on('change:surface', this._updateSurface, this);\n\t\t\t\tthis._updateBg();\n\t\t\t\tthis._updateSurface(this.model, this.model.get('surface'));\n\t\t\t}\n\t\t\tthis._renderContents(prevModel);\n\t\t\treturn this;\n\t\t},\n\n\t\tdispose: function() {\n\t\t\t$(window).off('resize', this._resize);\n\t\t\tthis._deck.off(null, null, this);\n\t\t\tif (this.model)\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\tGlobalEvents.off(null, null, this);\n\t\t},\n\n\t\t_renderContents: function(prevModel) {\n\t\t\tif (prevModel != null) {\n\t\t\t\tprevModel.trigger('unrender', true);\n\t\t\t}\n\n\t\t\tif (!this._rendered) return;\n\n\t\t\tif (this.model != null) {\n\t\t\t\tvar components = this.model.get('components');\n\t\t\t\tcomponents.forEach(function(comp) {\n\t\t\t\t\tvar view = ComponentFactory.instance.createView(comp);\n\t\t\t\t\tthis._$slideContainer.append(view.render());\n\t\t\t\t}, this);\n\n\t\t\t\tthis._renderMarkdown();\n\t\t\t}\n\t\t},\n\n\t\t_renderMarkdown: function() {\n\t\t\tif (this.model.get('markdown')) {\n\t\t\t\tthis._$markdownContent.html(marked(this.model.get('markdown')));\n\t\t\t} else {\n\t\t\t\tthis._$markdownContent.html('');\n\t\t\t}\n\t\t},\n\n\t\t_resize: function() {\n\t\t\tvar dimensions = Utils.computeSlideDimensions(this.$el);\n\t\t\tthis._$slideContainer.css({\n\t\t\t\t'margin-left': dimensions.remainingWidth / 2,\n\t\t\t\t'margin-right': dimensions.remainingWidth / 2\n\t\t\t});\n\n\t\t\tthis._$slideContainer.css(window.browserPrefix + 'transform', 'scale(' + dimensions.scale + ')');\n\t\t},\n\n\t\tconstructor: function OperatingTable(editorModel, slideEditorModel) {\n\t\t\tthis._deck = editorModel.deck();\n\t\t\tthis._registry = editorModel.registry;\n\t\t\tthis._editorModel = editorModel;\n\t\t\tthis._slideEditorModel = slideEditorModel;\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n\n",
    "CodeMirror.defineMode(\"xml\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var multilineTagIndentFactor = parserConfig.multilineTagIndentFactor || 1;\n  var multilineTagIndentPastTag = parserConfig.multilineTagIndentPastTag || true;\n\n  var Kludges = parserConfig.htmlMode ? {\n    autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                      'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                      'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                      'track': true, 'wbr': true},\n    implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                       'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                       'th': true, 'tr': true},\n    contextGrabbers: {\n      'dd': {'dd': true, 'dt': true},\n      'dt': {'dd': true, 'dt': true},\n      'li': {'li': true},\n      'option': {'option': true, 'optgroup': true},\n      'optgroup': {'optgroup': true},\n      'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n            'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n            'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n            'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n            'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n      'rp': {'rp': true, 'rt': true},\n      'rt': {'rp': true, 'rt': true},\n      'tbody': {'tbody': true, 'tfoot': true},\n      'td': {'td': true, 'th': true},\n      'tfoot': {'tbody': true},\n      'th': {'td': true, 'th': true},\n      'thead': {'tbody': true, 'tfoot': true},\n      'tr': {'tr': true}\n    },\n    doNotIndent: {\"pre\": true},\n    allowUnquoted: true,\n    allowMissing: true\n  } : {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false\n  };\n  var alignCDATA = parserConfig.alignCDATA;\n\n  // Return variables for tokenizers\n  var tagName, type;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        var isClose = stream.eat(\"/\");\n        tagName = \"\";\n        var c;\n        while ((c = stream.eat(/[^\\s\\u00a0=<>\\\"\\'\\/?]/))) tagName += c;\n        if (!tagName) return \"tag error\";\n        type = isClose ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" error\" : \"error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.eatWhile(/[^\\s\\u00a0=<>\\\"\\']/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    };\n  }\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  var curState, curStream, setStyle;\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) curState.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n\n  function pushContext(tagName, startOfLine) {\n    var noIndent = Kludges.doNotIndent.hasOwnProperty(tagName) || (curState.context && curState.context.noIndent);\n    curState.context = {\n      prev: curState.context,\n      tagName: tagName,\n      indent: curState.indented,\n      startOfLine: startOfLine,\n      noIndent: noIndent\n    };\n  }\n  function popContext() {\n    if (curState.context) curState.context = curState.context.prev;\n  }\n\n  function element(type) {\n    if (type == \"openTag\") {\n      curState.tagName = tagName;\n      curState.tagStart = curStream.column();\n      return cont(attributes, endtag(curState.startOfLine));\n    } else if (type == \"closeTag\") {\n      var err = false;\n      if (curState.context) {\n        if (curState.context.tagName != tagName) {\n          if (Kludges.implicitlyClosed.hasOwnProperty(curState.context.tagName.toLowerCase())) {\n            popContext();\n          }\n          err = !curState.context || curState.context.tagName != tagName;\n        }\n      } else {\n        err = true;\n      }\n      if (err) setStyle = \"error\";\n      return cont(endclosetag(err));\n    }\n    return cont();\n  }\n  function endtag(startOfLine) {\n    return function(type) {\n      var tagName = curState.tagName;\n      curState.tagName = curState.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          (type == \"endTag\" && Kludges.autoSelfClosers.hasOwnProperty(tagName.toLowerCase()))) {\n        maybePopContext(tagName.toLowerCase());\n        return cont();\n      }\n      if (type == \"endTag\") {\n        maybePopContext(tagName.toLowerCase());\n        pushContext(tagName, startOfLine);\n        return cont();\n      }\n      return cont();\n    };\n  }\n  function endclosetag(err) {\n    return function(type) {\n      if (err) setStyle = \"error\";\n      if (type == \"endTag\") { popContext(); return cont(); }\n      setStyle = \"error\";\n      return cont(arguments.callee);\n    };\n  }\n  function maybePopContext(nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!curState.context) {\n        return;\n      }\n      parentTagName = curState.context.tagName.toLowerCase();\n      if (!Kludges.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext();\n    }\n  }\n\n  function attributes(type) {\n    if (type == \"word\") {setStyle = \"attribute\"; return cont(attribute, attributes);}\n    if (type == \"endTag\" || type == \"selfcloseTag\") return pass();\n    setStyle = \"error\";\n    return cont(attributes);\n  }\n  function attribute(type) {\n    if (type == \"equals\") return cont(attvalue, attributes);\n    if (!Kludges.allowMissing) setStyle = \"error\";\n    else if (type == \"word\") {setStyle = \"attribute\"; return cont(attribute, attributes);}\n    return (type == \"endTag\" || type == \"selfcloseTag\") ? pass() : cont();\n  }\n  function attvalue(type) {\n    if (type == \"string\") return cont(attvaluemaybe);\n    if (type == \"word\" && Kludges.allowUnquoted) {setStyle = \"string\"; return cont();}\n    setStyle = \"error\";\n    return (type == \"endTag\" || type == \"selfCloseTag\") ? pass() : cont();\n  }\n  function attvaluemaybe(type) {\n    if (type == \"string\") return cont(attvaluemaybe);\n    else return pass();\n  }\n\n  return {\n    startState: function() {\n      return {tokenize: inText, cc: [], indented: 0, startOfLine: true, tagName: null, tagStart: null, context: null};\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol()) {\n        state.startOfLine = true;\n        state.indented = stream.indentation();\n      }\n      if (stream.eatSpace()) return null;\n\n      setStyle = type = tagName = null;\n      var style = state.tokenize(stream, state);\n      state.type = type;\n      if ((style || type) && style != \"comment\") {\n        curState = state; curStream = stream;\n        while (true) {\n          var comb = state.cc.pop() || element;\n          if (comb(type || style)) break;\n        }\n      }\n      state.startOfLine = false;\n      if (setStyle)\n        style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        return state.stringStartCol + 1;\n      }\n      if ((state.tokenize != inTag && state.tokenize != inText) ||\n          context && context.noIndent)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (multilineTagIndentPastTag)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * multilineTagIndentFactor;\n      }\n      if (alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      if (context && /^<\\//.test(textAfter))\n        context = context.prev;\n      while (context && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return 0;\n    },\n\n    electricChars: \"/\",\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: parserConfig.htmlMode ? \"html\" : \"xml\",\n    helperType: parserConfig.htmlMode ? \"html\" : \"xml\"\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\ndefine(\"codemirror/modes/xml\", function(){});\n\n",
    "define('codemirror/ManagedEditors',['codemirror/codemirror', 'codemirror/modes/xml'],\nfunction(CodeMirror, xml) {\n\tvar editors = {};\n\n\tfunction createEditor(opts, cb) {\n\t\tvar result = {};\n\t\tvar mirror = CodeMirror(function(el) {\n\t\t\tresult.el = el;\n\t\t\tif (cb) cb(el);\n\t\t}, opts);\n\n\t\tresult.mirror = mirror;\n\n\t\treturn result;\n\t}\n\n\treturn {\n\t\tgetEditor: function(name, opts, cb) {\n\t\t\treturn editors[name] || (editors[name] = createEditor(opts, cb));\n\t\t}\n\t};\n});\n",
    "CodeMirror.defineMode(\"markdown\", function(cmCfg, modeCfg) {\n\n  var htmlFound = CodeMirror.modes.hasOwnProperty(\"xml\");\n  var htmlMode = CodeMirror.getMode(cmCfg, htmlFound ? {name: \"xml\", htmlMode: true} : \"text/plain\");\n  var aliases = {\n    html: \"htmlmixed\",\n    js: \"javascript\",\n    json: \"application/json\",\n    c: \"text/x-csrc\",\n    \"c++\": \"text/x-c++src\",\n    java: \"text/x-java\",\n    csharp: \"text/x-csharp\",\n    \"c#\": \"text/x-csharp\",\n    scala: \"text/x-scala\"\n  };\n\n  var getMode = (function () {\n    var i, modes = {}, mimes = {}, mime;\n\n    var list = [];\n    for (var m in CodeMirror.modes)\n      if (CodeMirror.modes.propertyIsEnumerable(m)) list.push(m);\n    for (i = 0; i < list.length; i++) {\n      modes[list[i]] = list[i];\n    }\n    var mimesList = [];\n    for (var m in CodeMirror.mimeModes)\n      if (CodeMirror.mimeModes.propertyIsEnumerable(m))\n        mimesList.push({mime: m, mode: CodeMirror.mimeModes[m]});\n    for (i = 0; i < mimesList.length; i++) {\n      mime = mimesList[i].mime;\n      mimes[mime] = mimesList[i].mime;\n    }\n\n    for (var a in aliases) {\n      if (aliases[a] in modes || aliases[a] in mimes)\n        modes[a] = aliases[a];\n    }\n\n    return function (lang) {\n      return modes[lang] ? CodeMirror.getMode(cmCfg, modes[lang]) : null;\n    };\n  }());\n\n  // Should underscores in words open/close em/strong?\n  if (modeCfg.underscoresBreakWords === undefined)\n    modeCfg.underscoresBreakWords = true;\n\n  // Turn on fenced code blocks? (\"```\" to start/end)\n  if (modeCfg.fencedCodeBlocks === undefined) modeCfg.fencedCodeBlocks = false;\n\n  // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n  if (modeCfg.taskLists === undefined) modeCfg.taskLists = false;\n\n  var codeDepth = 0;\n\n  var header   = 'header'\n  ,   code     = 'comment'\n  ,   quote1   = 'atom'\n  ,   quote2   = 'number'\n  ,   list1    = 'variable-2'\n  ,   list2    = 'variable-3'\n  ,   list3    = 'keyword'\n  ,   hr       = 'hr'\n  ,   image    = 'tag'\n  ,   linkinline = 'link'\n  ,   linkemail = 'link'\n  ,   linktext = 'link'\n  ,   linkhref = 'string'\n  ,   em       = 'em'\n  ,   strong   = 'strong';\n\n  var hrRE = /^([*\\-=_])(?:\\s*\\1){2,}\\s*$/\n  ,   ulRE = /^[*\\-+]\\s+/\n  ,   olRE = /^[0-9]+\\.\\s+/\n  ,   taskListRE = /^\\[(x| )\\](?=\\s)/ // Must follow ulRE or olRE\n  ,   headerRE = /^(?:\\={1,}|-{1,})$/\n  ,   textRE = /^[^!\\[\\]*_\\\\<>` \"'(]+/;\n\n  function switchInline(stream, state, f) {\n    state.f = state.inline = f;\n    return f(stream, state);\n  }\n\n  function switchBlock(stream, state, f) {\n    state.f = state.block = f;\n    return f(stream, state);\n  }\n\n\n  // Blocks\n\n  function blankLine(state) {\n    // Reset linkTitle state\n    state.linkTitle = false;\n    // Reset EM state\n    state.em = false;\n    // Reset STRONG state\n    state.strong = false;\n    // Reset state.quote\n    state.quote = 0;\n    if (!htmlFound && state.f == htmlBlock) {\n      state.f = inlineNormal;\n      state.block = blockNormal;\n    }\n    // Reset state.trailingSpace\n    state.trailingSpace = 0;\n    state.trailingSpaceNewLine = false;\n    // Mark this line as blank\n    state.thisLineHasContent = false;\n    return null;\n  }\n\n  function blockNormal(stream, state) {\n\n    var prevLineIsList = (state.list !== false);\n    if (state.list !== false && state.indentationDiff >= 0) { // Continued list\n      if (state.indentationDiff < 4) { // Only adjust indentation if *not* a code block\n        state.indentation -= state.indentationDiff;\n      }\n      state.list = null;\n    } else if (state.list !== false && state.indentation > 0) {\n      state.list = null;\n      state.listDepth = Math.floor(state.indentation / 4);\n    } else if (state.list !== false) { // No longer a list\n      state.list = false;\n      state.listDepth = 0;\n    }\n\n    if (state.indentationDiff >= 4) {\n      state.indentation -= 4;\n      stream.skipToEnd();\n      return code;\n    } else if (stream.eatSpace()) {\n      return null;\n    } else if (stream.peek() === '#' || (state.prevLineHasContent && stream.match(headerRE)) ) {\n      state.header = true;\n    } else if (stream.eat('>')) {\n      state.indentation++;\n      state.quote = 1;\n      stream.eatSpace();\n      while (stream.eat('>')) {\n        stream.eatSpace();\n        state.quote++;\n      }\n    } else if (stream.peek() === '[') {\n      return switchInline(stream, state, footnoteLink);\n    } else if (stream.match(hrRE, true)) {\n      return hr;\n    } else if ((!state.prevLineHasContent || prevLineIsList) && (stream.match(ulRE, true) || stream.match(olRE, true))) {\n      state.indentation += 4;\n      state.list = true;\n      state.listDepth++;\n      if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n        state.taskList = true;\n      }\n    } else if (modeCfg.fencedCodeBlocks && stream.match(/^```([\\w+#]*)/, true)) {\n      // try switching mode\n      state.localMode = getMode(RegExp.$1);\n      if (state.localMode) state.localState = state.localMode.startState();\n      switchBlock(stream, state, local);\n      return code;\n    }\n\n    return switchInline(stream, state, state.inline);\n  }\n\n  function htmlBlock(stream, state) {\n    var style = htmlMode.token(stream, state.htmlState);\n    if (htmlFound && style === 'tag' && state.htmlState.type !== 'openTag' && !state.htmlState.context) {\n      state.f = inlineNormal;\n      state.block = blockNormal;\n    }\n    if (state.md_inside && stream.current().indexOf(\">\")!=-1) {\n      state.f = inlineNormal;\n      state.block = blockNormal;\n      state.htmlState.context = undefined;\n    }\n    return style;\n  }\n\n  function local(stream, state) {\n    if (stream.sol() && stream.match(/^```/, true)) {\n      state.localMode = state.localState = null;\n      state.f = inlineNormal;\n      state.block = blockNormal;\n      return code;\n    } else if (state.localMode) {\n      return state.localMode.token(stream, state.localState);\n    } else {\n      stream.skipToEnd();\n      return code;\n    }\n  }\n\n  // Inline\n  function getType(state) {\n    var styles = [];\n\n    if (state.taskOpen) { return \"meta\"; }\n    if (state.taskClosed) { return \"property\"; }\n\n    if (state.strong) { styles.push(strong); }\n    if (state.em) { styles.push(em); }\n\n    if (state.linkText) { styles.push(linktext); }\n\n    if (state.code) { styles.push(code); }\n\n    if (state.header) { styles.push(header); }\n    if (state.quote) { styles.push(state.quote % 2 ? quote1 : quote2); }\n    if (state.list !== false) {\n      var listMod = (state.listDepth - 1) % 3;\n      if (!listMod) {\n        styles.push(list1);\n      } else if (listMod === 1) {\n        styles.push(list2);\n      } else {\n        styles.push(list3);\n      }\n    }\n\n    if (state.trailingSpaceNewLine) {\n      styles.push(\"trailing-space-new-line\");\n    } else if (state.trailingSpace) {\n      styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n    }\n\n    return styles.length ? styles.join(' ') : null;\n  }\n\n  function handleText(stream, state) {\n    if (stream.match(textRE, true)) {\n      return getType(state);\n    }\n    return undefined;\n  }\n\n  function inlineNormal(stream, state) {\n    var style = state.text(stream, state);\n    if (typeof style !== 'undefined')\n      return style;\n\n    if (state.list) { // List marker (*, +, -, 1., etc)\n      state.list = null;\n      return getType(state);\n    }\n\n    if (state.taskList) {\n      var taskOpen = stream.match(taskListRE, true)[1] !== \"x\";\n      if (taskOpen) state.taskOpen = true;\n      else state.taskClosed = true;\n      state.taskList = false;\n      return getType(state);\n    }\n\n    state.taskOpen = false;\n    state.taskClosed = false;\n\n    var ch = stream.next();\n\n    if (ch === '\\\\') {\n      stream.next();\n      return getType(state);\n    }\n\n    // Matches link titles present on next line\n    if (state.linkTitle) {\n      state.linkTitle = false;\n      var matchCh = ch;\n      if (ch === '(') {\n        matchCh = ')';\n      }\n      matchCh = (matchCh+'').replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n      if (stream.match(new RegExp(regex), true)) {\n        return linkhref;\n      }\n    }\n\n    // If this block is changed, it may need to be updated in GFM mode\n    if (ch === '`') {\n      var t = getType(state);\n      var before = stream.pos;\n      stream.eatWhile('`');\n      var difference = 1 + stream.pos - before;\n      if (!state.code) {\n        codeDepth = difference;\n        state.code = true;\n        return getType(state);\n      } else {\n        if (difference === codeDepth) { // Must be exact\n          state.code = false;\n          return t;\n        }\n        return getType(state);\n      }\n    } else if (state.code) {\n      return getType(state);\n    }\n\n    if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n      stream.match(/\\[[^\\]]*\\]/);\n      state.inline = state.f = linkHref;\n      return image;\n    }\n\n    if (ch === '[' && stream.match(/.*\\](\\(| ?\\[)/, false)) {\n      state.linkText = true;\n      return getType(state);\n    }\n\n    if (ch === ']' && state.linkText) {\n      var type = getType(state);\n      state.linkText = false;\n      state.inline = state.f = linkHref;\n      return type;\n    }\n\n    if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n      return switchInline(stream, state, inlineElement(linkinline, '>'));\n    }\n\n    if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n      return switchInline(stream, state, inlineElement(linkemail, '>'));\n    }\n\n    if (ch === '<' && stream.match(/^\\w/, false)) {\n      if (stream.string.indexOf(\">\")!=-1) {\n        var atts = stream.string.substring(1,stream.string.indexOf(\">\"));\n        if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) {\n          state.md_inside = true;\n        }\n      }\n      stream.backUp(1);\n      return switchBlock(stream, state, htmlBlock);\n    }\n\n    if (ch === '<' && stream.match(/^\\/\\w*?>/)) {\n      state.md_inside = false;\n      return \"tag\";\n    }\n\n    var ignoreUnderscore = false;\n    if (!modeCfg.underscoresBreakWords) {\n      if (ch === '_' && stream.peek() !== '_' && stream.match(/(\\w)/, false)) {\n        var prevPos = stream.pos - 2;\n        if (prevPos >= 0) {\n          var prevCh = stream.string.charAt(prevPos);\n          if (prevCh !== '_' && prevCh.match(/(\\w)/, false)) {\n            ignoreUnderscore = true;\n          }\n        }\n      }\n    }\n    var t = getType(state);\n    if (ch === '*' || (ch === '_' && !ignoreUnderscore)) {\n      if (state.strong === ch && stream.eat(ch)) { // Remove STRONG\n        state.strong = false;\n        return t;\n      } else if (!state.strong && stream.eat(ch)) { // Add STRONG\n        state.strong = ch;\n        return getType(state);\n      } else if (state.em === ch) { // Remove EM\n        state.em = false;\n        return t;\n      } else if (!state.em) { // Add EM\n        state.em = ch;\n        return getType(state);\n      }\n    } else if (ch === ' ') {\n      if (stream.eat('*') || stream.eat('_')) { // Probably surrounded by spaces\n        if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n          return getType(state);\n        } else { // Not surrounded by spaces, back up pointer\n          stream.backUp(1);\n        }\n      }\n    }\n\n    if (ch === ' ') {\n      if (stream.match(/ +$/, false)) {\n        state.trailingSpace++;\n      } else if (state.trailingSpace) {\n        state.trailingSpaceNewLine = true;\n      }\n    }\n\n    return getType(state);\n  }\n\n  function linkHref(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    var ch = stream.next();\n    if (ch === '(' || ch === '[') {\n      return switchInline(stream, state, inlineElement(linkhref, ch === '(' ? ')' : ']'));\n    }\n    return 'error';\n  }\n\n  function footnoteLink(stream, state) {\n    if (stream.match(/^[^\\]]*\\]:/, true)) {\n      state.f = footnoteUrl;\n      return linktext;\n    }\n    return switchInline(stream, state, inlineNormal);\n  }\n\n  function footnoteUrl(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    // Match URL\n    stream.match(/^[^\\s]+/, true);\n    // Check for link title\n    if (stream.peek() === undefined) { // End of line, set flag to check next line\n      state.linkTitle = true;\n    } else { // More content on line, check if link title\n      stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n    }\n    state.f = state.inline = inlineNormal;\n    return linkhref;\n  }\n\n  var savedInlineRE = [];\n  function inlineRE(endChar) {\n    if (!savedInlineRE[endChar]) {\n      // Escape endChar for RegExp (taken from http://stackoverflow.com/a/494122/526741)\n      endChar = (endChar+'').replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      // Match any non-endChar, escaped character, as well as the closing\n      // endChar.\n      savedInlineRE[endChar] = new RegExp('^(?:[^\\\\\\\\]|\\\\\\\\.)*?(' + endChar + ')');\n    }\n    return savedInlineRE[endChar];\n  }\n\n  function inlineElement(type, endChar, next) {\n    next = next || inlineNormal;\n    return function(stream, state) {\n      stream.match(inlineRE(endChar));\n      state.inline = state.f = next;\n      return type;\n    };\n  }\n\n  return {\n    startState: function() {\n      return {\n        f: blockNormal,\n\n        prevLineHasContent: false,\n        thisLineHasContent: false,\n\n        block: blockNormal,\n        htmlState: CodeMirror.startState(htmlMode),\n        indentation: 0,\n\n        inline: inlineNormal,\n        text: handleText,\n\n        linkText: false,\n        linkTitle: false,\n        em: false,\n        strong: false,\n        header: false,\n        taskList: false,\n        list: false,\n        listDepth: 0,\n        quote: 0,\n        trailingSpace: 0,\n        trailingSpaceNewLine: false\n      };\n    },\n\n    copyState: function(s) {\n      return {\n        f: s.f,\n\n        prevLineHasContent: s.prevLineHasContent,\n        thisLineHasContent: s.thisLineHasContent,\n\n        block: s.block,\n        htmlState: CodeMirror.copyState(htmlMode, s.htmlState),\n        indentation: s.indentation,\n\n        localMode: s.localMode,\n        localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n\n        inline: s.inline,\n        text: s.text,\n        linkTitle: s.linkTitle,\n        em: s.em,\n        strong: s.strong,\n        header: s.header,\n        taskList: s.taskList,\n        list: s.list,\n        listDepth: s.listDepth,\n        quote: s.quote,\n        trailingSpace: s.trailingSpace,\n        trailingSpaceNewLine: s.trailingSpaceNewLine,\n        md_inside: s.md_inside\n      };\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (stream.match(/^\\s*$/, true)) {\n          state.prevLineHasContent = false;\n          return blankLine(state);\n        } else {\n          state.prevLineHasContent = state.thisLineHasContent;\n          state.thisLineHasContent = true;\n        }\n\n        // Reset state.header\n        state.header = false;\n\n        // Reset state.taskList\n        state.taskList = false;\n\n        // Reset state.code\n        state.code = false;\n\n        // Reset state.trailingSpace\n        state.trailingSpace = 0;\n        state.trailingSpaceNewLine = false;\n\n        state.f = state.block;\n        var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, '    ').length;\n        var difference = Math.floor((indentation - state.indentation) / 4) * 4;\n        if (difference > 4) difference = 4;\n        var adjustedIndentation = state.indentation + difference;\n        state.indentationDiff = adjustedIndentation - state.indentation;\n        state.indentation = adjustedIndentation;\n        if (indentation > 0) return null;\n      }\n      return state.f(stream, state);\n    },\n\n    blankLine: blankLine,\n\n    getType: getType\n  };\n\n}, \"xml\");\n\nCodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\ndefine(\"codemirror/modes/markdown\", [\"codemirror/codemirror\"], function(){});\n\n",
    "define('strut/slide_editor/view/MarkdownEditor',['codemirror/ManagedEditors',\n\t\t'codemirror/modes/markdown',\n\t\t'./Utils'],\nfunction(managedEditors, md, Utils) {\n\n\tvar defaultValue = \"# Markdown!\\n\";\n\tvar extraKeys = {\"Enter\": \"newlineAndIndentContinueMarkdownList\"};\n\tvar editorElem;\n\tvar editor = managedEditors.getEditor('optableeditor', {\n        mode: 'markdown',\n        lineNumbers: true,\n        theme: \"default\",\n        extraKeys: extraKeys\n      });\n\n\tfunction MarkdownEditor(opts) {\n\t\tthis._opts = opts;\n\t\tthis.$el = $(editor.el);\n\t\tthis._resize = this._resize.bind(this);\n\t}\n\n\tMarkdownEditor.prototype = {\n\t\tshow: function(value) {\n\t\t\teditor.mirror.setOption('mode', 'markdown');\n\t\t\teditor.mirror.setOption('extraKeys', extraKeys);\n\t\t\tthis._resize();\n\t\t\tthis._bindResize();\n\t\t\tthis._opts.$target.append(this.$el);\n\t\t\tthis.setValue(value);\n\t\t},\n\n\t\tsetValue: function(value) {\n\t\t\tvalue = value || defaultValue;\n\t\t\teditor.mirror.setValue(value);\n\t\t\teditor.mirror.getDoc().clearHistory();\n\t\t},\n\n\t\tgetValue: function() {\n\t\t\tvar value = editor.mirror.getValue();\n\t\t\tif (value == defaultValue)\n\t\t\t\treturn '';\n\t\t\treturn value;\n\t\t},\n\n\t\thide: function() {\n\t\t\teditor.mirror.setValue('');\n\t\t\tthis._unbindResize();\n\t\t\tthis.$el.detach();\n\t\t},\n\n\t\t_bindResize: function() {\n\t\t\t$(window).on('resize', this._resize);\n\t\t},\n\n\t\t_resize: function() {\n\t\t\tvar dimensions = Utils.computeSlideDimensions(this._opts.$target);\n\t\t\teditor.mirror.setSize(dimensions.scaledWidth, this._opts.$target.height() - 20);\n\t\t\tthis.$el.css({\n\t\t\t\t'margin-left': dimensions.remainingWidth / 2,\n\t\t\t\t'margin-right': dimensions.remainingWidth / 2\n\t\t\t});\n\t\t},\n\n\t\t_unbindResize: function() {\n\t\t\t$(window).off('resize', this._resize);\n\t\t}\n\t};\n\n\treturn MarkdownEditor;\n});\n",
    "define('strut/slide_editor/view/SlideEditorView',['libs/backbone',\n\t\t'./SlideWell',\n\t\t'./OperatingTable',\n\t\t'./MarkdownEditor'],\nfunction(Backbone, SlideWell, OperatingTable, MarkdownEditor) {\n\t'use stict';\n\treturn Backbone.View.extend({\n\t\tclassName: 'slideEditor',\n\n\t\tinitialize: function() {\n\t\t\t//this._template = JST['strut.slide_editor/SlideEditor'];\n\t\t\tthis._well = new SlideWell(this.model._editorModel);\n\t\t\tthis._opTable = new OperatingTable(this.model._editorModel, this.model);\n\t\t\tthis._markdownEditor = new MarkdownEditor({\n\t\t\t\t$target: this._opTable.$el\n\t\t\t});\n\n\t\t\tthis._prevSlide = this.model.activeSlide();\n\t\t\tthis.model.on('change:mode', this._modeChanged, this);\n\t\t\tthis.model.deck().on('change:activeSlide', this._activeSlideChanged, this);\n\t\t\tthis.model.on('saveEdits', this._saveCurrentEdits, this);\n\t\t\t// $(document.body).css('overflow', 'hidden');\n\t\t},\n\n\t\tremove: function() {\n\t\t\tBackbone.View.prototype.remove.call(this);\n\t\t\tthis.model.dispose();\n\t\t\tthis._opTable.dispose();\n\t\t\tthis.model.deck().off(null, null, this);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html();\n\t\t\tthis.$el.append(this._well.render().$el);\n\t\t\tthis.$el.append(this._opTable.render().$el);\n\t\t\treturn this;\n\t\t},\n\n\t\t_activeSlideChanged: function(deck, slide) {\n\t\t\tthis._saveCurrentEdits();\n\t\t\tthis._prevSlide = slide;\n\t\t\tthis._markdownEditor.setValue(slide && slide.get('markdown'));\n\t\t},\n\n\t\t_modeChanged: function(model, mode) {\n\t\t\tif (mode == 'markdown') {\n\t\t\t\tthis._markdownEditor.show(this.model.activeSlide().get('markdown'));\n\t\t\t} else if (mode == 'preview') {\n\t\t\t\tthis.model.activeSlide().set('markdown', this._markdownEditor.getValue());\n\t\t\t\tthis._markdownEditor.hide();\n\t\t\t} else {\n\t\t\t\tthrow \"Illegal mode\";\n\t\t\t}\n\t\t},\n\n\t\t_saveCurrentEdits: function() {\n\t\t\tif (this._prevSlide && this.model.isMarkdownMode()) {\n\t\t\t\tthis._prevSlide.set('markdown', this._markdownEditor.getValue());\n\t\t\t}\n\t\t},\n\n\t\tconstructor: function SlideEditorView() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('tantaman/web/widgets/ModeButton',[],function () {\n\tfunction ModeButton(editorModel, modeId, template) {\n\t\tthis.$el = $(template());\n\t\tthis.modeId = modeId;\n\n\t\tthis.clicked = this.clicked.bind(this);\n\t\tthis.modeChanged = this.modeChanged.bind(this);\n\n\t\tthis.$el.click(this.clicked);\n\t\tthis.el = this.$el[0];\n\n\t\tthis.editorModel = editorModel;\n\t\teditorModel.on('change:activeMode', this.modeChanged, this);\n\t}\n\n\tModeButton.prototype.render = function() {\n\t\treturn this;\n\t}\n\n\tModeButton.prototype.clicked = function() {\n\t\tthis.editorModel.changeActiveMode(this.modeId);\n\t}\n\n\tModeButton.prototype.generatorChanged = function(model, value) {\n\t\t// Filter the modes on a per-generator basis\n\t}\n\n\tModeButton.prototype.modeChanged = function(model, value) {\n\t\tif (model.get('modeId') == this.modeId) {\n\t\t\tthis.$el.addClass('dispNone');\n\t\t} else {\n\t\t\tthis.$el.removeClass('dispNone');\n\t\t}\n\t}\n\n\treturn ModeButton;\n});\n",
    "define('strut/slide_editor/main',['./model/SlideEditorModel',\n\t\t'./view/SlideEditorView',\n\t\t'tantaman/web/widgets/ModeButton',\n\t\t'tantaman/web/widgets/Button'],\nfunction(SlideEditorModel, SlideEditorView, ModeButton, Button) {\n\tvar service = {\n\t\tgetMode: function(editorModel, registry) {\n\t\t\tvar model = new SlideEditorModel({editorModel: editorModel});\n\n\t\t\treturn {\n\t\t\t\tview: new SlideEditorView({model: model, registry: registry}),\n\t\t\t\tmodel: model,\n\t\t\t\tid: 'slide-editor',\n\t\t\t\tclose: function() {\n\t\t\t\t\tthis.view.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\tcreateButton: function(editorModel) {\n\t\t\treturn new ModeButton(editorModel, 'slide-editor',\n\t\t\t\t\t\tJST['strut.slide_editor/Button']);\n\t\t}\n\t};\n\n\t// TODO: need to bind to mode changes\n\tfunction MarkdownControl(editorModel) {\n\t\tthis._slideEditorModel = editorModel.get('activeMode').model;\n\t\tthis._button = new Button({\n\t\t\ticon: 'icon-markdown-white',\n\t\t\tcb: this._toggleMarkdown.bind(this),\n\t\t\tname: 'MDown'\n\t\t});\n\t\tthis._button.$el.addClass('iconBtns');\n\n\t\tthis._slideEditorModel.on('change:mode', this._modeChanged, this);\n\t}\n\n\tMarkdownControl.prototype = {\n\t\tview: function() {\n\t\t\treturn this._button;\n\t\t},\n\n\t\t_toggleMarkdown: function() {\n\t\t\tthis._slideEditorModel.toggleMarkdown();\n\t\t},\n\n\t\t_modeChanged: function(model, mode) {\n\t\t\tif (mode == 'markdown') {\n\t\t\t\tthis._button.$el.addClass('active');\n\t\t\t} else {\n\t\t\t\tthis._button.$el.removeClass('active');\n\t\t\t}\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis._slideEditorModel.off(null, null, this);\n\t\t}\n\t}\n\n\tvar markdownProviderFactory = {\n\t\tcreate: function(editorModel) {\n\t\t\treturn new MarkdownControl(editorModel);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.EditMode',\n\t\t\t\tmeta: {\n\t\t\t\t\tid: 'slide-editor'\n\t\t\t\t}\n\t\t\t}, service);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\tmeta: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\t'slide-editor': true\n\t\t\t\t\t},\n\t\t\t\t\toverflow: true\n\t\t\t\t},\n\t\t\t}, markdownProviderFactory)\n\t\t}\n\t};\n});\n",
    "define('tantaman/web/Utils',[],function() {\n\treturn {\n\t\tdispose: function(arg) {\n\t\t\tif (arg.dispose != null) {\n\t\t\t\targ.dispose();\n\t\t\t} else if (arg.forEach != null) {\n\t\t\t\targ.forEach(function(e) {\n\t\t\t\t\te.dispose();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tstopProp: function(e) {\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n});\n",
    "/**\n * Responds to the activation / deactivation of presentation generators.\n * When one is activated OverviewModel will select the appropriate set of transition\n * editors to display and provide them as a collection to the Overview\n * view.\n */\ndefine('strut/transition_editor/model/OverviewModel',['tantaman/web/Utils', 'libs/backbone'],\nfunction(Utils, Backbone) {\n\treturn Backbone.Model.extend({\n\t\tinitialize: function() {\n\t\t\tthis._editorModel.on('change:generator', this._generatorChanged, this);\n\t\t\tthis._generatorChanged(this._editorModel, this._editorModel.get('generator'));\n\t\t},\n\n\t\t_generatorChanged: function(model, generator) {\n\t\t\tvar editors = this._registry.get({\n\t\t\t\tinterfaces: 'strut.TransitionEditor',\n\t\t\t\tmeta: {\n\t\t\t\t\tcapabilities: generator.capabilities\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.transitionEditors = [];\n\t\t\teditors.forEach(function(entry) {\n\t\t\t\tvar ctor = entry.service();\n\t\t\t\tthis.transitionEditors.push(new ctor({model: this._editorModel}));\n\t\t\t}, this);\n\t\t\t\n\t\t\tthis.trigger('change:transitionEditors', this, this.transitionEditors);\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tUtils.dispose(this.transitionEditors);\n\t\t\tthis.off();\n\t\t\tthis._editorModel.off(null, null, this);\n\t\t},\n\n\t\tconstructor: function OverviewModel(editorModel, registry) {\n\t\t\tthis._editorModel = editorModel;\n\t\t\tthis._registry = registry;\n\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "\n",
    "define('strut/transition_editor/view/Overview',['libs/backbone', 'tantaman/web/Utils',\n\t'css!styles/transition_editor/overview.css',],\nfunction(Backbone, Utils, css) {\n\t/**\n\t * Renders the set of active transition editors\n\t */\n\treturn Backbone.View.extend({\n\t\tinitialize: function() {\n\t\t\tthis.model.on('change:transitionEditors',\n\t\t\t\t\t\t\tthis.render,\n\t\t\t\t\t\t\tthis);\n\t\t\tthis._currentEditors = [];\n\t\t},\n\n\t\tremove: function() {\n\t\t\tthis.dispose();\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tBackbone.View.prototype.remove.call(this);\n\t\t\tthis.model.dispose();\n\t\t\tUtils.dispose(this._currentEditors);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html('');\n\t\t\tUtils.dispose(this._currentEditors);\n\t\t\t// the css should be applied to position\n\t\t\t// them correctly regardless of their order in the doc?\n\n\t\t\tthis._currentEditors = [];\n\t\t\tthis.model.transitionEditors.forEach(function(editor) {\n\t\t\t\tthis._currentEditors.push(editor);\n\t\t\t\teditor.render();\n\t\t\t\tthis.$el.append(editor.$el);\n\t\t\t}, this);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function Overview() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('tantaman/web/interactions/TouchBridge',[],function() {\n\tvar touchSupported = 'ontouchend' in document;\n\n\tfunction updateTouch(e) {\n\t\tvar touch = e.originalEvent.changedTouches[0];\n\t\tfor (var i in touch) {\n\t\t\te[i] = touch[i];\n\t\t}\n\t\te.which = 1;\n\t}\n\n\tfunction wrap(handler) {\n\t\treturn function(e) {\n\t\t\tupdateTouch(e);\n\t\t\thandler(e);\n\t\t}\n\t}\n\n\t/*\n\t1. Get a touchstart\n\t2. record the \"finger\" that did it\n\t3. wait for another touchstart\n\t4. check if it is the same finger\n\t5. check the time delta between the first and this one\n\t6. fire dbl click if within delta\n\t*/\n\tvar dblDelta = 250;\n\tfunction createDoubleTapHandler(element, handler) {\n\t\thandler = wrap(handler);\n\t\tvar initialTouch;\n\t\tvar touchTime;\n\n\t\treturn function(e) {\n\t\t\tvar resetTouch = false;\n\t\t\tif (initialTouch) {\n\t\t\t\tvar newTouch = e.originalEvent.changedTouches[0];\n\t\t\t\tif (newTouch.identifier == initialTouch.identifier\n\t\t\t\t\t && Date.now() - touchTime < dblDelta) {\n\t\t\t\t\thandler(e);\n\t\t\t\t\tinitialTouch = null;\n\t\t\t\t} else {\n\t\t\t\t\tresetTouch = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresetTouch = true;\n\t\t\t}\n\n\t\t\tif (resetTouch) {\n\t\t\t\tinitialTouch = e.originalEvent.changedTouches[0];\n\t\t\t\ttouchTime = Date.now();\n\t\t\t}\n\t\t}\n\t}\n\n\tvar ons = {\n\t\tdblclick: function(element, handler) {\n\t\t\tvar event;\n\t\t\tif (touchSupported) {\n\t\t\t\tevent = 'touchstart';\n\t\t\t\thandler = createDoubleTapHandler(element, handler);\n\t\t\t} else {\n\t\t\t\tevent = 'dblclick';\n\t\t\t}\n\n\t\t\telement.on(event, handler);\n\t\t\treturn function() {\n\t\t\t\telement.off(event, handler);\n\t\t\t}\n\t\t},\n\n\t\tmousedown: function(element, handler) {\n\t\t\tvar event;\n\t\t\tif (touchSupported) {\n\t\t\t\tevent = 'touchstart';\n\t\t\t\thandler = wrap(handler);\n\t\t\t} else {\n\t\t\t\tevent = 'mousedown';\n\t\t\t}\n\n\t\t\telement.on(event, handler);\n\t\t\treturn function() {\n\t\t\t\telement.off(event, handler);\n\t\t\t};\n\t\t},\n\n\t\tmouseup: function(element, handler) {\n\t\t\tvar event;\n\t\t\tif (touchSupported) {\n\t\t\t\tevent = 'touchend';\n\t\t\t\thandler = wrap(handler);\n\t\t\t} else {\n\t\t\t\tevent = 'mouseup';\n\t\t\t}\n\n\t\t\telement.on(event, handler);\n\t\t\treturn function() {\n\t\t\t\telement.off(event, handler);\n\t\t\t};\n\t\t},\n\n\t\tmousemove: function(element, handler) {\n\t\t\tvar event;\n\t\t\tif (touchSupported) {\n\t\t\t\tevent = 'touchmove';\n\t\t\t\thandler = wrap(handler);\n\t\t\t} else {\n\t\t\t\tevent = 'mousemove';\n\t\t\t}\n\n\t\t\telement.on(event, handler);\n\t\t\treturn function() {\n\t\t\t\telement.off(event, handler);\n\t\t\t};\n\t\t}\n\n\t\t// TODO: selection + edit event...\n\t};\n\n\tvar offs = {\n\t\tmousedown: function(element, handler) {\n\t\t\tif (touchSupported) {\n\t\t\t\telement.off('touchstart', handler);\n\t\t\t} else {\n\t\t\t\telement.off('mousedown', handler);\n\t\t\t}\n\t\t},\n\n\t\tmouseup: function(element, handler) {\n\t\t\tif (touchSupported) {\n\t\t\t\telement.off('touchend', handler);\n\t\t\t} else {\n\t\t\t\telement.off('mouseup', handler);\n\t\t\t}\n\t\t},\n\n\t\tmousemove: function(element, handler) {\n\t\t\tif (touchSupported) {\n\t\t\t\telement.off('touchmove', handler);\n\t\t\t} else {\n\t\t\t\telement.off('mousemove', handler);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {\n\t\ton: ons,\n\t\toff: offs\n\t};\n});\n",
    "define('tantaman/web/widgets/DeltaDragControl',['tantaman/web/interactions/TouchBridge'], function(TouchBridge) {\n\t\tvar DragControl, events;\n\t\tevents = [\"mousedown\", \"mousemove\", \"mouseup\"];\n\t\treturn DragControl = (function() {\n\n\t\t\tfunction DragControl($el, stopProp) {\n\t\t\t\tthis.$el = $el;\n\t\t\t\tthis.stopProp = stopProp;\n\t\t\t\tthis.dragging = false;\n\t\t\t\tthis._mousemove = this.mousemove.bind(this);\n\t\t\t\tthis._mouseup = this.mouseup.bind(this);\n\t\t\t\tthis._mouseout = this._mouseup;\n\n\t\t\t\tthis._toDispose = [];\n\t\t\t\t\n\t\t\t\tthis._toDispose.push(TouchBridge.on.mousemove($(document), this._mousemove));\n\t\t\t\tthis._toDispose.push(TouchBridge.on.mouseup($(document), this._mouseup));\n\t\t\t\tTouchBridge.on.mousedown(this.$el, this.mousedown.bind(this));\n\t\t\t\tTouchBridge.on.mouseup(this.$el, this._mouseup);\n\t\t\t}\n\n\t\t\tDragControl.prototype.dispose = function() {\n\t\t\t\tthis._toDispose.forEach(function(d) {\n\t\t\t\t\td();\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tDragControl.prototype.mousedown = function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.dragging = true;\n\t\t\t\tthis._startPos = {\n\t\t\t\t\tx: e.pageX,\n\t\t\t\t\ty: e.pageY\n\t\t\t\t};\n\t\t\t\tthis.$el.trigger(\"deltadragStart\", {\n\t\t\t\t\tx: e.pageX,\n\t\t\t\t\ty: e.pageY\n\t\t\t\t});\n\t\t\t\tif (this.stopProp) {\n\t\t\t\t\treturn e.stopPropagation();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tDragControl.prototype.mousemove = function(e) {\n\t\t\t\tvar dx, dy;\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tdx = e.pageX - this._startPos.x;\n\t\t\t\t\tdy = e.pageY - this._startPos.y;\n\t\t\t\t\tthis.$el.trigger(\"deltadrag\", [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdx: dx,\n\t\t\t\t\t\t\tdy: dy,\n\t\t\t\t\t\t\tx: e.pageX,\n\t\t\t\t\t\t\ty: e.pageY\n\t\t\t\t\t\t}\n\t\t\t\t\t]);\n\t\t\t\t\tif (this.stopProp) {\n\t\t\t\t\t\treturn e.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tDragControl.prototype.mouseup = function(e) {\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.dragging = false;\n\t\t\t\t\tthis.$el.trigger(\"deltadragStop\");\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\treturn DragControl;\n\n\t\t})();\n\t});\n",
    "\n",
    "define('strut/slide_components/view/ComponentView',[\"libs/backbone\",\n\t\"tantaman/web/widgets/DeltaDragControl\",\n\t\"common/Math2\",\n\t\"css!styles/slide_components/ComponentView.css\",\n\t\"strut/editor/GlobalEvents\",\n\t\"strut/deck/ComponentCommands\",\n\t\"tantaman/web/undo_support/CmdListFactory\",\n\t\"tantaman/web/interactions/TouchBridge\"],\n\tfunction(Backbone, DeltaDragControl, Math2, empty, key, ComponentCommands, CmdListFactory, TouchBridge) {\n\t\tvar undoHistory = CmdListFactory.managedInstance('editor');\n\n\t\t/**\n\t\t * @class ComponentView\n\t\t * @augments Backbone.View\n\t\t */\n\t\treturn Backbone.View.extend({\n\t\t\ttransforms: [\"skewX\", \"skewY\"],\n\t\t\tclassName: \"component\",\n\n\t\t\t/**\n\t\t\t * Returns list of events, tracked by this view.\n\t\t\t *\n\t\t\t * @returns {Object}\n\t\t\t */\n\t\t\tevents: function() {\n\t\t\t\treturn {\n\t\t\t\t\t'select': '_selected',\n\t\t\t\t\t'unselect': '_unselected',\n\t\t\t\t\t\"click\": \"clicked\",\n\t\t\t\t\t\"click .removeBtn\": \"removeClicked\",\n\t\t\t\t\t\"change input[data-option='x']\": \"manualMoveX\",\n\t\t\t\t\t\"change input[data-option='y']\": \"manualMoveY\",\n\t\t\t\t\t\"deltadragStart span[data-delta='skewX']\": \"skewXStart\",\n\t\t\t\t\t\"deltadrag span[data-delta='skewX']\": \"skewX\",\n\t\t\t\t\t\"deltadragStop span[data-delta='skewX']\": \"skewXStop\",\n\t\t\t\t\t\"deltadragStart span[data-delta='skewY']\": \"skewYStart\",\n\t\t\t\t\t\"deltadrag span[data-delta='skewY']\": \"skewY\",\n\t\t\t\t\t\"deltadragStop span[data-delta='skewY']\": \"skewYStop\",\n\t\t\t\t\t\"deltadragStart span[data-delta='rotate']\": \"rotateStart\",\n\t\t\t\t\t\"deltadrag span[data-delta='rotate']\": \"rotate\",\n\t\t\t\t\t\"deltadragStop span[data-delta='rotate']\": \"rotateStop\",\n\t\t\t\t\t\"deltadragStart span[data-delta='scale']\": \"scaleStart\",\n\t\t\t\t\t\"deltadrag span[data-delta='scale']\": \"scale\",\n\t\t\t\t\t\"deltadragStop span[data-delta='scale']\": \"scaleStop\",\n\t\t\t\t\t'destroyed': 'remove',\n\t\t\t\t\t'click .align': 'center'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis._dragging = false;\n\t\t\t\tthis.allowDragging = true;\n\t\t\t\tthis.model.on(\"change:selected\", this._selectionChanged, this);\n\t\t\t\tthis.model.on(\"change:color\", this._colorChanged, this);\n\t\t\t\tthis.model.on(\"unrender\", this._unrender, this);\n\t\t\t\tthis._mouseup = this.mouseup.bind(this);\n\t\t\t\tthis._mousemove = this.mousemove.bind(this);\n\t\t\t\tthis.mousedown = this.mousedown.bind(this);\n\t\t\t\tthis._deltaDrags = [];\n\t\t\t\tthis.model.on(\"rerender\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on(\"change:x\", this._xChanged, this);\n\t\t\t\tthis.model.on(\"change:y\", this._yChanged, this);\n\t\t\t\tthis.model.on(\"change:skewX\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on(\"change:skewY\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on(\"change:rotate\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on(\"change:scale\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on('change:customClasses', this._updateCustomClasses, this);\n\n\t\t\t\tthis.model.on(\"dragStart\", this.dragStart, this);\n\t\t\t\tthis.model.on(\"drag\", this.drag, this);\n\t\t\t\tthis.model.on(\"dragStop\", this.dragStop, this);\n\n\t\t\t\tthis.$el.css('z-index', zTracker.next());\n\t\t\t\tthis._lastDeltas = {\n\t\t\t\t\tdx: 0,\n\t\t\t\t\tdy: 0\n\t\t\t\t};\n\n\t\t\t\tthis._toDispose = [];\n\t\t\t\tvar $doc = $(document);\n\t\t\t\tthis._toDispose.push(TouchBridge.on.mouseup($doc, this._mouseup));\n\t\t\t\tthis._toDispose.push(TouchBridge.on.mousemove($doc, this._mousemove));\n\n\t\t\t\tTouchBridge.on.mousedown(this.$el, this.mousedown);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on color change.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {string} color\n\t\t\t * @private\n\t\t\t */\n\t\t\t_colorChanged: function(model, color) {\n\t\t\t\tthis.$el.css(\"color\", \"#\" + color);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * React on click event. Boost element's z-index to bring it front while editing.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tclicked: function(e) {\n\t\t\t\tthis.$el.css('z-index', zTracker.next());\n\t\t\t\tthis.$el.trigger(\"focused\");\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on clicking X remove button.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tremoveClicked: function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (this.model.slide) {\n\t\t\t\t\tthis.model.slide.remove([this.model]);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove component view.\n\t\t\t *\n\t\t\t * @param {boolean} disposeModel Whether or not to dispose component's model as well.\n\t\t\t */\n\t\t\tremove: function(disposeModel) {\n\t\t\t\tvar $doc, deltaDrag, idx, _ref;\n\t\t\t\tBackbone.View.prototype.remove.call(this);\n\t\t\t\t_ref = this._deltaDrags;\n\t\t\t\tfor (idx in _ref) {\n\t\t\t\t\tdeltaDrag = _ref[idx];\n\t\t\t\t\tdeltaDrag.dispose();\n\t\t\t\t}\n\t\t\t\tif (disposeModel) {\n\t\t\t\t\tthis.model.dispose();\n\t\t\t\t}\n\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\t\tthis._toDispose.forEach(function(d) {\n\t\t\t\t\td();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: mouse button has peen pressed down.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmousedown: function(e) {\n\t\t\t\t// When component is dragged, we shouldn't start selecting anything.\n\t\t\t\tthis.$el.parents('.ui-selectable').selectable(\"disable\");\n\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis._selectComponent(e);\n\t\t\t\t\tthis.$el.css(\"zIndex\", zTracker.next());\n\n\t\t\t\t\t// TODO: convert code that depends on\n\t\t\t\t\t// this.model.slide into a method call\n\t\t\t\t\t// so we can get rid of the if (this.model.slide) everywhere\n\t\t\t\t\tif (this.model.slide) {\n\t\t\t\t\t\tthis.model.slide.selected.forEach(function(component) {\n\t\t\t\t\t\t\tcomponent.trigger('dragStart', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.options.deck.selected.forEach(function(component) {\n\t\t\t\t\t\t\tcomponent.trigger('dragStart', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Select or unselect component on mouse down.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectComponent: function(e) {\n\t\t\t\tif ((key.pressed.ctrl || key.pressed.meta || key.pressed.shift) && this.model.get(\"selected\")) {\n\t\t\t\t\tthis.model.set(\"selected\", false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.model.set(\"selected\", true);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: element is selected by user.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selected: function(e) {\n\t\t\t\tthis.model.set(\"selected\", true, { multiselect: true });\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: element is unselected by user.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_unselected: function(e) {\n\t\t\t\tthis.model.set(\"selected\", false);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component is being selected. Toggle a selection class on the element.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {boolean} selected\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectionChanged: function(model, selected) {\n\t\t\t\tif (selected) {\n\t\t\t\t\tthis.$el.addClass(\"ui-selected\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.$el.removeClass(\"ui-selected\");\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: mouse is being moved over the element.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmousemove: function(e) {\n\t\t\t\tif (this.model.slide) {\n\t\t\t\t\tthis.model.slide.selected.forEach(function(component) {\n\t\t\t\t\t\tcomponent.trigger('drag', e);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.options.deck.selected.forEach(function(component) {\n\t\t\t\t\t\tcomponent.trigger('drag', e);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: mouse button has been released.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmouseup: function(e) {\n\t\t\t\t// Drag is over, selectable can be turned on again.\n\t\t\t\tthis.$el.parents('.ui-selectable').selectable(\"enable\");\n\n\t\t\t\tvar _this = this;\n\t\t\t\tif (this.model.slide) {\n\t\t\t\t\tundoHistory.record(function(){\n\t\t\t\t\t\t_this.model.slide.selected.forEach(function(component) {\n\t\t\t\t\t\t\tcomponent.trigger('dragStop', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 'Move Components');\n\t\t\t\t} else {\n\t\t\t\t\tundoHistory.record(function(){\n\t\t\t\t\t\t_this.options.deck.selected.forEach(function(component) {\n\t\t\t\t\t\t\tcomponent.trigger('dragStop', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 'Move Slide Transition');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: drag has been started.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tdragStart: function(e) {\n\t\t\t\tthis.dragScale = this.$el.parent().css(window.browserPrefix + \"transform\");\n\t\t\t\tthis.dragScale = parseFloat(this.dragScale.substring(7, this.dragScale.indexOf(\",\"))) || 1;\n\t\t\t\tthis._dragging = true;\n\t\t\t\tthis.$el.addClass(\"dragged\");\n\t\t\t\tthis._prevPos = {\n\t\t\t\t\tx: this.model.get(\"x\"),\n\t\t\t\t\ty: this.model.get(\"y\")\n\t\t\t\t};\n\t\t\t\tthis._prevMousePos = {\n\t\t\t\t\tx: e.pageX,\n\t\t\t\t\ty: e.pageY\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: drag is in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tdrag: function(e) {\n\t\t\t\tvar dx, dy, gridSize, newX, newY, snapToGrid;\n\t\t\t\tif (this._dragging && this.allowDragging) {\n\t\t\t\t\tsnapToGrid = key.pressed.shift;\n\t\t\t\t\tdx = e.pageX - this._prevMousePos.x;\n\t\t\t\t\tdy = e.pageY - this._prevMousePos.y;\n\t\t\t\t\tnewX = this._prevPos.x + dx / this.dragScale;\n\t\t\t\t\tnewY = this._prevPos.y + dy / this.dragScale;\n\t\t\t\t\tif (snapToGrid) {\n\t\t\t\t\t\tgridSize = 20;\n\t\t\t\t\t\tnewX = Math.floor(newX / gridSize) * gridSize;\n\t\t\t\t\t\tnewY = Math.floor(newY / gridSize) * gridSize;\n\t\t\t\t\t}\n\t\t\t\t\tthis.model.setInt(\"x\", newX);\n\t\t\t\t\tthis.model.setInt(\"y\", newY);\n\t\t\t\t\tif (!this.dragStartLoc) {\n\t\t\t\t\t\tthis.dragStartLoc = {\n\t\t\t\t\t\t\tx: newX,\n\t\t\t\t\t\t\ty: newY\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: drag has been stopped.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tdragStop: function(e) {\n\t\t\t\tif (this._dragging) {\n\t\t\t\t\tthis._dragging = false;\n\t\t\t\t\tthis.$el.removeClass(\"dragged\");\n\t\t\t\t\tif ((this.dragStartLoc != null) && this.dragStartLoc.x !== this.model.get(\"x\") && this.dragStartLoc.y !== this.model.get(\"y\")) {\n\t\t\t\t\t\tundoHistory.pushdo(new ComponentCommands.Move(this.dragStartLoc, this.model));\n\t\t\t\t\t}\n\t\t\t\t\tthis.dragStartLoc = null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on X position change.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {number} value\n\t\t\t * @private\n\t\t\t */\n\t\t\t_xChanged: function(model, value) {\n\t\t\t\tthis.$el.css(\"left\", value);\n\t\t\t\tthis.$xInput.val(value);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on Y position change.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {number} value\n\t\t\t * @private\n\t\t\t */\n\t\t\t_yChanged: function(model, value) {\n\t\t\t\tthis.$el.css(\"top\", value);\n\t\t\t\tthis.$yInput.val(value);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: Element is being moved horizontally.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmanualMoveX: function(e) {\n\t\t\t\treturn this.model.setInt(\"x\", e.target.value);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: Element is being moved vertically.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmanualMoveY: function(e) {\n\t\t\t\treturn this.model.setInt(\"y\", e.target.value);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: Element is being centered.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tcenter: function(e) {\n\t\t\t\tvar axis = e.target.getAttribute(\"data-option\");\n\t\t\t\tgetAxis = function(axis, e) {\n\t\t\t\t\treturn axis == 'x' ? e.width() : e.height()\n\t\t\t\t};\n\t\t\t\tvar slideSize = getAxis(axis, this.$el.parent('.slideContainer'));\n\t\t\t\tvar textSize = getAxis(axis, this.$el);\n\n\t\t\t\tvar origPos = {\n\t\t\t\t\tx: this.model.get('x'),\n\t\t\t\t\ty: this.model.get('y')\n\t\t\t\t};\n\n\t\t\t\tthis.model.setInt(axis, ( (slideSize / 2) - (textSize / 2) ));\n\t\t\t\tvar cmd = new ComponentCommands.Move(origPos, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewX transformation started.\n\t\t\t */\n\t\t\tskewXStart: function() {\n\t\t\t\treturn this._initialSkewX = this.model.get(\"skewX\") || 0;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewX transformation is in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{dx: number, dy: number}} deltas\n\t\t\t */\n\t\t\tskewX: function(e, deltas) {\n\t\t\t\tthis.model.setFloat(\"skewX\", this._initialSkewX + Math.atan2(deltas.dx, 22));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewX transformation stopped.\n\t\t\t */\n\t\t\tskewXStop: function() {\n\t\t\t\tvar cmd = new ComponentCommands.SkewX(this._initialSkewX, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewY transformation started.\n\t\t\t */\n\t\t\tskewYStart: function() {\n\t\t\t\treturn this._initialSkewY = this.model.get(\"skewY\") || 0;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewY transformation is in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{dx: number, dy: number}} deltas\n\t\t\t */\n\t\t\tskewY: function(e, deltas) {\n\t\t\t\tthis.model.setFloat(\"skewY\", this._initialSkewY + Math.atan2(deltas.dy, 22));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: SkewY transformation stopped.\n\t\t\t */\n\t\t\tskewYStop: function() {\n\t\t\t\tvar cmd = new ComponentCommands.SkewY(this._initialSkewY, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\n\t\t\t/**\n\t\t\t * Event: rotation started.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{x: number, y: number}} deltas\n\t\t\t */\n\t\t\trotateStart: function(e, deltas) {\n\t\t\t\tthis.updateOrigin();\n\t\t\t\tthis._rotOffset = this._calcRot(deltas);\n\t\t\t\tthis._initialRotate = this.model.get(\"rotate\") || 0;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Save initial location of the element.\n\t\t\t */\n\t\t\tupdateOrigin: function() {\n\t\t\t\tvar offset;\n\t\t\t\toffset = this.$el.offset();\n\t\t\t\tthis._origin = {\n\t\t\t\t\tx: this.$el.width() / 2 + offset.left,\n\t\t\t\t\ty: this.$el.height() / 2 + offset.top\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Calculate rotation offset.\n\t\t\t *\n\t\t\t * @param {{x: number, y: number}} point\n\t\t\t * @returns {number}\n\t\t\t * @private\n\t\t\t */\n\t\t\t_calcRot: function(point) {\n\t\t\t\treturn Math.atan2(point.y - this._origin.y, point.x - this._origin.x);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: rotation is in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{x: number, y: number}} deltas\n\t\t\t */\n\t\t\trotate: function(e, deltas) {\n\t\t\t\tvar newRot, rot;\n\t\t\t\trot = this._calcRot(deltas);\n\t\t\t\tnewRot = this._initialRotate + rot - this._rotOffset;\n\t\t\t\tif (key.pressed.shift) {\n\t\t\t\t\tnewRot = Math.floor(newRot / Math.PI * 8) / 8 * Math.PI;\n\t\t\t\t}\n\t\t\t\tnewRot = newRot % (2 * Math.PI);\n\t\t\t\tthis.model.setFloat(\"rotate\", newRot);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: rotation stopped.\n\t\t\t */\n\t\t\trotateStop: function() {\n\t\t\t\tvar cmd = new ComponentCommands.Rotate(this._initialRotate, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t// TODO fix or remove commented code and unused variables\n\t\t\t/**\n\t\t\t * Event: scale started.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tscaleStart: function(e) {\n\t\t\t\tvar H, elHeight, elOffset, elWidth, theta;\n\t\t\t\tthis.dragScale = this.$el.parent().css(window.browserPrefix + \"transform\");\n\t\t\t\tthis.dragScale = parseFloat(this.dragScale.substring(7, this.dragScale.indexOf(\",\"))) || 1;\n\t\t\t\tthis._initialScale = this.model.get(\"scale\");\n\t\t\t\telOffset = this.$el.offset();\n\t\t\t\telWidth = this.$el.width() * this._initialScale.x;\n\t\t\t\telHeight = this.$el.height() * this._initialScale.y;\n\n\t\t\t\ttheta = this.model.get(\"rotate\") || 0;\n\t\t\t\t// theta = (theta + Math.atan2(elHeight / 2, elWidth / 2)) % (2 * Math.PI);\n\n\t\t\t\tif (!(this.origSize != null)) {\n\t\t\t\t\tthis.origSize = {\n\t\t\t\t\t\twidth: this.$el.width(),\n\t\t\t\t\t\theight: this.$el.height()\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis._scaleDim = {\n\t\t\t\t\twidth: this._initialScale.x * this.origSize.width,\n\t\t\t\t\theight: this._initialScale.y * this.origSize.height,\n\t\t\t\t\ttheta: theta\n\t\t\t\t};\n\t\t\t},\n\n\t\t\t// TODO fix or remove commented code\n\t\t\t/**\n\t\t\t * Event: scale in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{dx: number, dy: number}} deltas\n\t\t\t */\n\t\t\tscale: function(e, deltas) {\n\t\t\t\tvar dx, dy, fixRatioDisabled, scale;\n\t\t\t\tfixRatioDisabled = key.pressed.shift;\n\n\t\t\t\tvar xSignum = 1;\n\t\t\t\tvar ySignum = 1;\n\t\t\t\t// if (this._scaleDim.theta < -Math.PI / 2 && this._scaleDim.theta > -3/2 * Math.PI) {\n\t\t\t\t//   xSignum = -1;\n\t\t\t\t//   ySignum = -1;\n\t\t\t\t// } if (this._scaleDim.theta > Math.PI/2) {\n\t\t\t\t//   xSignum = -1;\n\t\t\t\t// }\n\n\t\t\t\tvar scaleX = (xSignum * deltas.dx + this._scaleDim.width) / (this._scaleDim.width);\n\t\t\t\tvar scaleY = (ySignum * deltas.dy + this._scaleDim.height) / (this._scaleDim.height);\n\n\n\t\t\t\tscale = {\n\t\t\t\t\tx: this._initialScale.x * scaleX,\n\t\t\t\t\ty: this._initialScale.y * (fixRatioDisabled ? scaleY : scaleX)\n\t\t\t\t};\n\n\t\t\t\tscale.width = scale.x * this.origSize.width;\n\t\t\t\tscale.height = scale.y * this.origSize.height;\n\t\t\t\tthis.model.set(\"scale\", scale);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: scale stopped.\n\t\t\t */\n\t\t\tscaleStop: function() {\n\t\t\t\tvar cmd = new ComponentCommands.Scale(this._initialScale, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tvar size,\n\t\t\t\t\t_this = this;\n\t\t\t\tthis.$el.html(this.__getTemplate()(this.model.attributes));\n\t\t\t\tthis.$el.find(\"span[data-delta]\").each(function(idx, elem) {\n\t\t\t\t\tvar deltaDrag;\n\t\t\t\t\tdeltaDrag = new DeltaDragControl($(elem), true);\n\t\t\t\t\treturn _this._deltaDrags.push(deltaDrag);\n\t\t\t\t});\n\t\t\t\tthis.$content = this.$el.find(\".content\");\n\t\t\t\tthis.$content.addClass(this.model.customClasses());\n\t\t\t\tthis.$contentScale = this.$el.find(\".content-scale\");\n\t\t\t\tthis._selectionChanged(this.model, this.model.get(\"selected\"));\n\t\t\t\tthis.$xInput = this.$el.find(\"[data-option='x']\");\n\t\t\t\tthis.$yInput = this.$el.find(\"[data-option='y']\");\n\t\t\t\tthis.$el.css({\n\t\t\t\t\ttop: this.model.get(\"y\"),\n\t\t\t\t\tleft: this.model.get(\"x\")\n\t\t\t\t});\n\t\t\t\tsize = {\n\t\t\t\t\twidth: this.$el.width(),\n\t\t\t\t\theight: this.$el.height()\n\t\t\t\t};\n\t\t\t\tif (size.width > 0 && size.height > 0) {\n\t\t\t\t\tthis.origSize = size;\n\t\t\t\t}\n\t\t\t\tthis._setUpdatedTransform();\n\t\t\t\treturn this.$el;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Update element css transform rules.\n\t\t\t *\n\t\t\t * @private\n\t\t\t */\n\t\t\t_setUpdatedTransform: function() {\n\t\t\t\tvar newHeight, newWidth, obj, scale, transformStr;\n\t\t\t\ttransformStr = this._buildTransformString();\n\t\t\t\tobj = {\n\t\t\t\t\ttransform: transformStr\n\t\t\t\t};\n\t\t\t\tobj[window.browserPrefix + \"transform\"] = transformStr;\n\t\t\t\tthis.$content.css(obj);\n\t\t\t\tscale = this.model.get(\"scale\");\n\t\t\t\tif (this.origSize != null) {\n\t\t\t\t\tnewWidth = scale.width || this.origSize.width;\n\t\t\t\t\tnewHeight = scale.height || this.origSize.height;\n\t\t\t\t\tthis.$el.css({\n\t\t\t\t\t\twidth: newWidth,\n\t\t\t\t\t\theight: newHeight\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (scale != null) {\n\t\t\t\t\tthis.$contentScale.css(window.browserPrefix + \"transform\", \"scale(\" + scale.x + \",\" + scale.y + \")\");\n\t\t\t\t}\n\t\t\t\tthis.$el.css(window.browserPrefix + \"transform\", \"rotate(\" + this.model.get(\"rotate\") + \"rad)\");\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Build css transformation string based on component transformations (scale, rotate, etc.)\n\t\t\t *\n\t\t\t * @returns {string}\n\t\t\t * @private\n\t\t\t */\n\t\t\t_buildTransformString: function() {\n\t\t\t\tvar transformStr = \"\";\n\t\t\t\tthis.transforms.forEach(function(transformName) {\n\t\t\t\t\tvar transformValue;\n\t\t\t\t\ttransformValue = this.model.get(transformName);\n\t\t\t\t\tif (transformValue) {\n\t\t\t\t\t\treturn transformStr += transformName + \"(\" + transformValue + \"rad) \";\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t\treturn transformStr;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Update element's custom classes.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {string} classes\n\t\t\t * @private\n\t\t\t */\n\t\t\t_updateCustomClasses: function(model, classes) {\n\t\t\t\tthis.$content.attr('class', 'content ' + classes);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get view template.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t * @private\n\t\t\t */\n\t\t\t__getTemplate: function() {\n\t\t\t\treturn JST[\"strut.slide_components/Component\"];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component is being unrendered.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t * @private\n\t\t\t */\n\t\t\t_unrender: function() {\n\t\t\t\treturn this.remove(false);\n\t\t\t},\n\n\t\t\tconstructor: function ComponentView() {\n\t\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n\n",
    "/**\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/slide_components/view/ThreeDRotatableComponentView',[\"./ComponentView\", \"common/Math2\"], function(ComponentView, Math2) {\n\tvar twoPI = Math.PI * 2;\n\n\t/**\n\t * @class ThreeDRotatableComponentView\n\t * @augments ComponentView\n\t */\n\treturn ComponentView.extend({\n\t\ttransforms: [\"rotateX\", \"rotateY\", \"rotateZ\", \"scale\"],\n\n\t\t/**\n\t\t * Returns list of events, tracked by this view.\n\t\t *\n\t\t * @returns {Object}\n\t\t */\n\t\tevents: function() {\n\t\t\tvar parentEvents;\n\t\t\tparentEvents = ComponentView.prototype.events();\n\t\t\treturn _.extend(parentEvents, {\n\t\t\t\t\"mousedown .form-inline\": \"stopProp\",\n\t\t\t\t\"deltadragStart span[data-delta='rotateX']\": \"rotateXStart\",\n\t\t\t\t\"deltadrag span[data-delta='rotateX']\": \"rotateX\",\n\t\t\t\t\"deltadragStart span[data-delta='rotateZ']\": \"rotateZStart\",\n\t\t\t\t\"deltadrag span[data-delta='rotateY']\": \"rotateY\",\n\t\t\t\t\"deltadragStart span[data-delta='rotateY']\": \"rotateYStart\",\n\t\t\t\t\"deltadrag span[data-delta='rotateZ']\": \"rotateZ\",\n\t\t\t\t\"change input[data-option='z']\": \"manualMoveZ\",\n\t\t\t\t\"change input[data-option='scale']\": \"manualMoveScale\",\n\t\t\t\t\"change input[data-option='rotateX']\": \"manualRotX\",\n\t\t\t\t\"change input[data-option='rotateY']\": \"manualRotY\",\n\t\t\t\t\"change input[data-option='rotateZ']\": \"manualRotZ\"\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Initialize ThreeDRotatableComponentView component view.\n\t\t */\n\t\tinitialize: function() {\n\t\t\tComponentView.prototype.initialize.apply(this, arguments);\n\t\t\tthis.model.on(\"change:rotateX\", this._rotXChanged, this);\n\t\t\tthis.model.on(\"change:rotateY\", this._rotYChanged, this);\n\t\t\treturn this.model.on(\"change:rotateZ\", this._rotZChanged, this);\n\t\t},\n\n\t\tstopProp: function(e) {\n\t\t\te.stopPropagation();\n\t\t},\n\n\t\tdispose: function() {\n\t\t\tthis.model.off(null, null, this);\n\t\t},\n\n\t\tmanualMoveScale: function(e) {\n\t\t\treturn this.model.setFloat(\"impScale\", e.target.value);\n\t\t},\n\n\t\tmanualMoveZ: function(e) {\n\t\t\treturn this.model.setInt(\"z\", e.target.value);\n\t\t},\n\n\t\tmanualRotX: function(e) {\n\t\t\treturn this.model.setFloat(\"rotateX\", Math2.toRads(e.target.value));\n\t\t},\n\n\t\tmanualRotY: function(e) {\n\t\t\treturn this.model.setFloat(\"rotateY\", Math2.toRads(e.target.value));\n\t\t},\n\n\t\tmanualRotZ: function(e) {\n\t\t\treturn this.model.setFloat(\"rotateZ\", Math2.toRads(e.target.value));\n\t\t},\n\n\t\trotateXStart: function(e, deltas) {\n\t\t\tthis.updateOrigin();\n\t\t\tthis._rotXOffset = this._calcRot(deltas);\n\t\t\treturn this._initialRotX = this.model.get(\"rotateX\") || 0;\n\t\t},\n\n\t\trotateX: function(e, deltas) {\n\t\t\tvar rot;\n\t\t\trot = (deltas.dy * .02) % twoPI;\n\t\t\treturn this.model.setFloat(\"rotateX\", this._initialRotX + rot);\n\t\t},\n\n\t\t_rotXChanged: function(model, value) {\n\t\t\tthis.$rotXInput.val(Math2.round(Math2.toDeg(value), 2));\n\t\t\treturn this._setUpdatedTransform();\n\t\t},\n\n\t\trotateYStart: function(e, deltas) {\n\t\t\tthis.updateOrigin();\n\t\t\tthis._rotYOffset = this._calcRot(deltas);\n\t\t\treturn this._initialRotY = this.model.get(\"rotateY\") || 0;\n\t\t},\n\n\t\trotateY: function(e, deltas) {\n\t\t\tvar rot;\n\t\t\trot = (deltas.dx * .02) % twoPI;\n\t\t\treturn this.model.setFloat(\"rotateY\", this._initialRotY + rot);\n\t\t},\n\n\t\t_rotYChanged: function(model, value) {\n\t\t\tthis.$rotYInput.val(Math2.round(Math2.toDeg(value), 2));\n\t\t\treturn this._setUpdatedTransform();\n\t\t},\n\n\t\trotateZStart: function(e, deltas) {\n\t\t\tthis.updateOrigin();\n\t\t\tthis._rotZOffset = this._calcRot(deltas);\n\t\t\treturn this._initialRotZ = this.model.get(\"rotateZ\") || 0;\n\t\t},\n\n\t\trotateZ: function(e, deltas) {\n\t\t\tvar rot;\n\t\t\trot = this._calcRot(deltas);\n\t\t\treturn this.model.setFloat(\"rotateZ\", this._initialRotZ + rot - this._rotZOffset);\n\t\t},\n\n\t\t_rotZChanged: function(model, value) {\n\t\t\tthis.$rotZInput.val(Math2.round(Math2.toDeg(value), 2));\n\t\t\treturn this._setUpdatedTransform();\n\t\t},\n\n\t\t/**\n\t\t * Render element based on component model.\n\t\t *\n\t\t * @returns {*}\n\t\t */\n\t\trender: function() {\n\t\t\tComponentView.prototype.render.apply(this, arguments);\n\t\t\tthis.$rotXInput = this.$el.find(\"[data-option='rotateX']\");\n\t\t\tthis.$rotYInput = this.$el.find(\"[data-option='rotateY']\");\n\t\t\tthis.$rotZInput = this.$el.find(\"[data-option='rotateZ']\");\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Get view template.\n\t\t *\n\t\t * @returns {*}\n\t\t * @private\n\t\t */\n\t\t__getTemplate: function() {\n\t\t\treturn null;\n\t\t},\n\n\t\tconstructor: function ThreeDRotatableComponentView() {\n\t\t\tComponentView.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n\n",
    "\n",
    "/**\n * @author Matt Crinklaw-Vogt\n */\ndefine('strut/slide_snapshot/TransitionSlideSnapshot',[\"strut/slide_components/view/ThreeDRotatableComponentView\",\n\t\"./SlideDrawer\",\n\t\"css!styles/transition_editor/TransitionSlideSnapshot.css\",\n\t\"strut/deck/Utils\"],\n\tfunction(ThreeDComponentView, SlideDrawer, empty, DeckUtils) {\n\t\tvar overviewSize = window.config.slide.overviewSize;\n\n\t\t/**\n\t\t * This is a special kind of component, shown in transition editor (Overview mode). It inherits a lot of component\n\t\t * UI goodies such as drag-n-drop ability, but looks like a slide snapshot.\n\t\t *\n\t\t * @class TransitionSlideSnapshot\n\t\t * @augments ThreeDRotatableComponentView\n\t\t */\n\t\treturn ThreeDComponentView.extend({\n\t\t\tclassName: \"component transitionSlideSnapshot\",\n\n\t\t\t/**\n\t\t\t * Returns list of Backbone events.\n\t\t\t *\n\t\t\t * @returns {Object}\n\t\t\t */\n\t\t\tevents: function() {\n\t\t\t\tvar parentEvents;\n\t\t\t\tparentEvents = ThreeDComponentView.prototype.events();\n\t\t\t\treturn _.extend(parentEvents, {\n\t\t\t\t\t\"mousedown\": \"mousedown\"\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize transition snapshot.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tThreeDComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.model.on('change:impScale', this._impScaleChanged, this);\n\t\t\t\tthis.model.on('change:background', this._backgroundChanged, this);\n\t\t\t\tthis.model.on('change:surface', this._backgroundChanged, this);\n\t\t\t\tthis.options.deck.on('change:background', this._backgroundChanged, this);\n\t\t\t\tthis.options.deck.on('change:surface', this._backgroundChanged, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove transition snapshot.\n\t\t\t */\n\t\t\tremove: function() {\n\t\t\t\tthis.dispose();\n\t\t\t\tThreeDComponentView.prototype.remove.call(this, false);\n\t\t\t\tthis.model.set(\"selected\", false);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Dispose transition snapshot.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tif (this.slideDrawer != null) {\n\t\t\t\t\tthis.slideDrawer.dispose();\n\t\t\t\t}\n\t\t\t\tThreeDComponentView.prototype.dispose.call(this);\n\t\t\t\tthis.model.off(null, null, this);\n\t\t\t\tthis.options.deck.off(null, null, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user pressed a mouse button over the component.\n\t\t\t * @param {jQuery.Event} e\n\t\t\t */\n\t\t\tmousedown: function(e) {\n\t\t\t\tvar multiselect = e.ctrlKey || e.metaKey || e.shiftKey;\n\t\t\t\tif(!multiselect && !this.model.get(\"selected\")) {\n\t\t\t\t\tthis.model.set(\"active\", true);\n\t\t\t\t}\n\t\t\t\tThreeDComponentView.prototype.mousedown.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on slide scale transition change.\n\t\t\t */\n\t\t\t_impScaleChanged: function() {\n\t\t\t\tvar scaleFactor = this.model.get('impScale') | 0;\n\t\t\t\tvar $content = this.$el.find('.content');\n\t\t\t\tvar width = overviewSize.width * scaleFactor;\n\t\t\t\tvar height = overviewSize.height * scaleFactor;\n\n\t\t\t\tvar size = {\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height\n\t\t\t\t};\n\t\t\t\t$content.css(size);\n\t\t\t\tthis.slideDrawer.setSize(size);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on background change.\n\t\t\t */\n\t\t\t_backgroundChanged: function(deck, bg) {\n\t\t\t\tthis._$content.removeClass();\n\t\t\t\tthis._$content.addClass('content');\n\t\t\t\tthis.slideDrawer.applyBackground(this.model, this.options.deck, {transparentForDeckSurface: true, surfaceForDefault: true});\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render transition slide snapshot.\n\t\t\t *\n\t\t\t * @returns {TransitionSlideSnapshot}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tThreeDComponentView.prototype.render.apply(this, arguments);\n\t\t\t\tif (this.slideDrawer != null) {\n\t\t\t\t\tthis.slideDrawer.dispose();\n\t\t\t\t}\n\n\t\t\t\tthis.$el.css({\n\t\t\t\t\tleft: this.model.get(\"x\"),\n\t\t\t\t\ttop: this.model.get(\"y\")\n\t\t\t\t});\n\n\t\t\t\t// this.$el.class();\n\t\t\t\tthis._$content = this.$el.find('.content');\n\n\t\t\t\tvar $el = this.$el.find('.slideDrawer');\n\t\t\t\tthis.slideDrawer = new SlideDrawer(this.model, $el);\n\t\t\t\tthis.slideDrawer.applyBackground(this.model, this.options.deck, {transparentForDeckSurface: true, surfaceForDefault: true});\n\n\t\t\t\tthis._impScaleChanged();\n\n\t\t\t\tthis.slideDrawer.render();\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get view template.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t * @private\n\t\t\t */\n\t\t\t__getTemplate: function() {\n\t\t\t\treturn JST[\"strut.slide_snapshot/TransitionSlideSnapshot\"];\n\t\t\t},\n\n\t\t\tconstructor: function TransitionSlideSnapshot() {\n\t\t\t\tThreeDComponentView.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n\n",
    "define('strut/transition_editor/view/FreeFormTransitionEditorView',['libs/backbone',\n\t'strut/slide_snapshot/TransitionSlideSnapshot',\n\t'strut/deck/Utils'],\n\tfunction(Backbone, TransitionSlideSnapshot, DeckUtils) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * Transition editor, also called an \"Overview mode\", allows to manage slide transitions via drag-drop.\n\t\t *\n\t\t * @class TransitionEditorView\n\t\t * @augments Backbone.View\n\t\t */\n\t\treturn Backbone.View.extend({\n\t\t\tclassName: 'slideTable strut-surface',\n\t\t\tevents: {\n\t\t\t\t\"click\": \"_clicked\"\n\t\t\t},\n\t\t\t\n\t\t\t/*\n\t\t\t TODO: render the slides...\n\t\t\t The button bar will need to be taken care of\n\t\t\t through something else...\n\t\t\t Register button bars with a given mode?\n\n\t\t\t strut.TransitionButtonProviders??\n\n\t\t\t My model is a TransitionEditorModel\n\t\t\t which contains a reference to the editorModel\n\t\t\t and registry.\n\t\t\t */\n\n\t\t\t/**\n\t\t\t * Initialize transition editor view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis._snapshots = [];\n\n\t\t\t\tthis.model.deck().on('change:surface', this._surfaceChanged, this);\n\t\t\t\t// $(document.body).css('overflow', '');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on deck surface class change.\n\t\t\t *\n\t\t\t * @param {Deck} deck\n\t\t\t * @param {string} surface\n\t\t\t * @private\n\t\t\t */\n\t\t\t_surfaceChanged: function(deck, surface) {\n\t\t\t\tif (DeckUtils.isImg(surface)) {\n\t\t\t\t\tthis.$el.css('background-image', DeckUtils.getImgUrl(surface));\n\t\t\t\t} else {\n\t\t\t\t\tthis.$el.css('background-image', '');\n\t\t\t\t\tthis.$el.removeClass();\n\t\t\t\t\tthis.$el.addClass('slideTable strut-surface ui-selectable ' + surface);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: user clicked editor background.\n\t\t\t *\n\t\t\t * @param {jQuery.Event} e\n\t\t\t * @private\n\t\t\t */\n\t\t\t_clicked: function(e) {\n\t\t\t\tthis.model.deck().unselectSlides(null, true);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove transition editor view.\n\t\t\t */\n\t\t\tremove: function() {\n\t\t\t\tthis.dispose();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Dispose transition editor view.\n\t\t\t */\n\t\t\tdispose: function() {\n\t\t\t\tBackbone.View.prototype.remove.call(this);\n\t\t\t\tthis.model.deck().off(null, null, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render transition editor.\n\t\t\t *\n\t\t\t * @returns {TransitionEditorView}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tthis.$el.selectable({\n\t\t\t\t\tfilter: \".component\",\n\t\t\t\t\tselected: function(event, ui) {\n\t\t\t\t\t\t$(ui.selected).trigger('select', ui);\n\t\t\t\t\t},\n\t\t\t\t\tunselected: function(event, ui) {\n\t\t\t\t\t\t$(ui.unselected).trigger('unselect', ui);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.$el.html('');\n\t\t\t\tvar deck = this.model.deck();\n\t\t\t\tthis._surfaceChanged(deck, deck.get('surface'));\n\n                var colCnt = 5;\n\t\t\t\tvar cnt = 0;\n\t\t\t\tdeck.get('slides').forEach(function(slide) {\n\t\t\t\t\tvar x = slide.get('x');\n                    //设置overview页面各幻灯片位置\n\t\t\t\t\tif (x == null) {\n                        slide.set(\"x\", (cnt % colCnt) * 280 + 180);\n                        slide.set(\"y\", ((cnt / colCnt) | 0) * 280 + 180);\n\t\t\t\t\t}\n\t\t\t\t\t++cnt;\n\n\t\t\t\t\tvar snapshot = new TransitionSlideSnapshot({model: slide,\n\t\t\t\t\t\tregistry: this.model.registry, deck: deck});\n\t\t\t\t\tthis._snapshots.push(snapshot);\n\t\t\t\t\tthis.$el.append(snapshot.render().$el);\n\t\t\t\t}, this);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tconstructor: function TransitionEditorView() {\n\t\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/transition_editor/view/CannedTransitionsView',['libs/backbone'], function(Backbone) {\n\tfunction img() {\n\t\treturn 'styles/img/' + this.name + '.png';\n\t};\n\n\tvar canned = [\n\t\t{\n\t\t\tname: 'carousel',\n\t\t\timg: img,\n\t\t\tstyle: 'height: 126px;'\n\t\t},\n\t\t{\n\t\t\tname: 'classic',\n\t\t\timg: img\n\t\t},\n\t\t{\n\t\t\tname: 'concave',\n\t\t\timg: img,\n\t\t\tstyle: 'height: 126px;'\n\t\t},\n\t\t{\n\t\t\tname: 'coverflow',\n\t\t\timg: img\n\t\t},\n\t\t{\n\t\t\tname: 'cube',\n\t\t\timg: img\n\t\t},\n\t\t{\n\t\t\tname: 'cubeb',\n\t\t\timg: img\n\t\t},\n\t\t{\n\t\t\tname: 'cards',\n\t\t\timg: img\n\t\t},\n\t\t{\n\t\t\tname: 'none',\n\t\t\timg: 'styles/strut.themes/img/nobg.png'\n\t\t}\n\t];\n\n\treturn Backbone.View.extend({\n\t\tevents: {\n\t\t\t'click .thumbnail': '_transitionSelected'\n\t\t},\n\n\t\tclassName: 'cannedTransitionsView',\n\t\tinitialize: function() {\n\t\t\t// TODO: get the available \"canned\" transitions\n\t\t\t// from the generator's metadata?\n\t\t\t// Or just drop Revea.js support and only focus\n\t\t\t// on bespoke?\n\n\t\t\t// Do a survey of the number of presentations\n\t\t\t// that actually use the \"basement\" feature...\n\t\t\tvar transition = this.model.cannedTransition() || 'none';\n\n\t\t\tcanned.some(function(c) {\n\t\t\t\tif (c.name == transition) {\n\t\t\t\t\tc.active = true;\n\t\t\t\t} else {\n\t\t\t\t\tc.active = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_transitionSelected: function(e) {\n\t\t\tthis.$el.find('.active').removeClass('active');\n\t\t\tvar activated = e.currentTarget.dataset.name;\n\t\t\tthis.model.cannedTransition(activated);\n\n\t\t\t$(e.currentTarget).addClass('active');\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(\n\t\t\t\tJST['strut.transition_editor/CannedTransitions'](canned));\n\t\t\treturn this;\n\t\t},\n\n\t\tdispose: function() {\n\n\t\t},\n\n\t\tconstructor: function CannedTransitionsView() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('strut/transition_editor/main',['tantaman/web/widgets/ModeButton',\n\t\t'./model/OverviewModel',\n\t\t'./view/Overview',\n\t\t'./view/FreeFormTransitionEditorView',\n\t\t'./view/CannedTransitionsView'],\nfunction(ModeButton, OverviewModel, Overview, FreeFormTransitionEditorView,\n\tCannedTransitionsView) {\n\tvar service = {\n\t\tgetMode: function(editorModel, registry) {\n\t\t\tvar model = new OverviewModel(editorModel, registry);\n\n\t\t\treturn {\n\t\t\t\tview: new Overview({model: model}),\n\t\t\t\tmodel: model,\n\t\t\t\tid: 'overview',\n\t\t\t\tclose: function() {\n\t\t\t\t\tthis.view.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\tcreateButton: function(editorModel) {\n\t\t\treturn new ModeButton(editorModel, 'overview',\n\t\t\t\t\tJST['strut.transition_editor/Button']);\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.EditMode',\n\t\t\t\tmeta: {\n\t\t\t\t\tid: 'overview'\n\t\t\t\t}\n\t\t\t}, service);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.TransitionEditor',\n\t\t\t\tmeta: {\n\t\t\t\t\tcapabilities: {\n\t\t\t\t\t\tfreeformStepping: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, FreeFormTransitionEditorView);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.TransitionEditor',\n\t\t\t\tmeta: {\n\t\t\t\t\tcapabilities: {\n\t\t\t\t\t\tcannedTransitions: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, CannedTransitionsView);\n\n\t\t\t// TODO: register the canned transitions and xy stepping.\n\t\t}\n\t};\n});\n",
    "define('strut/slide_components/view/ComponentButton',['libs/backbone'],\n\tfunction(Backbone) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * @class ComponentButton\n\t\t * @augments Backbone.View\n\t\t */\n\t\treturn Backbone.View.extend({\n\t\t\tclassName: 'btn btn-plast',\n\t\t\ttagName: 'a',\n\n\t\t\t/**\n\t\t\t * Returns list of events, tracked by this view.\n\t\t\t *\n\t\t\t * @returns {Object}\n\t\t\t */\n\t\t\tevents: {\n\t\t\t\t'click': '_clicked'\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize ComponentButton.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tthis.$el.attr('data-compType', this.options.componentType);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on button click.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_clicked: function () {\n            console.log(\"Test\");\n\t\t\t\tthis.options.editorModel.addComponent(this.options.componentType);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render the button.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tthis.$el.html('<i class=\"' + this.options.icon + ' icon-white\"></i>' + this.options.name);\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tconstructor: function ComponentButton() {\n\t\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/view/ImportingComponentButton',['./ComponentButton', 'tantaman/web/widgets/ItemImportModal'],\n\tfunction(ComponentButton, ItemImportModal) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * @class ImportingComponentButton\n\t\t * @augments ComponentButton\n\t\t */\n\t\treturn ComponentButton.extend({\n\t\t\t/**\n\t\t\t * Initialize ImportingComponentButton.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tComponentButton.prototype.initialize.apply(this, arguments);\n\n\t\t\t\tthis._modal = ItemImportModal.get(this.options);\n\t\t\t\tthis._itemImported = this._itemImported.bind(this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on button click.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_clicked: function() {\n\t\t\t\tthis._modal.show(this._itemImported);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Add imported component to the slide.\n\t\t\t * @private\n\t\t\t */\n\t\t\t_itemImported: function(src) {\n\t\t\t\tthis.options.editorModel.addComponent({\n\t\t\t\t\tsrc: src,\n\t\t\t\t\ttype: this.options.componentType\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tconstructor: function ImportingComponentButton() {\n\t\t\t\tComponentButton.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/model/Image',['strut/deck/Component',\n\t'common/FileUtils'],\n\tfunction(Component, FileUtils) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * @class Image\n\t\t * @augments Component\n\t\t */\n\t\treturn Component.extend({\n\t\t\t// TODO: what about when this component is restored from undo?\n\t\t\t// object urls... would have been revoked...\n\t\t\tinitialize: function() {\n\t\t\t\tComponent.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.registry = window.serviceRegistry;\n\t\t\t\tthis.set('type', 'Image');\n\n\t\t\t\tvar src = this.get('src');\n\n\t\t\t\tvar self = this;\n\t\t\t\tif (typeof src === 'object') {\n\t\t\t\t\tthis.storageInterface = this.registry.getBest('strut.StorageInterface');\n\t\t\t\t\tthis.set('imageType', ''); // TODO\n\t\t\t\t\tthis.storageInterface.getAttachmentURL(src.docKey, src.attachKey)\n\t\t\t\t\t.then(function(uri) {\n\t\t\t\t\t\tself.uri = uri;\n\t\t\t\t\t\tself.trigger('change:uri', self, uri);\n\t\t\t\t\t\tself.trigger('change', self);\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}).done();\n\t\t\t\t} else {\n\t\t\t\t\tthis.uri = src;\n\t\t\t\t\tthis.set('imageType', FileUtils.imageType(src));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdispose: function() {\n\t\t\t\tComponent.prototype.dispose.apply(this, arguments);\n\t\t\t\tvar src = this.get('src');\n\t\t\t\tif (typeof src === 'object') {\n\t\t\t\t\tconsole.log('Revoking image uri');\n\t\t\t\t\tthis.storageInterface\n\t\t\t\t\t.revokeAttachmentURL(src.docKey, src.attachKey);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetURL: function() {\n\t\t\t\treturn this.uri;\n\t\t\t},\n\n\t\t\t// TODO: need to implement clone to correctly handle\n\t\t\t// the url and other transient attributes.\n\n\t\t\tconstructor: function ImageModel(attrs) {\n\t\t\t\tComponent.prototype.constructor.call(this, attrs);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/model/TextBox',['strut/deck/Component'],\n\tfunction(Component) {\n\t\t'use strict';\n\n\t\tfunction getInitialText(attrs) {\n\t\t\tif (!attrs)\n\t\t\t\treturn 'Text';\n\t\t\telse {\n\t\t\t\tvar text = '<font';\n\t\t\t\tfor (var style in attrs) {\n\t\t\t\t\tif (style == 'size') continue;\n\t\t\t\t\telse text += \" \";\n\n\t\t\t\t\ttext += style + '=\"' + attrs[style] + '\"';\n\t\t\t\t}\n\t\t\t\treturn text + '>Text</font>'\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @class TextBox\n\t\t * @augments Component\n\t\t */\n\t\treturn Component.extend({\n\t\t\tinitialize: function() {\n\t\t\t\tComponent.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.set('type', 'TextBox');\n\t\t\t\tif (!this.get('text')) {\n\t\t\t\t\tvar text = getInitialText(this._opts && this._opts.fontStyles);\n\t\t\t\t\tif (this._opts && this._opts.fontStyles.size)\n\t\t\t\t\t\tthis.set('size', this._opts.fontStyles.size);\n\t\t\t\t\tdelete this._opts;\n\t\t\t\t\tthis.set('text', text);\n\t\t\t\t\tif (!this.get('size'))\n\t\t\t\t\t\tthis.set('size', 72);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tconstructor: function TextBox(attrs, opts) {\n\t\t\t\tthis._opts = opts;\n\t\t\t\tComponent.prototype.constructor.call(this, attrs);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/model/WebFrame',['strut/deck/Component',\n\t'common/FileUtils'],\n\tfunction(Component, FileUtils) {\n\t\t'use strict';\n\n\t\t/**\n\t\t * @class WebFrame\n\t\t * @augments Component\n\t\t */\n\t\treturn Component.extend({\n\t\t\tinitialize: function() {\n\t\t\t\tComponent.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.set('type', 'WebFrame');\n\t\t\t},\n\n\t\t\tconstructor: function WebFrame(attrs) {\n\t\t\t\tComponent.prototype.constructor.call(this, attrs);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/model/Video',['strut/deck/Component',\n\t'common/FileUtils'],\n\tfunction(Component, FileUtils) {\n\t\t'use strict';\n\n\t\tvar matchers = [\n\t\t\t{\n\t\t\t\ttype: 'youtube',\n\t\t\t\treg: /youtube\\.com\\/.*v=(.*?)(&|$)/,\n\t\t\t\tsrcType: function() {\n\t\t\t\t\treturn 'yt';\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'html5',\n\t\t\t\treg: /(.*)/,\n\t\t\t\tsrcType: function(src) {\n\t\t\t\t\treturn FileUtils.type(FileUtils.extension(src));\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\t/**\n\t\t * @class Video\n\t\t * @augments Component\n\t\t */\n\t\treturn Component.extend({\n\t\t\tinitialize: function() {\n\t\t\t\tvar matcher, regResult, _i, _len;\n\t\t\t\tComponent.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.set(\"type\", \"Video\");\n\t\t\t\tfor (_i = 0, _len = matchers.length; _i < _len; _i++) {\n\t\t\t\t\tmatcher = matchers[_i];\n\t\t\t\t\tregResult = matcher.reg.exec(this.get('src'));\n\t\t\t\t\tif (regResult != null) {\n\t\t\t\t\t\tthis.set('shortSrc', regResult[1]);\n\t\t\t\t\t\tthis.set('videoType', matcher.type);\n\t\t\t\t\t\tthis.set('srcType', matcher.srcType(regResult[1]));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tconstructor: function Video(attrs) {\n\t\t\t\tComponent.prototype.constructor.call(this, attrs);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/view/Mixers',[],function() {\n    var mixers;\n    return mixers = {\n      scaleByResize: function(e, deltas) {\n        var height, offset, width;\n        offset = this.$el.offset();\n        width = (deltas.x - offset.left) / this.dragScale;\n        height = (deltas.y - offset.top) / this.dragScale;\n        return this.model.set(\"scale\", {\n          width: width,\n          height: height\n        });\n      },\n\n      scaleChangeByResize: function(model, size) {\n        if (this.origSize) {\n          var factor = size.width / this.origSize.width;\n          size.height = this.origSize.height * factor;\n        }\n        this.$el.css(size);\n      },\n\n      scaleObjectEmbed: function(e, deltas) {\n        var height, offset, size, width;\n        offset = this.$el.offset();\n        width = (deltas.x - offset.left) / this.dragScale;\n        height = (deltas.y - offset.top) / this.dragScale;\n        size = {\n          width: width,\n          height: height\n        };\n        return this.model.set(\"scale\", size);\n      },\n\n      scaleChangeObjectEmbed: function(model, size) {\n          this.$object.attr(size);\n          this.$embed.attr(size);\n          this.$el.css(size);\n      },\n\n      scaleChangeInlineSvg: function(model, size) {\n        this.$object.attr(size);\n        this.$el.css(size);\n      }\n    };\n  });\n",
    "define('strut/slide_components/view/ImageView',[\"./ComponentView\", './Mixers'],\n\tfunction(ComponentView, Mixers) {\n\n\t\t/**\n\t\t * @class ImageView\n\t\t * @augments ComponentView\n\t\t */\n\t\treturn ComponentView.extend({\n\t\t\tclassName: \"component imageView\",\n\t\t\ttagName: \"div\",\n\n\t\t\t/**\n\t\t\t * Initialize Image component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t\tif (this.model.get(\"imageType\") === \"SVG\") {\n\t\t\t\t\tthis.scale = Mixers.scaleByResize;\n\t\t\t\t\tthis.model.off(\"change:scale\", this._setUpdatedTransform, this);\n\t\t\t\t\tthis.model.on(\"change:scale\", Mixers.scaleChangeByResize, this);\n\t\t\t\t}\n\t\t\t\tthis.model.on('change:uri', this._urlChanged, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tvar $img,\n\t\t\t\t\t_this = this;\n\t\t\t\tComponentView.prototype.render.call(this);\n\n\t\t\t\tvar url = this.model.getURL();\n\t\t\t\tif (url) {\n\t\t\t\t\t$img = $(\"<img src=\" + url + \"></img>\");\t\n\t\t\t\t} else {\n\t\t\t\t\t$img = $(\"<img></img>\");\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$img.load(function() {\n\t\t\t\t\treturn _this._finishRender($(this));\n\t\t\t\t});\n\t\t\t\t$img.error(function() {\n\t\t\t\t\treturn _this.remove();\n\t\t\t\t});\n\t\t\t\tthis.$img = $img;\n\t\t\t\treturn this.$el;\n\t\t\t},\n\n\t\t\t_urlChanged: function(model, url) {\n\t\t\t\tthis.$img.attr('src', url);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Do the actual rendering once image is loaded.\n\t\t\t *\n\t\t\t * @param {jQuery} $img\n\t\t\t * @returns {*}\n\t\t\t * @private\n\t\t\t */\n\t\t\t_finishRender: function($img) {\n\t\t\t\tvar height, naturalHeight, naturalWidth, scale, width;\n\t\t\t\tnaturalWidth = $img[0].naturalWidth;\n\t\t\t\tnaturalHeight = $img[0].naturalHeight;\n\t\t\t\tif (this.model.get(\"imageType\") === \"SVG\") {\n\t\t\t\t\t$img.css({\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\theight: \"100%\"\n\t\t\t\t\t});\n\t\t\t\t\tscale = this.model.get(\"scale\");\n\t\t\t\t\tif (scale && scale.width) {\n\t\t\t\t\t\tthis.$el.css({\n\t\t\t\t\t\t\twidth: scale.width,\n\t\t\t\t\t\t\theight: scale.height\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidth = Math.max(naturalWidth, 50);\n\t\t\t\t\t\theight = Math.max(naturalHeight, 50);\n\t\t\t\t\t\t// this.$el.css({\n\t\t\t\t\t\t//   width: width,\n\t\t\t\t\t\t//   height: height\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tthis.model.set(\"scale\", {\n\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\theight: height\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.origSize = {\n\t\t\t\t\t\twidth: naturalWidth,\n\t\t\t\t\t\theight: naturalHeight\n\t\t\t\t\t};\n\t\t\t\t\t$img[0].width = naturalWidth;\n\t\t\t\t\t$img[0].height = naturalHeight;\n\t\t\t\t\tthis._setUpdatedTransform();\n\t\t\t\t}\n\t\t\t\t$img.bind(\"dragstart\", function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\tthis.$content.append($img);\n\t\t\t\tif (this.model.get(\"imageType\") === \"SVG\") {\n\t\t\t\t\t$img.parent().addClass(\"svg\");\n\t\t\t\t\treturn $img.parent().parent().addClass(\"svg\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/view/TextBoxView',[\"./ComponentView\", \"libs/etch\",\n\t\"strut/deck/ComponentCommands\",\n\t\"tantaman/web/undo_support/CmdListFactory\",\n\t\"tantaman/web/interactions/TouchBridge\"],\n\tfunction(ComponentView, etch, ComponentCommands, CmdListFactory, TouchBridge) {\n\t\t'use strict';\n\t\tvar undoHistory = CmdListFactory.managedInstance('editor');\n\t\tvar styles;\n\t\tstyles = [\"family\", \"size\", \"weight\", \"style\", \"color\", \"decoration\", \"align\"];\n\n\t\t/**\n\t\t * @class TextBoxView\n\t\t * @augments ComponentView\n\t\t */\n\t\treturn ComponentView.extend({\n\t\t\tclassName: \"component textBox\",\n\t\t\ttagName: \"div\",\n\n\t\t\t/**\n\t\t\t * Returns list of events, tracked by this view.\n\t\t\t *\n\t\t\t * @returns {Object}\n\t\t\t */\n\t\t\tevents: function() {\n\t\t\t\tvar myEvents, parentEvents;\n\t\t\t\tparentEvents = ComponentView.prototype.events();\n\t\t\t\tmyEvents = {\n\t\t\t\t\t\"editComplete\": \"editCompleted\",\n\t\t\t\t\t\"mouseup\": \"mouseup\"\n\t\t\t\t};\n\t\t\t\treturn _.extend(parentEvents, myEvents);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize TextBox component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tvar style, _i, _len;\n\t\t\t\tComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t\tfor (_i = 0, _len = styles.length; _i < _len; _i++) {\n\t\t\t\t\tstyle = styles[_i];\n\t\t\t\t\tthis.model.on(\"change:\" + style, this._styleChanged, this);\n\t\t\t\t}\n\t\t\t\tthis.model.on(\"change:text\", this._textChanged, this);\n\t\t\t\tthis._lastDx = 0;\n\t\t\t\tthis.keydown = this.keydown.bind(this);\n\n\t\t\t\tthis.dblclicked = this.dblclicked.bind(this);\n\t\t\t\tTouchBridge.on.dblclick(this.$el, this.dblclicked);\n\n\t\t\t\t// TODO This can be uncommented once modal windows start blocking all slide key events.\n\t\t\t\t// https://github.com/tantaman/Strut/pull/183\n\t\t\t\t// $(document).bind(\"keydown\", this.keydown);\n\n\t\t\t\tthis.model.on(\"edit\", this.edit, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: scale started.\n\t\t\t */\n\t\t\tscaleStart: function() {\n\t\t\t\tthis._initialSize = this.model.get('size');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: scale in progress.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t * @param {{dx: number, dy: number}} deltas\n\t\t\t */\n\t\t\tscale: function(e, deltas) {\n\t\t\t\tvar currSize, sign;\n\t\t\t\tcurrSize = this.model.get(\"size\");\n\t\t\t\tsign = deltas.dx - this._lastDx > 0 ? 1 : -1;\n\t\t\t\tthis.model.set(\"size\", currSize + Math.round(sign * Math.sqrt(Math.abs(deltas.dx - this._lastDx))));\n\t\t\t\treturn this._lastDx = deltas.dx;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: scale stopped.\n\t\t\t */\n\t\t\tscaleStop: function() {\n\t\t\t\tvar cmd = ComponentCommands.TextScale(this._initialSize, this.model);\n\t\t\t\tundoHistory.push(cmd);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Remove component view.\n\t\t\t *\n\t\t\t * @param {boolean} disposeModel Whether or not to dispose component's model as well.\n\t\t\t */\n\t\t\tremove: function(disposeModel) {\n\t\t\t\tComponentView.prototype.remove.apply(this, arguments);\n\t\t\t\t// TODO This can be uncommented once modal windows start blocking all slide key events.\n\t\t\t\t// $(document).unbind(\"keydown\", this.keydown);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: element is double clicked. Enter editing mode for a textbox.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tdblclicked: function(e) {\n\t\t\t\tthis.$el.addClass(\"editable\");\n\t\t\t\tthis.$textEl.attr(\"contenteditable\", true);\n\t\t\t\tif (e != null) {\n\t\t\t\t\tthis._initialText = this.$textEl.html();\n\t\t\t\t\tetch.editableInit.call(this, e, this.model.get(\"y\") * this.dragScale + 35);\n\n\t\t\t\t\t// Focus editor and select all text.\n\t\t\t\t\tif (!this.editing) {\n\t\t\t\t\t\tthis.$textEl.get(0).focus();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tdocument.execCommand('selectAll', false, null);\n\t\t\t\t\t\t\tetch.triggerCaret();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// firefox failboats on this command\n\t\t\t\t\t\t\t// for some reason.  hence the try/catch\n\t\t\t\t\t\t\t// console.log(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.allowDragging = false;\n\t\t\t\tthis.editing = true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: mouse button has peen pressed down, drag started. If in editing mode, move etch to the clicked spot.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmousedown: function(e) {\n\t\t\t\tif (this.editing) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tetch.editableInit.call(this, e, this.model.get(\"y\") * this.dragScale + 35);\n\t\t\t\t} else {\n\t\t\t\t\tComponentView.prototype.mousedown.apply(this, arguments);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// TODO Add doc (Why do we need to call trigger caret?)\n\t\t\t/**\n\t\t\t * Event: mouse button has been released.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tmouseup: function(e) {\n\t\t\t\tif (this.editing) {\n\t\t\t\t\tetch.triggerCaret();\n\t\t\t\t\t//etch.editableInit.call(this, e, this.model.get(\"y\") * this.dragScale + 35);\n\t\t\t\t}\n\t\t\t\tComponentView.prototype.mouseup.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Event: key has been pressed down. If textbox is in focus, and it was a charachter key pressed, then start\n\t\t\t * typing in the textbox.\n\t\t\t *\n\t\t\t * @param {Event} e\n\t\t\t */\n\t\t\tkeydown: function(e) {\n\t\t\t\t// When user starts typing text in selected textbox, open edit mode immediately.\n\t\t\t\tif (this.model.get(\"selected\") && !this.editing) {\n\t\t\t\t\tif (!e.ctrlKey && !e.altKey && !e.metaKey && String.fromCharCode(e.which).match(/[\\w]/)) {\n\t\t\t\t\t\tthis.edit();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Open editor for the textbox.\n\t\t\t */\n\t\t\tedit: function() {\n\t\t\t\tvar e;\n\t\t\t\tthis.model.set(\"selected\", true);\n\t\t\t\te = $.Event(\"click\", {\n\t\t\t\t\tpageX: this.model.get(\"x\")\n\t\t\t\t});\n\t\t\t\tthis.dblclicked(e);\n\t\t\t\tthis.$textEl.selectText();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Finish editing and close the editor.\n\t\t\t */\n\t\t\teditCompleted: function() {\n\t\t\t\tvar text;\n\t\t\t\ttext = this.$textEl.html();\n\t\t\t\tthis.editing = false;\n\t\t\t\tif (text === \"\") {\n\t\t\t\t\treturn this.remove();\n\t\t\t\t} else {\n\t\t\t\t\tvar cmd = ComponentCommands.Text(this._initialText, this.model);\n\t\t\t\t\tundoHistory.push(cmd);\n\n\t\t\t\t\tthis.model.set(\"text\", text);\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\tthis.$textEl.attr(\"contenteditable\", false);\n\t\t\t\t\tthis.$el.removeClass(\"editable\");\n\t\t\t\t\tthis.allowDragging = true;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component is being selected. If component have been unselected, hide it's editor, if in editing mode.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {boolean} selected\n\t\t\t * @private\n\t\t\t */\n\t\t\t_selectionChanged: function(model, selected) {\n\t\t\t\tComponentView.prototype._selectionChanged.apply(this, arguments);\n\t\t\t\tif (!selected && this.editing) {\n\t\t\t\t\tthis.editCompleted();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component style change. Update CSS classes of the element.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {string} style\n\t\t\t * @param {Object} opts\n\t\t\t * @private\n\t\t\t */\n\t\t\t_styleChanged: function(model, style, opts) {\n\t\t\t\tvar key, value, _ref, _results;\n\t\t\t\t_ref = opts.changes; //model.changed;\n\t\t\t\tif (!_ref) return;\n\t\t\t\tfor (var i = 0; i < _ref.length; ++i) {\n\t\t\t\t\tkey = _ref[i];\n\t\t\t\t\tvalue = model.get(key);\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tif (key === \"decoration\" || key === \"align\") {\n\t\t\t\t\t\t\tkey = \"text\" + key.substring(0, 1).toUpperCase() + key.substr(1);\n\t\t\t\t\t\t} else if (key !== \"color\") {\n\t\t\t\t\t\t\tkey = \"font\" + key.substr(0, 1).toUpperCase() + key.substr(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$el.css(key, style);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * React on component's text change. Update html contents of the text box.\n\t\t\t *\n\t\t\t * @param {Component} model\n\t\t\t * @param {string} text Updated text (HTML code).\n\t\t\t * @private\n\t\t\t */\n\t\t\t_textChanged: function(model, text) {\n\t\t\t\tthis.$textEl.html(text);\n\t\t\t},\n\n\t\t\t_handlePaste: function(elem, e) {\n\t\t\t\te = e.originalEvent;\n\t\t\t\tdocument.execCommand('insertText', false, e.clipboardData.getData('text/plain'));\n\t\t\t\t// var sel = window.getSelection();\n\t\t\t\t// var range = sel.getRangeAt(0);\n\t\t\t\t// var text = document.createTextNode(e.clipboardData.getData('text/plain'));\n\t\t\t\t// range.deleteContents();\n\t\t\t\t// range.insertNode(text);\n\n\t\t\t\t// range.setStartAfter(text);\n\t\t\t\t// range.setEndAfter(text);\n\n\t\t\t\t// sel.removeAllRanges();\n\t\t\t\t// sel.addRange(range);\n\n\t\t\t\te.preventDefault();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tComponentView.prototype.render.call(this);\n\t\t\t\tthis.$textEl = this.$el.find(\".content\");\n\t\t\t\tvar self = this;\n\t\t\t\tthis.$textEl.bind('paste', function(e) {\n\t\t\t\t\tself._handlePaste(this, e);\n\t\t\t\t});\n\t\t\t\tthis.$textEl.html(this.model.get(\"text\"));\n\t\t\t\tthis.$el.css({\n\t\t\t\t\t// fontFamily: this.model.get(\"family\"),\n\t\t\t\t\tfontSize: this.model.get(\"size\"),\n\t\t\t\t\t// fontWeight: this.model.get(\"weight\"),\n\t\t\t\t\t// fontStyle: this.model.get(\"style\"),\n\t\t\t\t\t// color: \"#\" + this.model.get(\"color\"),\n\t\t\t\t\ttop: this.model.get(\"y\"),\n\t\t\t\t\tleft: this.model.get(\"x\"),\n\t\t\t\t\t// textDecoration: this.model.get(\"decoration\"),\n\t\t\t\t\t// textAlign: this.model.get(\"align\")\n\t\t\t\t});\n\t\t\t\treturn this.$el;\n\t\t\t},\n\n\t\t\tconstructor: function TextBoxView() {\n\t\t\t\tComponentView.prototype.constructor.apply(this, arguments);\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/view/WebFrameView',[\"./ComponentView\"],\n\tfunction(ComponentView) {\n\n\t\t/**\n\t\t * @class WebFrameView\n\t\t * @augments ComponentView\n\t\t */\n\t\treturn ComponentView.extend({\n\t\t\tclassName: \"component webFrameView\",\n\n\t\t\t/**\n\t\t\t * Initialize WebFrameView component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\treturn ComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tvar $frame, scale;\n\t\t\t\tComponentView.prototype.render.call(this);\n\t\t\t\t$frame = $(\"<iframe width='960' height='768' src=\" + (this.model.get('src')) + \"></iframe>\");\n\t\t\t\tthis.$el.find(\".content\").append($frame);\n\t\t\t\tthis.$el.append('<div class=\"overlay\"></div>');\n\t\t\t\tscale = this.model.get('scale');\n\t\t\t\tthis.$el.css({\n\t\t\t\t\twidth: 960 * scale.x,\n\t\t\t\t\theight: 768 * scale.y\n\t\t\t\t});\n\t\t\t\treturn this.$el;\n\t\t\t}\n\t\t});\n\t});\n",
    "define('strut/slide_components/view/VideoView',[\"./ComponentView\", './Mixers'],\n\tfunction(ComponentView, Mixers) {\n\t\tvar Html5, Youtube, result, types;\n\n\t\t/**\n\t\t * @class VideoView.Html5\n\t\t * @augments ComponentView\n\t\t */\n\t\tHtml5 = ComponentView.extend({\n\t\t\tclassName: \"component videoView\",\n\n\t\t\t/**\n\t\t\t * Initialize VideoView.Html5 component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\treturn ComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tvar $video,\n\t\t\t\t\t_this = this;\n\t\t\t\tComponentView.prototype.render.call(this);\n\t\t\t\t$video = $(\"<video controls></video>\");\n\t\t\t\t$video.append(\"<source preload='metadata' src='\" + (this.model.get(\"src\")) + \"' type='\" + (this.model.get(\"srcType\")) + \"' />\");\n\t\t\t\t$video.bind(\"loadedmetadata\", function() {\n\t\t\t\t\t_this._finishRender($(this));\n\t\t\t\t});\n\t\t\t\tthis.$el.find(\".content\").append($video);\n\t\t\t\treturn this.$el;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Do the actual rendering once video is loaded.\n\t\t\t *\n\t\t\t * @param {jQuery} $img\n\t\t\t * @returns {*}\n\t\t\t * @private\n\t\t\t */\n\t\t\t_finishRender: function($video) {\n\t\t\t\tthis.origSize = {\n\t\t\t\t\twidth: $video[0].videoWidth,\n\t\t\t\t\theight: $video[0].videoHeight\n\t\t\t\t};\n\t\t\t\tthis._setUpdatedTransform();\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * @class VideoView.Youtube\n\t\t * @augments ComponentView\n\t\t */\n\t\tYoutube = ComponentView.extend({\n\t\t\tclassName: 'component videoView',\n\n\t\t\t/**\n\t\t\t * Initialize VideoView.Youtube component view.\n\t\t\t */\n\t\t\tinitialize: function() {\n\t\t\t\tComponentView.prototype.initialize.apply(this, arguments);\n\t\t\t\tthis.scale = Mixers.scaleObjectEmbed;\n\t\t\t\tthis.model.off(\"change:scale\", this._setUpdatedTransform, this);\n\t\t\t\tthis.model.on(\"change:scale\", Mixers.scaleChangeObjectEmbed, this);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Render element based on component model.\n\t\t\t *\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\trender: function() {\n\t\t\t\tvar object, scale;\n\t\t\t\tComponentView.prototype.render.call(this);\n\t\t\t\tobject = '<object width=\"425\" height=\"344\"><param name=\"movie\" value=\"http://www.youtube.com/v/' + this.model.get('shortSrc') + '&hl=en&fs=1\"><param name=\"allowFullScreen\" value=\"true\"><embed src=\"http://www.youtube.com/v/' + this.model.get('shortSrc') + '&hl=en&fs=1\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" width=\"425\" height=\"344\"></object>';\n\t\t\t\tthis.$object = $(object);\n\t\t\t\tthis.$embed = this.$object.find('embed');\n\t\t\t\tscale = this.model.get(\"scale\");\n\t\t\t\tif (scale && scale.width) {\n\t\t\t\t\tthis.$object.attr(scale);\n\t\t\t\t\tthis.$embed.attr(scale);\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.attributes.scale = {\n\t\t\t\t\t\twidth: 425,\n\t\t\t\t\t\theight: 344\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tthis.$el.find('.content').append(this.$object);\n\t\t\t\treturn this.$el;\n\t\t\t}\n\t\t});\n\n\t\ttypes = {\n\t\t\thtml5: Html5,\n\t\t\tyoutube: Youtube\n\t\t};\n\t\treturn function(params) {\n\t\t\treturn new types[params.model.get('videoType')](params);\n\t\t};\n\t});\n",
    "define('tantaman/web/widgets/Utils',[],function() {\n\treturn {\n\t\t// todo: auto-detect the scale\n\t\tfitSizeToScale: function($elems, scale) {\n\t\t\tvar len = $elems.length;\n\t\t\tfor (var i = 0; i < len; ++i) {\n\t\t\t\tvar $elem = $($elems[i]);\n\t\t\t\tvar w = $elem.outerWidth();\n\t\t\t\tvar h = $elem.outerHeight();\n\n\t\t\t\tvar $parent = $elem.parent();\n\t\t\t\t$parent.width(w * scale);\n\t\t\t\t$parent.height(h * scale);\n\t\t\t}\n\t\t}\n\t};\n});\n",
    "define('strut/slide_components/view/ShapesDropdown',['tantaman/web/widgets/Dropdown',\n\t'tantaman/web/widgets/Utils'],\n\tfunction(Dropdown, Utils) {\n\n\t\t__extends(ShapesDropdown, Dropdown);\n\n\t\t/**\n\t\t * @class ShapesDropdown\n\t\t * @augments Dropdown\n\t\t * @param {ShapeCollection} shapes\n\t\t * @param template\n\t\t * @param {Object} options\n\t\t */\n\t\tfunction ShapesDropdown(shapes, template, options) {\n\t\t\tDropdown.apply(this, arguments);\n\t\t\tthis._editorModel = options.editorModel;\n\n\t\t\tthis._shapes = shapes.shapes;\n\n\t\t\tthis.$el.on('click', '.shape', this._selected.bind(this));\n\t\t}\n\n\t\t/**\n\t\t * React on item selection.\n\t\t *\n\t\t * @param {Event} e\n\t\t * @private\n\t\t */\n\t\tShapesDropdown.prototype._selected = function(e) {\n\t\t\tthis._editorModel.addComponent({\n\t\t\t\tmarkup: this._shapes[e.currentTarget.dataset.index].markup,\n\t\t\t\ttype: 'Shape'\n\t\t\t});\n\t\t}\n\n\t\treturn ShapesDropdown;\n\t});\n",
    "define('strut/slide_components/ShapeCollection',[],\n    function () {\n\n        /**\n         * @constructor\n         * @param {string} name\n         * @param {string} src\n         * @param {number} aspect\n         * @returns {PlatonicShape}\n         */\n        function PlatonicShape(name, src, markup, aspect) {\n            if (!(this instanceof PlatonicShape))\n                return new PlatonicShape(name, src, markup, aspect);\n\n            this.name = name;\n            this.src = '../../styles/img/' + src;\n            this.markup = markup;\n            this.aspect = aspect;\n        }\n\n        /**\n         * Standard collection of shapes.\n         *\n         * @constructor\n         */\n        function ShapeCollection() {\n            this.title = 'shapes';\n            // TODO: insertion of markup should be done by the build process\n            this.shapes = [\n                PlatonicShape('square', 'square.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 50 50\" preserveAspectRatio=\"none\"><rect width=\"50\" height=\"50\"/></svg>', 1),\n                PlatonicShape('triangle', 'triangle.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 50 50\" preserveAspectRatio=\"none\"><polygon points=\"25,0 50,50 0,50\"/></svg>', 1),\n                PlatonicShape('circle', 'circle.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" preserveAspectRatio=\"none\" viewBox=\"0 0 80 80\"><circle cx=\"40\" cy=\"40\" r=\"40\" /></svg>', 1),\n                PlatonicShape('hexagon', 'hexagon.svg', '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 726 726\" preserveAspectRatio=\"none\"><polygon points=\"723,314 543,625.769145 183,625.769145 3,314 183,2.230855 543,2.230855 723,314\"/></svg>', 1),\n                PlatonicShape('pentagon', 'pentagon.svg', '<svg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" preserveAspectRatio=\"none\"><polygon points=\"156.427384220077,186.832815729997 43.5726157799226,186.832815729997 8.69857443566525,79.5015528100076 100,13.1671842700025 191.301425564335,79.5015528100076\" /></svg>', 1),\n                PlatonicShape('star', 'star.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 180 180\" preserveAspectRatio=\"none\"><polygon points=\"90,0 30,170 180,50 0,50 150,170\"/></svg>', 1),\n                PlatonicShape('pacman', 'pacman.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 571.11 571.11\" preserveAspectRatio=\"none\"><path d=\"M535.441,412.339A280.868,280.868 0 1,1 536.186,161.733L284.493,286.29Z\"/></svg>', 1),\n                PlatonicShape('heart', 'heart.svg', '<svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.0\" viewBox=\"0 0 645 585\" preserveAspectRatio=\"none\"><defs id=\"defs4\" /><g id=\"layer1\"><path d=\"M 297.29747,550.86823 C 283.52243,535.43191 249.1268,505.33855 220.86277,483.99412 C 137.11867,420.75228 125.72108,411.5999 91.719238,380.29088 C 29.03471,322.57071 2.413622,264.58086 2.5048478,185.95124 C 2.5493594,147.56739 5.1656152,132.77929 15.914734,110.15398 C 34.151433,71.768267 61.014996,43.244667 95.360052,25.799457 C 119.68545,13.443675 131.6827,7.9542046 172.30448,7.7296236 C 214.79777,7.4947896 223.74311,12.449347 248.73919,26.181459 C 279.1637,42.895777 310.47909,78.617167 316.95242,103.99205 L 320.95052,119.66445 L 330.81015,98.079942 C 386.52632,-23.892986 564.40851,-22.06811 626.31244,101.11153 C 645.95011,140.18758 648.10608,223.6247 630.69256,270.6244 C 607.97729,331.93377 565.31255,378.67493 466.68622,450.30098 C 402.0054,497.27462 328.80148,568.34684 323.70555,578.32901 C 317.79007,589.91654 323.42339,580.14491 297.29747,550.86823 z\" id=\"path2417\"/><g transform=\"translate(129.28571,-64.285714)\" id=\"g2221\"/></g></svg>', 1),\n                PlatonicShape('arrow_3', 'arrow_3.svg', '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"64px\" height=\"64px\" id=\"svg2816\" version=\"1.1\" inkscape:version=\"0.47 r22583\" sodipodi:docname=\"arrow_right.svg\"><g id=\"layer1\"><path id=\"path3622\" d=\"M 34.090099,4.546795 C 33.121727,4.532073 32.161761,5.0632768 30.987745,6.0979724 L 12.930448,26.064412 c -1.123275,1.242037 1.348172,3.022808 3.022807,3.022808 l 9.943446,0 c -0.03517,0.185079 -0.07955,0.361214 -0.07955,0.556833 l 0,28.796216 c 0,1.674635 1.348172,3.022807 3.022807,3.022807 l 9.545708,0 c 1.674635,0 3.022807,-1.348172 3.022807,-3.022807 l 0,-28.796216 c 0,-0.195619 -0.04438,-0.371754 -0.07955,-0.556833 l 9.307065,0 c 1.674635,0 4.095902,-1.737168 3.022807,-3.022808 L 37.192454,6.3366151 C 36.03525,5.1221653 35.058472,4.5615172 34.090099,4.546795 z\" /></g></svg>', 1),\n                PlatonicShape('infinity', 'infinity.svg', '<svg viewBox=\"0 0 640 480\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"none\"><g><path stroke-width=\"1px\" d=\"m349.597595,238.17981c15.849091,14.657486 34.60968,25.733734 56.281982,33.228851c21.671265,7.495331 46.092407,11.24292 73.263641,11.242828c32.668762,0.000092 59.354279,-5.579712 80.056244,-16.739349c20.700806,-11.325974 31.051331,-25.733459 31.052124,-43.222443c-0.000793,-16.822479 -9.542786,-30.813492 -28.62616,-41.973221c-19.084778,-11.159363 -43.020752,-16.73912 -71.808075,-16.739334c-26.5242,0.000214 -50.622009,5.663269 -72.293213,16.989166c-21.348907,11.159744 -43.991089,30.230896 -67.926544,57.213501m-59.193085,-26.732941c-15.849976,-14.657166 -34.61055,-25.650101 -56.282013,-32.978958c-21.348709,-7.328445 -45.769836,-10.992783 -73.263657,-10.992981c-32.993088,0.000198 -59.84024,5.496704 -80.541473,16.489441c-20.378067,10.993195 -30.567028,25.317368 -30.566898,42.97261c-0.00013,16.822723 9.541882,30.813782 28.626179,41.973267c19.083969,11.159607 43.019958,16.739441 71.80806,16.739319c26.523346,0.000122 50.62114,-5.662964 72.293213,-16.989166c21.671478,-11.325958 44.313583,-30.397125 67.92659,-57.213531m34.448425,45.720856c-22.642609,22.485779 -46.740234,39.058563 -72.293289,49.718323c-25.230194,10.493347 -53.047653,15.740021 -83.45253,15.73996c-43.990807,0.000061 -81.026909,-9.244049 -111.108456,-27.73233c-30.081831,-18.654663 -45.122731,-41.806549 -45.122602,-69.455734c-0.00013,-29.147934 13.423501,-52.716156 40.270741,-70.70491c27.170368,-17.988297 62.427532,-26.982544 105.77132,-26.982796c30.728348,0.000252 58.384155,5.246895 82.967438,15.739967c24.905945,10.493515 49.003754,27.232849 72.293213,50.217957c21.994659,-22.985107 45.768982,-39.890991 71.322876,-50.717636c25.552734,-10.992752 54.017242,-16.489243 85.393311,-16.489471c43.343018,0.000229 80.217407,9.410889 110.62323,28.231979c30.404541,18.654984 45.606995,41.890076 45.607788,69.705536c-0.000793,29.148254 -13.585999,52.633209 -40.755859,70.455109c-26.8479,17.822021 -61.943237,26.733032 -105.286163,26.732941c-30.405701,0.000092 -57.738037,-4.913483 -81.99704,-14.74057c-23.936401,-9.993561 -48.681091,-26.566345 -74.233978,-49.718323\" id=\"text1306\"/></g></svg>', 1),\n                PlatonicShape('yin yang', 'yinyang.svg', '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 466 466\" preserveAspectRatio=\"none\"><circle cx=\"233\" cy=\"233\" r=\"231\"/><path d=\"M 233,459 a 226 226 0 0 1 0,-452 a 113 113 0 0 1 0,226 z\" fill=\"#fff\"/><circle cx=\"233\" cy=\"346\" r=\"113\"/><circle cx=\"233\" cy=\"120\" r=\"30\"/><circle cx=\"233\" cy=\"346\" r=\"30\" fill=\"#fff\"/></svg>', 1),\n                PlatonicShape('android', 'android.svg', '<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"android\"><g><path d=\"M15.647,47.493c0,2.164,1.709,3.926,3.812,3.926h2.752c-0.092,0.327-0.144,0.673-0.144,1.031v7.848c0,2.052,1.618,3.718,3.612,3.718c1.995,0,3.613-1.666,3.613-3.718V52.45c0-0.358-0.053-0.704-0.144-1.031h6.708c-0.092,0.327-0.144,0.673-0.144,1.031v7.848c0,2.052,1.618,3.718,3.612,3.718s3.613-1.666,3.613-3.718V52.45c0-0.358-0.053-0.704-0.145-1.031h2.752c2.104,0,3.812-1.761,3.812-3.926v-27.26h-33.71V47.493z M9.626,20.233c-1.995,0-3.612,1.664-3.612,3.717v15.901c0,2.053,1.617,3.717,3.612,3.717c1.994,0,3.612-1.664,3.612-3.717v-15.9C13.238,21.897,11.62,20.233,9.626,20.233z M55.375,20.233c-1.995,0-3.611,1.664-3.611,3.717v15.901c0,2.053,1.616,3.717,3.611,3.717s3.611-1.664,3.611-3.717v-15.9C58.986,21.897,57.37,20.233,55.375,20.233z M40.789,5.355l0.678-1.047l0.668-1.032l1.502-2.318c0.184-0.285,0.108-0.669-0.166-0.859c-0.279-0.191-0.652-0.114-0.837,0.172l-1.608,2.485l-0.678,1.045L39.662,4.86c-2.176-0.868-4.602-1.355-7.162-1.355c-2.559,0-4.986,0.487-7.16,1.354L24.655,3.8l-0.676-1.045L22.367,0.27c-0.184-0.285-0.558-0.362-0.836-0.172c-0.275,0.19-0.351,0.574-0.166,0.859l1.5,2.318l0.669,1.032l0.678,1.047c-5.109,2.449-8.566,7.089-8.566,12.4h33.708C49.355,12.444,45.898,7.804,40.789,5.355z M25.278,12.799c-0.998,0-1.806-0.833-1.806-1.859s0.808-1.857,1.806-1.857c0.997,0,1.806,0.831,1.806,1.857S26.275,12.799,25.278,12.799zM39.725,12.799c-0.998,0-1.806-0.833-1.806-1.859s0.808-1.857,1.806-1.857s1.805,0.831,1.805,1.857S40.723,12.799,39.725,12.799z\"/></g></g></svg>', 1),\n                PlatonicShape('apple', 'apple.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"apple\"><g><path d=\"M42.111,10.214c2.4-2.709,4.021-6.473,3.58-10.221c-3.459,0.13-7.647,2.14-10.131,4.846c-2.225,2.401-4.17,6.226-3.65,9.906C35.77,15.025,39.708,12.918,42.111,10.214z M50.771,34.008c-0.086-8.109,7.104-11.997,7.427-12.193c-4.041-5.499-10.337-6.254-12.576-6.34c-5.354-0.506-10.451,2.935-13.169,2.935c-2.711,0-6.906-2.861-11.346-2.788c-5.84,0.081-11.222,3.161-14.228,8.028c-6.065,9.793-1.552,24.307,4.359,32.256c2.89,3.886,6.335,8.257,10.855,8.097c4.357-0.16,6.002-2.622,11.267-2.622c5.269,0,6.746,2.622,11.354,2.541c4.685-0.079,7.655-3.959,10.522-7.859c3.318-4.514,4.683-8.886,4.765-9.106C59.896,46.91,50.865,43.689,50.771,34.008z\"/></g></g></svg>', 1),\n                PlatonicShape('camera', 'camera.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"CAMERA\"><g><path d=\"M32,22c-6.627,0-12,5.372-12,12c0,6.627,5.373,12,12,12s12-5.373,12-12S38.627,22,32,22z M61,12H48.243l-5.095-5.094l-0.002,0.003C42.602,6.35,41.843,6,41,6H23c-0.976,0-1.835,0.474-2.383,1.196L15.813,12H3c-1.657,0-3,1.343-3,3v40c0,1.657,1.343,3,3,3h58c1.657,0,3-1.343,3-3V15C64,13.343,62.657,12,61,12z M32,52c-9.941,0-18-8.059-18-18c0-9.941,8.059-18,18-18c9.941,0,18,8.059,18,18C50,43.941,41.941,52,32,52z\"/></g></g></svg>', 1),\n                PlatonicShape('block', 'block.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"BLOCK\"><g><path d=\"M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,58C17.641,58,6,46.359,6,32c0-6.098,2.115-11.694,5.63-16.128L48.128,52.37C43.693,55.886,38.098,58,32,58z M52.37,48.128L15.873,11.63C20.307,8.115,25.902,6,32,6c14.359,0,26,11.641,26,26C58,38.098,55.887,43.693,52.37,48.128z\"/></g></g></svg>', 1),\n                PlatonicShape('circle_play', 'circle_play.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"CIRCLE__x2F__PLAY\"><g><path d=\"M41.492,29.398l-15.8-9.875C25.21,19.193,24.628,19,24,19c-1.657,0-3,1.343-3,3v20c0,1.657,1.343,3,3,3c0.066,0,0.131-0.003,0.195-0.007c0.017-0.001,0.034-0.003,0.051-0.004c0.055-0.005,0.109-0.011,0.163-0.019c0.01,0,0.021-0.002,0.031-0.004c0.064-0.01,0.128-0.021,0.191-0.035c0.01-0.002,0.019-0.005,0.029-0.007c0.057-0.013,0.112-0.026,0.167-0.043c0.009-0.003,0.018-0.005,0.027-0.008c0.128-0.038,0.252-0.084,0.372-0.138c0.005-0.002,0.009-0.004,0.014-0.006c0.123-0.057,0.242-0.121,0.355-0.191l0.013,0.02l15.912-9.974C42.404,34.066,43,33.104,43,32C43,30.886,42.393,29.915,41.492,29.398z M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,58C17.641,58,6,46.359,6,32C6,17.641,17.641,6,32,6c14.359,0,26,11.64,26,26C58,46.359,46.359,58,32,58z\"/></g></g></svg>', 1),\n                PlatonicShape('circle_delete', 'circle_delete.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"CIRCLE__x2F__DELETE\"><g><path d=\"M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,58C17.641,58,6,46.359,6,32C6,17.64,17.641,6,32,6c14.359,0,26,11.64,26,26C58,46.359,46.359,58,32,58z M46,21c0-1.657-1.343-3-3-3c-0.828,0-1.578,0.336-2.121,0.879L32,27.758l-8.879-8.879C22.579,18.336,21.828,18,21,18c-1.657,0-3,1.343-3,3c0,0.828,0.336,1.578,0.879,2.121L27.757,32l-8.879,8.879C18.336,41.422,18,42.172,18,43c0,1.657,1.343,3,3,3c0.828,0,1.579-0.336,2.121-0.879L32,36.243l8.879,8.879C41.422,45.664,42.172,46,43,46c1.657,0,3-1.343,3-3c0-0.828-0.336-1.578-0.879-2.121L36.243,32l8.879-8.878C45.664,22.578,46,21.829,46,21z\"/></g></g></svg>', 1),\n                PlatonicShape('facebook', 'facebook.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"facebook\"><g><path d=\"M59.059-0.006H4.942c-2.722,0-4.929,2.208-4.929,4.932v54.354c0,2.725,2.207,4.728,4.929,4.728h54.117c2.721,0,4.928-2.002,4.928-4.728V4.926C63.986,2.202,61.781-0.006,59.059-0.006z M33.615,21.199c-1.562-0.912-2.803-1.634-4.351-1.634c-1.523,0-2.836,0.383-3.497,1.024c-0.661,0.64-0.992,1.872-0.992,3.692v2.691h8.148l-1.768,7.494h-6.381v24.894H14.545V34.465H9.759v-7.494h4.787v-2.859c0-3.012,0.355-4.817,1.067-6.301c0.711-1.483,2.089-3.134,3.998-4.066c1.909-0.932,4.741-1.399,7.661-1.399c2.995,0,5.337,0.994,8.208,1.803L33.615,21.199z\"/></g></g></svg>', 1),\n                PlatonicShape('twitter', 'twitter.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"twitter\"><g><path d=\"M56.568,14.179v-0.032c0.558-0.218,0.998-0.68,1.441-1.022c2-1.541,3.301-3.57,4.26-6.164c-0.543,0.298-1.088,0.596-1.633,0.894c-1.681,0.853-4.533,2.079-6.728,2.267c-2.586-2.356-5.292-4.209-10.378-4.12c-0.534,0.064-1.068,0.128-1.602,0.192c-1.037,0.227-2.025,0.508-2.916,0.894c-3.724,1.616-6.263,4.631-7.431,8.814c-0.465,1.664-0.654,4.445-0.064,6.164c-2.101-0.003-4.135-0.334-5.894-0.767C18.69,19.594,14.372,17.29,9.578,13.54C8.17,12.439,6.789,11.191,5.67,9.804C5.309,9.357,4.74,8.965,4.485,8.43C4.463,8.42,4.442,8.409,4.421,8.398c-0.557,1.032-1.08,2.15-1.409,3.417c-1.3,4.994,0.755,9.188,2.947,11.912c0.664,0.826,1.741,1.338,2.402,2.108h0.064c-0.497,0.184-1.361-0.071-1.794-0.16c-1.024-0.211-1.897-0.405-2.755-0.766c-0.448-0.213-0.897-0.426-1.345-0.639c-0.021,5.517,2.766,9.103,6.182,11.241c1.114,0.697,2.672,1.636,4.292,1.724c-0.867,0.732-4.575,0.396-5.862,0.256c1.609,4.142,4.081,6.9,8.328,8.398c1.096,0.387,2.433,0.729,3.908,0.703c-0.783,0.93-2.454,1.688-3.556,2.331c-2.272,1.329-4.91,2.191-7.88,2.843c-1.191,0.26-2.457,0.207-3.748,0.414c-1.427,0.23-2.92-0.121-4.196-0.16c0.384,0.234,0.769,0.47,1.153,0.703c1.171,0.713,2.394,1.338,3.716,1.916c2.379,1.041,4.914,1.826,7.72,2.523c5.658,1.404,13.64,0.773,18.579-0.766c13.754-4.287,22.442-14.293,25.722-29.03c0.564-2.535,0.646-5.414,0.609-8.431c0.684-0.543,1.367-1.086,2.05-1.629c1.693-1.356,3.28-3.246,4.452-5.11v-0.032C61.768,12.864,59.418,14.149,56.568,14.179z\"/></g></g></svg>', 1),\n                PlatonicShape('google', 'google.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"google_plus\"><g><path d=\"M35.471,4.995c0,0-12.66,0-16.879,0C11.023,4.995,3.9,10.999,3.9,17.522c0,6.666,5.158,12.23,12.857,12.23c0.535,0,1.055,0.083,1.565,0.046c-0.498,0.94-0.855,2.045-0.855,3.142c0,1.854,1.014,3.379,2.297,4.604c-0.969,0-1.904,0.04-2.926,0.04C7.465,37.584,0,43.452,0,49.533c0,5.986,8.158,10.472,17.533,10.472c10.686,0,16.463-6.688,16.463-12.678c0-4.8-1.318-7.675-5.777-10.772c-1.525-1.06-4.443-3.642-4.443-5.157c0-1.776,0.518-2.653,3.24-4.742c2.791-2.143,4.955-4.903,4.955-8.407c0-4.17-2.08-7.36-5.629-9.325h5.352L35.471,4.995zM29.574,46.295c0.133,0.557,0.207,1.128,0.207,1.711c0,4.838-3.176,8.128-12.283,8.128c-6.478,0-11.158-3.536-11.158-8.375c0-4.741,5.805-8.69,12.283-8.622c1.512,0.018,2.92,0.256,4.199,0.664C26.34,42.201,28.862,43.559,29.574,46.295z M19.201,28.248c-4.349-0.126-8.482-4.778-9.232-10.387c-0.752-5.609,2.164-9.9,6.512-9.773c4.349,0.127,8.67,4.629,9.422,10.236C26.652,23.934,23.547,28.377,19.201,28.248z M54,14.817v-9.76h-4v9.76H40v3.99h10v9.76h4v-9.76h10v-3.99H54L54,14.817z\"/></g></g></svg>', 1),\n                PlatonicShape('linkedin', 'linkedin.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"linkedin\"><g><path d=\"M0.798,62.986h14.315V22.368H0.798V62.986z M48.434,21.087c-5.925,0-9.192,1.972-12.953,6.749v-5.469H21.189v40.619H35.48V40.914c0-4.658,2.24-9.214,7.596-9.214s6.673,4.555,6.673,9.103v22.184H64v-23.09C64,23.854,54.361,21.087,48.434,21.087zM7.982,2.013C3.572,2.013,0,5.222,0,9.183c0,3.958,3.572,7.162,7.982,7.162c4.406,0,7.978-3.205,7.978-7.162C15.96,5.222,12.388,2.013,7.982,2.013z\"/></g></g></svg>', 1),\n                PlatonicShape('tick', 'tick.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"TICK\"><g><path d=\"M50,18c-0.828,0-1.578,0.336-2.121,0.879L27,39.757L16.121,28.879C15.578,28.336,14.828,28,14,28c-1.657,0-3,1.343-3,3c0,0.828,0.336,1.578,0.879,2.121l13,13C25.422,46.664,26.172,47,27,47s1.578-0.336,2.121-0.879l23-23C52.664,22.579,53,21.828,53,21C53,19.343,51.657,18,50,18z\"/></g></g></svg>', 1),\n                PlatonicShape('arrow_2', 'arrow_2.svg', '<?xml version=\"1.0\" encoding=\"utf-8\"?><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"ARROWS_HORIZONTAL\"><g><path d=\"M64,32c0-0.885-0.384-1.681-0.993-2.23l0,0l-10-9l0,0C52.475,20.292,51.771,20,51,20c-1.657,0-3,1.343-3,3c0,0.885,0.383,1.681,0.993,2.23l0,0L53.182,29H10.818l4.189-3.77l0,0C15.617,24.681,16,23.885,16,23c0-1.657-1.343-3-3-3c-0.772,0-1.475,0.292-2.007,0.77l0,0l-10,9l0,0C0.384,30.319,0,31.115,0,32s0.383,1.68,0.993,2.23l0,0l10,9l0,0C11.525,43.709,12.228,44,13,44c1.657,0,3-1.343,3-3c0-0.885-0.383-1.68-0.993-2.23l0,0L10.818,35h42.364l-4.188,3.77l0,0C48.384,39.32,48,40.115,48,41c0,1.657,1.343,3,3,3c0.771,0,1.475-0.292,2.007-0.77l0,0l10-9l0,0C63.617,33.682,64,32.885,64,32z\"/></g></g></svg>', '1'),\n                PlatonicShape('arrow', 'arrow.svg', '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\" xml:space=\"preserve\"><g id=\"ARROW__x2F__DOWN\"><g><path d=\"M53,23c0-1.657-1.343-3-3-3c-0.809,0-1.542,0.321-2.082,0.841l-0.001-0.001L31.993,36.764L16.275,21.046C15.725,20.406,14.91,20,14,20c-1.657,0-3,1.343-3,3c0,0.805,0.318,1.536,0.835,2.075l-0.008,0.008l18,18l0.001-0.001C30.374,43.648,31.139,44,31.987,44c0.002,0,0.004,0,0.007,0c0.002,0,0.004,0,0.007,0c0.849,0,1.612-0.352,2.159-0.918l0.001,0.001l18-18l-0.001-0.001C52.68,24.543,53,23.809,53,23z\"/></g></g></svg>', 1)\n            ];\n        }\n\n        ShapeCollection.prototype = {\n            on: function () {\n            }\n        };\n\n        return ShapeCollection;\n    });\n",
    "define('tantaman/web/widgets/ManagedColorChooser',['libs/backbone', 'tantaman/web/Utils'],\nfunction(Backbone, Utils) {\n\t'use strict';\n\tvar instances = {};\n\n\tvar defaults = {\n\t\tcolor: '#000',\n\t\tshowSelectionPalette: true,\n\t\tlocalStorageKey: 'strut.colorChooser',\n\t\tshowPalette: true,\n\t\tshowInitial: true,\n\t\tshowInput: true,\n\t\tpalette: [],\n\t\tclickoutFiresChange: true,\n\t\tflat: false,\n\t\tposition: 'absolute'\n\t};\n\n\tfunction ManagedColorChooser(opts) {\n\t\topts = opts || {};\n\t\t_.defaults(opts, defaults);\n\n\t\tthis.$el = $('<div class=\"dispNone\"></div>');\n\t\tthis.$el.on('mousedown', Utils.stopProp);\n\t\tthis.$el.append('<input class=\"color-chooser colorpicker\" />');\n\t\tthis._$colorChooser = this.$el.find('.color-chooser');\n\n\t\tvar self = this;\n\t\topts.move = function(color) {\n\t\t\tself._colorUpdated(color);\n\t\t}\n\n\t\tif (opts.position)\n\t\t\tthis.$el.css('position', opts.position);\n\n\t\tthis._$colorChooser.spectrum(opts);\n\t}\n\n\tManagedColorChooser.prototype = {\n\t\t_colorUpdated: function(color) {\n\t\t\tthis.trigger('update:color', color);\n\t\t},\n\n\t\tshow: function(opts) {\n\t\t\tthis.$el.removeClass('dispNone');\n\t\t\tif (opts && opts.top != null && opts.left != null) {\n\t\t\t\tthis.$el.css({\n\t\t\t\t\ttop: opts.top,\n\t\t\t\t\tleft: opts.left\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (opts && opts.move) {\n\t\t\t\tthis.on('update:color', opts.move);\n\t\t\t}\n\n\t\t\tif (opts && opts.appendTo) {\n\t\t\t\tif (this.$el.parent(opts.appendTo).length == 0)\n\t\t\t\t\tthis.$el.appendTo(opts.appendTo);\n\t\t\t}\n\t\t},\n\n\t\tmove: function(loc) {\n\t\t\tthis.$el.css(loc);\n\t\t},\n\n\t\thide: function(opts) {\n\t\t\tthis.$el.addClass('dispNone');\n\t\t\tthis._$colorChooser.spectrum('hide');\n\t\t\tif (opts && opts.move) {\n\t\t\t\tthis.off('update:color', opts.move);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {\n\t\t/**\n\t\t * Get the color chooser with the given identifer.\n\t\t * Creates it if it does not exist.\n\t\t * \"ManagedColorChooser\" allows us to re-use the same\n\t\t * chooser instance for multiple components.\n\t\t * Kind of like a flyweight pattern.\n\t\t */\n\t\tget: function(id, opts) {\n\t\t\tvar inst;\n\t\t\tinst = instances[id];\n\t\t\tif (!inst) {\n\t\t\t\tinst = new ManagedColorChooser(opts);\n\t\t\t\t_.extend(inst, Backbone.Events);\n\t\t\t\tinstances[id] = inst;\n\t\t\t}\n\n\t\t\treturn inst;\n\t\t}\n\t};\n});\n",
    "define('strut/slide_components/view/ShapeView',['./ComponentView', './Mixers',\n\t'tantaman/web/widgets/ManagedColorChooser'],\nfunction(ComponentView, Mixers, ManagedColorChooser) {\n\t'use strict';\n\n\tvar colorChooser = ManagedColorChooser.get('floatingChooser');\n\n\treturn ComponentView.extend({\n\t\tclassName: 'component shapeView',\n\n\t\tinitialize: function() {\n\t\t\tComponentView.prototype.initialize.apply(this, arguments);\n\t\t\tthis.scale = Mixers.scaleObjectEmbed;\n\t\t\tthis.model.off('change:scale', this._setUpdatedTransform, this);\n\t\t\tthis.model.on('change:scale', Mixers.scaleChangeInlineSvg, this);\n\n\t\t\tthis.model.on('change:fill', this._fillChanged, this);\n\t\t\tthis._updateFill = this._updateFill.bind(this);\n\n\t\t\t// var self = this;\n\t\t\t// this.$el.on('click', '.shape-color-picker', function() {\n\t\t\t// \tcolorChooser.show({\n\t\t\t// \t\tleft: self.model.get('x') + self.model.get('scale').width,\n\t\t\t// \t\ttop: self.model.get('y') + 32,\n\t\t\t// \t\tmove: self._updateFill,\n\t\t\t// \t\tappendTo: '.operatingTable > .slideContainer'\n\t\t\t// \t});\n\t\t\t// });\n\t\t},\n\n\t\t// TODO: update markup on model so fills get preserved?\n\t\t// Or maintain outer node here?\n\t\trender: function() {\n\t\t\tComponentView.prototype.render.call(this);\n\t\t\tvar obj = this.model.get('markup')\n\t\t\tthis.$object = $(obj);\n\n\t\t\tvar scale = this.model.get('scale');\n\n\t\t\tvar $content = this.$el.find('.content');\n\t\t\t$content.append(this.$object);\n\t\t\t$content.append($('<div class=\"overlay\"></div>'));\n\n\t\t\tthis._$colorPreview = this.$el.find('.sp-preview-inner');\n\t\t\tif (scale && scale.width) {\n\t\t\t\tthis.$object.attr(scale);\n\t\t\t} else {\n\t\t\t\tscale = {\n\t\t\t\t\twidth: 100,\n\t\t\t\t\theight: 100\n\t\t\t\t};\n\t\t\t\tthis.model.attributes.scale = scale;\n\t\t\t\tthis.$object.attr(scale);\n\t\t\t}\n\n\t\t\tvar fill = this.model.get('fill');\n\t\t\tif (fill)\n\t\t\t\tthis.$object.attr('fill', fill);\n\n\t\t\treturn this.$el;\n\t\t},\n\n\t\t_xChanged: function(model, value) {\n\t\t\tComponentView.prototype._xChanged.apply(this, arguments);\n\t\t\tcolorChooser.move({left: value + this.model.get('scale').width});\n\t\t},\n\n\t\t_yChanged: function(model, value) {\n\t\t\tComponentView.prototype._yChanged.apply(this, arguments);\n\t\t\tcolorChooser.move({top: value - 5});\n\t\t},\n\n\t\tremove: function() {\n\t\t\tComponentView.prototype.remove.apply(this, arguments);\n\t\t\tcolorChooser.hide({\n\t\t\t\tmove: this._updateFill\n\t\t\t});\n\t\t},\n\n\t\t_selectionChanged: function(model, value) {\n\t\t\tif (!value) {\n\t\t\t\tcolorChooser.hide({\n\t\t\t\t\tmove: this._updateFill\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcolorChooser.show({\n\t\t\t\t\tleft: this.model.get('x') + this.model.get('scale').width,\n\t\t\t\t\ttop: this.model.get('y') - 5,\n\t\t\t\t\tmove: this._updateFill,\n\t\t\t\t\tappendTo: '.operatingTable > .slideContainer'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tComponentView.prototype._selectionChanged.apply(this, arguments);\n\t\t},\n\n\t\t_fillChanged: function(model, color) {\n\t\t\tthis._$colorPreview.css('background-color', color);\n\t\t\tthis.$object.attr('fill', color);\n\t\t},\n\n\t\t_updateFill: function(color) {\n\t\t\tthis.model.set('fill', color.toHexString());\n\t\t}\n\t});\n});\n",
    "define('strut/slide_components/model/Shape',['strut/deck/Component'],\nfunction(Component) {\n\t'use strict';\n\n\treturn Component.extend({\n\t\tinitialize: function() {\n\t\t\tComponent.prototype.initialize.apply(this, arguments);\n\t\t\tthis.set('type', 'Shape');\n\t\t},\n\n\t\tconstructor: function Shape(attrs) {\n\t\t\tComponent.prototype.constructor.call(this, attrs);\n\t\t}\n\t});\n});\n",
    "define('strut/slide_components/main',['./view/ComponentButton',\n\t'./view/ImportingComponentButton',\n\t'./model/Image',\n\t'./model/TextBox',\n\t'./model/WebFrame',\n\t'./model/Video',\n\t'./view/ImageView',\n\t'./view/TextBoxView',\n\t'./view/WebFrameView',\n\t'./view/VideoView',\n\t'./ComponentFactory',\n\t'lang',\n\t'./view/ShapesDropdown',\n\t'./ShapeCollection',\n\t'./view/ShapeView',\n\t'./model/Shape'],\n\tfunction(Button,\n\t\t\t ImportingComponentButton,\n\t\t\t Image,\n\t\t\t TextBox,\n\t\t\t WebFrame,\n\t\t\t Video,\n\t\t\t ImageView,\n\t\t\t TextBoxView,\n\t\t\t WebFrameView,\n\t\t\t VideoView,\n\t\t\t ComponentFactory,\n\t\t\t lang,\n\t\t\t ShapesDropdown,\n\t\t\t ShapeCollection,\n\t\t\t ShapeView,\n\t\t\t Shape) {\n\t\tvar availableShapes = new ShapeCollection();\n\t\tvar service = {\n\t\t\tcreateButtons: function(editorModel) {\n\t\t\t\tvar buttons = [];\n\n\t\t\t\tbuttons.push(new Button({\n\t\t\t\t\tcomponentType: 'TextBox',\n\t\t\t\t\ticon: 'icon-text-width',\n\t\t\t\t\tname: lang.text,\n\t\t\t\t\teditorModel: editorModel\n\t\t\t\t}));\n\n\t\t\t\tbuttons.push(new ImportingComponentButton({\n\t\t\t\t\tcomponentType: 'Image',\n\t\t\t\t\ticon: 'icon-picture',\n\t\t\t\t\tname: lang.image,\n\t\t\t\t\ttag: 'img',\n\t\t\t\t\ttitle: lang.insert_image,\n\t\t\t\t\teditorModel: editorModel,\n\t\t\t\t\thasStorage: editorModel.hasStorage,\n\t\t\t\t\tbrowsable: true\n\t\t\t\t}));\n\n\t\t\t\tbuttons.push(new ImportingComponentButton({\n\t\t\t\t\tcomponentType: 'Video',\n\t\t\t\t\ticon: 'icon-film',\n\t\t\t\t\tname: lang.video,\n\t\t\t\t\ttag: 'video',\n\t\t\t\t\ttitle: lang.insert_video,\n\t\t\t\t\teditorModel: editorModel,\n\t\t\t\t\tignoreErrors: true\n\t\t\t\t}));\n\n\t\t\t\tbuttons.push(new ImportingComponentButton({\n\t\t\t\t\tcomponentType: 'WebFrame',\n\t\t\t\t\ticon: 'icon-globe',\n\t\t\t\t\tname: lang.website,\n\t\t\t\t\ttag: 'iframe',\n\t\t\t\t\ttitle: lang.insert_website,\n                    editorModel: editorModel,\n                    ignoreErrors: true\n\t\t\t\t}));\n\n                buttons.push(new ImportingComponentButton({\n                    componentType: 'Image',\n                    icon: 'icon-search',\n                    name: lang.search,\n                    tag: 'img',\n                    title: lang.insert_search,\n                    editorModel: editorModel,\n                    hasStorage: editorModel.hasStorage,\n                    searchable: true\n                }));\n\n\t\t\t\tbuttons.push(new ShapesDropdown(\n\t\t\t\t\tavailableShapes,\n\t\t\t\t\tJST['strut.slide_components/ShapesDropdown'],\n\t\t\t\t\t{class: 'group-dropdown',\n\t\t\t\t\t\teditorModel: editorModel}\n\t\t\t\t));\n           \n\t\t\t\treturn buttons;\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tinitialize: function(registry) {\n\t\t\t\t// Register each component as a service\n\t\t\t\t// so it can be picked up by the ComponentFactory\n\t\t\t\t// If 3rd parties want to add components\n\t\t\t\t// then they just add their components to the registry as well.\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentButtonProvider'\n\t\t\t\t}, service);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentModel',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Image'\n\t\t\t\t\t}\n\t\t\t\t}, Image);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentModel',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'TextBox'\n\t\t\t\t\t}\n\t\t\t\t}, TextBox);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentModel',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'WebFrame'\n\t\t\t\t\t}\n\t\t\t\t}, WebFrame);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentModel',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Video'\n\t\t\t\t\t}\n\t\t\t\t}, Video);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentModel',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Shape'\n\t\t\t\t\t}\n\t\t\t\t}, Shape);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentView',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Image'\n\t\t\t\t\t}\n\t\t\t\t}, ImageView);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentView',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'TextBox'\n\t\t\t\t\t}\n\t\t\t\t}, TextBoxView);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentView',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'WebFrame'\n\t\t\t\t\t}\n\t\t\t\t}, WebFrameView);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentView',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Video'\n\t\t\t\t\t}\n\t\t\t\t}, VideoView);\n\n\t\t\t\tregistry.register({\n\t\t\t\t\tinterfaces: 'strut.ComponentView',\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\ttype: 'Shape'\n\t\t\t\t\t}\n\t\t\t\t}, ShapeView);\n\n\t\t\t\tComponentFactory.initialize(registry);\n\t\t\t}\n\t\t};\n\t});\n",
    "define('strut/well_context_buttons/AddSlideButton',['libs/backbone'],\nfunction(Backbone) {\n\treturn Backbone.View.extend({\n\t\tclassName: 'addBtn btn btn-success',\n\t\tevents: {\n\t\t\tclick: \"_addSlide\"\n\t\t},\n\n\t\t_addSlide: function() {\n\t\t\tthis._editorModel.addSlide(this._wellMenuModel.slideIndex());\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html('<center><i class=\"icon-plus icon-white\"></i></center>');\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function AddSlideButton(editorModel, wellMenuModel) {\n\t\t\tthis._editorModel = editorModel;\n     \t\tthis._wellMenuModel = wellMenuModel;\n\t\t\tBackbone.View.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n\n",
    "// TODO: get rid of these.  Context buttons should be added\n// based on available capabilities...\ndefine('strut/well_context_buttons/main',['./AddSlideButton', 'lang'],\nfunction(AddSlideButton, lang) {\n\t'use strict';\n\n\tvar service = {\n\t\tcreateButtons: function(editorModel, wellMenuModel) {\n\t\t\tvar result = [];\n\n\t\t\tresult.push(new AddSlideButton(editorModel, wellMenuModel));\n\n\t\t\treturn result;\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(registry) {\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: ['strut.WellContextButtonProvider']\n\t\t\t}, service);\n\t\t}\n\t}\n});\n\n",
    "define('strut/logo_button/LogoModel',['libs/backbone',\n\t\t'framework/ServiceCollection'],\nfunction(Backbone, ServiceCollection) {\n\treturn Backbone.Model.extend({\n\t\tinitialize: function() {\n\t\t\tthis.items = new ServiceCollection(\n\t\t\t\tthis._editorModel.registry,\n\t\t\t\t'strut.LogoMenuItemProvider',\n\t\t\t\tthis._convertServiceEntry.bind(this)\n\t\t\t\t);\n\t\t},\n\n\t\t_convertServiceEntry: function(entry) {\n\t\t\treturn entry.service().createMenuItems(this._editorModel);\n\t\t},\n\t\t\n\t\tconstructor: function LogoModel(editorModel) {\n\t\t\tthis._editorModel = editorModel;\n\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "\n",
    "define('strut/logo_button/LogoView',['libs/backbone',\n\t\t'./LogoModel',\n\t\t'css!styles/logo_button/logo.css'],\nfunction(Backbone, LogoModel) {\n\t'use strict';\n\treturn Backbone.View.extend({\n\t\tclassName: 'logo-group btn-group',\n\n\t\tinitialize: function() {\n\t\t\tthis._template = JST['strut.logo_button/Logo'];\n\t\t\tthis.model = new LogoModel(this.options.editorModel);\n\t\t\tdelete this.options.editorModel;\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this._template());\n\n\t\t\tvar $dropdown = this.$el.find('.dropdown-menu');\n\t\t\tthis.model.items.forEach(function(item) {\n\t\t\t\t$dropdown.append(item.render().$el);\n\t\t\t}, this);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function LogoView() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('strut/presentation_generator/PreviewLauncher',[],function() {\n\t'use strict';\n\tvar launch = 0;\n\n\tfunction PreviewLauncher(editorModel) {\n\t\tthis._editorModel = editorModel;\n\t};\n\n\tPreviewLauncher.prototype = {\n\t\tlaunch: function(generator) {\n            //点击预览时触发\n\t\t\tif (window.previewWind)\n\t\t\t\twindow.previewWind.close();\n\n\t\t\tthis._editorModel.trigger('launch:preview', null);\n\n            //触发strut.presentation_generator.impress/main.js generate方法,生成impress的html\n\t\t\tvar previewStr = generator.generate(this._editorModel.deck());\n\n\t\t\tlocalStorage.setItem('preview-string', previewStr);\n\t\t\tlocalStorage.setItem('preview-config', JSON.stringify({\n\t\t\t\tsurface: this._editorModel.deck().get('surface')\n\t\t\t}));\n            var url='../../preview_export/' + (generator.file || generator.id) + '.html' + generator.getSlideHash(this._editorModel);\n\t\t\twindow.previewWind = window.open(url,window.location.href);\n\t\t\tvar sourceWind = window;\n\t\t}\n\t};\n\n\treturn PreviewLauncher;\n});\n",
    "define('strut/presentation_generator/view/PreviewButton',['libs/backbone', '../PreviewLauncher'],\nfunction(Backbone, PreviewLauncher) {\n\treturn Backbone.View.extend({\n\t\tclassName: 'btn-group iconBtns',\n\t\tevents: {\n\t\t\t'click .act': '_launch'\n\t\t},\n\n\t\tinitialize: function() {\n\t\t\tthis._editorModel = this.options.editorModel;\n\t\t\tthis._previewLauncher = new PreviewLauncher(this._editorModel);\n\t\t\tthis._generators = this._editorModel.registry\n\t\t\t\t.getBest('strut.presentation_generator.GeneratorCollection');\n\n\t\t\tdelete this.options.editorModel;\n\t\t\t// TODO: we should keep session meta per bundle...\n\t\t\tthis._index = Math.min(window.sessionMeta.generator_index || 0, this._generators.length - 1);\n\t\t\tthis._generatorChanged();\n\n\t\t\tthis._template = JST['strut.presentation_generator/Button'];\n\t\t},\n\n\t\t_launch: function() {\n\t\t\tthis._previewLauncher.launch(this._generators[this._index]);\n\t\t},\n\n\t\t_bind: function() {\n\t\t\tvar self = this;\n\t\t\tthis.$el.find('li').each(function(i) {\n\t\t\t\tvar $btn = $(this);\n\t\t\t\t$btn.click(function(e) {\n\t\t\t\t\t// self._previewLauncher.launch(self._generators[i]);\n\t\t\t\t\tself.$el.find('.check').css('visibility', 'hidden');\n\t\t\t\t\t$btn.find('.check').css('visibility', '');\n\t\t\t\t\tself._index = i;\n\t\t\t\t\twindow.sessionMeta.generator_index = i;\n\t\t\t\t\tself._generatorChanged();\n\t\t\t\t\tself.$el.find('.dropdown-toggle').dropdown('toggle');\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t* Need to inform the world of a generator update.\n\t\t* Some modes are only present for certain generators.\n\t\t*/\n\t\t_generatorChanged: function() {\n\t\t\tthis._editorModel.set('generator', this._generators[this._index]);\n\t\t\tif (this._$readout)\n\t\t\t\tthis._$readout.text(this._generators[this._index].shortname || this._generators[this._index].displayName);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this._template({generators: this._generators, chosen: this._generators[this._index]}));\n\t\t\tthis._bind();\n\t\t\tthis._$readout = this.$el.find('.chosen');\n\t\t\t$(this.$el.find('.check')[this._index]).css('visibility', '');\n\t\t\treturn this;\n\t\t}\n\t});\n});\n",
    "define('strut/header/model/ThemeProviderCollection',['libs/backbone', 'framework/ServiceCollection'],\nfunction(Backbone, ServiceCollection) {\n\tfunction ThemeProviderCollection(editorModel, meta) {\n\t\tthis._editorModel = editorModel;\n\n\t\tthis._activeProviders = [];\n\t\tthis._editorModel.on('change:activeMode', this._modeChanged, this);\n\t\tthis._themeProviders =\n\t\t\tnew ServiceCollection(editorModel.registry,\n\t\t\t\t{\n\t\t\t\t\tinterfaces: 'strut.ThemeProvider',\n\t\t\t\t\tmeta: meta\n\t\t\t\t});\n\n\t\tthis._modeChanged(null, this._editorModel.get('activeMode'));\n\n\t\tthis._themeProviders.on('registered', function(item, entry) {\n\t\t\tthis._addProvider(entry);\n\t\t}, this);\n\t}\n\t\n\tThemeProviderCollection.prototype = {\n\t\t_modeChanged: function(model, newMode) {\n\t\t\tthis._disposePrevious();\n\t\t\tthis._themeProviders.forEach(function(providerEntry) {\n\t\t\t\tif (newMode.id in providerEntry.meta().modes) {\n\t\t\t\t\tthis._addProvider(providerEntry);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.trigger('change:activeProviders', this._activeProviders);\n\t\t},\n\n\t\t_addProvider: function(providerEntry) {\n\t\t\tvar p = providerEntry.service().create(this._editorModel);\n\n\t\t\tif (Array.isArray(p)) {\n\t\t\t\tthis._activeProviders = this._activeProviders.concat(p);\n\t\t\t} else {\n\t\t\t\tthis._activeProviders.push(p);\n\t\t\t}\n\t\t},\n\n\t\t_disposePrevious: function() {\n\t\t\tthis._activeProviders.forEach(function(provider) {\n\t\t\t\tprovider.dispose();\n\t\t\t}, this);\n\t\t\tthis._activeProviders = [];\n\t\t},\n\n\t\tactiveProviders: function() {\n\t\t\treturn this._activeProviders;\n\t\t}\n\t};\n\n\t_.extend(ThemeProviderCollection.prototype, Backbone.Events);\n\n\treturn ThemeProviderCollection;\n});\n",
    "define('strut/header/view/ThemeProviderView',['libs/backbone', '../model/ThemeProviderCollection'],\nfunction(Backbone, ThemeProviderCollection) {\n\treturn Backbone.View.extend({\n\t\tclassName: 'themeProviders',\n\n\t\tinitialize: function(editorModel) {\n\t\t\tthis._providerCollection = new ThemeProviderCollection(editorModel, {overflow: false});\n\n\t\t\tthis._providerCollection.on('change:activeProviders', this.render, this);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.empty();\n\n\t\t\tthis._providerCollection.activeProviders().forEach(function(provider) {\n\t\t\t\tthis.$el.append(provider.view().render().$el);\n\t\t\t}, this);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function ThemeProviderView(editorModel) {\n\t\t\tBackbone.View.prototype.constructor.call(this, editorModel);\n\t\t}\n\t});\n});\n",
    "define(\n'tantaman/web/widgets/Tablets',[],function() {\n\tfunction Tablets(opts) {\n\t\tthis._currentItems = [];\n\t\tthis.$el = $('<div class=\"tablets hiding\">');\n\t\tthis.template = opts.template;\n\n\t\tvar self = this;\n\n\t\tthis.$el.on('click', '.tablets-toggle', function(e) {\n\t\t\tself.toggle();\n\t\t});\n\t}\n\n\tTablets.prototype = {\n\t\trender: function() {\n\t\t\tthis.$el.html(this.template());\n\t\t\tthis.$content = this.$el.find('.tablets-content');\n\n\t\t\tthis._currentItems.forEach(function(item) {\n\t\t\t\tthis.$content.append(item.render().$el);\n\t\t\t}, this);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tadd: function(items) {\n\t\t\tif (!Array.isArray(items))\n\t\t\t\titems = [items];\n\n\t\t\tvar newItems = [];\n\t\t\titems.forEach(function(item) {\n\t\t\t\tif (this._currentItems.indexOf(item) == -1)\n\t\t\t\t\tnewItems.push(item);\n\t\t\t}, this);\n\n\t\t\tnewItems.forEach(function(item) {\n\t\t\t\tthis._currentItems.push(item);\n\t\t\t\tif (this.$content)\n\t\t\t\t\tthis.$content.append(item.render().$el);\n\t\t\t}, this);\n\t\t},\n\n\t\tempty: function() {\n\t\t\tif (this.$content)\n\t\t\t\tthis.$content.html('');\n\t\t\tthis._currentItems = [];\n\t\t},\n\n\t\tdispose: function() {\n\t\t},\n\n\t\ttoggle: function() {\n\t\t\tif (this.$el.is('.hiding')) {\n\t\t\t\tthis.$el.removeClass('hiding');\n\t\t\t\tthis.$el.addClass('showing');\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t},\n\n\t\thide: function() {\n\t\t\tthis.$el.removeClass('showing');\n\t\t\tthis.$el.addClass('hiding');\n\t\t}\n\t}\n\n\treturn Tablets;\n});\n",
    "define('strut/header/view/Tablets',['tantaman/web/widgets/Tablets',\n\t\t'../model/ThemeProviderCollection'],\nfunction(Tablets, ThemeProviderCollection) {\n\tfunction EditorTablets(editorModel) {\n\t\tthis._providers = new ThemeProviderCollection(editorModel, {overflow: true});\n\t\tthis._providers.on('change:activeProviders', this._providersChanged, this);\n\n\t\tthis._tablets = new Tablets({template: JST['strut.slide_editor/Tablets']});\n\t\tthis.$el = this._tablets.$el;\n\n\t\tthis._providersChanged();\n\t}\n\n\tEditorTablets.prototype = {\n\t\tdispose: function() {\n\t\t\tthis._tablets.dispose();\n\t\t\tthis._providers.dispose();\n\t\t},\n\n\t\t_providersChanged: function() {\n\t\t\tvar views = [];\n\t\t\tthis._providers.activeProviders().forEach(function(provider) {\n\t\t\t\tviews.push(provider.view());\n\t\t\t}, this);\n\t\t\tthis._tablets.hide();\n\t\t\tthis._tablets.empty();\n\t\t\tthis._tablets.add(views);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis._tablets.render();\n\t\t\treturn this;\n\t\t}\n\t};\n\n\treturn EditorTablets;\n});\n",
    "\n",
    "define('strut/header/view/HeaderView',['libs/backbone',\n\t\t'strut/logo_button/LogoView',\n\t\t'strut/presentation_generator/view/PreviewButton',\n\t\t'./ThemeProviderView',\n\t\t'./Tablets',\n\t\t'css!styles/header/header.css'],\nfunction(Backbone, LogoView, PreviewButton, ThemeProviderView, Tablets, empty) {\n\treturn Backbone.View.extend({\n\t\tclassName: 'row-fluid header',\n\n\t\tinitialize: function() {\n\t\t\tthis._template = JST['strut.header/Header'];\n\t\t\tthis._logoButton = new LogoView({editorModel: this.model.editorModel()});\n\t\t\tthis._previewButton = \n\t\t\t\tnew PreviewButton({editorModel: this.model.editorModel()});\n\t\t\tthis._themeProviderView = new ThemeProviderView(this.model.editorModel());\n\n\t\t\tthis.model.editorModel().on('change:activeMode', this._modeChanged, this);\n\n\t\t\tthis._tablets = new Tablets(this.model.editorModel());\n\t\t},\n\n\t\t_modeChanged: function(model, value) {\n\t\t\tif (value.id == 'overview') {\n\t\t\t\tthis.$el.find('.create-comp-buttons').addClass('hidden');\n\t\t\t} else {\n\t\t\t\tthis.$el.find('.create-comp-buttons').removeClass('hidden');\n\t\t\t}\n\t\t},\n\n\t\t// TODO: need to respond to addition/removal of\n\t\t// create component buttons\n\t\trender: function() {\n\t\t\tthis.$el.html(this._template());\n\n\t\t\tthis.$el.find('.logo-holder').append(this._logoButton.render().$el);\n\n\t\t\tvar $modeButtons = this.$el.find('.mode-buttons');\n\t\t\tthis.model.get('modeButtons').forEach(function(button) {\n\t\t\t\t$modeButtons.append(button.render().el);\n\t\t\t}, this);\n\n\t\t\tvar $createCompButtons = this.$el.find('.create-comp-buttons > div');\n\t\t\tthis.model.get('createCompButtons').forEach(function(button) {\n\t\t\t\t$createCompButtons.append(button.render().el);\n\t\t\t}, this);\n\n\t\t\t//var $generatorButton = this.$el.find('.preview-generator-button');\n\t\t\t$modeButtons.append(this._previewButton.render().$el);\n\n\t\t\tvar $themeButtons = this.$el.find('.theme-buttons');\n\t\t\t$themeButtons.append(this._themeProviderView.render().$el);\n\n\t\t\tthis._tablets.render();\n\t\t\tthis.$el.append(this._tablets.$el);\n\n\t\t\treturn this;\n\t\t},\n\n\t\tconstructor: function HeaderView() {\n\t\t\tBackbone.View.prototype.constructor.apply(this, arguments);\n\t\t}\n\t});\n});\n",
    "define('strut/editor/CustomBgStylesheet',['tantaman/web/css_manip/CssManip'],\nfunction(CassManip) {\n\tvar el = CassManip.getStyleElem({\n\t\tid: 'customBackgrounds',\n\t\tcreate: true\n\t});\n\n\t/**\n\t * This is essentially a view class that\n\t * render the stylesheet of background classes whenever\n\t * new background classes are created.\n\t *\n\t * @param {EditorModel} editorModel\n\t */\n\tfunction CustomBgStylesheet(editorModel) {\n\t\tthis.model = editorModel;\n\t\teditorModel.on('change:customBackgrounds', this.render, this);\n\t}\n\n\tCustomBgStylesheet.prototype = {\n\t\t/**\n\t\t * render the stylesheet.  Should never\n\t\t * need to be called explicitly.\n\t\t */\n\t\trender: function(m, customBgs) {\n\t\t\tif (!customBgs) return;\n\t\t\tel.innerHTML = \n\t\t\t\tJST['strut.presentation_generator/CustomBgStylesheet'](customBgs.get('bgs'));\n\t\t},\n\n\t\t/**\n\t\t * Unregister from the model so this component\n\t\t * can be cleaned up.\n\t\t */\n\t\tdispose: function() {\n\t\t\tthis.model.off(null, null, this);\n\t\t}\n\t}\n\n\treturn CustomBgStylesheet;\n});\n",
    "define(\n'tantaman/web/widgets/InputRequestModal',[],function() {\n\tfunction InputRequestModal(options) {\n\t\tthis.$el = $('<div class=\"modal hide\"></div>');\n\t\tthis._okClicked = this._okClicked.bind(this);\n\t\tthis.$el.on('click', '.ok', this._okClicked);\n\t\tthis.options = options;\n\n\t\tthis.$el.modal({\n\t\t\tshow: false\n\t\t});\n\t}\n\n\tInputRequestModal.prototype = {\n\t\trender: function() {\n\t\t\tthis.$el.html(\n\t\t\t\tJST['tantaman.web.widgets/InputRequestModal'](this.options));\n\t\t\tthis.$input = this.$el.find('input');\n\t\t\tthis.$errors = this.$el.find('.errors');\n\n\t\t\treturn this;\n\t\t},\n\n\t\tshow: function(cb, value) {\n\t\t\tthis.cb = cb;\n\t\t\tif (value)\n\t\t\t\tthis.$input.val(value);\n\t\t\tthis.$errors.html('');\n\t\t\tthis.$el.modal('show');\n\t\t},\n\n\t\thide: function() {\n\t\t\tthis.$el.modal('hide');\n\t\t},\n\n\t\t_okClicked: function() {\n\t\t\tvar input = this.$input.val();\n\t\t\tvar result = this.cb(input);\n\t\t\tif (result == true)\n\t\t\t\tthis.hide();\n\t\t\telse {\n\t\t\t\tthis.$errors.html(JST['tantaman.web.widgets/List'](result.errors));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn InputRequestModal;\n});\n",
    "define('strut/editor/EditorView',['libs/backbone',\n\t\t'strut/header/view/HeaderView',\n\t\t'./CustomBgStylesheet',\n\t\t'tantaman/web/widgets/InputRequestModal',\n\t\t'lang'],\nfunction(Backbone, Header, CustomBgStylesheet, InputRequestModal, lang) {\n\treturn Backbone.View.extend({\n\t\tclassName: 'container-fluid',\n\t\tinitialize: function() {\n\t\t\tthis._header = new Header({model: this.model.get('header')});\n\n\t\t\tthis.model.on('change:activeMode', this._modeChanged, this);\n\t\t\tthis.model.on('newPresentationDesired', this._newPresentationDesired, this);\n\n\t\t\tthis._customBgSheet = new CustomBgStylesheet(this.model);\n\n\t\t\tthis._filenameInput = new InputRequestModal({\n\t\t\t\ttitle: lang.new_presentation,\n\t\t\t\tprompt: lang.name,\n\t\t\t\toktext: lang.create_presentation\n\t\t\t});\n\n\t\t\t$('#modals').append(this._filenameInput.render().$el);\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.empty();\n\t\t\tthis.$el.append(this._header.render().$el);\n\t\t\tvar activeMode = this.model.get('activeMode');\n\t\t\tif (activeMode)\n\t\t\t\tthis.$el.append(activeMode.view.render().$el);\n\t\t\telse\n\t\t\t\tthis._renderNoMode();\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_newPresentationDesired: function(num) {\n\t\t\tvar self = this;\n\t\t\tthis._filenameInput.show(function(name) {\n\t\t\t\t// TODO: alos check to see if another\n\t\t\t\t// presentation with that name exists?\n\t\t\t\tif (self.model.validKey(name)) {\n\t\t\t\t\tself.model.createPresentation(name);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\terrors: [lang.invalid_filename]\n\t\t\t\t};\n\t\t\t}, 'presentation-' + num);\n\t\t},\n\n\t\t_modeChanged: function(undefined, mode) {\n\t\t\tthis.$el.append(mode.view.render().$el);\n\t\t},\n\n\t\t_renderNoMode: function() {\n\t\t\tthis.$el.append('<div class=\"alert alert-error\">No modes available.  Did some plugins fail to load?</div>');\n\t\t}\n\t});\n});\n",
    "define('strut/header/model/HeaderModel',['libs/backbone'],\nfunction(Backbone) {\n\n\t/**\n\t///////////////////////\n\t* So at first glance this must look really strange.\n\t* A model that is holding and creating views?  WTF?\n\t*\n\t* Well think about the role of a model for a bit.\n\t* Expand your mind.\n\t*\n\t* First, this is holding views as data.  It doesn't\n\t* reference any DOM, or jQuery stuff.  That makes it\n\t* slight less sinful.\n\t*\n\t* Second, what is the role of a model?\n\t* A model is supposed to encapsulate business logic\n\t* or its problem domain.\n\t*\n\t* What is the problem domain of a generic header?\n\t* A header just holds stuff and what a header holds is widgets.\n\t* So the problem domain of a header is the problem of managing its contents.\n\t* A problem domain of managing views.\n\t* \n\t* Ok, so why the f* did you not just put all those \"views\" that\n\t* are being \"managed\" into your markup?  That is what markup is for, right?\n\t*\n\t* Markup is too rigid and static.  The issue is that our\n\t* header is really dynamic.  If someone loads in a 3rd\n\t* party extension, the header updates.\n\t*\n\t* If someone removes some bundles from features.js, the header changes.\n\t* It would also be really stupid if extensions had \n\t* to call our header and add themselves to it.  It'd be adding a \n\t* dependency on our header API to our extensions.\n\t*\n\t* So this header model manages the \"views\" provided by different\n\t* extension in a magical way.  Extensions don't know the header\n\t* exists, the header doesn't know any specific extension exists.\n\t* This model asks the service registry what various services exist\n\t* that it believes should have a representation in the header\n\t* and then generates views from those services.\n\t*\n\t*/\n\treturn Backbone.Model.extend({\n\t\tinitialize: function() {\n\t\t\t// this._createModeButtons();\n\t\t\t// this._createCreateCompButtons();\n\t\t\tthis.set('createCompButtons', []);\n\t\t\tthis.set('modeButtons', []);\n\n\t\t\t// TODO: update to use ServiceCollection and remove the boilerplate.\n\t\t\tthis.registry.on('registered:strut.ComponentButtonProvider',\n\t\t\t\tthis._compBtnProviderRegistered, this);\n\t\t\tthis.registry.on('registered:strut.EditMode',\n\t\t\t\tthis._modeRegistered, this);\n\t\t},\n\n\t\teditorModel: function() { return this._editorModel; },\n\n\t\t_createModeButtons: function() {\n\t\t\tthis._disposeObjects(this.get('modeButtons'));\n\t\t\tvar buttonEntries = this.registry.get('strut.EditMode');\n\t\t\tvar modeButtons = [];\n\t\t\tbuttonEntries.forEach(function(buttonEntry) {\n\t\t\t\tmodeButtons.push(buttonEntry.service().createButton(this._editorModel));\n\t\t\t}, this);\n\n\t\t\tthis.set('modeButtons', modeButtons);\n\t\t},\n\n\t\t_createCreateCompButtons: function() {\n\t\t\tthis._disposeObjects(this.get('createCompButtons'));\n\t\t\tvar providers = this.registry.get('strut.ComponentButtonProvider');\n\n\t\t\tvar createCompButtons = [];\n\t\t\tproviders.forEach(function(provider) {\n\t\t\t\tvar buttons = provider.service().createButtons(this._editorModel);\n\t\t\t\tcreateCompButtons = createCompButtons.concat(buttons);\n\t\t\t}, this);\n\n\t\t\tthis.set('createCompButtons', createCompButtons);\n\t\t},\n\n\t\t_modeRegistered: function(newMode) {\n\t\t\tvar newButton = newMode.service().createButton(this._editorModel);\n\t\t\tthis.get('modeButtons').push(newButton);\n\t\t\tthis.trigger('change:modeButtons.push', this.get('modeButtons'), newButton);\n\t\t},\n\n\t\t_compBtnProviderRegistered: function(entry) {\n\t\t\tvar newButtons = entry.service().createButtons(this._editorModel);\n\t\t\tthis.set('createCompButtons', this.get('createCompButtons').concat(newButtons));\n\t\t\tthis.trigger('change:createCompButtons.concat',\n\t\t\t\tthis.get('createCompButtons'), newButtons);\n\t\t},\n\n\t\t_disposeObjects: function(objects) {\n\t\t\tif (objects)\n\t\t\t\tobjects.forEach(function(object) {\n\t\t\t\t\tobject.dispose();\n\t\t\t\t});\n\t\t},\n\n\t\tconstructor: function HeaderModel(registry, editorModel) {\n\t\t\tthis.registry = registry;\n\t\t\tthis._editorModel = editorModel;\n\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t}\n\t});\n});\n",
    "define('common/Adapter',[],function() {\n\tfunction Adapter(wrapped, methodMap) {\n\t\tvar keys = Object.keys(methodMap);\n\t\tkeys.forEach(function(from) {\n\t\t\tvar to = methodMap[from];\n\t\t\tthis[from] = function() {\n\t\t\t\treturn wrapped[to].apply(wrapped, arguments);\n\t\t\t}\n\t\t}, this);\n\t}\n\n\treturn Adapter;\n});\n",
    "define('tantaman/web/interactions/Clipboard',[],function() {\n\t/**\n\t * Clipboard class.\n\t * @constructor\n\t */\n\tfunction Clipboard() {\n\t\tthis.items = [];\n\t}\n\n\t/**\n\t * Makes a copy of an array of selected objects (components or slides).\n\t *\n\t * @param {Component[]|Slide[]} items Array of items to copy.\n\t */\n\tClipboard.prototype.setItems = function(items) {\n\t\tif (items.length) {\n\t\t\tthis.items = items.slice(0);\n\t\t}\n\t};\n\n\t/**\n\t * @returns {Component[]|Slide[]} Array of cloned objects (components or slides).\n\t */\n\tClipboard.prototype.getItems = function() {\n\t\treturn $.map(this.items, function(item) {\n\t\t\treturn item.clone();\n\t\t});\n\t};\n\n\treturn Clipboard;\n});\n",
    "define('strut/editor/EditorModel',['libs/backbone',\n\t'strut/header/model/HeaderModel',\n\t'strut/deck/Deck',\n\t'strut/slide_components/ComponentFactory',\n\t'common/Adapter',\n\t'tantaman/web/interactions/Clipboard',\n\t'./GlobalEvents',\n\t'tantaman/web/undo_support/CmdListFactory'],\n\tfunction(Backbone, Header, Deck, ComponentFactory, Adapter, Clipboard, GlobalEvents, CmdListFactory) {\n\t\t'use strict';\n\n\t\tfunction adaptStorageInterfaceForSavers(storageInterface) {\n\t\t\treturn new Adapter(storageInterface, {\n\t\t\t\tstore: 'savePresentation',\n\t\t\t\tready: 'ready'\n\t\t\t});\n\t\t}\n\n\t\treturn Backbone.Model.extend({\n\t\t\tinitialize: function() {\n\t\t\t\t// is there a better way to do this?\n\t\t\t\twindow.uiTestAcc = this;\n\t\t\t\tthis.hasStorage = this.hasStorage.bind(this);\n\n\t\t\t\tthis._fontState = window.sessionMeta.fontState || {};\n\t\t\t\tthis._deck = new Deck();\n\t\t\t\tthis._deck.on('change:customBackgrounds', function(deck, bgs) {\n\t\t\t\t\tthis.trigger('change:customBackgrounds', this, bgs)\n\t\t\t\t}, this);\n\t\t\t\tthis.addSlide();\n\n\t\t\t\tthis.set('header', new Header(this.registry, this));\n\n\t\t\t\tthis.set('modeId', 'slide-editor');\n\n\t\t\t\tthis.exportable = new Adapter(this, {\n\t\t\t\t\texport: 'exportPresentation',\n\t\t\t\t\tidentifier: 'fileName'\n\t\t\t\t});\n\n\t\t\t\tthis.exportable.adapted = this;\n\n\t\t\t\tvar savers = this.registry.getBest('tantaman.web.saver.AutoSavers');\n\t\t\t\tvar storageInterface = this.registry.getBest('strut.StorageInterface');\n\t\t\t\tthis.storageInterface = storageInterface;\n\t\t\t\tif (savers) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tstorageInterface = adaptStorageInterfaceForSavers(storageInterface);\n\t\t\t\t\tthis._exitSaver = savers.exitSaver(this.exportable, {\n\t\t\t\t\t\tidentifier: 'strut-exitsave', \n\t\t\t\t\t\tcb: function() {\n\t\t\t\t\t\t\twindow.sessionMeta.lastPresentation = self.exportable.identifier()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis._timedSaver = savers.timedSaver(this.exportable, 20000, storageInterface);\n\t\t\t\t}\n\n\t\t\t\tthis.clipboard = new Clipboard();\n\t\t\t\tthis._createMode();\n\n\t\t\t\tthis._cmdList = CmdListFactory.managedInstance('editor');\n\t\t\t\tGlobalEvents.on('undo', this._cmdList.undo, this._cmdList);\n\t\t\t\tGlobalEvents.on('redo', this._cmdList.redo, this._cmdList);\n\n\t\t\t\tBackbone.on('etch:state', this._fontStateChanged, this);\n\t\t\t},\n\n\t\t\tchangeActiveMode: function(modeId) {\n\t\t\t\tif (modeId != this.get('modeId')) {\n\t\t\t\t\tthis.set('modeId', modeId);\n\t\t\t\t\tthis._createMode();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcustomStylesheet: function(css) {\n\t\t\t\tif (css == null) {\n\t\t\t\t\treturn this._deck.get('customStylesheet');\n\t\t\t\t} else {\n\t\t\t\t\tthis._deck.set('customStylesheet', css);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdispose: function() {\n\t\t\t\tthrow \"EditorModel can not be disposed yet\"\n\t\t\t\tthis._exitSaver.dispose();\n\t\t\t\tthis._timedSaver.dispose();\n\t\t\t\tBackbone.off(null, null, this);\n\t\t\t},\n\n\t\t\tvalidKey: function(name) {\n\t\t\t\treturn this.storageInterface.validKey(name);\n\t\t\t},\n\n\t\t\tnewPresentation: function() {\n\t\t\t\tvar num = window.sessionMeta.num || 0;\n\t\t\t\tthis.trigger('newPresentationDesired', num+1);\n\t\t\t},\n\n\t\t\tcreatePresentation: function(name) {\n\t\t\t\tvar num = window.sessionMeta.num || 0;\n\t\t\t\tnum += 1;\n\t\t\t\twindow.sessionMeta.num = num;\n\t\t\t\tthis.importPresentation({\n\t        \t\tfileName: name,\n\t        \t\tslides: []\n\t      \t\t});\n\t\t\t\tthis._deck.create();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * see Deck.addCustomBgClassFor\n\t\t\t */\n\t\t\taddCustomBgClassFor: function(color) {\n\t\t\t\tvar result = this._deck.addCustomBgClassFor(color);\n\t\t\t\tif (!result.existed) {\n\t\t\t\t\tthis.trigger('change:customBackgrounds', this, this._deck.get('customBackgrounds'));\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tcustomBackgrounds: function() {\n\t\t\t\treturn this._deck.get('customBackgrounds');\n\t\t\t},\n\n\t\t\timportPresentation: function(rawObj) {\n\t\t\t\tthis.storageInterface.revokeAllAttachmentURLs();\n\t\t\t\t// deck disposes iteself on import?\n\t\t\t\t// TODO: purge URL cache\n\t\t\t\tconsole.log('New file name: ' + rawObj.fileName);\n\t\t\t\tthis._deck.import(rawObj);\n\t\t\t},\n\n\t\t\thasStorage: function() {\n\t\t\t\treturn this.storageInterface.ready();\n\t\t\t},\n\n\t\t\texportPresentation: function(filename) {\n\t\t\t\tif (filename)\n\t\t\t\t\tthis._deck.set('fileName', filename);\n\t\t\t\tvar genid = this._deck.get('__genid');\n\n\t\t\t\tif (genid == null) genid = 0;\n\t\t\t\telse genid += 1;\n\n\t\t\t\t// Set the generation id for the deck.\n\t\t\t\t// A higher genid means its a newer version of the presentation.\n\t\t\t\tthis._deck.set('__genid', genid);\n\t\t\t\tvar obj = this._deck.toJSON(false, true);\n\t\t\t\treturn obj;\n\t\t\t},\n\n\t\t\tfileName: function() {\n\t\t\t\tvar fname = this._deck.get('fileName');\n\t\t\t\tif (fname == null) {\n\t\t\t\t\t// TODO...\n\t\t\t\t\tfname = 'presentation-unnamed';\n\t\t\t\t\tthis._deck.set('fileName', fname);\n\t\t\t\t}\n\n\t\t\t\treturn fname;\n\t\t\t},\n\n\t\t\tdeck: function() {\n\t\t\t\treturn this._deck;\n\t\t\t},\n\n\t\t\tcannedTransition: function(c) {\n\t\t\t\tif (c != null)\n\t\t\t\t\tthis._deck.set('cannedTransition', c);\n\t\t\t\telse\n\t\t\t\t\treturn this._deck.get('cannedTransition');\n\t\t\t},\n\n\t\t\tslides: function() {\n\t\t\t\treturn this._deck.get('slides');\n\t\t\t},\n\n\t\t\taddSlide: function(index) {\n\t\t\t\tthis._deck.create(index);\n\t\t\t},\n\n\t\t\tactiveSlide: function() {\n\t\t\t\treturn this._deck.get('activeSlide');\n\t\t\t},\n\n\t\t\tactiveSlideIndex: function() {\n\t\t\t\treturn this._deck.get('slides').indexOf(this._deck.get('activeSlide'));\n\t\t\t},\n\n\t\t\taddComponent: function(data, slide) {\n\t\t\t\tslide = slide || this._deck.get('activeSlide');\n\t\t\t\tif (slide) {\n\t\t\t\t\tif (typeof data.src == 'object' && data.src.file != null) {\n\t\t\t\t\t\tthis._addEmbeddedComponent(data, slide);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar comp = ComponentFactory.instance.createModel(data, {\n\t\t\t\t\t\t\tfontStyles: this._fontState\n\t\t\t\t\t\t});\n\t\t\t\t\t\tslide.add(comp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t_addEmbeddedComponent: function(data, slide) {\n\t\t\t\tvar embedData = data.src;\n\t\t\t\tvar docKey = this.fileName();\n\t\t\t\tvar attachKey = embedData.file.name;\n\t\t\t\tvar self = this;\n\t\t\t\tthis.storageInterface.storeAttachment(docKey,\n\t\t\t\tattachKey, embedData.file).then(function() {\n\t\t\t\t\tdata.src = {\n\t\t\t\t\t\tdocKey: docKey,\n\t\t\t\t\t\tattachKey: attachKey\n\t\t\t\t\t};\n\t\t\t\t\tself.addComponent(data, slide);\n\t\t\t\t}, function(error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t// TODO: report an error to our error reporting module...\n\t\t\t\t}).done();\n\t\t\t},\n\n\t\t\t_fontStateChanged: function(state) {\n\t\t\t\t_.extend(this._fontState, state);\n\t\t\t\twindow.sessionMeta.fontState = this._fontState;\n\t\t\t},\n\n\t\t\t_createMode: function() {\n\t\t\t\tvar modeId = this.get('modeId');\n\t\t\t\tvar modeService = this.registry.getBest({\n\t\t\t\t\tinterfaces: 'strut.EditMode',\n\t\t\t\t\tmeta: { id: modeId }\n\t\t\t\t});\n\n\t\t\t\tif (modeService) {\n\t\t\t\t\tvar prevMode = this.get('activeMode');\n\t\t\t\t\tif (prevMode)\n\t\t\t\t\t\tprevMode.close();\n\t\t\t\t\tthis.set('activeMode', modeService.getMode(this, this.registry));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tconstructor: function EditorModel(registry) {\n\t\t\t\tthis.registry = registry;\n\t\t\t\tBackbone.Model.prototype.constructor.call(this);\n\t\t\t}\n\t\t});\n\t});\n\n",
    "// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    // Turn off strict mode for this function so we can assign to global.Q\n    /* jshint strict: false */\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define('Q',definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else {\n        Q = definition();\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n\n    function flush() {\n        /* jshint loopfunc: true */\n\n        while (head.next) {\n            head = head.next;\n            var task = head.task;\n            head.task = void 0;\n            var domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n\n            try {\n                task();\n\n            } catch (e) {\n                if (isNodeJS) {\n                    // In node, uncaught exceptions are considered fatal errors.\n                    // Re-throw them synchronously to interrupt flushing!\n\n                    // Ensure continuation if the uncaught exception is suppressed\n                    // listening \"uncaughtException\" events (as domains does).\n                    // Continue in next event to avoid tick recursion.\n                    if (domain) {\n                        domain.exit();\n                    }\n                    setTimeout(flush, 0);\n                    if (domain) {\n                        domain.enter();\n                    }\n\n                    throw e;\n\n                } else {\n                    // In browsers, uncaught exceptions are not fatal.\n                    // Re-throw them asynchronously to avoid slow-downs.\n                    setTimeout(function() {\n                       throw e;\n                    }, 0);\n                }\n            }\n\n            if (domain) {\n                domain.exit();\n            }\n        }\n\n        flushing = false;\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process !== \"undefined\" && process.nextTick) {\n        // Node.js before 0.9. Note that some fake-Node environments, like the\n        // Mocha test runner, introduce a `process` global without a `nextTick`.\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you don’t need a security guarantee,\n// this is just plain paranoid.\n// However, this does have the nice side-effect of reducing the size\n// of the code by reducing x.call() to merely x(), eliminating many\n// hard-to-minify characters.\n// See Mark Miller’s explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n// engine that has a deployed base of browsers that support generators.\n// However, SM's generators use the Python-inspired semantics of\n// outdated ES6 drafts.  We would like to support ES6, but we'd also\n// like to make it possible to use generators in deployed browsers, so\n// we also support Python-style generators.  At some point we can remove\n// this block.\nvar hasES6Generators;\ntry {\n    /* jshint evil: true, nonew: false */\n    new Function(\"(function* (){ yield 1; })\");\n    hasES6Generators = true;\n} catch (e) {\n    hasES6Generators = false;\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (isPromise(value)) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = deprecate(function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    }, \"valueOf\", \"inspect\");\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become fulfilled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be fulfilled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function(resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function(answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = deprecate(function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        });\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If it’s a fulfilled promise, the fulfillment value is nearer.\n * If it’s a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return isObject(object) &&\n        typeof object.promiseDispatch === \"function\" &&\n        typeof object.inspect === \"function\";\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar unhandledReasonsDisplayed = false;\nvar trackUnhandledRejections = true;\nfunction displayUnhandledReasons() {\n    if (\n        !unhandledReasonsDisplayed &&\n        typeof window !== \"undefined\" &&\n        !window.Touch &&\n        window.console\n    ) {\n        console.warn(\"[Q] Unhandled rejection reasons (should be empty):\",\n                     unhandledReasons);\n    }\n\n    unhandledReasonsDisplayed = true;\n}\n\nfunction logUnhandledReasons() {\n    for (var i = 0; i < unhandledReasons.length; i++) {\n        var reason = unhandledReasons[i];\n        console.warn(\"Unhandled rejection reason:\", reason);\n    }\n}\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n    unhandledReasonsDisplayed = false;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n\n        // Show unhandled rejection reasons if Node exits without handling an\n        // outstanding rejection.  (Note that Browserify presently produces a\n        // `process` global without the `EventEmitter` `on` method.)\n        if (typeof process !== \"undefined\" && process.on) {\n            process.on(\"exit\", logUnhandledReasons);\n        }\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n    displayUnhandledReasons();\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    if (typeof process !== \"undefined\" && process.on) {\n        process.removeListener(\"exit\", logUnhandledReasons);\n    }\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n            if (hasES6Generators) {\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return result.value;\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return exception.value;\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var countDown = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++countDown;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--countDown === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (countDown === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {String} custom error message (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, message) {\n    return Q(object).timeout(ms, message);\n};\n\nPromise.prototype.timeout = function (ms, message) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        deferred.reject(new Error(message || \"Timed out after \" + ms + \" ms\"));\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n\n",
    "(function(glob) {\n\tvar undefined = {}.a;\n\n\tfunction definition(Q) {\n\t\n\n/**\n@author Matt Crinklaw-Vogt\n*/\nfunction PipeContext(handlers, nextMehod, end) {\n\tthis._handlers = handlers;\n\tthis._next = nextMehod;\n\tthis._end = end;\n\n\tthis._i = 0;\n}\n\nPipeContext.prototype = {\n\tnext: function() {\n\t\t// var args = Array.prototype.slice.call(arguments, 0);\n\t\t// args.unshift(this);\n\t\tthis.__pipectx = this;\n\t\treturn this._next.apply(this, arguments);\n\t},\n\n\t_nextHandler: function() {\n\t\tif (this._i >= this._handlers.length) return this._end;\n\n\t\tvar handler = this._handlers[this._i].handler;\n\t\tthis._i += 1;\n\t\treturn handler;\n\t},\n\n\tlength: function() {\n\t\treturn this._handlers.length;\n\t}\n};\n\nfunction indexOfHandler(handlers, len, target) {\n\tfor (var i = 0; i < len; ++i) {\n\t\tvar handler = handlers[i];\n\t\tif (handler.name === target || handler.handler === target) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nfunction forward(ctx) {\n\treturn this.__pipectx.next.apply(this.__pipectx, arguments);\n}\n\nfunction coerce(methodNames, handler) {\n\tmethodNames.forEach(function(meth) {\n\t\tif (!handler[meth])\n\t\t\thandler[meth] = forward;\n\t});\n}\n\nvar abstractPipeline = {\n\taddFirst: function(name, handler) {\n\t\tcoerce(this._pipedMethodNames, handler);\n\t\tthis._handlers.unshift({name: name, handler: handler});\n\t},\n\n\taddLast: function(name, handler) {\n\t\tcoerce(this._pipedMethodNames, handler);\n\t\tthis._handlers.push({name: name, handler: handler});\n\t},\n\n \t/**\n \tAdd the handler with the given name after the \n \thandler specified by target.  Target can be a handler\n \tname or a handler instance.\n \t*/\n\taddAfter: function(target, name, handler) {\n\t\tcoerce(this._pipedMethodNames, handler);\n\t\tvar handlers = this._handlers;\n\t\tvar len = handlers.length;\n\t\tvar i = indexOfHandler(handlers, len, target);\n\n\t\tif (i >= 0) {\n\t\t\thandlers.splice(i+1, 0, {name: name, handler: handler});\n\t\t}\n\t},\n\n\t/**\n\tAdd the handler with the given name after the handler\n\tspecified by target.  Target can be a handler name or\n\ta handler instance.\n\t*/\n\taddBefore: function(target, name, handler) {\n\t\tcoerce(this._pipedMethodNames, handler);\n\t\tvar handlers = this._handlers;\n\t\tvar len = handlers.length;\n\t\tvar i = indexOfHandler(handlers, len, target);\n\n\t\tif (i >= 0) {\n\t\t\thandlers.splice(i, 0, {name: name, handler: handler});\n\t\t}\n\t},\n\n\t/**\n\tReplace the handler specified by target.\n\t*/\n\treplace: function(target, newName, handler) {\n\t\tcoerce(this._pipedMethodNames, handler);\n\t\tvar handlers = this._handlers;\n\t\tvar len = handlers.length;\n\t\tvar i = indexOfHandler(handlers, len, target);\n\n\t\tif (i >= 0) {\n\t\t\thandlers.splice(i, 1, {name: newName, handler: handler});\n\t\t}\n\t},\n\n\tremoveFirst: function() {\n\t\treturn this._handlers.shift();\n\t},\n\n\tremoveLast: function() {\n\t\treturn this._handlers.pop();\n\t},\n\n\tremove: function(target) {\n\t\tvar handlers = this._handlers;\n\t\tvar len = handlers.length;\n\t\tvar i = indexOfHandler(handlers, len, target);\n\n\t\tif (i >= 0)\n\t\t\thandlers.splice(i, 1);\n\t},\n\n\tgetHandler: function(name) {\n\t\tvar i = indexOfHandler(this._handlers, this._handlers.length, name);\n\t\tif (i >= 0)\n\t\t\treturn this._handlers[i].handler;\n\t\treturn null;\n\t}\n};\n\nfunction createPipeline(pipedMethodNames) {\n\tvar end = {};\n\tvar endStubFunc = function() { return end; };\n\tvar nextMethods = {};\n\n\tfunction Pipeline(pipedMethodNames) {\n\t\tthis.pipe = {\n\t\t\t_handlers: [],\n\t\t\t_contextCtor: PipeContext,\n\t\t\t_nextMethods: nextMethods,\n\t\t\tend: end,\n\t\t\t_pipedMethodNames: pipedMethodNames\n\t\t};\n\t}\n\n\tvar pipeline = new Pipeline(pipedMethodNames);\n\tfor (var k in abstractPipeline) {\n\t\tpipeline.pipe[k] = abstractPipeline[k];\n\t}\n\n\tpipedMethodNames.forEach(function(name) {\n\t\tend[name] = endStubFunc;\n\n\t\tnextMethods[name] = new Function(\n\t\t\t\"var handler = this._nextHandler();\" +\n\t\t\t\"handler.__pipectx = this.__pipectx;\" +\n\t\t\t\"return handler.\" + name + \".apply(handler, arguments);\");\n\n\t\tpipeline[name] = new Function(\n\t\t\t\"var ctx = new this.pipe._contextCtor(this.pipe._handlers, this.pipe._nextMethods.\" + name + \", this.pipe.end);\"\n\t\t\t+ \"return ctx.next.apply(ctx, arguments);\");\n\t});\n\n\treturn pipeline;\n}\n\ncreatePipeline.isPipeline = function(obj) {\n\treturn obj instanceof Pipeline;\n}\nvar utils = (function() {\n\treturn {\n\t\tconvertToBase64: function(blob, cb) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\tcb(e.target.result);\n\t\t\t};\n\t\t\tfr.onerror = function(e) {\n\t\t\t};\n\t\t\tfr.onabort = function(e) {\n\t\t\t};\n\t\t\tfr.readAsDataURL(blob);\n\t\t},\n\n\t\tdataURLToBlob: function(dataURL) {\n\t\t\t\tvar BASE64_MARKER = ';base64,';\n\t\t\t\tif (dataURL.indexOf(BASE64_MARKER) == -1) {\n\t\t\t\t\tvar parts = dataURL.split(',');\n\t\t\t\t\tvar contentType = parts[0].split(':')[1];\n\t\t\t\t\tvar raw = parts[1];\n\n\t\t\t\t\treturn new Blob([raw], {type: contentType});\n\t\t\t\t}\n\n\t\t\t\tvar parts = dataURL.split(BASE64_MARKER);\n\t\t\t\tvar contentType = parts[0].split(':')[1];\n\t\t\t\tvar raw = window.atob(parts[1]);\n\t\t\t\tvar rawLength = raw.length;\n\n\t\t\t\tvar uInt8Array = new Uint8Array(rawLength);\n\n\t\t\t\tfor (var i = 0; i < rawLength; ++i) {\n\t\t\t\t\tuInt8Array[i] = raw.charCodeAt(i);\n\t\t\t\t}\n\n\t\t\t\treturn new Blob([uInt8Array.buffer], {type: contentType});\n\t\t},\n\n\t\tsplitAttachmentPath: function(path) {\n\t\t\tvar parts = path.split('/');\n\t\t\tif (parts.length == 1) \n\t\t\t\tparts.unshift('__nodoc__');\n\t\t\treturn parts;\n\t\t},\n\n\t\tmapAsync: function(fn, promise) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tpromise.then(function(data) {\n\t\t\t\t_mapAsync(fn, data, [], deferred);\n\t\t\t}, function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tcountdown: function(n, cb) {\n\t\t    var args = [];\n\t\t    return function() {\n\t\t      for (var i = 0; i < arguments.length; ++i)\n\t\t        args.push(arguments[i]);\n\t\t      n -= 1;\n\t\t      if (n == 0)\n\t\t        cb.apply(this, args);\n\t\t    }\n\t\t}\n\t};\n\n\tfunction _mapAsync(fn, data, result, deferred) {\n\t\tfn(data[result.length], function(v) {\n\t\t\tresult.push(v);\n\t\t\tif (result.length == data.length)\n\t\t\t\tdeferred.resolve(result);\n\t\t\telse\n\t\t\t\t_mapAsync(fn, data, result, deferred);\n\t\t}, function(err) {\n\t\t\tdeferred.reject(err);\n\t\t})\n\t}\n})();\nvar FilesystemAPIProvider = (function(Q) {\n\tfunction makeErrorHandler(deferred, finalDeferred) {\n\t\t// TODO: normalize the error so\n\t\t// we can handle it upstream\n\t\treturn function(e) {\n\t\t\tif (e.code == 1) {\n\t\t\t\tdeferred.resolve(undefined);\n\t\t\t} else {\n\t\t\t\tif (finalDeferred)\n\t\t\t\t\tfinalDeferred.reject(e);\n\t\t\t\telse\n\t\t\t\t\tdeferred.reject(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getAttachmentPath(docKey, attachKey) {\n\t\tdocKey = docKey.replace(/\\//g, '--');\n\t\tvar attachmentsDir = docKey + \"-attachments\";\n\t\treturn {\n\t\t\tdir: attachmentsDir,\n\t\t\tpath: attachmentsDir + \"/\" + attachKey\n\t\t};\n\t}\n\n\tfunction readDirEntries(reader, result) {\n\t\tvar deferred = Q.defer();\n\n\t\t_readDirEntries(reader, result, deferred);\n\n\t\treturn deferred.promise;\n\t}\n\n\tfunction _readDirEntries(reader, result, deferred) {\n\t\treader.readEntries(function(entries) {\n\t\t\tif (entries.length == 0) {\n\t\t\t\tdeferred.resolve(result);\n\t\t\t} else {\n\t\t\t\tresult = result.concat(entries);\n\t\t\t\t_readDirEntries(reader, result, deferred);\n\t\t\t}\n\t\t}, function(err) {\n\t\t\tdeferred.reject(err);\n\t\t});\n\t}\n\n\tfunction entryToFile(entry, cb, eb) {\n\t\tentry.file(cb, eb);\n\t}\n\n\tfunction entryToURL(entry) {\n\t\treturn entry.toURL();\n\t}\n\n\tfunction FSAPI(fs, numBytes, prefix) {\n\t\tthis._fs = fs;\n\t\tthis._capacity = numBytes;\n\t\tthis._prefix = prefix;\n\t\tthis.type = \"FilesystemAPI\";\n\t}\n\n\tFSAPI.prototype = {\n\t\tgetContents: function(path, options) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tpath = this._prefix + path;\n\t\t\tthis._fs.root.getFile(path, {}, function(fileEntry) {\n\t\t\t\tfileEntry.file(function(file) {\n\t\t\t\t\tvar reader = new FileReader();\n\n\t\t\t\t\treader.onloadend = function(e) {\n\t\t\t\t\t\tvar data = e.target.result;\n\t\t\t\t\t\tvar err;\n\t\t\t\t\t\tif (options && options.json) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\terr = new Error('unable to parse JSON for ' + path);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdeferred.resolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}, makeErrorHandler(deferred));\n\t\t\t}, makeErrorHandler(deferred));\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\t// create a file at path\n\t\t// and write `data` to it\n\t\tsetContents: function(path, data, options) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tif (options && options.json)\n\t\t\t\tdata = JSON.stringify(data);\n\n\t\t\tpath = this._prefix + path;\n\t\t\tthis._fs.root.getFile(path, {create:true}, function(fileEntry) {\n\t\t\t\tfileEntry.createWriter(function(fileWriter) {\n\t\t\t\t\tvar blob;\n\t\t\t\t\tfileWriter.onwriteend = function(e) {\n\t\t\t\t\t\tfileWriter.onwriteend = function() {\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tfileWriter.truncate(blob.size);\n\t\t\t\t\t}\n\n\t\t\t\t\tfileWriter.onerror = makeErrorHandler(deferred);\n\n\t\t\t\t\tif (data instanceof Blob) {\n\t\t\t\t\t\tblob = data;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tblob = new Blob([data], {type: 'text/plain'});\n\t\t\t\t\t}\n\n\t\t\t\t\tfileWriter.write(blob);\n\t\t\t\t}, makeErrorHandler(deferred));\n\t\t\t}, makeErrorHandler(deferred));\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tls: function(docKey) {\n\t\t\tvar isRoot = false;\n\t\t\tif (!docKey) {docKey = this._prefix; isRoot = true;}\n\t\t\telse docKey = this._prefix + docKey + \"-attachments\";\n\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tthis._fs.root.getDirectory(docKey, {create:false},\n\t\t\tfunction(entry) {\n\t\t\t\tvar reader = entry.createReader();\n\t\t\t\treadDirEntries(reader, []).then(function(entries) {\n\t\t\t\t\tvar listing = [];\n\t\t\t\t\tentries.forEach(function(entry) {\n\t\t\t\t\t\tif (!entry.isDirectory) {\n\t\t\t\t\t\t\tlisting.push(entry.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdeferred.resolve(listing);\n\t\t\t\t});\n\t\t\t}, function(error) {\n\t\t\t\tdeferred.reject(error);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar failed = false;\n\t\t\tvar ecb = function(err) {\n\t\t\t\tfailed = true;\n\t\t\t\tdeferred.reject(err);\n\t\t\t}\n\n\t\t\tthis._fs.root.getDirectory(this._prefix, {},\n\t\t\tfunction(entry) {\n\t\t\t\tvar reader = entry.createReader();\n\t\t\t\treader.readEntries(function(entries) {\n\t\t\t\t\tvar latch = \n\t\t\t\t\tutils.countdown(entries.length, function() {\n\t\t\t\t\t\tif (!failed)\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t});\n\n\t\t\t\t\tentries.forEach(function(entry) {\n\t\t\t\t\t\tif (entry.isDirectory) {\n\t\t\t\t\t\t\tentry.removeRecursively(latch, ecb);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tentry.remove(latch, ecb);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (entries.length == 0)\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}, ecb);\n\t\t\t}, ecb);\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trm: function(path) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar finalDeferred = Q.defer();\n\n\t\t\t// remove attachments that go along with the path\n\t\t\tpath = this._prefix + path;\n\t\t\tvar attachmentsDir = path + \"-attachments\";\n\n\t\t\tthis._fs.root.getFile(path, {create:false},\n\t\t\t\tfunction(entry) {\n\t\t\t\t\tentry.remove(function() {\n\t\t\t\t\t\tdeferred.promise.then(finalDeferred.resolve);\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\tfinalDeferred.reject(err);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tmakeErrorHandler(finalDeferred));\n\n\t\t\tthis._fs.root.getDirectory(attachmentsDir, {},\n\t\t\t\tfunction(entry) {\n\t\t\t\t\tentry.removeRecursively(function() {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\tfinalDeferred.reject(err);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tmakeErrorHandler(deferred, finalDeferred));\n\n\t\t\treturn finalDeferred.promise;\n\t\t},\n\n\t\tgetAttachment: function(docKey, attachKey) {\n\t\t\tvar attachmentPath = this._prefix + getAttachmentPath(docKey, attachKey).path;\n\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis._fs.root.getFile(attachmentPath, {}, function(fileEntry) {\n\t\t\t\tfileEntry.file(function(file) {\n\t\t\t\t\tif (file.size == 0)\n\t\t\t\t\t\tdeferred.resolve(undefined);\n\t\t\t\t\telse\n\t\t\t\t\t\tdeferred.resolve(file);\n\t\t\t\t}, makeErrorHandler(deferred));\n\t\t\t}, function(err) {\n\t\t\t\tif (err.code == 1) {\n\t\t\t\t\tdeferred.resolve(undefined);\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\tvar attachmentPath = this._prefix + getAttachmentPath(docKey, attachKey).path;\n\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar url = 'filesystem:' + window.location.protocol + '//' + window.location.host + '/persistent/' + attachmentPath;\n\t\t\tdeferred.resolve(url);\n\t\t\t// this._fs.root.getFile(attachmentPath, {}, function(fileEntry) {\n\t\t\t// \tdeferred.resolve(fileEntry.toURL());\n\t\t\t// }, makeErrorHandler(deferred, \"getting attachment file entry\"));\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAllAttachments: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar attachmentsDir = this._prefix + docKey + \"-attachments\";\n\n\t\t\tthis._fs.root.getDirectory(attachmentsDir, {},\n\t\t\tfunction(entry) {\n\t\t\t\tvar reader = entry.createReader();\n\t\t\t\tdeferred.resolve(\n\t\t\t\t\tutils.mapAsync(function(entry, cb, eb) {\n\t\t\t\t\t\tentry.file(function(file) {\n\t\t\t\t\t\t\tcb({\n\t\t\t\t\t\t\t\tdata: file,\n\t\t\t\t\t\t\t\tdocKey: docKey,\n\t\t\t\t\t\t\t\tattachKey: entry.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, eb);\n\t\t\t\t\t}, readDirEntries(reader, [])));\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAllAttachmentURLs: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar attachmentsDir = this._prefix + docKey + \"-attachments\";\n\n\t\t\tthis._fs.root.getDirectory(attachmentsDir, {},\n\t\t\tfunction(entry) {\n\t\t\t\tvar reader = entry.createReader();\n\t\t\t\treadDirEntries(reader, []).then(function(entries) {\n\t\t\t\t\tdeferred.resolve(entries.map(\n\t\t\t\t\tfunction(entry) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\turl: entry.toURL(),\n\t\t\t\t\t\t\tdocKey: docKey,\n\t\t\t\t\t\t\tattachKey: entry.name\n\t\t\t\t\t\t};\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trevokeAttachmentURL: function(url) {\n\t\t\t// we return FS urls so this is a no-op\n\t\t\t// unless someone is being silly and doing\n\t\t\t// createObjectURL(getAttachment()) ......\n\t\t},\n\n\t\t// Create a folder at dirname(path)+\"-attachments\"\n\t\t// add attachment under that folder as basename(path)\n\t\tsetAttachment: function(docKey, attachKey, data) {\n\t\t\tvar attachInfo = getAttachmentPath(docKey, attachKey);\n\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tvar self = this;\n\t\t\tthis._fs.root.getDirectory(this._prefix + attachInfo.dir,\n\t\t\t{create:true}, function(dirEntry) {\n\t\t\t\tdeferred.resolve(self.setContents(attachInfo.path, data));\n\t\t\t}, makeErrorHandler(deferred));\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\t// rm the thing at dirname(path)+\"-attachments/\"+basename(path)\n\t\trmAttachment: function(docKey, attachKey) {\n\t\t\tvar attachmentPath = getAttachmentPath(docKey, attachKey).path;\n\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis._fs.root.getFile(this._prefix + attachmentPath, {create:false},\n\t\t\t\tfunction(entry) {\n\t\t\t\t\tentry.remove(function() {\n\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t}, makeErrorHandler(deferred));\n\t\t\t}, makeErrorHandler(deferred));\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetCapacity: function() {\n\t\t\treturn this._capacity;\n\t\t}\n\t};\n\n\treturn {\n\t\tinit: function(config) {\n\t\t\tvar deferred = Q.defer();\n\t\t\twindow.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;\n\t\t\tvar persistentStorage = navigator.persistentStorage || navigator.webkitPersistentStorage;\n\n\t\t\tif (!requestFileSystem) {\n\t\t\t\tdeferred.reject(\"No FS API\");\n\t\t\t\treturn deferred.promise;\n\t\t\t}\n\n\t\t\tvar prefix = config.name + '/';\n\n\t\t\tpersistentStorage.requestQuota(config.size,\n\t\t\tfunction(numBytes) {\n\t\t\t\trequestFileSystem(window.PERSISTENT, numBytes,\n\t\t\t\tfunction(fs) {\n\t\t\t\t\tfs.root.getDirectory(config.name, {create: true},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tdeferred.resolve(new FSAPI(fs, numBytes, prefix));\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t\t});\n\t\t\t\t}, function(err) {\n\t\t\t\t\t// TODO: implement various error messages.\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\t// TODO: implement various error messages.\n\t\t\t\tconsole.error(err);\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t}\n\t}\n})(Q);\nvar IndexedDBProvider = (function(Q) {\n\tvar URL = window.URL || window.webkitURL;\n\n\tvar convertToBase64 = utils.convertToBase64;\n\tvar dataURLToBlob = utils.dataURLToBlob;\n\n\tfunction IDB(db) {\n\t\tthis._db = db;\n\t\tthis.type = 'IndexedDB';\n\n\t\tvar transaction = this._db.transaction(['attachments'], 'readwrite');\n\t\tthis._supportsBlobs = true;\n\t\ttry {\n\t\t\ttransaction.objectStore('attachments')\n\t\t\t.put(Blob([\"sdf\"], {type: \"text/plain\"}), \"featurecheck\");\n\t\t} catch (e) {\n\t\t\tthis._supportsBlobs = false;\n\t\t}\n\t}\n\n\t// TODO: normalize returns and errors.\n\tIDB.prototype = {\n\t\tgetContents: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar transaction = this._db.transaction(['files'], 'readonly');\n\n\t\t\tvar get = transaction.objectStore('files').get(docKey);\n\t\t\tget.onsuccess = function(e) {\n\t\t\t\tdeferred.resolve(e.target.result);\n\t\t\t};\n\n\t\t\tget.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tsetContents: function(docKey, data) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar transaction = this._db.transaction(['files'], 'readwrite');\n\n\t\t\tvar put = transaction.objectStore('files').put(data, docKey);\n\t\t\tput.onsuccess = function(e) {\n\t\t\t\tdeferred.resolve(e);\n\t\t\t};\n\n\t\t\tput.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trm: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar finalDeferred = Q.defer();\n\n\t\t\tvar transaction = this._db.transaction(['files', 'attachments'], 'readwrite');\n\t\t\t\n\t\t\tvar del = transaction.objectStore('files').delete(docKey);\n\n\t\t\tdel.onsuccess = function(e) {\n\t\t\t\tdeferred.promise.then(function() {\n\t\t\t\t\tfinalDeferred.resolve();\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tdel.onerror = function(e) {\n\t\t\t\tdeferred.promise.catch(function() {\n\t\t\t\t\tfinalDeferred.reject(e);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar attachmentsStore = transaction.objectStore('attachments');\n\t\t\tvar index = attachmentsStore.index('fname');\n\t\t\tvar cursor = index.openCursor(IDBKeyRange.only(docKey));\n\t\t\tcursor.onsuccess = function(e) {\n\t\t\t\tvar cursor = e.target.result;\n\t\t\t\tif (cursor) {\n\t\t\t\t\tcursor.delete();\n\t\t\t\t\tcursor.continue();\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcursor.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t}\n\n\t\t\treturn finalDeferred.promise;\n\t\t},\n\n\t\tgetAttachment: function(docKey, attachKey) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tvar transaction = this._db.transaction(['attachments'], 'readonly');\n\t\t\tvar get = transaction.objectStore('attachments').get(docKey + '/' + attachKey);\n\n\t\t\tvar self = this;\n\t\t\tget.onsuccess = function(e) {\n\t\t\t\tif (!e.target.result) {\n\t\t\t\t\tdeferred.resolve(undefined);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar data = e.target.result.data;\n\t\t\t\tif (!self._supportsBlobs) {\n\t\t\t\t\tdata = dataURLToBlob(data);\n\t\t\t\t}\n\t\t\t\tdeferred.resolve(data);\n\t\t\t};\n\n\t\t\tget.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tls: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tif (!docKey) {\n\t\t\t\t// list docs\n\t\t\t\tvar store = 'files';\n\t\t\t} else {\n\t\t\t\t// list attachments\n\t\t\t\tvar store = 'attachments';\n\t\t\t}\n\n\t\t\tvar transaction = this._db.transaction([store], 'readonly');\n\t\t\tvar cursor = transaction.objectStore(store).openCursor();\n\t\t\tvar listing = [];\n\n\t\t\tcursor.onsuccess = function(e) {\n\t\t\t\tvar cursor = e.target.result;\n\t\t\t\tif (cursor) {\n\t\t\t\t\tlisting.push(!docKey ? cursor.key : cursor.key.split('/')[1]);\n\t\t\t\t\tcursor.continue();\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.resolve(listing);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcursor.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar finalDeferred = Q.defer();\n\n\t\t\tvar t = this._db.transaction(['attachments', 'files'], 'readwrite');\n\n\n\t\t\tvar req1 = t.objectStore('attachments').clear();\n\t\t\tvar req2 = t.objectStore('files').clear();\n\n\t\t\treq1.onsuccess = function() {\n\t\t\t\tdeferred.promise.then(finalDeferred.resolve);\n\t\t\t};\n\n\t\t\treq2.onsuccess = function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t};\n\n\t\t\treq1.onerror = function(err) {\n\t\t\t\tfinalDeferred.reject(err);\n\t\t\t};\n\n\t\t\treq2.onerror = function(err) {\n\t\t\t\tfinalDeferred.reject(err);\n\t\t\t};\n\n\t\t\treturn finalDeferred.promise;\n\t\t},\n\n\t\tgetAllAttachments: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar self = this;\n\n\t\t\tvar transaction = this._db.transaction(['attachments'], 'readonly');\n\t\t\tvar index = transaction.objectStore('attachments').index('fname');\n\n\t\t\tvar cursor = index.openCursor(IDBKeyRange.only(docKey));\n\t\t\tvar values = [];\n\t\t\tcursor.onsuccess = function(e) {\n\t\t\t\tvar cursor = e.target.result;\n\t\t\t\tif (cursor) {\n\t\t\t\t\tvar data;\n\t\t\t\t\tif (!self._supportsBlobs) {\n\t\t\t\t\t\tdata = dataURLToBlob(cursor.value.data)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = cursor.value.data;\n\t\t\t\t\t}\n\t\t\t\t\tvalues.push({\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tdocKey: docKey,\n\t\t\t\t\t\tattachKey: cursor.primaryKey.split('/')[1] // TODO\n\t\t\t\t\t});\n\t\t\t\t\tcursor.continue();\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.resolve(values);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcursor.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAllAttachmentURLs: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis.getAllAttachments(docKey).then(function(attachments) {\n\t\t\t\tvar urls = attachments.map(function(a) {\n\t\t\t\t\ta.url = URL.createObjectURL(a.data);\n\t\t\t\t\tdelete a.data;\n\t\t\t\t\treturn a;\n\t\t\t\t});\n\n\t\t\t\tdeferred.resolve(urls);\n\t\t\t}, function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis.getAttachment(docKey, attachKey).then(function(attachment) {\n\t\t\t\tdeferred.resolve(URL.createObjectURL(attachment));\n\t\t\t}, function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trevokeAttachmentURL: function(url) {\n\t\t\tURL.revokeObjectURL(url);\n\t\t},\n\n\t\tsetAttachment: function(docKey, attachKey, data) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tif (data instanceof Blob && !this._supportsBlobs) {\n\t\t\t\tvar self = this;\n\t\t\t\tconvertToBase64(data, function(data) {\n\t\t\t\t\tcontinuation.call(self, data);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcontinuation.call(this, data);\n\t\t\t}\n\n\t\t\tfunction continuation(data) {\n\t\t\t\tvar obj = {\n\t\t\t\t\tpath: docKey + '/' + attachKey,\n\t\t\t\t\tfname: docKey,\n\t\t\t\t\tdata: data\n\t\t\t\t};\n\t\t\t\tvar transaction = this._db.transaction(['attachments'], 'readwrite');\n\t\t\t\tvar put = transaction.objectStore('attachments').put(obj);\n\n\t\t\t\tput.onsuccess = function(e) {\n\t\t\t\t\tdeferred.resolve(e);\n\t\t\t\t};\n\n\t\t\t\tput.onerror = function(e) {\n\t\t\t\t\tdeferred.reject(e);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trmAttachment: function(docKey, attachKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tvar transaction = this._db.transaction(['attachments'], 'readwrite');\n\t\t\tvar del = transaction.objectStore('attachments').delete(docKey + '/' + attachKey);\n\n\t\t\tdel.onsuccess = function(e) {\n\t\t\t\tdeferred.resolve(e);\n\t\t\t};\n\n\t\t\tdel.onerror = function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t}\n\t};\n\n\treturn {\n\t\tinit: function(config) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tvar indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.OIndexedDB || window.msIndexedDB,\n\t\t\tIDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.OIDBTransaction || window.msIDBTransaction,\n\t\t\tdbVersion = 2;\n\n\t\t\tif (!indexedDB || !IDBTransaction) {\n\t\t\t\tdeferred.reject(\"No IndexedDB\");\n\t\t\t\treturn deferred.promise;\n\t\t\t}\n\n\t\t\tvar request = indexedDB.open(config.name, dbVersion);\n\n\t\t\tfunction createObjectStore(db) {\n\t\t\t\tdb.createObjectStore(\"files\");\n\t\t\t\tvar attachStore = db.createObjectStore(\"attachments\", {keyPath: 'path'});\n\t\t\t\tattachStore.createIndex('fname', 'fname', {unique: false})\n\t\t\t}\n\n\t\t\t// TODO: normalize errors\n\t\t\trequest.onerror = function (event) {\n\t\t\t\tdeferred.reject(event);\n\t\t\t};\n\t\t \n\t\t\trequest.onsuccess = function (event) {\n\t\t\t\tvar db = request.result;\n\t\t \n\t\t\t\tdb.onerror = function (event) {\n\t\t\t\t\tconsole.log(event);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// Chrome workaround\n\t\t\t\tif (db.setVersion) {\n\t\t\t\t\tif (db.version != dbVersion) {\n\t\t\t\t\t\tvar setVersion = db.setVersion(dbVersion);\n\t\t\t\t\t\tsetVersion.onsuccess = function () {\n\t\t\t\t\t\t\tcreateObjectStore(db);\n\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeferred.resolve(new IDB(db));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.resolve(new IDB(db));\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\trequest.onupgradeneeded = function (event) {\n\t\t\t\tcreateObjectStore(event.target.result);\n\t\t\t};\n\n\t\t\treturn deferred.promise;\n\t\t}\n\t}\n})(Q);\nvar LocalStorageProvider = (function(Q) {\n\treturn {\n\t\tinit: function() {\n\t\t\treturn Q({type: 'LocalStorage'});\n\t\t}\n\t}\n})(Q);\nvar WebSQLProvider = (function(Q) {\n\tvar URL = window.URL || window.webkitURL;\n\tvar convertToBase64 = utils.convertToBase64;\n\tvar dataURLToBlob = utils.dataURLToBlob;\n\n\tfunction WSQL(db) {\n\t\tthis._db = db;\n\t\tthis.type = 'WebSQL';\n\t}\n\n\tWSQL.prototype = {\n\t\tgetContents: function(docKey, options) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql('SELECT value FROM files WHERE fname = ?', [docKey],\n\t\t\t\tfunction(tx, res) {\n\t\t\t\t\tif (res.rows.length == 0) {\n\t\t\t\t\t\tdeferred.resolve(undefined);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar data = res.rows.item(0).value;\n\t\t\t\t\t\tif (options && options.json)\n\t\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t\tdeferred.resolve(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\tconsol.log(err);\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tsetContents: function(docKey, data, options) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tif (options && options.json)\n\t\t\t\tdata = JSON.stringify(data);\n\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql(\n\t\t\t\t'INSERT OR REPLACE INTO files (fname, value) VALUES(?, ?)', [docKey, data]);\n\t\t\t}, function(err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdeferred.reject(err);\n\t\t\t}, function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trm: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql('DELETE FROM files WHERE fname = ?', [docKey]);\n\t\t\t\ttx.executeSql('DELETE FROM attachments WHERE fname = ?', [docKey]);\n\t\t\t}, function(err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\tdeferred.reject(err);\n\t\t\t}, function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAttachment: function(fname, akey) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tthis._db.transaction(function(tx){ \n\t\t\t\ttx.executeSql('SELECT value FROM attachments WHERE fname = ? AND akey = ?',\n\t\t\t\t[fname, akey],\n\t\t\t\tfunction(tx, res) {\n\t\t\t\t\tif (res.rows.length == 0) {\n\t\t\t\t\t\tdeferred.resolve(undefined);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdeferred.resolve(dataURLToBlob(res.rows.item(0).value));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis.getAttachment(docKey, attachKey).then(function(blob) {\n\t\t\t\tdeferred.resolve(URL.createObjectURL(blob));\n\t\t\t}, function() {\n\t\t\t\tdeferred.reject();\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tls: function(docKey) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tvar select;\n\t\t\tvar field;\n\t\t\tif (!docKey) {\n\t\t\t\tselect = 'SELECT fname FROM files';\n\t\t\t\tfield = 'fname';\n\t\t\t} else {\n\t\t\t\tselect = 'SELECT akey FROM attachments WHERE fname = ?';\n\t\t\t\tfield = 'akey';\n\t\t\t}\n\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql(select, docKey ? [docKey] : [],\n\t\t\t\tfunction(tx, res) {\n\t\t\t\t\tvar listing = [];\n\t\t\t\t\tfor (var i = 0; i < res.rows.length; ++i) {\n\t\t\t\t\t\tlisting.push(res.rows.item(i)[field]);\n\t\t\t\t\t}\n\n\t\t\t\t\tdeferred.resolve(listing);\n\t\t\t\t}, function(err) {\n\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tvar deffered1 = Q.defer();\n\t\t\tvar deffered2 = Q.defer();\n\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql('DELETE FROM files', function() {\n\t\t\t\t\tdeffered1.resolve();\n\t\t\t\t});\n\t\t\t\ttx.executeSql('DELETE FROM attachments', function() {\n\t\t\t\t\tdeffered2.resolve();\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\tdeffered1.reject(err);\n\t\t\t\tdeffered2.reject(err);\n\t\t\t});\n\n\t\t\treturn Q.all([deffered1, deffered2]);\n\t\t},\n\n\t\tgetAllAttachments: function(fname) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql('SELECT value, akey FROM attachments WHERE fname = ?',\n\t\t\t\t[fname],\n\t\t\t\tfunction(tx, res) {\n\t\t\t\t\t// TODO: ship this work off to a webworker\n\t\t\t\t\t// since there could be many of these conversions?\n\t\t\t\t\tvar result = [];\n\t\t\t\t\tfor (var i = 0; i < res.rows.length; ++i) {\n\t\t\t\t\t\tvar item = res.rows.item(i);\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tdocKey: fname,\n\t\t\t\t\t\t\tattachKey: item.akey,\n\t\t\t\t\t\t\tdata: dataURLToBlob(item.value)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tdeferred.resolve(result);\n\t\t\t\t});\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\tgetAllAttachmentURLs: function(fname) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis.getAllAttachments(fname).then(function(attachments) {\n\t\t\t\tvar urls = attachments.map(function(a) {\n\t\t\t\t\ta.url = URL.createObjectURL(a.data);\n\t\t\t\t\tdelete a.data;\n\t\t\t\t\treturn a;\n\t\t\t\t});\n\n\t\t\t\tdeferred.resolve(urls);\n\t\t\t}, function(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trevokeAttachmentURL: function(url) {\n\t\t\tURL.revokeObjectURL(url);\n\t\t},\n\n\t\tsetAttachment: function(fname, akey, data) {\n\t\t\tvar deferred = Q.defer();\n\n\t\t\tvar self = this;\n\t\t\tconvertToBase64(data, function(data) {\n\t\t\t\tself._db.transaction(function(tx) {\n\t\t\t\t\ttx.executeSql(\n\t\t\t\t\t'INSERT OR REPLACE INTO attachments (fname, akey, value) VALUES(?, ?, ?)',\n\t\t\t\t\t[fname, akey, data]);\n\t\t\t\t}, function(err) {\n\t\t\t\t\tdeferred.reject(err);\n\t\t\t\t}, function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t},\n\n\t\trmAttachment: function(fname, akey) {\n\t\t\tvar deferred = Q.defer();\n\t\t\tthis._db.transaction(function(tx) {\n\t\t\t\ttx.executeSql('DELETE FROM attachments WHERE fname = ? AND akey = ?',\n\t\t\t\t[fname, akey]);\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t}, function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t}\n\t};\n\n\treturn {\n\t\tinit: function(config) {\n\t\t\tvar openDb = window.openDatabase;\n\t\t\tvar deferred = Q.defer();\n\t\t\tif (!openDb) {\n\t\t\t\tdeferred.reject(\"No WebSQL\");\n\t\t\t\treturn deferred.promise;\n\t\t\t}\n\n\t\t\tvar db = openDb(config.name, '1.0', 'large local storage', config.size);\n\n\t\t\tdb.transaction(function(tx) {\n\t\t\t\ttx.executeSql('CREATE TABLE IF NOT EXISTS files (fname unique, value)');\n\t\t\t\ttx.executeSql('CREATE TABLE IF NOT EXISTS attachments (fname, akey, value)');\n\t\t\t\ttx.executeSql('CREATE INDEX IF NOT EXISTS fname_index ON attachments (fname)');\n\t\t\t\ttx.executeSql('CREATE INDEX IF NOT EXISTS akey_index ON attachments (akey)');\n\t\t\t\ttx.executeSql('CREATE UNIQUE INDEX IF NOT EXISTS uniq_attach ON attachments (fname, akey)')\n\t\t\t}, function(err) {\n\t\t\t\tdeferred.reject(err);\n\t\t\t}, function() {\n\t\t\t\tdeferred.resolve(new WSQL(db));\n\t\t\t});\n\n\t\t\treturn deferred.promise;\n\t\t}\n\t}\n})(Q);\nvar LargeLocalStorage = (function(Q) {\n\tvar sessionMeta = localStorage.getItem('LargeLocalStorage-meta');\n\tif (sessionMeta)\n\t\tsessionMeta = JSON.parse(sessionMeta);\n\telse\n\t\tsessionMeta = {};\n\n\tfunction defaults(options, defaultOptions) {\n\t\tfor (var k in defaultOptions) {\n\t\t\tif (options[k] === undefined)\n\t\t\t\toptions[k] = defaultOptions[k];\n\t\t}\n\n\t\treturn options;\n\t}\n\n\tfunction getImpl(type) {\n\t\tswitch(type) {\n\t\t\tcase 'FileSystemAPI':\n\t\t\t\treturn FilesystemAPIProvider.init();\n\t\t\tcase 'IndexedDB':\n\t\t\t\treturn IndexedDBProvider.init();\n\t\t\tcase 'WebSQL':\n\t\t\t\treturn WebSQLProvider.init();\n\t\t\tcase 'LocalStorage':\n\t\t\t\treturn LocalStorageProvider.init();\n\t\t}\n\t}\n\n\tvar providers = {\n\t\tFileSystemAPI: FilesystemAPIProvider,\n\t\tIndexedDB: IndexedDBProvider,\n\t\tWebSQL: WebSQLProvider,\n\t\tLocalStorage: LocalStorageProvider\n\t}\n\n\tvar defaultConfig = {\n\t\tsize: 10 * 1024 * 1024,\n\t\tname: 'lls'\n\t};\n\n\tfunction selectImplementation(config) {\n\t\tif (!config) config = {};\n\t\tconfig = defaults(config, defaultConfig);\n\n\t\tif (config.forceProvider) {\n\t\t\treturn providers[config.forceProvider].init(config);\n\t\t}\n\n\t\treturn FilesystemAPIProvider.init(config).then(function(impl) {\n\t\t\treturn Q(impl);\n\t\t}, function() {\n\t\t\treturn IndexedDBProvider.init(config);\n\t\t}).then(function(impl) {\n\t\t\treturn Q(impl);\n\t\t}, function() {\n\t\t\treturn WebSQLProvider.init(config);\n\t\t}).then(function(impl) {\n\t\t\treturn Q(impl);\n\t\t}, function() {\n\t\t\tconsole.error('Unable to create any storage implementations.  Using LocalStorage');\n\t\t\treturn LocalStorageProvider.init(config);\n\t\t});\n\t}\n\n\tfunction copyOldData(from, to) {\n\t\t// from = getImpl(from);\n\t\tconsole.log('Underlying implementation change.');\n\t}\n\n\t/**\n\t * \n\t * LargeLocalStorage (or LLS) gives you a large capacity \n\t * (up to several gig with permission from the user)\n\t * key-value store in the browser.\n\t *\n\t * For storage, LLS uses the [FilesystemAPI](https://developer.mozilla.org/en-US/docs/WebGuide/API/File_System)\n\t * when running in Crome and Opera, \n\t * [InexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB) in Firefox and IE\n\t * and [WebSQL](http://www.w3.org/TR/webdatabase/) in Safari.\n\t *\n\t * When IndexedDB becomes available in Safari, LLS will\n\t * update to take advantage of that storage implementation.\n\t *\n\t *\n\t * Upon construction a LargeLocalStorage (LLS) object will be \n\t * immediately returned but not necessarily immediately ready for use.\n\t *\n\t * A LLS object has an `initialized` property which is a promise\n\t * that is resolved when the LLS object is ready for us.\n\t *\n\t * Usage of LLS would typically be:\n\t * ```\n\t * var storage = new LargeLocalStorage({size: 75*1024*1024});\n\t * storage.initialized.then(function(grantedCapacity) {\n\t *   // storage ready to be used.\n\t * });\n\t * ```\n\t *\n\t * The reason that LLS may not be immediately ready for\n\t * use is that some browsers require confirmation from the\n\t * user before a storage area may be created.  Also,\n\t * the browser's native storage APIs are asynchronous.\n\t *\n\t * If an LLS instance is used before the storage\n\t * area is ready then any\n\t * calls to it will throw an exception with code: \"NO_IMPLEMENTATION\"\n\t *\n\t * This behavior is useful when you want the application\n\t * to continue to function--regardless of whether or\n\t * not the user has allowed it to store data--and would\n\t * like to know when your storage calls fail at the point\n\t * of those calls.\n\t *\n\t * LLS-contrib has utilities to queue storage calls until\n\t * the implementation is ready.  If an implementation\n\t * is never ready this could obviously lead to memory issues\n\t * which is why it is not the default behavior.\n\t *\n\t * @example\n\t *\tvar desiredCapacity = 50 * 1024 * 1024; // 50MB\n\t *\tvar storage = new LargeLocalStorage({\n\t *\t\t// desired capacity, in bytes.\n\t *\t\tsize: desiredCapacity,\n\t *\n\t * \t\t// optional name for your LLS database. Defaults to lls.\n\t *\t\t// This is the name given to the underlying\n\t *\t\t// IndexedDB or WebSQL DB or FSAPI Folder.\n\t *\t\t// LLS's with different names are independent.\n\t *\t\tname: 'myStorage'\n\t *\n\t *\t\t// the following is an optional param \n\t *\t\t// that is useful for debugging.\n\t *\t\t// force LLS to use a specific storage implementation\n\t *\t\t// forceProvider: 'IndexedDB' or 'WebSQL' or 'FilesystemAPI'\n\t *\t});\n\t *\tstorage.initialized.then(function(capacity) {\n\t *\t\tif (capacity != -1 && capacity != desiredCapacity) {\n\t *\t\t\t// the user didn't authorize your storage request\n\t *\t\t\t// so instead you have some limitation on your storage\n\t *\t\t}\n\t *\t})\n\t *\n\t * @class LargeLocalStorage\n\t * @constructor\n\t * @param {object} config {size: sizeInByes, [forceProvider: force a specific implementation]}\n\t * @return {LargeLocalStorage}\n\t */\n\tfunction LargeLocalStorage(config) {\n\t\tvar self = this;\n\t\tvar deferred = Q.defer();\n\t\tselectImplementation(config).then(function(impl) {\n\t\t\tconsole.log('Selected: ' + impl.type);\n\t\t\tself._impl = impl;\n\t\t\tif (sessionMeta.lastStorageImpl != self._impl.type) {\n\t\t\t\tcopyOldData(sessionMeta.lastStorageImpl, self._impl);\n\t\t\t}\n\t\t\tsessionMeta.lastStorageImpl = impl.type;\n\t\t\tdeferred.resolve(self);\n\t\t}).catch(function(e) {\n\t\t\t// This should be impossible\n\t\t\tconsole.log(e);\n\t\t\tdeferred.reject('No storage provider found');\n\t\t});\n\n\t\t/**\n\t\t* @property {promise} initialized\n\t\t*/\n\t\tthis.initialized = deferred.promise;\n\n\t\tvar piped = createPipeline([\n\t\t\t'ready',\n\t\t\t'ls',\n\t\t\t'rm',\n\t\t\t'clear',\n\t\t\t'getContents',\n\t\t\t'setContents',\n\t\t\t'getAttachment',\n\t\t\t'setAttachment',\n\t\t\t'getAttachmentURL',\n\t\t\t'getAllAttachments',\n\t\t\t'getAllAttachmentURLs',\n\t\t\t'revokeAttachmentURL',\n\t\t\t'rmAttachment',\n\t\t\t'getCapacity',\n\t\t\t'initialized']);\n\n\t\tpiped.pipe.addLast('lls', this);\n\t\tpiped.initialized = this.initialized;\n\t\treturn piped;\n\t}\n\n\tLargeLocalStorage.prototype = {\n\t\t/**\n\t\t* Whether or not LLS is ready to store data.\n\t\t* The `initialized` property can be used to\n\t\t* await initialization.\n\t\t* @example\n\t\t*\t// may or may not be true\n\t\t*\tstorage.ready();\n\t\t*\t\n\t\t*\tstorage.initialized.then(function() {\n\t\t*\t\t// always true\n\t\t*\t\tstorage.ready();\n\t\t*\t})\n\t\t* @method ready\n\t\t*/\n\t\tready: function() {\n\t\t\treturn this._impl != null;\n\t\t},\n\n\t\t/**\n\t\t* List all attachments under a given key.\n\t\t*\n\t\t* List all documents if no key is provided.\n\t\t*\n\t\t* Returns a promise that is fulfilled with\n\t\t* the listing.\n\t\t*\n\t\t* @example\n\t\t*\tstorage.ls().then(function(docKeys) {\n\t\t*\t\tconsole.log(docKeys);\n\t\t*\t})\n\t\t*\n\t\t* @method ls\n\t\t* @param {string} [docKey]\n\t\t* @returns {promise} resolved with the listing, rejected if the listing fails.\n\t\t*/\n\t\tls: function(docKey) {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.ls(docKey);\n\t\t},\n\n\t\t/**\n\t\t* Remove the specified document and all\n\t\t* of its attachments.\n\t\t*\n\t\t* Returns a promise that is fulfilled when the\n\t\t* removal completes.\n\t\t*\n\t\t* If no docKey is specified, this throws an error.\n\t\t*\n\t\t* To remove all files in LargeLocalStorage call\n\t\t* `lls.clear();`\n\t\t*\n\t\t* To remove all attachments that were written without\n\t\t* a docKey, call `lls.rm('__emptydoc__');`\n\t\t*\n\t\t* rm works this way to ensure you don't lose\n\t\t* data due to an accidently undefined variable.\n\t\t*\n\t\t* @example\n\t\t* \tstoarge.rm('exampleDoc').then(function() {\n\t\t*\t\talert('doc and all attachments were removed');\n\t\t* \t})\n\t\t*\n\t\t* @method rm\n\t\t* @param {string} docKey\n\t\t* @returns {promise} resolved when removal completes, rejected if the removal fails.\n\t\t*/\n\t\trm: function(docKey) {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.rm(docKey);\n\t\t},\n\n\t\t/**\n\t\t* An explicit way to remove all documents and\n\t\t* attachments from LargeLocalStorage.\n\t\t*\n\t\t* @example\n\t\t*\tstorage.clear().then(function() {\n\t\t*\t\talert('all data has been removed');\n\t\t*\t});\n\t\t* \n\t\t* @returns {promise} resolve when clear completes, rejected if clear fails.\n\t\t*/\n\t\tclear: function() {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.clear();\n\t\t},\n\n\t\t/**\n\t\t* Get the contents of a document identified by `docKey`\n\t\t* TODO: normalize all implementations to allow storage\n\t\t* and retrieval of JS objects?\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getContents('exampleDoc').then(function(contents) {\n\t\t* \t\talert(contents);\n\t\t* \t});\n\t\t*\n\t\t* @method getContents\n\t\t* @param {string} docKey\n\t\t* @returns {promise} resolved with the contents when the get completes\n\t\t*/\n\t\tgetContents: function(docKey, options) {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.getContents(docKey, options);\n\t\t},\n\n\t\t/**\n\t\t* Set the contents identified by `docKey` to `data`.\n\t\t* The document will be created if it does not exist.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.setContents('exampleDoc', 'some data...').then(function() {\n\t\t*\t\talert('doc written');\n\t\t* \t});\n\t\t*\n\t\t* @method setContents\n\t\t* @param {string} docKey\n\t\t* @param {any} data\n\t\t* @returns {promise} fulfilled when set completes\n\t\t*/\n\t\tsetContents: function(docKey, data, options) {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.setContents(docKey, data, options);\n\t\t},\n\n\t\t/**\n\t\t* Get the attachment identified by `docKey` and `attachKey`\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getAttachment('exampleDoc', 'examplePic').then(function(attachment) {\n\t\t*    \tvar url = URL.createObjectURL(attachment);\n\t\t*    \tvar image = new Image(url);\n\t\t*    \tdocument.body.appendChild(image);\n\t\t*    \tURL.revokeObjectURL(url);\n\t\t* \t})\n\t\t*\n\t\t* @method getAttachment\n\t\t* @param {string} [docKey] Defaults to `__emptydoc__`\n\t\t* @param {string} attachKey key of the attachment\n\t\t* @returns {promise} fulfilled with the attachment or\n\t\t* rejected if it could not be found.  code: 1\n\t\t*/\n\t\tgetAttachment: function(docKey, attachKey) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.getAttachment(docKey, attachKey);\n\t\t},\n\n\t\t/**\n\t\t* Set an attachment for a given document.  Identified\n\t\t* by `docKey` and `attachKey`.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.setAttachment('myDoc', 'myPic', blob).then(function() {\n\t\t*    \talert('Attachment written');\n\t\t* \t})\n\t\t*\n\t\t* @method setAttachment\n\t\t* @param {string} [docKey] Defaults to `__emptydoc__`\n\t\t* @param {string} attachKey key for the attachment\n\t\t* @param {any} attachment data\n\t\t* @returns {promise} resolved when the write completes.  Rejected\n\t\t* if an error occurs.\n\t\t*/\n\t\tsetAttachment: function(docKey, attachKey, data) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.setAttachment(docKey, attachKey, data);\n\t\t},\n\n\t\t/**\n\t\t* Get the URL for a given attachment.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getAttachmentURL('myDoc', 'myPic').then(function(url) {\n\t \t*   \tvar image = new Image();\n\t \t*   \timage.src = url;\n\t \t*   \tdocument.body.appendChild(image);\n\t \t*   \tstorage.revokeAttachmentURL(url);\n\t\t* \t})\n\t\t*\n\t\t* This is preferrable to getting the attachment and then getting the\n\t\t* URL via `createObjectURL` (on some systems) as LLS can take advantage of \n\t\t* lower level details to improve performance.\n\t\t*\n\t\t* @method getAttachmentURL\n\t\t* @param {string} [docKey] Identifies the document.  Defaults to `__emptydoc__`\n\t\t* @param {string} attachKey Identifies the attachment.\n\t\t* @returns {promose} promise that is resolved with the attachment url.\n\t\t*/\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.getAttachmentURL(docKey, attachKey);\n\t\t},\n\n\t\t/**\n\t\t* Gets all of the attachments for a document.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getAllAttachments('exampleDoc').then(function(attachEntries) {\n\t\t* \t\tattachEntries.map(function(entry) {\n\t\t*\t\t\tvar a = entry.data;\n\t\t*\t\t\t// do something with it...\n\t\t* \t\t\tif (a.type.indexOf('image') == 0) {\n\t\t*\t\t\t\t// show image...\n\t\t*\t\t\t} else if (a.type.indexOf('audio') == 0) {\n\t\t*\t\t\t\t// play audio...\n\t\t*\t\t\t} else ...\n\t\t*\t\t})\n\t\t* \t})\n\t\t*\n\t\t* @method getAllAttachments\n\t\t* @param {string} [docKey] Identifies the document.  Defaults to `__emptydoc__`\n\t\t* @returns {promise} Promise that is resolved with all of the attachments for\n\t\t* the given document.\n\t\t*/\n\t\tgetAllAttachments: function(docKey) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.getAllAttachments(docKey);\n\t\t},\n\n\t\t/**\n\t\t* Gets all attachments URLs for a document.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getAllAttachmentURLs('exampleDoc').then(function(urlEntries) {\n\t\t*\t\turlEntries.map(function(entry) {\n\t\t*\t\t\tvar url = entry.url;\n\t\t* \t\t\t// do something with the url...\n\t\t* \t\t})\n\t\t* \t})\n\t\t*\n\t\t* @method getAllAttachmentURLs\n\t\t* @param {string} [docKey] Identifies the document.  Defaults to the `__emptydoc__` document.\n\t\t* @returns {promise} Promise that is resolved with all of the attachment\n\t\t* urls for the given doc.\n\t\t*/\n\t\tgetAllAttachmentURLs: function(docKey) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.getAllAttachmentURLs(docKey);\n\t\t},\n\n\t\t/**\n\t\t* Revoke the attachment URL as required by the underlying\n\t\t* storage system.\n\t\t*\n\t\t* This is akin to `URL.revokeObjectURL(url)`\n\t\t* URLs that come from `getAttachmentURL` or `getAllAttachmentURLs` \n\t\t* should be revoked by LLS and not `URL.revokeObjectURL`\n\t\t*\n\t\t* @example\n\t\t* \tstorage.getAttachmentURL('doc', 'attach').then(function(url) {\n\t\t*\t\t// do something with the URL\n\t\t*\t\tstorage.revokeAttachmentURL(url);\n\t\t* \t})\n\t\t*\n\t\t* @method revokeAttachmentURL\n\t\t* @param {string} url The URL as returned by `getAttachmentURL` or `getAttachmentURLs`\n\t\t* @returns {void}\n\t\t*/\n\t\trevokeAttachmentURL: function(url) {\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.revokeAttachmentURL(url);\n\t\t},\n\n\t\t/**\n\t\t* Remove an attachment from a document.\n\t\t*\n\t\t* @example\n\t\t* \tstorage.rmAttachment('exampleDoc', 'someAttachment').then(function() {\n\t\t* \t\talert('exampleDoc/someAttachment removed');\n\t\t* \t}).catch(function(e) {\n\t\t*\t\talert('Attachment removal failed: ' + e);\n\t\t* \t});\n\t\t*\n\t\t* @method rmAttachment\n\t\t* @param {string} docKey\n\t\t* @param {string} attachKey\n\t\t* @returns {promise} Promise that is resolved once the remove completes\n\t\t*/\n\t\trmAttachment: function(docKey, attachKey) {\n\t\t\tif (!docKey) docKey = '__emptydoc__';\n\t\t\tthis._checkAvailability();\n\t\t\treturn this._impl.rmAttachment(docKey, attachKey);\n\t\t},\n\n\t\t/**\n\t\t* Returns the actual capacity of the storage or -1\n\t\t* if it is unknown.  If the user denies your request for\n\t\t* storage you'll get back some smaller amount of storage than what you\n\t\t* actually requested.\n\t\t*\n\t\t* TODO: return an estimated capacity if actual capacity is unknown?\n\t\t* -Firefox is 50MB until authorized to go above,\n\t\t* -Chrome is some % of available disk space,\n\t\t* -Safari unlimited as long as the user keeps authorizing size increases\n\t\t* -Opera same as safari?\n\t\t*\n\t\t* @example\n\t\t*\t// the initialized property will call you back with the capacity\n\t\t* \tstorage.initialized.then(function(capacity) {\n\t\t*\t\tconsole.log('Authorized to store: ' + capacity + ' bytes');\n\t\t* \t});\n\t\t*\t// or if you know your storage is already available\n\t\t*\t// you can call getCapacity directly\n\t\t*\tstorage.getCapacity()\n\t\t*\n\t\t* @method getCapacity\n\t\t* @returns {number} Capacity, in bytes, of the storage.  -1 if unknown.\n\t\t*/\n\t\tgetCapacity: function() {\n\t\t\tthis._checkAvailability();\n\t\t\tif (this._impl.getCapacity)\n\t\t\t\treturn this._impl.getCapacity();\n\t\t\telse\n\t\t\t\treturn -1;\n\t\t},\n\n\t\t_checkAvailability: function() {\n\t\t\tif (!this._impl) {\n\t\t\t\tthrow {\n\t\t\t\t\tmsg: \"No storage implementation is available yet.  The user most likely has not granted you app access to FileSystemAPI or IndexedDB\",\n\t\t\t\t\tcode: \"NO_IMPLEMENTATION\"\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t};\n\n\tLargeLocalStorage.contrib = {};\n\n\treturn LargeLocalStorage;\n})(Q);\n\n\treturn LargeLocalStorage;\n}\n\nif (typeof define === 'function' && define.amd) {\n\tdefine('lls/LargeLocalStorage',['Q'], definition);\n} else {\n\tglob.LargeLocalStorage = definition.call(glob, Q);\n}\n\n}).call(this, this);\n",
    "(function() {\n function definition() {\n\tvar defaultOptions = {\n\t\tmanageRevocation: true\n\t};\n\n\tfunction defaults(options, defaultOptions) {\n\t\tfor (var k in defaultOptions) {\n\t\t\tif (options[k] === undefined)\n\t\t\t\toptions[k] = defaultOptions[k];\n\t\t}\n\n\t\treturn options;\n\t}\n\n\tfunction add(docKey, attachKey, url) {\n\t\tif (this.options.manageRevocation)\n\t\t\texpunge.call(this, docKey, attachKey, true);\n\n\t\tvar mainCache = this.cache.main;\n\t\tvar docCache = mainCache[docKey];\n\t\tif (!docCache) {\n\t\t\tdocCache = {};\n\t\t\tmainCache[docKey] = docCache;\n\t\t}\n\n\t\tdocCache[attachKey] = url;\n\t\tthis.cache.reverse[url] = {docKey: docKey, attachKey: attachKey};\n\t}\n\n\tfunction addAll(urlEntries) {\n\t\turlEntries.forEach(function(entry) {\n\t\t\tadd.call(this, entry.docKey, entry.attachKey, entry.url);\n\t\t}, this);\n\t}\n\n\tfunction expunge(docKey, attachKey, needsRevoke) {\n\t\tfunction delAndRevoke(attachKey) {\n\t\t\tvar url = docCache[attachKey];\n\t\t\tdelete docCache[attachKey];\n\t\t\tdelete this.cache.reverse[url];\n\t\t\tif (this.options.manageRevocation && needsRevoke)\n\t\t\t\tthis.llshandler.revokeAttachmentURL(url, {bypassUrlCache: true});\n\t\t}\n\n\t\tvar docCache = this.cache.main[docKey];\n\t\tif (docCache) {\n\t\t\tif (attachKey) {\n\t\t\t\tdelAndRevoke.call(this, attachKey);\n\t\t\t} else {\n\t\t\t\tfor (var attachKey in docCache) {\n\t\t\t\t\tdelAndRevoke.call(this, attachKey);\n\t\t\t\t}\n\t\t\t\tdelete this.cache.main[docKey];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction expungeByUrl(url) {\n\t\tvar keys = this.cache.reverse[url];\n\t\tif (keys) {\n\t\t\texpunge.call(this, keys.docKey, keys.attachKey, false);\n\t\t}\n\t}\n\n\n\tfunction URLCache(llspipe, options) {\n\t\toptions = options || {};\n\t\tthis.options = defaults(options, defaultOptions);\n\t\tthis.llshandler = llspipe.pipe.getHandler('lls');\n\t\tthis.pending = {};\n\t\tthis.cache = {\n\t\t\tmain: {},\n\t\t\treverse: {}\n\t\t};\n\t}\n\n\tURLCache.prototype = {\n\t\tsetAttachment: function(docKey, attachKey, blob) {\n\t\t\texpunge.call(this, docKey, attachKey);\n\t\t\treturn this.__pipectx.next(docKey, attachKey, blob);\n\t\t},\n\n\t\trmAttachment: function(docKey, attachKey) {\n\t\t\texpunge.call(this, docKey, attachKey);\n\t\t\treturn this.__pipectx.next(docKey, attachKey);\n\t\t},\n\n\t\trm: function(docKey) {\n\t\t\texpunge.call(this, docKey);\n\t\t\treturn this.__pipectx.next(docKey);\n\t\t},\n\n\t\trevokeAttachmentURL: function(url, options) {\n\t\t\tif (!options || !options.bypassUrlCache)\n\t\t\t\texpungeByUrl.call(this, url);\n\n\t\t\treturn this.__pipectx.next(url, options);\n\t\t},\n\n\t\tgetAttachmentURL: function(docKey, attachKey) {\n\t\t\tvar pendingKey = docKey + attachKey;\n\t\t\tvar pending = this.pending[pendingKey];\n\t\t\tif (pending)\n\t\t\t\treturn pending;\n\n\t\t\tvar promise = this.__pipectx.next(docKey, attachKey);\n\t\t\tvar self = this;\n\t\t\tpromise.then(function(url) {\n\t\t\t\tadd.call(self, docKey, attachKey, url);\n\t\t\t\tdelete self.pending[pendingKey];\n\t\t\t});\n\n\t\t\tthis.pending[pendingKey] = promise;\n\n\t\t\treturn promise;\n\t\t},\n\n\t\t// TODO: pending between this and getAttachmentURL...\n\t\t// Execute this as an ls and then\n\t\t// a loop on getAttachmentURL instead???\n\t\t// doing it the way mentiond above\n\t\t// will prevent us from leaking blobs.\n\t\tgetAllAttachmentURLs: function(docKey) {\n\t\t\tvar promise = this.__pipectx.next(docKey);\n\t\t\tvar self = this;\n\t\t\tpromise.then(function(urlEntries) {\n\t\t\t\taddAll.call(self, urlEntries);\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t},\n\n\t\tclear: function() {\n\t\t\tthis.revokeAllCachedURLs();\n\t\t\treturn this.__pipectx.next();\n\t\t},\n\n\t\trevokeAllCachedURLs: function() {\n\t\t\tfor (var url in this.cache.reverse) {\n\t\t\t\tthis.llshandler.revokeAttachmentURL(url, {bypassUrlCache: true});\n\t\t\t}\n\n\t\t\tthis.cache.reverse = {};\n\t\t\tthis.cache.main = {};\n\t\t}\n\t};\n\n\treturn {\n\t\taddTo: function(lls, options) {\n\t\t\tvar cache = new URLCache(lls, options);\n\t\t\tlls.pipe.addFirst('URLCache', cache);\n\t\t\treturn lls;\n\t\t}\n\t}\n}\n\nif (typeof define == 'function' && define.amd) {\n\tdefine('lls/contrib/URLCache',['lls/LargeLocalStorage'], function(lls) {\n\t\tlls.contrib.URLCache = definition();\n\t\treturn lls.contrib.URLCache;\n\t});\n} else {\n\tLargeLocalStorage.contrib.URLCache = definition();\n}\n\n})();\n",
    "define('strut/startup/main',['strut/editor/EditorView',\n        'strut/editor/EditorModel',\n        'lls/LargeLocalStorage',\n        'lls/contrib/URLCache'],\nfunction(EditorView, EditorModel, lls, URLCache) {\n\tvar registry = null;\n\n\n\tfunction restoreLastPresentation(model) {\n\n\t\tvar storageInterface = registry.getBest('strut.StorageInterface');\n\t\tvar exitsaveData = localStorage.getItem('strut-exitsave');\n\t\tvar restorePromise;\n\t\tif (exitsaveData && exitsaveData !== '') {\n\t\t\ttry {\n\t\t\t\tvar exitSavedPres = JSON.parse(exitsaveData);\n                //将projectname赋给filename\n                exitSavedPres.fileName = $('#projectname').val();\n                restorePromise = restoreExitSave(exitSavedPres, exitsaveData, storageInterface);\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t\tif (restorePromise)\n        {\n\n\t\t\trestorePromise.then(function()\n            {\n\t\t\t\timportPresentation(exitSavedPres);\n\t\t\t}, function(err) {\n\t\t\t\tloadPresentation();\n\t\t\t}).done();\n\t\t}\n        else\n        {\n\t\t\tloadPresentation();\n\t\t}\n\n\t\tfunction loadPresentation() {\n            if(this.window.location.href.indexOf('import')>0) {\n                if (sessionMeta.lastPresentation != null) {\n                    storageInterface.load(sessionMeta.lastPresentation).then(importPresentation)\n                        .catch(function (err) {\n                            console.log(err);\n                        });\n                }\n            }\n\t\t}\n\n\t\tfunction importPresentation(pres) {\n            //如果是新建plezen, 则不调用importPresentation方法\n            if (this.window.location.pathname != \"/impress\") {\n                if (pres)\n                    model.importPresentation(pres);\n            }\n\t\t}\n\t}\n\n\tfunction restoreExitSave(exitSavedPres, exitsaveData, storage) {\n        var promise = storage.store(exitSavedPres.fileName, exitsaveData, {json: false});\n        localStorage.setItem('filename', exitSavedPres.fileName);\n\t\tlocalStorage.setItem('strut-exitsave', '');\n\t\treturn promise;\n\t}\n\n\tfunction initializeStorage() {\n\t\tconsole.log('Initializing storage');\n\t\t// TODO: should we force our provider\n\t\t// to whatever the user used last?\n\t\tvar storage = new lls({size: 75 * 1024 * 1024, name: 'strut'});\n\t\tstorage = URLCache.addTo(storage);\n\t\tstorage.urlCache = storage.pipe.getHandler('URLCache');\n\n\t\t// TODO: some sort of spinner or loading indication\n\t\t// while we get the storage interface ready.\n\n\t\tstorage.initialized.then(function(capacity) {\n\t\t\tstorage.name = \"Local\";\n\t\t\tstorage.id = \"largelocalstorage\";\n\t\t\tstorage.ready = function() { return true; };\n\t\t\tstorage.bg = function() {};\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'tantaman.web.StorageProvider'\n\t\t\t}, storage);\n\n\t\t\tif (window.__requiresStorageConversion) {\n\t\t\t\t// convert and delete past presentations\n\t\t\t\tconsole.log('Requires conversion');\n\t\t\t}\n\t\t});\n\n\t\treturn storage.initialized;\n\t}\n\n\tfunction loadEditor() {\n\t\tvar model = new EditorModel(registry);\n    \tvar editor = new EditorView({model: model, registry: registry});\n    \teditor.render();\n    \t$('body').append(editor.$el);\n    \treturn model;\n\t}\n\n\tvar editorStartup = {\n\t\trun: function() {\n\t\t\tvar model;\n    \t\tinitializeStorage().then(function() {\n    \t\t\trestoreLastPresentation(model);\n\t\t\t\t$(window).unload(function() {\n\t\t\t\t\tlocalStorage.setItem('Strut_sessionMeta', JSON.stringify(window.sessionMeta));\n\t\t\t\t});\n    \t\t}, function(err) {\n\t\t\t\t// Just continue with LocalStorage?\n\t\t\t\t// fail?\n\t\t\t\tconsole.error(err);\n\t\t\t}).done();\n\n\t\t\tmodel = loadEditor();\n\t\t}\n\t};\n\n\tvar welcome = {\n\t\trun: function() {\n\t\t\t// If no previous presentation was detected, show the welcome screen.\n\t\t}\n\t};\n\n\treturn {\n\t\tinitialize: function(reg) {\n\t\t\tregistry = reg;\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.StartupTask'\n\t\t\t}, editorStartup);\n\n\t\t\tregistry.register({\n\t\t\t\tinterfaces: 'strut.StartupTask'\n\t\t\t}, welcome);\n\t\t}\n\t};\n});\n",
    "define('features',[\n\n        'framework/ServiceRegistry',\n        'strut/etch_extension/main',\n        'strut/storage/main',\n        'strut/exporter/main',\n        'strut/logo_button/main',\n        'strut/themes/main',\n        'strut/editor/main',\n        'strut/exporter/json/main',\n        'strut/exporter/zip/browser/main',\n        'strut/importer/json/main',\n        'strut/importer/main',\n        'strut/exit/main',\n        'strut/presentation_generator/impress/main',\n        //隐藏生成bespoke和handouts生成按钮--Humphrey\n//\t'strut/presentation_generator/bespoke/main',\n//\t'strut/presentation_generator/handouts/main',\n//\t'strut/presentation_generator/impress-mobile/main',\n        'strut/presentation_generator/main',\n        'tantaman/web/saver/main',\n        'strut/slide_editor/main',\n        'strut/transition_editor/main',\n        'strut/slide_components/main',\n        'strut/well_context_buttons/main',\n        // 'tantaman/web/local_storage/main', // LLS is being set up in main.\n        // 'tantaman/web/remote_storage/main',\n        'strut/startup/main'\n    ],\n    function (ServiceRegistry) {\n        var registry = new ServiceRegistry();\n\n        var args = Array.prototype.slice.call(arguments, 0);\n\n        var i = 0;\n        for (var i = 1; i < args.length; ++i) {\n            args[i].initialize(registry);\n        }\n\n        return registry;\n    });\n",
    "define('common/Concurrent',[],function() {\n\tfunction Countdown(num, completionCb, stepCb) {\n\t\tthis.num = num;\n\t\tthis.stepCb = stepCb;\n\t\tthis.completionCb = completionCb;\n\t\tthis.decrement = this.decrement.bind(this);\n\t}\n\n\tCountdown.prototype = {\n\t\tdecrement: function() {\n\t\t\t--this.num;\n\t\t\tif (this.num < 0) {\n\t\t\t\tthrow \"Countdown less than zero\";\n\t\t\t}\n\n\t\t\tthis.stepCb.apply(null, arguments);\n\t\t\tif (this.num == 0) {\n\t\t\t\tthis.completionCb.apply(null, arguments);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn {\n\t\tcountdown: Countdown\n\t}\n});\n",
    "define('StrutLoader',['common/Concurrent'],\nfunction(Concurrent) {\n\tvar started = false;\n\treturn {\n\t\tstart: function(registry, stepCb, completeCb) {\n\t\t\tvar taskEntries = registry.get('strut.StartupTask');\n\t\t\tvar countdown = new Concurrent.countdown(taskEntries.length,\n\t\t\t\tstepCb, completeCb);\n\t\t\ttaskEntries.forEach(function(taskEntry) {\n\t\t\t\tvar task = taskEntry.service();\n\t\t\t\ttask.run(countdown.decrement);\n\t\t\t});\n\t\t}\n\t};\n});\n",
    "/* ===================================================\n * bootstrap-transition.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#transitions\n * ===================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n  /* CSS TRANSITION SUPPORT (http://www.modernizr.com/)\n   * ======================================================= */\n\n  $(function () {\n\n    $.support.transition = (function () {\n\n      var transitionEnd = (function () {\n\n        var el = document.createElement('bootstrap')\n          , transEndEventNames = {\n               'WebkitTransition' : 'webkitTransitionEnd'\n            ,  'MozTransition'    : 'transitionend'\n            ,  'OTransition'      : 'oTransitionEnd otransitionend'\n            ,  'transition'       : 'transitionend'\n            }\n          , name\n\n        for (name in transEndEventNames){\n          if (el.style[name] !== undefined) {\n            return transEndEventNames[name]\n          }\n        }\n\n      }())\n\n      return transitionEnd && {\n        end: transitionEnd\n      }\n\n    })()\n\n  })\n\n}(window.jQuery);/* ==========================================================\n * bootstrap-alert.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#alerts\n * ==========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* ALERT CLASS DEFINITION\n  * ====================== */\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n    , Alert = function (el) {\n        $(el).on('click', dismiss, this.close)\n      }\n\n  Alert.prototype.close = function (e) {\n    var $this = $(this)\n      , selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = $(selector)\n\n    e && e.preventDefault()\n\n    $parent.length || ($parent = $this.hasClass('alert') ? $this : $this.parent())\n\n    $parent.trigger(e = $.Event('close'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      $parent\n        .trigger('closed')\n        .remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent.on($.support.transition.end, removeElement) :\n      removeElement()\n  }\n\n\n /* ALERT PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.alert\n\n  $.fn.alert = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('alert')\n      if (!data) $this.data('alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.alert.Constructor = Alert\n\n\n /* ALERT NO CONFLICT\n  * ================= */\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n /* ALERT DATA-API\n  * ============== */\n\n  $(document).on('click.alert.data-api', dismiss, Alert.prototype.close)\n\n}(window.jQuery);/* ============================================================\n * bootstrap-button.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#buttons\n * ============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* BUTTON PUBLIC CLASS DEFINITION\n  * ============================== */\n\n  var Button = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.button.defaults, options)\n  }\n\n  Button.prototype.setState = function (state) {\n    var d = 'disabled'\n      , $el = this.$element\n      , data = $el.data()\n      , val = $el.is('input') ? 'val' : 'html'\n\n    state = state + 'Text'\n    data.resetText || $el.data('resetText', $el[val]())\n\n    $el[val](data[state] || this.options[state])\n\n    // push to event loop to allow forms to submit\n    setTimeout(function () {\n      state == 'loadingText' ?\n        $el.addClass(d).attr(d, d) :\n        $el.removeClass(d).removeAttr(d)\n    }, 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var $parent = this.$element.closest('[data-toggle=\"buttons-radio\"]')\n\n    $parent && $parent\n      .find('.active')\n      .removeClass('active')\n\n    this.$element.toggleClass('active')\n  }\n\n\n /* BUTTON PLUGIN DEFINITION\n  * ======================== */\n\n  var old = $.fn.button\n\n  $.fn.button = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('button')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('button', (data = new Button(this, options)))\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  $.fn.button.defaults = {\n    loadingText: 'loading...'\n  }\n\n  $.fn.button.Constructor = Button\n\n\n /* BUTTON NO CONFLICT\n  * ================== */\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n /* BUTTON DATA-API\n  * =============== */\n\n  $(document).on('click.button.data-api', '[data-toggle^=button]', function (e) {\n    var $btn = $(e.target)\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n    $btn.button('toggle')\n  })\n\n}(window.jQuery);/* ==========================================================\n * bootstrap-carousel.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#carousel\n * ==========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* CAROUSEL CLASS DEFINITION\n  * ========================= */\n\n  var Carousel = function (element, options) {\n    this.$element = $(element)\n    this.options = options\n    this.options.pause == 'hover' && this.$element\n      .on('mouseenter', $.proxy(this.pause, this))\n      .on('mouseleave', $.proxy(this.cycle, this))\n  }\n\n  Carousel.prototype = {\n\n    cycle: function (e) {\n      if (!e) this.paused = false\n      this.options.interval\n        && !this.paused\n        && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n      return this\n    }\n\n  , to: function (pos) {\n      var $active = this.$element.find('.item.active')\n        , children = $active.parent().children()\n        , activePos = children.index($active)\n        , that = this\n\n      if (pos > (children.length - 1) || pos < 0) return\n\n      if (this.sliding) {\n        return this.$element.one('slid', function () {\n          that.to(pos)\n        })\n      }\n\n      if (activePos == pos) {\n        return this.pause().cycle()\n      }\n\n      return this.slide(pos > activePos ? 'next' : 'prev', $(children[pos]))\n    }\n\n  , pause: function (e) {\n      if (!e) this.paused = true\n      if (this.$element.find('.next, .prev').length && $.support.transition.end) {\n        this.$element.trigger($.support.transition.end)\n        this.cycle()\n      }\n      clearInterval(this.interval)\n      this.interval = null\n      return this\n    }\n\n  , next: function () {\n      if (this.sliding) return\n      return this.slide('next')\n    }\n\n  , prev: function () {\n      if (this.sliding) return\n      return this.slide('prev')\n    }\n\n  , slide: function (type, next) {\n      var $active = this.$element.find('.item.active')\n        , $next = next || $active[type]()\n        , isCycling = this.interval\n        , direction = type == 'next' ? 'left' : 'right'\n        , fallback  = type == 'next' ? 'first' : 'last'\n        , that = this\n        , e\n\n      this.sliding = true\n\n      isCycling && this.pause()\n\n      $next = $next.length ? $next : this.$element.find('.item')[fallback]()\n\n      e = $.Event('slide', {\n        relatedTarget: $next[0]\n      })\n\n      if ($next.hasClass('active')) return\n\n      if ($.support.transition && this.$element.hasClass('slide')) {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $next.addClass(type)\n        $next[0].offsetWidth // force reflow\n        $active.addClass(direction)\n        $next.addClass(direction)\n        this.$element.one($.support.transition.end, function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () { that.$element.trigger('slid') }, 0)\n        })\n      } else {\n        this.$element.trigger(e)\n        if (e.isDefaultPrevented()) return\n        $active.removeClass('active')\n        $next.addClass('active')\n        this.sliding = false\n        this.$element.trigger('slid')\n      }\n\n      isCycling && this.cycle()\n\n      return this\n    }\n\n  }\n\n\n /* CAROUSEL PLUGIN DEFINITION\n  * ========================== */\n\n  var old = $.fn.carousel\n\n  $.fn.carousel = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('carousel')\n        , options = $.extend({}, $.fn.carousel.defaults, typeof option == 'object' && option)\n        , action = typeof option == 'string' ? option : options.slide\n      if (!data) $this.data('carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.cycle()\n    })\n  }\n\n  $.fn.carousel.defaults = {\n    interval: 5000\n  , pause: 'hover'\n  }\n\n  $.fn.carousel.Constructor = Carousel\n\n\n /* CAROUSEL NO CONFLICT\n  * ==================== */\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n /* CAROUSEL DATA-API\n  * ================= */\n\n  $(document).on('click.carousel.data-api', '[data-slide]', function (e) {\n    var $this = $(this), href\n      , $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      , options = $.extend({}, $target.data(), $this.data())\n    $target.carousel(options)\n    e.preventDefault()\n  })\n\n}(window.jQuery);/* =============================================================\n * bootstrap-collapse.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#collapse\n * =============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* COLLAPSE PUBLIC CLASS DEFINITION\n  * ================================ */\n\n  var Collapse = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.collapse.defaults, options)\n\n    if (this.options.parent) {\n      this.$parent = $(this.options.parent)\n    }\n\n    this.options.toggle && this.toggle()\n  }\n\n  Collapse.prototype = {\n\n    constructor: Collapse\n\n  , dimension: function () {\n      var hasWidth = this.$element.hasClass('width')\n      return hasWidth ? 'width' : 'height'\n    }\n\n  , show: function () {\n      var dimension\n        , scroll\n        , actives\n        , hasData\n\n      if (this.transitioning) return\n\n      dimension = this.dimension()\n      scroll = $.camelCase(['scroll', dimension].join('-'))\n      actives = this.$parent && this.$parent.find('> .accordion-group > .in')\n\n      if (actives && actives.length) {\n        hasData = actives.data('collapse')\n        if (hasData && hasData.transitioning) return\n        actives.collapse('hide')\n        hasData || actives.data('collapse', null)\n      }\n\n      this.$element[dimension](0)\n      this.transition('addClass', $.Event('show'), 'shown')\n      $.support.transition && this.$element[dimension](this.$element[0][scroll])\n    }\n\n  , hide: function () {\n      var dimension\n      if (this.transitioning) return\n      dimension = this.dimension()\n      this.reset(this.$element[dimension]())\n      this.transition('removeClass', $.Event('hide'), 'hidden')\n      this.$element[dimension](0)\n    }\n\n  , reset: function (size) {\n      var dimension = this.dimension()\n\n      this.$element\n        .removeClass('collapse')\n        [dimension](size || 'auto')\n        [0].offsetWidth\n\n      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')\n\n      return this\n    }\n\n  , transition: function (method, startEvent, completeEvent) {\n      var that = this\n        , complete = function () {\n            if (startEvent.type == 'show') that.reset()\n            that.transitioning = 0\n            that.$element.trigger(completeEvent)\n          }\n\n      this.$element.trigger(startEvent)\n\n      if (startEvent.isDefaultPrevented()) return\n\n      this.transitioning = 1\n\n      this.$element[method]('in')\n\n      $.support.transition && this.$element.hasClass('collapse') ?\n        this.$element.one($.support.transition.end, complete) :\n        complete()\n    }\n\n  , toggle: function () {\n      this[this.$element.hasClass('in') ? 'hide' : 'show']()\n    }\n\n  }\n\n\n /* COLLAPSE PLUGIN DEFINITION\n  * ========================== */\n\n  var old = $.fn.collapse\n\n  $.fn.collapse = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('collapse')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.collapse.defaults = {\n    toggle: true\n  }\n\n  $.fn.collapse.Constructor = Collapse\n\n\n /* COLLAPSE NO CONFLICT\n  * ==================== */\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n /* COLLAPSE DATA-API\n  * ================= */\n\n  $(document).on('click.collapse.data-api', '[data-toggle=collapse]', function (e) {\n    var $this = $(this), href\n      , target = $this.attr('data-target')\n        || e.preventDefault()\n        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') //strip for ie7\n      , option = $(target).data('collapse') ? 'toggle' : $this.data()\n    $this[$(target).hasClass('in') ? 'addClass' : 'removeClass']('collapsed')\n    $(target).collapse(option)\n  })\n\n}(window.jQuery);/* ============================================================\n * bootstrap-dropdown.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#dropdowns\n * ============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* DROPDOWN CLASS DEFINITION\n  * ========================= */\n\n  var toggle = '[data-toggle=dropdown]'\n    , Dropdown = function (element) {\n        var $el = $(element).on('click.dropdown.data-api', this.toggle)\n        $('html').on('click.dropdown.data-api', function () {\n          $el.parent().removeClass('open')\n        })\n      }\n\n  Dropdown.prototype = {\n\n    constructor: Dropdown\n\n  , toggle: function (e) {\n      var $this = $(this)\n        , $parent\n        , isActive\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      clearMenus()\n\n      if (!isActive) {\n        $parent.toggleClass('open')\n      }\n\n      $this.focus()\n\n      return false\n    }\n\n  , keydown: function (e) {\n      var $this\n        , $items\n        , $active\n        , $parent\n        , isActive\n        , index\n\n      if (!/(38|40|27)/.test(e.keyCode)) return\n\n      $this = $(this)\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      if ($this.is('.disabled, :disabled')) return\n\n      $parent = getParent($this)\n\n      isActive = $parent.hasClass('open')\n\n      if (!isActive || (isActive && e.keyCode == 27)) return $this.click()\n\n      $items = $('[role=menu] li:not(.divider):visible a', $parent)\n\n      if (!$items.length) return\n\n      index = $items.index($items.filter(':focus'))\n\n      if (e.keyCode == 38 && index > 0) index--                                        // up\n      if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n      if (!~index) index = 0\n\n      $items\n        .eq(index)\n        .focus()\n    }\n\n  }\n\n  function clearMenus() {\n    $(toggle).each(function () {\n      getParent($(this)).removeClass('open')\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n      , $parent\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    $parent = $(selector)\n    $parent.length || ($parent = $this.parent())\n\n    return $parent\n  }\n\n\n  /* DROPDOWN PLUGIN DEFINITION\n   * ========================== */\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('dropdown')\n      if (!data) $this.data('dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n /* DROPDOWN NO CONFLICT\n  * ==================== */\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  /* APPLY TO STANDARD DROPDOWN ELEMENTS\n   * =================================== */\n\n  $(document)\n    .on('click.dropdown.data-api touchstart.dropdown.data-api', clearMenus)\n    .on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('touchstart.dropdown.data-api', '.dropdown-menu', function (e) { e.stopPropagation() })\n    .on('click.dropdown.data-api touchstart.dropdown.data-api'  , toggle, Dropdown.prototype.toggle)\n    .on('keydown.dropdown.data-api touchstart.dropdown.data-api', toggle + ', [role=menu]' , Dropdown.prototype.keydown)\n    .on('selectablestart', clearMenus)\n\n}(window.jQuery);/* =========================================================\n * bootstrap-modal.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#modals\n * =========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================= */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* MODAL CLASS DEFINITION\n  * ====================== */\n\n  var Modal = function (element, options) {\n    this.options = options\n    this.$element = $(element)\n      .delegate('[data-dismiss=\"modal\"]', 'click.dismiss.modal', $.proxy(this.hide, this))\n    this.options.remote && this.$element.find('.modal-body').load(this.options.remote)\n  }\n\n  Modal.prototype = {\n\n      constructor: Modal\n\n    , toggle: function () {\n        return this[!this.isShown ? 'show' : 'hide']()\n      }\n\n    , show: function () {\n        var that = this\n          , e = $.Event('show')\n\n        this.$element.trigger(e)\n\n        if (this.isShown || e.isDefaultPrevented()) return\n\n        this.isShown = true\n\n        this.escape()\n\n        this.backdrop(function () {\n          var transition = $.support.transition && that.$element.hasClass('fade')\n\n          if (!that.$element.parent().length) {\n            that.$element.appendTo(document.body) //don't move modals dom position\n          }\n\n          that.$element\n            .show()\n\n          if (transition) {\n            that.$element[0].offsetWidth // force reflow\n          }\n\n          that.$element\n            .addClass('in')\n            .attr('aria-hidden', false)\n\n          that.enforceFocus()\n\n          transition ?\n            that.$element.one($.support.transition.end, function () { that.$element.focus().trigger('shown') }) :\n            that.$element.focus().trigger('shown')\n\n        })\n      }\n\n    , hide: function (e) {\n        e && e.preventDefault()\n\n        var that = this\n\n        e = $.Event('hide')\n\n        this.$element.trigger(e)\n\n        if (!this.isShown || e.isDefaultPrevented()) return\n\n        this.isShown = false\n\n        this.escape()\n\n        $(document).off('focusin.modal')\n\n        this.$element\n          .removeClass('in')\n          .attr('aria-hidden', true)\n\n        $.support.transition && this.$element.hasClass('fade') ?\n          this.hideWithTransition() :\n          this.hideModal()\n      }\n\n    , enforceFocus: function () {\n        var that = this\n        $(document).on('focusin.modal', function (e) {\n          if (that.$element[0] !== e.target && !that.$element.has(e.target).length) {\n            that.$element.focus()\n          }\n        })\n      }\n\n    , escape: function () {\n        var that = this\n        if (this.isShown && this.options.keyboard) {\n          this.$element.on('keyup.dismiss.modal', function ( e ) {\n            e.which == 27 && that.hide()\n          })\n        } else if (!this.isShown) {\n          this.$element.off('keyup.dismiss.modal')\n        }\n      }\n\n    , hideWithTransition: function () {\n        var that = this\n          , timeout = setTimeout(function () {\n              that.$element.off($.support.transition.end)\n              that.hideModal()\n            }, 500)\n\n        this.$element.one($.support.transition.end, function () {\n          clearTimeout(timeout)\n          that.hideModal()\n        })\n      }\n\n    , hideModal: function (that) {\n        this.$element\n          .hide()\n          .trigger('hidden')\n\n        this.backdrop()\n      }\n\n    , removeBackdrop: function () {\n        this.$backdrop.remove()\n        this.$backdrop = null\n      }\n\n    , backdrop: function (callback) {\n        var that = this\n          , animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n        if (this.isShown && this.options.backdrop) {\n          var doAnimate = $.support.transition && animate\n\n          this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n            .appendTo(document.body)\n\n          this.$backdrop.click(\n            this.options.backdrop == 'static' ?\n              $.proxy(this.$element[0].focus, this.$element[0])\n            : $.proxy(this.hide, this)\n          )\n\n          if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n          this.$backdrop.addClass('in')\n\n          doAnimate ?\n            this.$backdrop.one($.support.transition.end, callback) :\n            callback()\n\n        } else if (!this.isShown && this.$backdrop) {\n          this.$backdrop.removeClass('in')\n\n          $.support.transition && this.$element.hasClass('fade')?\n            this.$backdrop.one($.support.transition.end, $.proxy(this.removeBackdrop, this)) :\n            this.removeBackdrop()\n\n        } else if (callback) {\n          callback()\n        }\n      }\n  }\n\n\n /* MODAL PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.modal\n\n  $.fn.modal = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('modal')\n        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option)\n      if (!data) $this.data('modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option]()\n      else if (options.show) data.show()\n    })\n  }\n\n  $.fn.modal.defaults = {\n      backdrop: true\n    , keyboard: true\n    , show: true\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n /* MODAL NO CONFLICT\n  * ================= */\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n /* MODAL DATA-API\n  * ============== */\n\n  $(document).on('click.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this = $(this)\n      , href = $this.attr('href')\n      , $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n      , option = $target.data('modal') ? 'toggle' : $.extend({ remote:!/#/.test(href) && href }, $target.data(), $this.data())\n\n    e.preventDefault()\n\n    $target\n      .modal(option)\n      .one('hide', function () {\n        $this.focus()\n      })\n  })\n\n}(window.jQuery);\n/* ===========================================================\n * bootstrap-tooltip.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#tooltips\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ===========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TOOLTIP PUBLIC CLASS DEFINITION\n  * =============================== */\n\n  var Tooltip = function (element, options) {\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.prototype = {\n\n    constructor: Tooltip\n\n  , init: function (type, element, options) {\n      var eventIn\n        , eventOut\n\n      this.type = type\n      this.$element = $(element)\n      this.options = this.getOptions(options)\n      this.enabled = true\n\n      if (this.options.trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (this.options.trigger != 'manual') {\n        eventIn = this.options.trigger == 'hover' ? 'mouseenter' : 'focus'\n        eventOut = this.options.trigger == 'hover' ? 'mouseleave' : 'blur'\n        this.$element.on(eventIn + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n\n      this.options.selector ?\n        (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n        this.fixTitle()\n    }\n\n  , getOptions: function (options) {\n      options = $.extend({}, $.fn[this.type].defaults, options, this.$element.data())\n\n      if (options.delay && typeof options.delay == 'number') {\n        options.delay = {\n          show: options.delay\n        , hide: options.delay\n        }\n      }\n\n      return options\n    }\n\n  , enter: function (e) {\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\n\n      if (!self.options.delay || !self.options.delay.show) return self.show()\n\n      clearTimeout(this.timeout)\n      self.hoverState = 'in'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'in') self.show()\n      }, self.options.delay.show)\n    }\n\n  , leave: function (e) {\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\n\n      if (this.timeout) clearTimeout(this.timeout)\n      if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n      self.hoverState = 'out'\n      this.timeout = setTimeout(function() {\n        if (self.hoverState == 'out') self.hide()\n      }, self.options.delay.hide)\n    }\n\n  , show: function () {\n      var $tip\n        , inside\n        , pos\n        , actualWidth\n        , actualHeight\n        , placement\n        , tp\n\n      if (this.hasContent() && this.enabled) {\n        $tip = this.tip()\n        this.setContent()\n\n        if (this.options.animation) {\n          $tip.addClass('fade')\n        }\n\n        placement = typeof this.options.placement == 'function' ?\n          this.options.placement.call(this, $tip[0], this.$element[0]) :\n          this.options.placement\n\n        inside = /in/.test(placement)\n\n        $tip\n          .detach()\n          .css({ top: 0, left: 0, display: 'block' })\n          .insertAfter(this.$element)\n\n        pos = this.getPosition(inside)\n\n        actualWidth = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n\n        switch (inside ? placement.split(' ')[1] : placement) {\n          case 'bottom':\n            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2}\n            break\n          case 'top':\n            tp = {top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2}\n            break\n          case 'left':\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth}\n            break\n          case 'right':\n            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}\n            break\n        }\n\n        $tip\n          .offset(tp)\n          .addClass(placement)\n          .addClass('in')\n      }\n    }\n\n  , setContent: function () {\n      var $tip = this.tip()\n        , title = this.getTitle()\n\n      $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n      $tip.removeClass('fade in top bottom left right')\n    }\n\n  , hide: function () {\n      var that = this\n        , $tip = this.tip()\n\n      $tip.removeClass('in')\n\n      function removeWithAnimation() {\n        var timeout = setTimeout(function () {\n          $tip.off($.support.transition.end).detach()\n        }, 500)\n\n        $tip.one($.support.transition.end, function () {\n          clearTimeout(timeout)\n          $tip.detach()\n        })\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        removeWithAnimation() :\n        $tip.detach()\n\n      return this\n    }\n\n  , fixTitle: function () {\n      var $e = this.$element\n      if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\n        $e.attr('data-original-title', $e.attr('title') || '').removeAttr('title')\n      }\n    }\n\n  , hasContent: function () {\n      return this.getTitle()\n    }\n\n  , getPosition: function (inside) {\n      return $.extend({}, (inside ? {top: 0, left: 0} : this.$element.offset()), {\n        width: this.$element[0].offsetWidth\n      , height: this.$element[0].offsetHeight\n      })\n    }\n\n  , getTitle: function () {\n      var title\n        , $e = this.$element\n        , o = this.options\n\n      title = $e.attr('data-original-title')\n        || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n      return title\n    }\n\n  , tip: function () {\n      return this.$tip = this.$tip || $(this.options.template)\n    }\n\n  , validate: function () {\n      if (!this.$element[0].parentNode) {\n        this.hide()\n        this.$element = null\n        this.options = null\n      }\n    }\n\n  , enable: function () {\n      this.enabled = true\n    }\n\n  , disable: function () {\n      this.enabled = false\n    }\n\n  , toggleEnabled: function () {\n      this.enabled = !this.enabled\n    }\n\n  , toggle: function (e) {\n      var self = $(e.currentTarget)[this.type](this._options).data(this.type)\n      self[self.tip().hasClass('in') ? 'hide' : 'show']()\n    }\n\n  , destroy: function () {\n      this.hide().$element.off('.' + this.type).removeData(this.type)\n    }\n\n  }\n\n\n /* TOOLTIP PLUGIN DEFINITION\n  * ========================= */\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('tooltip')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n  $.fn.tooltip.defaults = {\n    animation: true\n  , placement: 'top'\n  , selector: false\n  , template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>'\n  , trigger: 'hover'\n  , title: ''\n  , delay: 0\n  , html: false\n  }\n\n\n /* TOOLTIP NO CONFLICT\n  * =================== */\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(window.jQuery);/* ===========================================================\n * bootstrap-popover.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#popovers\n * ===========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* POPOVER PUBLIC CLASS DEFINITION\n  * =============================== */\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n\n  /* NOTE: POPOVER EXTENDS BOOTSTRAP-TOOLTIP.js\n     ========================================== */\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype, {\n\n    constructor: Popover\n\n  , setContent: function () {\n      var $tip = this.tip()\n        , title = this.getTitle()\n        , content = this.getContent()\n\n      $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n      $tip.find('.popover-content')[this.options.html ? 'html' : 'text'](content)\n\n      $tip.removeClass('fade top bottom left right in')\n    }\n\n  , hasContent: function () {\n      return this.getTitle() || this.getContent()\n    }\n\n  , getContent: function () {\n      var content\n        , $e = this.$element\n        , o = this.options\n\n      content = $e.attr('data-content')\n        || (typeof o.content == 'function' ? o.content.call($e[0]) :  o.content)\n\n      return content\n    }\n\n  , tip: function () {\n      if (!this.$tip) {\n        this.$tip = $(this.options.template)\n      }\n      return this.$tip\n    }\n\n  , destroy: function () {\n      this.hide().$element.off('.' + this.type).removeData(this.type)\n    }\n\n  })\n\n\n /* POPOVER PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.popover\n\n  $.fn.popover = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('popover')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.popover.Constructor = Popover\n\n  $.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {\n    placement: 'right'\n  , trigger: 'click'\n  , content: ''\n  , template: '<div class=\"popover\"><div class=\"arrow\"></div><div class=\"popover-inner\"><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div></div>'\n  })\n\n\n /* POPOVER NO CONFLICT\n  * =================== */\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(window.jQuery);/* =============================================================\n * bootstrap-scrollspy.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#scrollspy\n * =============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* SCROLLSPY CLASS DEFINITION\n  * ========================== */\n\n  function ScrollSpy(element, options) {\n    var process = $.proxy(this.process, this)\n      , $element = $(element).is('body') ? $(window) : $(element)\n      , href\n    this.options = $.extend({}, $.fn.scrollspy.defaults, options)\n    this.$scrollElement = $element.on('scroll.scroll-spy.data-api', process)\n    this.selector = (this.options.target\n      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      || '') + ' .nav li > a'\n    this.$body = $('body')\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.prototype = {\n\n      constructor: ScrollSpy\n\n    , refresh: function () {\n        var self = this\n          , $targets\n\n        this.offsets = $([])\n        this.targets = $([])\n\n        $targets = this.$body\n          .find(this.selector)\n          .map(function () {\n            var $el = $(this)\n              , href = $el.data('target') || $el.attr('href')\n              , $href = /^#\\w/.test(href) && $(href)\n            return ( $href\n              && $href.length\n              && [[ $href.position().top + self.$scrollElement.scrollTop(), href ]] ) || null\n          })\n          .sort(function (a, b) { return a[0] - b[0] })\n          .each(function () {\n            self.offsets.push(this[0])\n            self.targets.push(this[1])\n          })\n      }\n\n    , process: function () {\n        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset\n          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\n          , maxScroll = scrollHeight - this.$scrollElement.height()\n          , offsets = this.offsets\n          , targets = this.targets\n          , activeTarget = this.activeTarget\n          , i\n\n        if (scrollTop >= maxScroll) {\n          return activeTarget != (i = targets.last()[0])\n            && this.activate ( i )\n        }\n\n        for (i = offsets.length; i--;) {\n          activeTarget != targets[i]\n            && scrollTop >= offsets[i]\n            && (!offsets[i + 1] || scrollTop <= offsets[i + 1])\n            && this.activate( targets[i] )\n        }\n      }\n\n    , activate: function (target) {\n        var active\n          , selector\n\n        this.activeTarget = target\n\n        $(this.selector)\n          .parent('.active')\n          .removeClass('active')\n\n        selector = this.selector\n          + '[data-target=\"' + target + '\"],'\n          + this.selector + '[href=\"' + target + '\"]'\n\n        active = $(selector)\n          .parent('li')\n          .addClass('active')\n\n        if (active.parent('.dropdown-menu').length)  {\n          active = active.closest('li.dropdown').addClass('active')\n        }\n\n        active.trigger('activate')\n      }\n\n  }\n\n\n /* SCROLLSPY PLUGIN DEFINITION\n  * =========================== */\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('scrollspy')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n  $.fn.scrollspy.defaults = {\n    offset: 10\n  }\n\n\n /* SCROLLSPY NO CONFLICT\n  * ===================== */\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n /* SCROLLSPY DATA-API\n  * ================== */\n\n  $(window).on('load', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      $spy.scrollspy($spy.data())\n    })\n  })\n\n}(window.jQuery);/* ========================================================\n * bootstrap-tab.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#tabs\n * ========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TAB CLASS DEFINITION\n  * ==================== */\n\n  var Tab = function (element) {\n    this.element = $(element)\n  }\n\n  Tab.prototype = {\n\n    constructor: Tab\n\n  , show: function () {\n      var $this = this.element\n        , $ul = $this.closest('ul:not(.dropdown-menu)')\n        , selector = $this.attr('data-target')\n        , previous\n        , $target\n        , e\n\n      if (!selector) {\n        selector = $this.attr('href')\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n      }\n\n      if ( $this.parent('li').hasClass('active') ) return\n\n      previous = $ul.find('.active:last a')[0]\n\n      e = $.Event('show', {\n        relatedTarget: previous\n      })\n\n      $this.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      $target = $(selector)\n\n      this.activate($this.parent('li'), $ul)\n      this.activate($target, $target.parent(), function () {\n        $this.trigger({\n          type: 'shown'\n        , relatedTarget: previous\n        })\n      })\n    }\n\n  , activate: function ( element, container, callback) {\n      var $active = container.find('> .active')\n        , transition = callback\n            && $.support.transition\n            && $active.hasClass('fade')\n\n      function next() {\n        $active\n          .removeClass('active')\n          .find('> .dropdown-menu > .active')\n          .removeClass('active')\n\n        element.addClass('active')\n\n        if (transition) {\n          element[0].offsetWidth // reflow for transition\n          element.addClass('in')\n        } else {\n          element.removeClass('fade')\n        }\n\n        if ( element.parent('.dropdown-menu') ) {\n          element.closest('li.dropdown').addClass('active')\n        }\n\n        callback && callback()\n      }\n\n      transition ?\n        $active.one($.support.transition.end, next) :\n        next()\n\n      $active.removeClass('in')\n    }\n  }\n\n\n /* TAB PLUGIN DEFINITION\n  * ===================== */\n\n  var old = $.fn.tab\n\n  $.fn.tab = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('tab')\n      if (!data) $this.data('tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tab.Constructor = Tab\n\n\n /* TAB NO CONFLICT\n  * =============== */\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n /* TAB DATA-API\n  * ============ */\n\n  $(document).on('click.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\n    e.preventDefault()\n    $(this).tab('show')\n  })\n\n}(window.jQuery);/* =============================================================\n * bootstrap-typeahead.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#typeahead\n * =============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function($){\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TYPEAHEAD PUBLIC CLASS DEFINITION\n  * ================================= */\n\n  var Typeahead = function (element, options) {\n    this.$element = $(element)\n    this.options = $.extend({}, $.fn.typeahead.defaults, options)\n    this.matcher = this.options.matcher || this.matcher\n    this.sorter = this.options.sorter || this.sorter\n    this.highlighter = this.options.highlighter || this.highlighter\n    this.updater = this.options.updater || this.updater\n    this.source = this.options.source\n    this.$menu = $(this.options.menu)\n    this.shown = false\n    this.listen()\n  }\n\n  Typeahead.prototype = {\n\n    constructor: Typeahead\n\n  , select: function () {\n      var val = this.$menu.find('.active').attr('data-value')\n      this.$element\n        .val(this.updater(val))\n        .change()\n      return this.hide()\n    }\n\n  , updater: function (item) {\n      return item\n    }\n\n  , show: function () {\n      var pos = $.extend({}, this.$element.position(), {\n        height: this.$element[0].offsetHeight\n      })\n\n      this.$menu\n        .insertAfter(this.$element)\n        .css({\n          top: pos.top + pos.height\n        , left: pos.left\n        })\n        .show()\n\n      this.shown = true\n      return this\n    }\n\n  , hide: function () {\n      this.$menu.hide()\n      this.shown = false\n      return this\n    }\n\n  , lookup: function (event) {\n      var items\n\n      this.query = this.$element.val()\n\n      if (!this.query || this.query.length < this.options.minLength) {\n        return this.shown ? this.hide() : this\n      }\n\n      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source\n\n      return items ? this.process(items) : this\n    }\n\n  , process: function (items) {\n      var that = this\n\n      items = $.grep(items, function (item) {\n        return that.matcher(item)\n      })\n\n      items = this.sorter(items)\n\n      if (!items.length) {\n        return this.shown ? this.hide() : this\n      }\n\n      return this.render(items.slice(0, this.options.items)).show()\n    }\n\n  , matcher: function (item) {\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase())\n    }\n\n  , sorter: function (items) {\n      var beginswith = []\n        , caseSensitive = []\n        , caseInsensitive = []\n        , item\n\n      while (item = items.shift()) {\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)\n        else if (~item.indexOf(this.query)) caseSensitive.push(item)\n        else caseInsensitive.push(item)\n      }\n\n      return beginswith.concat(caseSensitive, caseInsensitive)\n    }\n\n  , highlighter: function (item) {\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\n        return '<strong>' + match + '</strong>'\n      })\n    }\n\n  , render: function (items) {\n      var that = this\n\n      items = $(items).map(function (i, item) {\n        i = $(that.options.item).attr('data-value', item)\n        i.find('a').html(that.highlighter(item))\n        return i[0]\n      })\n\n      items.first().addClass('active')\n      this.$menu.html(items)\n      return this\n    }\n\n  , next: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , next = active.next()\n\n      if (!next.length) {\n        next = $(this.$menu.find('li')[0])\n      }\n\n      next.addClass('active')\n    }\n\n  , prev: function (event) {\n      var active = this.$menu.find('.active').removeClass('active')\n        , prev = active.prev()\n\n      if (!prev.length) {\n        prev = this.$menu.find('li').last()\n      }\n\n      prev.addClass('active')\n    }\n\n  , listen: function () {\n      this.$element\n        .on('blur',     $.proxy(this.blur, this))\n        .on('keypress', $.proxy(this.keypress, this))\n        .on('keyup',    $.proxy(this.keyup, this))\n\n      if (this.eventSupported('keydown')) {\n        this.$element.on('keydown', $.proxy(this.keydown, this))\n      }\n\n      this.$menu\n        .on('click', $.proxy(this.click, this))\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\n    }\n\n  , eventSupported: function(eventName) {\n      var isSupported = eventName in this.$element\n      if (!isSupported) {\n        this.$element.setAttribute(eventName, 'return;')\n        isSupported = typeof this.$element[eventName] === 'function'\n      }\n      return isSupported\n    }\n\n  , move: function (e) {\n      if (!this.shown) return\n\n      switch(e.keyCode) {\n        case 9: // tab\n        case 13: // enter\n        case 27: // escape\n          e.preventDefault()\n          break\n\n        case 38: // up arrow\n          e.preventDefault()\n          this.prev()\n          break\n\n        case 40: // down arrow\n          e.preventDefault()\n          this.next()\n          break\n      }\n\n      e.stopPropagation()\n    }\n\n  , keydown: function (e) {\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27])\n      this.move(e)\n    }\n\n  , keypress: function (e) {\n      if (this.suppressKeyPressRepeat) return\n      this.move(e)\n    }\n\n  , keyup: function (e) {\n      switch(e.keyCode) {\n        case 40: // down arrow\n        case 38: // up arrow\n        case 16: // shift\n        case 17: // ctrl\n        case 18: // alt\n          break\n\n        case 9: // tab\n        case 13: // enter\n          if (!this.shown) return\n          this.select()\n          break\n\n        case 27: // escape\n          if (!this.shown) return\n          this.hide()\n          break\n\n        default:\n          this.lookup()\n      }\n\n      e.stopPropagation()\n      e.preventDefault()\n  }\n\n  , blur: function (e) {\n      var that = this\n      setTimeout(function () { that.hide() }, 150)\n    }\n\n  , click: function (e) {\n      e.stopPropagation()\n      e.preventDefault()\n      this.select()\n    }\n\n  , mouseenter: function (e) {\n      this.$menu.find('.active').removeClass('active')\n      $(e.currentTarget).addClass('active')\n    }\n\n  }\n\n\n  /* TYPEAHEAD PLUGIN DEFINITION\n   * =========================== */\n\n  var old = $.fn.typeahead\n\n  $.fn.typeahead = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('typeahead')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.typeahead.defaults = {\n    source: []\n  , items: 8\n  , menu: '<ul class=\"typeahead dropdown-menu\"></ul>'\n  , item: '<li><a href=\"#\"></a></li>'\n  , minLength: 1\n  }\n\n  $.fn.typeahead.Constructor = Typeahead\n\n\n /* TYPEAHEAD NO CONFLICT\n  * =================== */\n\n  $.fn.typeahead.noConflict = function () {\n    $.fn.typeahead = old\n    return this\n  }\n\n\n /* TYPEAHEAD DATA-API\n  * ================== */\n\n  $(document).on('focus.typeahead.data-api', '[data-provide=\"typeahead\"]', function (e) {\n    var $this = $(this)\n    if ($this.data('typeahead')) return\n    e.preventDefault()\n    $this.typeahead($this.data())\n  })\n\n}(window.jQuery);\n/* ==========================================================\n * bootstrap-affix.js v2.2.2\n * http://twitter.github.com/bootstrap/javascript.html#affix\n * ==========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* AFFIX CLASS DEFINITION\n  * ====================== */\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, $.fn.affix.defaults, options)\n    this.$window = $(window)\n      .on('scroll.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.affix.data-api',  $.proxy(function () { setTimeout($.proxy(this.checkPosition, this), 1) }, this))\n    this.$element = $(element)\n    this.checkPosition()\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var scrollHeight = $(document).height()\n      , scrollTop = this.$window.scrollTop()\n      , position = this.$element.offset()\n      , offset = this.options.offset\n      , offsetBottom = offset.bottom\n      , offsetTop = offset.top\n      , reset = 'affix affix-top affix-bottom'\n      , affix\n\n    if (typeof offset != 'object') offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function') offsetTop = offset.top()\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom()\n\n    affix = this.unpin != null && (scrollTop + this.unpin <= position.top) ?\n      false    : offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ?\n      'bottom' : offsetTop != null && scrollTop <= offsetTop ?\n      'top'    : false\n\n    if (this.affixed === affix) return\n\n    this.affixed = affix\n    this.unpin = affix == 'bottom' ? position.top - scrollTop : null\n\n    this.$element.removeClass(reset).addClass('affix' + (affix ? '-' + affix : ''))\n  }\n\n\n /* AFFIX PLUGIN DEFINITION\n  * ======================= */\n\n  var old = $.fn.affix\n\n  $.fn.affix = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('affix')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.affix.Constructor = Affix\n\n  $.fn.affix.defaults = {\n    offset: 0\n  }\n\n\n /* AFFIX NO CONFLICT\n  * ================= */\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n /* AFFIX DATA-API\n  * ============== */\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n        , data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      data.offsetBottom && (data.offset.bottom = data.offsetBottom)\n      data.offsetTop && (data.offset.top = data.offsetTop)\n\n      $spy.affix(data)\n    })\n  })\n\n\n}(window.jQuery);\ndefine(\"bootstrap\", [\"jquery\"], function(){});\n\n",
    "/*!\n * jQuery UI Position v1.10.0\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/position/\n */\n(function( $, undefined ) {\n\n$.ui = $.ui || {};\n\nvar cachedScrollbarWidth,\n\tmax = Math.max,\n\tabs = Math.abs,\n\tround = Math.round,\n\trhorizontal = /left|center|right/,\n\trvertical = /top|center|bottom/,\n\troffset = /[\\+\\-]\\d+%?/,\n\trposition = /^\\w+/,\n\trpercent = /%$/,\n\t_position = $.fn.position;\n\nfunction getOffsets( offsets, width, height ) {\n\treturn [\n\t\tparseInt( offsets[ 0 ], 10 ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\n\t\tparseInt( offsets[ 1 ], 10 ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\n\t];\n}\n\nfunction parseCss( element, property ) {\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\n}\n\nfunction getDimensions( elem ) {\n\tvar raw = elem[0];\n\tif ( raw.nodeType === 9 ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: 0, left: 0 }\n\t\t};\n\t}\n\tif ( $.isWindow( raw ) ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\n\t\t};\n\t}\n\tif ( raw.preventDefault ) {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\n\t\t};\n\t}\n\treturn {\n\t\twidth: elem.outerWidth(),\n\t\theight: elem.outerHeight(),\n\t\toffset: elem.offset()\n\t};\n}\n\n$.position = {\n\tscrollbarWidth: function() {\n\t\tif ( cachedScrollbarWidth !== undefined ) {\n\t\t\treturn cachedScrollbarWidth;\n\t\t}\n\t\tvar w1, w2,\n\t\t\tdiv = $( \"<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\" ),\n\t\t\tinnerDiv = div.children()[0];\n\n\t\t$( \"body\" ).append( div );\n\t\tw1 = innerDiv.offsetWidth;\n\t\tdiv.css( \"overflow\", \"scroll\" );\n\n\t\tw2 = innerDiv.offsetWidth;\n\n\t\tif ( w1 === w2 ) {\n\t\t\tw2 = div[0].clientWidth;\n\t\t}\n\n\t\tdiv.remove();\n\n\t\treturn (cachedScrollbarWidth = w1 - w2);\n\t},\n\tgetScrollInfo: function( within ) {\n\t\tvar overflowX = within.isWindow ? \"\" : within.element.css( \"overflow-x\" ),\n\t\t\toverflowY = within.isWindow ? \"\" : within.element.css( \"overflow-y\" ),\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[0].scrollWidth ),\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[0].scrollHeight );\n\t\treturn {\n\t\t\twidth: hasOverflowX ? $.position.scrollbarWidth() : 0,\n\t\t\theight: hasOverflowY ? $.position.scrollbarWidth() : 0\n\t\t};\n\t},\n\tgetWithinInfo: function( element ) {\n\t\tvar withinElement = $( element || window ),\n\t\t\tisWindow = $.isWindow( withinElement[0] );\n\t\treturn {\n\t\t\telement: withinElement,\n\t\t\tisWindow: isWindow,\n\t\t\toffset: withinElement.offset() || { left: 0, top: 0 },\n\t\t\tscrollLeft: withinElement.scrollLeft(),\n\t\t\tscrollTop: withinElement.scrollTop(),\n\t\t\twidth: isWindow ? withinElement.width() : withinElement.outerWidth(),\n\t\t\theight: isWindow ? withinElement.height() : withinElement.outerHeight()\n\t\t};\n\t}\n};\n\n$.fn.position = function( options ) {\n\tif ( !options || !options.of ) {\n\t\treturn _position.apply( this, arguments );\n\t}\n\n\t// make a copy, we don't want to modify arguments\n\toptions = $.extend( {}, options );\n\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\n\t\ttarget = $( options.of ),\n\t\twithin = $.position.getWithinInfo( options.within ),\n\t\tscrollInfo = $.position.getScrollInfo( within ),\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\n\t\toffsets = {};\n\n\tdimensions = getDimensions( target );\n\tif ( target[0].preventDefault ) {\n\t\t// force left top to allow flipping\n\t\toptions.at = \"left top\";\n\t}\n\ttargetWidth = dimensions.width;\n\ttargetHeight = dimensions.height;\n\ttargetOffset = dimensions.offset;\n\t// clone to reuse original targetOffset later\n\tbasePosition = $.extend( {}, targetOffset );\n\n\t// force my and at to have valid horizontal and vertical positions\n\t// if a value is missing or invalid, it will be converted to center\n\t$.each( [ \"my\", \"at\" ], function() {\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\n\t\t\thorizontalOffset,\n\t\t\tverticalOffset;\n\n\t\tif ( pos.length === 1) {\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\n\t\t\t\tpos.concat( [ \"center\" ] ) :\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\n\t\t\t\t\t[ \"center\", \"center\" ];\n\t\t}\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\n\n\t\t// calculate offsets\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\n\t\toffsets[ this ] = [\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\n\t\t];\n\n\t\t// reduce to just the positions without the offsets\n\t\toptions[ this ] = [\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\n\t\t];\n\t});\n\n\t// normalize collision option\n\tif ( collision.length === 1 ) {\n\t\tcollision[ 1 ] = collision[ 0 ];\n\t}\n\n\tif ( options.at[ 0 ] === \"right\" ) {\n\t\tbasePosition.left += targetWidth;\n\t} else if ( options.at[ 0 ] === \"center\" ) {\n\t\tbasePosition.left += targetWidth / 2;\n\t}\n\n\tif ( options.at[ 1 ] === \"bottom\" ) {\n\t\tbasePosition.top += targetHeight;\n\t} else if ( options.at[ 1 ] === \"center\" ) {\n\t\tbasePosition.top += targetHeight / 2;\n\t}\n\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\n\tbasePosition.left += atOffset[ 0 ];\n\tbasePosition.top += atOffset[ 1 ];\n\n\treturn this.each(function() {\n\t\tvar collisionPosition, using,\n\t\t\telem = $( this ),\n\t\t\telemWidth = elem.outerWidth(),\n\t\t\telemHeight = elem.outerHeight(),\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) + scrollInfo.width,\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) + scrollInfo.height,\n\t\t\tposition = $.extend( {}, basePosition ),\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\n\n\t\tif ( options.my[ 0 ] === \"right\" ) {\n\t\t\tposition.left -= elemWidth;\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\n\t\t\tposition.left -= elemWidth / 2;\n\t\t}\n\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\n\t\t\tposition.top -= elemHeight;\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\n\t\t\tposition.top -= elemHeight / 2;\n\t\t}\n\n\t\tposition.left += myOffset[ 0 ];\n\t\tposition.top += myOffset[ 1 ];\n\n\t\t// if the browser doesn't support fractions, then round for consistent results\n\t\tif ( !$.support.offsetFractions ) {\n\t\t\tposition.left = round( position.left );\n\t\t\tposition.top = round( position.top );\n\t\t}\n\n\t\tcollisionPosition = {\n\t\t\tmarginLeft: marginLeft,\n\t\t\tmarginTop: marginTop\n\t\t};\n\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\n\t\t\t\t\ttargetWidth: targetWidth,\n\t\t\t\t\ttargetHeight: targetHeight,\n\t\t\t\t\telemWidth: elemWidth,\n\t\t\t\t\telemHeight: elemHeight,\n\t\t\t\t\tcollisionPosition: collisionPosition,\n\t\t\t\t\tcollisionWidth: collisionWidth,\n\t\t\t\t\tcollisionHeight: collisionHeight,\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\n\t\t\t\t\tmy: options.my,\n\t\t\t\t\tat: options.at,\n\t\t\t\t\twithin: within,\n\t\t\t\t\telem : elem\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif ( options.using ) {\n\t\t\t// adds feedback as second argument to using callback, if present\n\t\t\tusing = function( props ) {\n\t\t\t\tvar left = targetOffset.left - position.left,\n\t\t\t\t\tright = left + targetWidth - elemWidth,\n\t\t\t\t\ttop = targetOffset.top - position.top,\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\n\t\t\t\t\tfeedback = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\telement: target,\n\t\t\t\t\t\t\tleft: targetOffset.left,\n\t\t\t\t\t\t\ttop: targetOffset.top,\n\t\t\t\t\t\t\twidth: targetWidth,\n\t\t\t\t\t\t\theight: targetHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\telement: {\n\t\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\t\tleft: position.left,\n\t\t\t\t\t\t\ttop: position.top,\n\t\t\t\t\t\t\twidth: elemWidth,\n\t\t\t\t\t\t\theight: elemHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\n\t\t\t\t\t};\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\n\t\t\t\t\tfeedback.horizontal = \"center\";\n\t\t\t\t}\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\n\t\t\t\t\tfeedback.vertical = \"middle\";\n\t\t\t\t}\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\n\t\t\t\t\tfeedback.important = \"horizontal\";\n\t\t\t\t} else {\n\t\t\t\t\tfeedback.important = \"vertical\";\n\t\t\t\t}\n\t\t\t\toptions.using.call( this, props, feedback );\n\t\t\t};\n\t\t}\n\n\t\telem.offset( $.extend( position, { using: using } ) );\n\t});\n};\n\n$.ui.position = {\n\tfit: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\touterWidth = within.width,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\n\t\t\t\tnewOverRight;\n\n\t\t\t// element is wider than within\n\t\t\tif ( data.collisionWidth > outerWidth ) {\n\t\t\t\t// element is initially over the left side of within\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\t\tposition.left += overLeft - newOverRight;\n\t\t\t\t// element is initially over right side of within\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\n\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t// element is initially over both left and right sides of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overLeft > overRight ) {\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far left -> align with left edge\n\t\t\t} else if ( overLeft > 0 ) {\n\t\t\t\tposition.left += overLeft;\n\t\t\t// too far right -> align with right edge\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tposition.left -= overRight;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\touterHeight = data.within.height,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = withinOffset - collisionPosTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\n\t\t\t\tnewOverBottom;\n\n\t\t\t// element is taller than within\n\t\t\tif ( data.collisionHeight > outerHeight ) {\n\t\t\t\t// element is initially over the top of within\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\t\tposition.top += overTop - newOverBottom;\n\t\t\t\t// element is initially over bottom of within\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\n\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t// element is initially over both top and bottom of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overTop > overBottom ) {\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far up -> align with top\n\t\t\t} else if ( overTop > 0 ) {\n\t\t\t\tposition.top += overTop;\n\t\t\t// too far down -> align with bottom edge\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tposition.top -= overBottom;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\n\t\t\t}\n\t\t}\n\t},\n\tflip: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\n\t\t\t\touterWidth = within.width,\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\n\t\t\t\t\t-data.elemWidth :\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\n\t\t\t\t\t\tdata.elemWidth :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\n\t\t\t\t\tdata.targetWidth :\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\n\t\t\t\t\t\t-data.targetWidth :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 0 ],\n\t\t\t\tnewOverRight,\n\t\t\t\tnewOverLeft;\n\n\t\t\tif ( overLeft < 0 ) {\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( overRight > 0 ) {\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\n\t\t\t\touterHeight = within.height,\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = collisionPosTop - offsetTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\n\t\t\t\tmyOffset = top ?\n\t\t\t\t\t-data.elemHeight :\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\tdata.elemHeight :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\n\t\t\t\t\tdata.targetHeight :\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\t-data.targetHeight :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 1 ],\n\t\t\t\tnewOverTop,\n\t\t\t\tnewOverBottom;\n\t\t\tif ( overTop < 0 ) {\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\tif ( ( position.top + myOffset + atOffset + offset) > overTop && ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( overBottom > 0 ) {\n\t\t\t\tnewOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;\n\t\t\t\tif ( ( position.top + myOffset + atOffset + offset) > overBottom && ( newOverTop > 0 || abs( newOverTop ) < overBottom ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tflipfit: {\n\t\tleft: function() {\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\n\t\t},\n\t\ttop: function() {\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\n\t\t}\n\t}\n};\n\n// fraction support test\n(function () {\n\tvar testElement, testElementParent, testElementStyle, offsetLeft, i,\n\t\tbody = document.getElementsByTagName( \"body\" )[ 0 ],\n\t\tdiv = document.createElement( \"div\" );\n\n\t//Create a \"fake body\" for testing based on method used in jQuery.support\n\ttestElement = document.createElement( body ? \"div\" : \"body\" );\n\ttestElementStyle = {\n\t\tvisibility: \"hidden\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\tborder: 0,\n\t\tmargin: 0,\n\t\tbackground: \"none\"\n\t};\n\tif ( body ) {\n\t\t$.extend( testElementStyle, {\n\t\t\tposition: \"absolute\",\n\t\t\tleft: \"-1000px\",\n\t\t\ttop: \"-1000px\"\n\t\t});\n\t}\n\tfor ( i in testElementStyle ) {\n\t\ttestElement.style[ i ] = testElementStyle[ i ];\n\t}\n\ttestElement.appendChild( div );\n\ttestElementParent = body || document.documentElement;\n\ttestElementParent.insertBefore( testElement, testElementParent.firstChild );\n\n\tdiv.style.cssText = \"position: absolute; left: 10.7432222px;\";\n\n\toffsetLeft = $( div ).offset().left;\n\t$.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;\n\n\ttestElement.innerHTML = \"\";\n\ttestElementParent.removeChild( testElement );\n})();\n\n}( jQuery ) );\n\ndefine(\"position\", [\"jquery\"], function(){});\n\n",
    "/*!\n * jQuery contextMenu - Plugin for simple contextMenu handling\n *\n * Version: git-master\n *\n * Authors: Rodney Rehm, Addy Osmani (patches for FF)\n * Web: http://medialize.github.com/jQuery-contextMenu/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *   GPL v3 http://opensource.org/licenses/GPL-3.0\n *\n */\n\n(function($, undefined){\n    \n    // TODO: -\n        // ARIA stuff: menuitem, menuitemcheckbox und menuitemradio\n        // create <menu> structure if $.support[htmlCommand || htmlMenuitem] and !opt.disableNative\n\n// determine html5 compatibility\n$.support.htmlMenuitem = ('HTMLMenuItemElement' in window);\n$.support.htmlCommand = ('HTMLCommandElement' in window);\n$.support.eventSelectstart = (\"onselectstart\" in document.documentElement);\n/* // should the need arise, test for css user-select\n$.support.cssUserSelect = (function(){\n    var t = false,\n        e = document.createElement('div');\n    \n    $.each('Moz|Webkit|Khtml|O|ms|Icab|'.split('|'), function(i, prefix) {\n        var propCC = prefix + (prefix ? 'U' : 'u') + 'serSelect',\n            prop = (prefix ? ('-' + prefix.toLowerCase() + '-') : '') + 'user-select';\n            \n        e.style.cssText = prop + ': text;';\n        if (e.style[propCC] == 'text') {\n            t = true;\n            return false;\n        }\n        \n        return true;\n    });\n    \n    return t;\n})();\n*/\n\nif (!$.ui || !$.ui.widget) {\n    // duck punch $.cleanData like jQueryUI does to get that remove event\n    // https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js#L16-24\n    var _cleanData = $.cleanData;\n    $.cleanData = function( elems ) {\n        for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n            try {\n                $( elem ).triggerHandler( \"remove\" );\n                // http://bugs.jquery.com/ticket/8235\n            } catch( e ) {}\n        }\n        _cleanData( elems );\n    };\n}\n\nvar // currently active contextMenu trigger\n    $currentTrigger = null,\n    // is contextMenu initialized with at least one menu?\n    initialized = false,\n    // window handle\n    $win = $(window),\n    // number of registered menus\n    counter = 0,\n    // mapping selector to namespace\n    namespaces = {},\n    // mapping namespace to options\n    menus = {},\n    // custom command type handlers\n    types = {},\n    // default values\n    defaults = {\n        // selector of contextMenu trigger\n        selector: null,\n        // where to append the menu to\n        appendTo: null,\n        // method to trigger context menu [\"right\", \"left\", \"hover\"]\n        trigger: \"right\",\n        // hide menu when mouse leaves trigger / menu elements\n        autoHide: false,\n        // ms to wait before showing a hover-triggered context menu\n        delay: 200,\n        // flag denoting if a second trigger should simply move (true) or rebuild (false) an open menu\n        // as long as the trigger happened on one of the trigger-element's child nodes\n        reposition: true,\n        // determine position to show menu at\n        determinePosition: function($menu) {\n            // position to the lower middle of the trigger element\n            if ($.ui && $.ui.position) {\n                // .position() is provided as a jQuery UI utility\n                // (...and it won't work on hidden elements)\n                $menu.css('display', 'block').position({\n                    my: \"center top\",\n                    at: \"center bottom\",\n                    of: this,\n                    offset: \"0 5\",\n                    collision: \"fit\"\n                }).css('display', 'none');\n            } else {\n                // determine contextMenu position\n                var offset = this.offset();\n                offset.top += this.outerHeight();\n                offset.left += this.outerWidth() / 2 - $menu.outerWidth() / 2;\n                $menu.css(offset);\n            }\n        },\n        // position menu\n        position: function(opt, x, y) {\n            var $this = this,\n                offset;\n            // determine contextMenu position\n            if (!x && !y) {\n                opt.determinePosition.call(this, opt.$menu);\n                return;\n            } else if (x === \"maintain\" && y === \"maintain\") {\n                // x and y must not be changed (after re-show on command click)\n                offset = opt.$menu.position();\n            } else {\n                // x and y are given (by mouse event)\n                offset = {top: y, left: x};\n            }\n            \n            // correct offset if viewport demands it\n            var bottom = $win.scrollTop() + $win.height(),\n                right = $win.scrollLeft() + $win.width(),\n                height = opt.$menu.height(),\n                width = opt.$menu.width();\n            \n            if (offset.top + height > bottom) {\n                offset.top -= height;\n            }\n            \n            if (offset.left + width > right) {\n                offset.left -= width;\n            }\n            \n            opt.$menu.css(offset);\n        },\n        // position the sub-menu\n        positionSubmenu: function($menu) {\n            if ($.ui && $.ui.position) {\n                // .position() is provided as a jQuery UI utility\n                // (...and it won't work on hidden elements)\n                $menu.css('display', 'block').position({\n                    my: \"left top\",\n                    at: \"right top\",\n                    of: this,\n                    collision: \"flipfit fit\"\n                }).css('display', '');\n            } else {\n                // determine contextMenu position\n                var offset = {\n                    top: 0,\n                    left: this.outerWidth()\n                };\n                $menu.css(offset);\n            }\n        },\n        // offset to add to zIndex\n        zIndex: 1,\n        // show hide animation settings\n        animation: {\n            duration: 50,\n            show: 'slideDown',\n            hide: 'slideUp'\n        },\n        // events\n        events: {\n            show: $.noop,\n            hide: $.noop\n        },\n        // default callback\n        callback: null,\n        // list of contextMenu items\n        items: {}\n    },\n    // mouse position for hover activation\n    hoveract = {\n        timer: null,\n        pageX: null,\n        pageY: null\n    },\n    // determine zIndex\n    zindex = function($t) {\n        var zin = 0,\n            $tt = $t;\n\n        while (true) {\n            zin = Math.max(zin, parseInt($tt.css('z-index'), 10) || 0);\n            $tt = $tt.parent();\n            if (!$tt || !$tt.length || \"html body\".indexOf($tt.prop('nodeName').toLowerCase()) > -1 ) {\n                break;\n            }\n        }\n        \n        return zin;\n    },\n    // event handlers\n    handle = {\n        // abort anything\n        abortevent: function(e){\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        },\n        \n        // contextmenu show dispatcher\n        contextmenu: function(e) {\n            var $this = $(this);\n            \n            // disable actual context-menu\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            \n            // abort native-triggered events unless we're triggering on right click\n            if (e.data.trigger != 'right' && e.originalEvent) {\n                return;\n            }\n            \n            // abort event if menu is visible for this trigger\n            if ($this.hasClass('context-menu-active')) {\n                return;\n            }\n            \n            if (!$this.hasClass('context-menu-disabled')) {\n                // theoretically need to fire a show event at <menu>\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus\n                // var evt = jQuery.Event(\"show\", { data: data, pageX: e.pageX, pageY: e.pageY, relatedTarget: this });\n                // e.data.$menu.trigger(evt);\n                \n                $currentTrigger = $this;\n                if (e.data.build) {\n                    var built = e.data.build($currentTrigger, e);\n                    // abort if build() returned false\n                    if (built === false) {\n                        return;\n                    }\n                    \n                    // dynamically build menu on invocation\n                    e.data = $.extend(true, {}, defaults, e.data, built || {});\n\n                    // abort if there are no items to display\n                    if (!e.data.items || $.isEmptyObject(e.data.items)) {\n                        // Note: jQuery captures and ignores errors from event handlers\n                        if (window.console) {\n                            (console.error || console.log)(\"No items specified to show in contextMenu\");\n                        }\n                        \n                        throw new Error('No Items specified');\n                    }\n                    \n                    // backreference for custom command type creation\n                    e.data.$trigger = $currentTrigger;\n                    \n                    op.create(e.data);\n                }\n                // show menu\n                op.show.call($this, e.data, e.pageX, e.pageY);\n            }\n        },\n        // contextMenu left-click trigger\n        click: function(e) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            $(this).trigger($.Event(\"contextmenu\", { data: e.data, pageX: e.pageX, pageY: e.pageY }));\n        },\n        // contextMenu right-click trigger\n        mousedown: function(e) {\n            // register mouse down\n            var $this = $(this);\n            \n            // hide any previous menus\n            if ($currentTrigger && $currentTrigger.length && !$currentTrigger.is($this)) {\n                $currentTrigger.data('contextMenu').$menu.trigger('contextmenu:hide');\n            }\n            \n            // activate on right click\n            if (e.button == 2) {\n                $currentTrigger = $this.data('contextMenuActive', true);\n            }\n        },\n        // contextMenu right-click trigger\n        mouseup: function(e) {\n            // show menu\n            var $this = $(this);\n            if ($this.data('contextMenuActive') && $currentTrigger && $currentTrigger.length && $currentTrigger.is($this) && !$this.hasClass('context-menu-disabled')) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                $currentTrigger = $this;\n                $this.trigger($.Event(\"contextmenu\", { data: e.data, pageX: e.pageX, pageY: e.pageY }));\n            }\n            \n            $this.removeData('contextMenuActive');\n        },\n        // contextMenu hover trigger\n        mouseenter: function(e) {\n            var $this = $(this),\n                $related = $(e.relatedTarget),\n                $document = $(document);\n            \n            // abort if we're coming from a menu\n            if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                return;\n            }\n            \n            // abort if a menu is shown\n            if ($currentTrigger && $currentTrigger.length) {\n                return;\n            }\n            \n            hoveract.pageX = e.pageX;\n            hoveract.pageY = e.pageY;\n            hoveract.data = e.data;\n            $document.on('mousemove.contextMenuShow', handle.mousemove);\n            hoveract.timer = setTimeout(function() {\n                hoveract.timer = null;\n                $document.off('mousemove.contextMenuShow');\n                $currentTrigger = $this;\n                $this.trigger($.Event(\"contextmenu\", { data: hoveract.data, pageX: hoveract.pageX, pageY: hoveract.pageY }));\n            }, e.data.delay );\n        },\n        // contextMenu hover trigger\n        mousemove: function(e) {\n            hoveract.pageX = e.pageX;\n            hoveract.pageY = e.pageY;\n        },\n        // contextMenu hover trigger\n        mouseleave: function(e) {\n            // abort if we're leaving for a menu\n            var $related = $(e.relatedTarget);\n            if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n                return;\n            }\n            \n            try {\n                clearTimeout(hoveract.timer);\n            } catch(e) {}\n            \n            hoveract.timer = null;\n        },\n        \n        // click on layer to hide contextMenu\n        layerClick: function(e) {\n            var $this = $(this),\n                root = $this.data('contextMenuRoot'),\n                mouseup = false,\n                button = e.button,\n                x = e.pageX,\n                y = e.pageY,\n                target, \n                offset,\n                selectors;\n                \n            e.preventDefault();\n            e.stopImmediatePropagation();\n            \n            setTimeout(function() {\n                var $window, hideshow, possibleTarget;\n                var triggerAction = ((root.trigger == 'left' && button === 0) || (root.trigger == 'right' && button === 2));\n                \n                // find the element that would've been clicked, wasn't the layer in the way\n                if (document.elementFromPoint) {\n                    root.$layer.hide();\n                    target = document.elementFromPoint(x - $win.scrollLeft(), y - $win.scrollTop());\n                    root.$layer.show();\n                }\n                \n                if (root.reposition && triggerAction) {\n                    if (document.elementFromPoint) {\n                        if (root.$trigger.is(target) || root.$trigger.has(target).length) {\n                            root.position.call(root.$trigger, root, x, y);\n                            return;\n                        }\n                    } else {\n                        offset = root.$trigger.offset();\n                        $window = $(window);\n                        // while this looks kinda awful, it's the best way to avoid\n                        // unnecessarily calculating any positions\n                        offset.top += $window.scrollTop();\n                        if (offset.top <= e.pageY) {\n                            offset.left += $window.scrollLeft();\n                            if (offset.left <= e.pageX) {\n                                offset.bottom = offset.top + root.$trigger.outerHeight();\n                                if (offset.bottom >= e.pageY) {\n                                    offset.right = offset.left + root.$trigger.outerWidth();\n                                    if (offset.right >= e.pageX) {\n                                        // reposition\n                                        root.position.call(root.$trigger, root, x, y);\n                                        return;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                \n                if (target && triggerAction) {\n                    root.$trigger.one('contextmenu:hidden', function() {\n                        $(target).contextMenu({x: x, y: y});\n                    });\n                }\n\n                root.$menu.trigger('contextmenu:hide');\n            }, 50);\n        },\n        // key handled :hover\n        keyStop: function(e, opt) {\n            if (!opt.isInput) {\n                e.preventDefault();\n            }\n            \n            e.stopPropagation();\n        },\n        key: function(e) {\n            var opt = $currentTrigger.data('contextMenu') || {};\n\n            switch (e.keyCode) {\n                case 9:\n                case 38: // up\n                    handle.keyStop(e, opt);\n                    // if keyCode is [38 (up)] or [9 (tab) with shift]\n                    if (opt.isInput) {\n                        if (e.keyCode == 9 && e.shiftKey) {\n                            e.preventDefault();\n                            opt.$selected && opt.$selected.find('input, textarea, select').blur();\n                            opt.$menu.trigger('prevcommand');\n                            return;\n                        } else if (e.keyCode == 38 && opt.$selected.find('input, textarea, select').prop('type') == 'checkbox') {\n                            // checkboxes don't capture this key\n                            e.preventDefault();\n                            return;\n                        }\n                    } else if (e.keyCode != 9 || e.shiftKey) {\n                        opt.$menu.trigger('prevcommand');\n                        return;\n                    }\n                    // omitting break;\n                    \n                // case 9: // tab - reached through omitted break;\n                case 40: // down\n                    handle.keyStop(e, opt);\n                    if (opt.isInput) {\n                        if (e.keyCode == 9) {\n                            e.preventDefault();\n                            opt.$selected && opt.$selected.find('input, textarea, select').blur();\n                            opt.$menu.trigger('nextcommand');\n                            return;\n                        } else if (e.keyCode == 40 && opt.$selected.find('input, textarea, select').prop('type') == 'checkbox') {\n                            // checkboxes don't capture this key\n                            e.preventDefault();\n                            return;\n                        }\n                    } else {\n                        opt.$menu.trigger('nextcommand');\n                        return;\n                    }\n                    break;\n                \n                case 37: // left\n                    handle.keyStop(e, opt);\n                    if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                        break;\n                    }\n                \n                    if (!opt.$selected.parent().hasClass('context-menu-root')) {\n                        var $parent = opt.$selected.parent().parent();\n                        opt.$selected.trigger('contextmenu:blur');\n                        opt.$selected = $parent;\n                        return;\n                    }\n                    break;\n                    \n                case 39: // right\n                    handle.keyStop(e, opt);\n                    if (opt.isInput || !opt.$selected || !opt.$selected.length) {\n                        break;\n                    }\n                    \n                    var itemdata = opt.$selected.data('contextMenu') || {};\n                    if (itemdata.$menu && opt.$selected.hasClass('context-menu-submenu')) {\n                        opt.$selected = null;\n                        itemdata.$selected = null;\n                        itemdata.$menu.trigger('nextcommand');\n                        return;\n                    }\n                    break;\n                \n                case 35: // end\n                case 36: // home\n                    if (opt.$selected && opt.$selected.find('input, textarea, select').length) {\n                        return;\n                    } else {\n                        (opt.$selected && opt.$selected.parent() || opt.$menu)\n                            .children(':not(.disabled, .not-selectable)')[e.keyCode == 36 ? 'first' : 'last']()\n                            .trigger('contextmenu:focus');\n                        e.preventDefault();\n                        return;\n                    }\n                    break;\n                    \n                case 13: // enter\n                    handle.keyStop(e, opt);\n                    if (opt.isInput) {\n                        if (opt.$selected && !opt.$selected.is('textarea, select')) {\n                            e.preventDefault();\n                            return;\n                        }\n                        break;\n                    }\n                    opt.$selected && opt.$selected.trigger('mouseup');\n                    return;\n                    \n                case 32: // space\n                case 33: // page up\n                case 34: // page down\n                    // prevent browser from scrolling down while menu is visible\n                    handle.keyStop(e, opt);\n                    return;\n                    \n                case 27: // esc\n                    handle.keyStop(e, opt);\n                    opt.$menu.trigger('contextmenu:hide');\n                    return;\n                    \n                default: // 0-9, a-z\n                    var k = (String.fromCharCode(e.keyCode)).toUpperCase();\n                    if (opt.accesskeys[k]) {\n                        // according to the specs accesskeys must be invoked immediately\n                        opt.accesskeys[k].$node.trigger(opt.accesskeys[k].$menu\n                            ? 'contextmenu:focus'\n                            : 'mouseup'\n                        );\n                        return;\n                    }\n                    break;\n            }\n            // pass event to selected item, \n            // stop propagation to avoid endless recursion\n            e.stopPropagation();\n            opt.$selected && opt.$selected.trigger(e);\n        },\n\n        // select previous possible command in menu\n        prevItem: function(e) {\n            e.stopPropagation();\n            var opt = $(this).data('contextMenu') || {};\n\n            // obtain currently selected menu\n            if (opt.$selected) {\n                var $s = opt.$selected;\n                opt = opt.$selected.parent().data('contextMenu') || {};\n                opt.$selected = $s;\n            }\n            \n            var $children = opt.$menu.children(),\n                $prev = !opt.$selected || !opt.$selected.prev().length ? $children.last() : opt.$selected.prev(),\n                $round = $prev;\n            \n            // skip disabled\n            while ($prev.hasClass('disabled') || $prev.hasClass('not-selectable')) {\n                if ($prev.prev().length) {\n                    $prev = $prev.prev();\n                } else {\n                    $prev = $children.last();\n                }\n                if ($prev.is($round)) {\n                    // break endless loop\n                    return;\n                }\n            }\n            \n            // leave current\n            if (opt.$selected) {\n                handle.itemMouseleave.call(opt.$selected.get(0), e);\n            }\n            \n            // activate next\n            handle.itemMouseenter.call($prev.get(0), e);\n            \n            // focus input\n            var $input = $prev.find('input, textarea, select');\n            if ($input.length) {\n                $input.focus();\n            }\n        },\n        // select next possible command in menu\n        nextItem: function(e) {\n            e.stopPropagation();\n            var opt = $(this).data('contextMenu') || {};\n\n            // obtain currently selected menu\n            if (opt.$selected) {\n                var $s = opt.$selected;\n                opt = opt.$selected.parent().data('contextMenu') || {};\n                opt.$selected = $s;\n            }\n\n            var $children = opt.$menu.children(),\n                $next = !opt.$selected || !opt.$selected.next().length ? $children.first() : opt.$selected.next(),\n                $round = $next;\n\n            // skip disabled\n            while ($next.hasClass('disabled') || $next.hasClass('not-selectable')) {\n                if ($next.next().length) {\n                    $next = $next.next();\n                } else {\n                    $next = $children.first();\n                }\n                if ($next.is($round)) {\n                    // break endless loop\n                    return;\n                }\n            }\n            \n            // leave current\n            if (opt.$selected) {\n                handle.itemMouseleave.call(opt.$selected.get(0), e);\n            }\n            \n            // activate next\n            handle.itemMouseenter.call($next.get(0), e);\n            \n            // focus input\n            var $input = $next.find('input, textarea, select');\n            if ($input.length) {\n                $input.focus();\n            }\n        },\n        \n        // flag that we're inside an input so the key handler can act accordingly\n        focusInput: function(e) {\n            var $this = $(this).closest('.context-menu-item'),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            root.$selected = opt.$selected = $this;\n            root.isInput = opt.isInput = true;\n        },\n        // flag that we're inside an input so the key handler can act accordingly\n        blurInput: function(e) {\n            var $this = $(this).closest('.context-menu-item'),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            root.isInput = opt.isInput = false;\n        },\n        \n        // :hover on menu\n        menuMouseenter: function(e) {\n            var root = $(this).data().contextMenuRoot;\n            root.hovering = true;\n        },\n        // :hover on menu\n        menuMouseleave: function(e) {\n            var root = $(this).data().contextMenuRoot;\n            if (root.$layer && root.$layer.is(e.relatedTarget)) {\n                root.hovering = false;\n            }\n        },\n        \n        // :hover done manually so key handling is possible\n        itemMouseenter: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n            \n            root.hovering = true;\n\n            // abort if we're re-entering\n            if (e && root.$layer && root.$layer.is(e.relatedTarget)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n\n            // make sure only one item is selected\n            (opt.$menu ? opt : root).$menu\n                .children('.hover').trigger('contextmenu:blur');\n\n            if ($this.hasClass('disabled') || $this.hasClass('not-selectable')) {\n                opt.$selected = null;\n                return;\n            }\n            \n            $this.trigger('contextmenu:focus');\n        },\n        // :hover done manually so key handling is possible\n        itemMouseleave: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            if (root !== opt && root.$layer && root.$layer.is(e.relatedTarget)) {\n                root.$selected && root.$selected.trigger('contextmenu:blur');\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                root.$selected = opt.$selected = opt.$node;\n                return;\n            }\n            \n            $this.trigger('contextmenu:blur');\n        },\n        // contextMenu item click\n        itemClick: function(e) {\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot,\n                key = data.contextMenuKey,\n                callback;\n\n            // abort if the key is unknown or disabled or is a menu\n            if (!opt.items[key] || $this.is('.disabled, .context-menu-submenu, .context-menu-separator, .not-selectable')) {\n                return;\n            }\n\n            e.preventDefault();\n            e.stopImmediatePropagation();\n\n            if ($.isFunction(root.callbacks[key]) && Object.prototype.hasOwnProperty.call(root.callbacks, key)) {\n                // item-specific callback\n                callback = root.callbacks[key];\n            } else if ($.isFunction(root.callback)) {\n                // default callback\n                callback = root.callback;                \n            } else {\n                // no callback, no action\n                return;\n            }\n\n            // hide menu if callback doesn't stop that\n            if (callback.call(root.$trigger, key, root) !== false) {\n                root.$menu.trigger('contextmenu:hide');\n            } else if (root.$menu.parent().length) {\n                op.update.call(root.$trigger, root);\n            }\n        },\n        // ignore click events on input elements\n        inputClick: function(e) {\n            e.stopImmediatePropagation();\n        },\n        \n        // hide <menu>\n        hideMenu: function(e, data) {\n            var root = $(this).data('contextMenuRoot');\n            op.hide.call(root.$trigger, root, data && data.force);\n        },\n        // focus <command>\n        focusItem: function(e) {\n            e.stopPropagation();\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n\n            $this.addClass('hover')\n                .siblings('.hover').trigger('contextmenu:blur');\n            \n            // remember selected\n            opt.$selected = root.$selected = $this;\n            \n            // position sub-menu - do after show so dumb $.ui.position can keep up\n            if (opt.$node) {\n                root.positionSubmenu.call(opt.$node, opt.$menu);\n            }\n        },\n        // blur <command>\n        blurItem: function(e) {\n            e.stopPropagation();\n            var $this = $(this),\n                data = $this.data(),\n                opt = data.contextMenu,\n                root = data.contextMenuRoot;\n            \n            $this.removeClass('hover');\n            opt.$selected = null;\n        }\n    },\n    // operations\n    op = {\n        show: function(opt, x, y) {\n            var $trigger = $(this),\n                offset,\n                css = {};\n\n            // hide any open menus\n            $('#context-menu-layer').trigger('mousedown');\n\n            // backreference for callbacks\n            opt.$trigger = $trigger;\n\n            // show event\n            if (opt.events.show.call($trigger, opt) === false) {\n                $currentTrigger = null;\n                return;\n            }\n\n            // create or update context menu\n            op.update.call($trigger, opt);\n            \n            // position menu\n            opt.position.call($trigger, opt, x, y);\n\n            // make sure we're in front\n            if (opt.zIndex) {\n                css.zIndex = zindex($trigger) + opt.zIndex;\n            }\n            \n            // add layer\n            op.layer.call(opt.$menu, opt, css.zIndex);\n            \n            // adjust sub-menu zIndexes\n            opt.$menu.find('ul').css('zIndex', css.zIndex + 1);\n            \n            // position and show context menu\n            opt.$menu.css( css )[opt.animation.show](opt.animation.duration, function() {\n                $trigger.trigger('contextmenu:visible');\n            });\n            // make options available and set state\n            $trigger\n                .data('contextMenu', opt)\n                .addClass(\"context-menu-active\");\n            \n            // register key handler\n            $(document).off('keydown.contextMenu').on('keydown.contextMenu', handle.key);\n            // register autoHide handler\n            if (opt.autoHide) {\n                // mouse position handler\n                $(document).on('mousemove.contextMenuAutoHide', function(e) {\n                    // need to capture the offset on mousemove,\n                    // since the page might've been scrolled since activation\n                    var pos = $trigger.offset();\n                    pos.right = pos.left + $trigger.outerWidth();\n                    pos.bottom = pos.top + $trigger.outerHeight();\n                    \n                    if (opt.$layer && !opt.hovering && (!(e.pageX >= pos.left && e.pageX <= pos.right) || !(e.pageY >= pos.top && e.pageY <= pos.bottom))) {\n                        // if mouse in menu...\n                        opt.$menu.trigger('contextmenu:hide');\n                    }\n                });\n            }\n\n            if (opt.events.shown) {\n                opt.events.shown.call($trigger, opt);\n            }\n        },\n        hide: function(opt, force) {\n            var $trigger = $(this);\n            if (!opt) {\n                opt = $trigger.data('contextMenu') || {};\n            }\n            \n            // hide event\n            if (!force && opt.events && opt.events.hide.call($trigger, opt) === false) {\n                return;\n            }\n            \n            // remove options and revert state\n            $trigger\n                .removeData('contextMenu')\n                .removeClass(\"context-menu-active\");\n            \n            if (opt.$layer) {\n                // keep layer for a bit so the contextmenu event can be aborted properly by opera\n                setTimeout((function($layer) {\n                    return function(){\n                        $layer.remove();\n                    };\n                })(opt.$layer), 10);\n                \n                try {\n                    delete opt.$layer;\n                } catch(e) {\n                    opt.$layer = null;\n                }\n            }\n            \n            // remove handle\n            $currentTrigger = null;\n            // remove selected\n            opt.$menu.find('.hover').trigger('contextmenu:blur');\n            opt.$selected = null;\n            // unregister key and mouse handlers\n            //$(document).off('.contextMenuAutoHide keydown.contextMenu'); // http://bugs.jquery.com/ticket/10705\n            $(document).off('.contextMenuAutoHide').off('keydown.contextMenu');\n            // hide menu\n            opt.$menu && opt.$menu[opt.animation.hide](opt.animation.duration, function (){\n                // tear down dynamically built menu after animation is completed.\n                if (opt.build) {\n                    opt.$menu.remove();\n                    $.each(opt, function(key, value) {\n                        switch (key) {\n                            case 'ns':\n                            case 'selector':\n                            case 'build':\n                            case 'trigger':\n                                return true;\n\n                            default:\n                                opt[key] = undefined;\n                                try {\n                                    delete opt[key];\n                                } catch (e) {}\n                                return true;\n                        }\n                    });\n                }\n                \n                setTimeout(function() {\n                    $trigger.trigger('contextmenu:hidden');\n                }, 10);\n            });\n        },\n        create: function(opt, root) {\n            if (root === undefined) {\n                root = opt;\n            }\n            // create contextMenu\n            opt.$menu = $('<ul class=\"context-menu-list\"></ul>').addClass(opt.className || \"\").data({\n                'contextMenu': opt,\n                'contextMenuRoot': root\n            });\n            \n            $.each(['callbacks', 'commands', 'inputs'], function(i,k){\n                opt[k] = {};\n                if (!root[k]) {\n                    root[k] = {};\n                }\n            });\n            \n            root.accesskeys || (root.accesskeys = {});\n            \n            // create contextMenu items\n            $.each(opt.items, function(key, item){\n                var $t = $('<li class=\"context-menu-item\"></li>').addClass(item.className || \"\"),\n                    $label = null,\n                    $input = null;\n                \n                // iOS needs to see a click-event bound to an element to actually\n                // have the TouchEvents infrastructure trigger the click event\n                $t.on('click', $.noop);\n                \n                item.$node = $t.data({\n                    'contextMenu': opt,\n                    'contextMenuRoot': root,\n                    'contextMenuKey': key\n                });\n                \n                // register accesskey\n                // NOTE: the accesskey attribute should be applicable to any element, but Safari5 and Chrome13 still can't do that\n                if (item.accesskey) {\n                    var aks = splitAccesskey(item.accesskey);\n                    for (var i=0, ak; ak = aks[i]; i++) {\n                        if (!root.accesskeys[ak]) {\n                            root.accesskeys[ak] = item;\n                            item._name = item.name.replace(new RegExp('(' + ak + ')', 'i'), '<span class=\"context-menu-accesskey\">$1</span>');\n                            break;\n                        }\n                    }\n                }\n                \n                if (typeof item == \"string\") {\n                    $t.addClass('context-menu-separator not-selectable');\n                } else if (item.type && types[item.type]) {\n                    // run custom type handler\n                    types[item.type].call($t, item, opt, root);\n                    // register commands\n                    $.each([opt, root], function(i,k){\n                        k.commands[key] = item;\n                        if ($.isFunction(item.callback)) {\n                            k.callbacks[key] = item.callback;\n                        }\n                    });\n                } else {\n                    // add label for input\n                    if (item.type == 'html') {\n                        $t.addClass('context-menu-html not-selectable');\n                    } else if (item.type) {\n                        $label = $('<label></label>').appendTo($t);\n                        $('<span></span>').html(item._name || item.name).appendTo($label);\n                        $t.addClass('context-menu-input');\n                        opt.hasTypes = true;\n                        $.each([opt, root], function(i,k){\n                            k.commands[key] = item;\n                            k.inputs[key] = item;\n                        });\n                    } else if (item.items) {\n                        item.type = 'sub';\n                    }\n                \n                    switch (item.type) {\n                        case 'text':\n                            $input = $('<input type=\"text\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .appendTo($label);\n                            break;\n                    \n                        case 'textarea':\n                            $input = $('<textarea name=\"\"></textarea>')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .appendTo($label);\n\n                            if (item.height) {\n                                $input.height(item.height);\n                            }\n                            break;\n\n                        case 'checkbox':\n                            $input = $('<input type=\"checkbox\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .val(item.value || \"\")\n                                .prop(\"checked\", !!item.selected)\n                                .prependTo($label);\n                            break;\n\n                        case 'radio':\n                            $input = $('<input type=\"radio\" value=\"1\" name=\"\" value=\"\">')\n                                .attr('name', 'context-menu-input-' + item.radio)\n                                .val(item.value || \"\")\n                                .prop(\"checked\", !!item.selected)\n                                .prependTo($label);\n                            break;\n                    \n                        case 'select':\n                            $input = $('<select name=\"\">')\n                                .attr('name', 'context-menu-input-' + key)\n                                .appendTo($label);\n                            if (item.options) {\n                                $.each(item.options, function(value, text) {\n                                    $('<option></option>').val(value).text(text).appendTo($input);\n                                });\n                                $input.val(item.selected);\n                            }\n                            break;\n                        \n                        case 'sub':\n                            // FIXME: shouldn't this .html() be a .text()?\n                            $('<span></span>').html(item._name || item.name).appendTo($t);\n                            item.appendTo = item.$node;\n                            op.create(item, root);\n                            $t.data('contextMenu', item).addClass('context-menu-submenu');\n                            item.callback = null;\n                            break;\n                        \n                        case 'html':\n                            $(item.html).appendTo($t);\n                            break;\n                        \n                        default:\n                            $.each([opt, root], function(i,k){\n                                k.commands[key] = item;\n                                if ($.isFunction(item.callback)) {\n                                    k.callbacks[key] = item.callback;\n                                }\n                            });\n                            // FIXME: shouldn't this .html() be a .text()?\n                            $('<span></span>').html(item._name || item.name || \"\").appendTo($t);\n                            break;\n                    }\n                    \n                    // disable key listener in <input>\n                    if (item.type && item.type != 'sub' && item.type != 'html') {\n                        $input\n                            .on('focus', handle.focusInput)\n                            .on('blur', handle.blurInput);\n                        \n                        if (item.events) {\n                            $input.on(item.events, opt);\n                        }\n                    }\n                \n                    // add icons\n                    if (item.icon) {\n                        $t.prepend('<i class=\"icon icon-' + item.icon + '\"></i>')\n                        //$t.addClass(\"icon icon-\" + item.icon);\n                    }\n\n                    if (item.background) {\n                        $t.addClass(item.background);\n                        $t[0].dataset.background = item.background;\n                    }\n                }\n                \n                // cache contained elements\n                item.$input = $input;\n                item.$label = $label;\n\n                // attach item to menu\n                $t.appendTo(opt.$menu);\n                \n                // Disable text selection\n                if (!opt.hasTypes && $.support.eventSelectstart) {\n                    // browsers support user-select: none, \n                    // IE has a special event for text-selection\n                    // browsers supporting neither will not be preventing text-selection\n                    $t.on('selectstart.disableTextSelect', handle.abortevent);\n                }\n            });\n            // attach contextMenu to <body> (to bypass any possible overflow:hidden issues on parents of the trigger element)\n            if (!opt.$node) {\n                opt.$menu.css('display', 'none').addClass('context-menu-root');\n            }\n            opt.$menu.appendTo(opt.appendTo || document.body);\n        },\n        resize: function($menu, nested) {\n            // determine widths of submenus, as CSS won't grow them automatically\n            // position:absolute within position:absolute; min-width:100; max-width:200; results in width: 100;\n            // kinda sucks hard...\n\n            // determine width of absolutely positioned element\n            $menu.css({position: 'absolute', display: 'block'});\n            // don't apply yet, because that would break nested elements' widths\n            // add a pixel to circumvent word-break issue in IE9 - #80\n            $menu.data('width', Math.ceil($menu.width()) + 1);\n            // reset styles so they allow nested elements to grow/shrink naturally\n            $menu.css({\n                position: 'static',\n                minWidth: '0px',\n                maxWidth: '100000px'\n            });\n            // identify width of nested menus\n            $menu.find('> li > ul').each(function() {\n                op.resize($(this), true);\n            });\n            // reset and apply changes in the end because nested\n            // elements' widths wouldn't be calculatable otherwise\n            if (!nested) {\n                $menu.find('ul').andSelf().css({\n                    position: '', \n                    display: '',\n                    minWidth: '',\n                    maxWidth: ''\n                }).width(function() {\n                    return $(this).data('width');\n                });\n            }\n        },\n        update: function(opt, root) {\n            var $trigger = this;\n            if (root === undefined) {\n                root = opt;\n                op.resize(opt.$menu);\n            }\n            // re-check disabled for each item\n            opt.$menu.children().each(function(){\n                var $item = $(this),\n                    key = $item.data('contextMenuKey'),\n                    item = opt.items[key],\n                    disabled = ($.isFunction(item.disabled) && item.disabled.call($trigger, key, root)) || item.disabled === true;\n\n                // dis- / enable item\n                $item[disabled ? 'addClass' : 'removeClass']('disabled');\n                \n                if (item.type) {\n                    // dis- / enable input elements\n                    $item.find('input, select, textarea').prop('disabled', disabled);\n                    \n                    // update input states\n                    switch (item.type) {\n                        case 'text':\n                        case 'textarea':\n                            item.$input.val(item.value || \"\");\n                            break;\n                            \n                        case 'checkbox':\n                        case 'radio':\n                            item.$input.val(item.value || \"\").prop('checked', !!item.selected);\n                            break;\n                            \n                        case 'select':\n                            item.$input.val(item.selected || \"\");\n                            break;\n                    }\n                }\n                \n                if (item.$menu) {\n                    // update sub-menu\n                    op.update.call($trigger, item, root);\n                }\n            });\n        },\n        layer: function(opt, zIndex) {\n            // add transparent layer for click area\n            // filter and background for Internet Explorer, Issue #23\n            var $layer = opt.$layer = $('<div id=\"context-menu-layer\" style=\"position:fixed; z-index:' + zIndex + '; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;\"></div>')\n                .css({height: $win.height(), width: $win.width(), display: 'block'})\n                .data('contextMenuRoot', opt)\n                .insertBefore(this)\n                .on('contextmenu', handle.abortevent)\n                .on('mousedown', handle.layerClick);\n            \n            // IE6 doesn't know position:fixed;\n            if (!$.support.fixedPosition) {\n                $layer.css({\n                    'position' : 'absolute',\n                    'height' : $(document).height()\n                });\n            }\n            \n            return $layer;\n        }\n    };\n\n// split accesskey according to http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#assigned-access-key\nfunction splitAccesskey(val) {\n    var t = val.split(/\\s+/),\n        keys = [];\n        \n    for (var i=0, k; k = t[i]; i++) {\n        k = k[0].toUpperCase(); // first character only\n        // theoretically non-accessible characters should be ignored, but different systems, different keyboard layouts, ... screw it.\n        // a map to look up already used access keys would be nice\n        keys.push(k);\n    }\n    \n    return keys;\n}\n\n// handle contextMenu triggers\n$.fn.contextMenu = function(operation) {\n    if (operation === undefined) {\n        this.first().trigger('contextmenu');\n    } else if (operation.x && operation.y) {\n        this.first().trigger($.Event(\"contextmenu\", {pageX: operation.x, pageY: operation.y}));\n    } else if (operation === \"hide\") {\n        var $menu = this.data('contextMenu').$menu;\n        $menu && $menu.trigger('contextmenu:hide');\n    } else if (operation === \"destroy\") {\n        $.contextMenu(\"destroy\", {context: this});\n    } else if ($.isPlainObject(operation)) {\n        operation.context = this;\n        $.contextMenu(\"create\", operation);\n    } else if (operation) {\n        this.removeClass('context-menu-disabled');\n    } else if (!operation) {\n        this.addClass('context-menu-disabled');\n    }\n    \n    return this;\n};\n\n// manage contextMenu instances\n$.contextMenu = function(operation, options) {\n    if (typeof operation != 'string') {\n        options = operation;\n        operation = 'create';\n    }\n    \n    if (typeof options == 'string') {\n        options = {selector: options};\n    } else if (options === undefined) {\n        options = {};\n    }\n    \n    // merge with default options\n    var o = $.extend(true, {}, defaults, options || {});\n    var $document = $(document);\n    var $context = $document;\n    var _hasContext = false;\n    \n    if (!o.context || !o.context.length) {\n        o.context = document;\n    } else {\n        // you never know what they throw at you...\n        $context = $(o.context).first();\n        o.context = $context.get(0);\n        _hasContext = o.context !== document;\n    }\n    \n    switch (operation) {\n        case 'create':\n            // no selector no joy\n            if (!o.selector) {\n                throw new Error('No selector specified');\n            }\n            // make sure internal classes are not bound to\n            if (o.selector.match(/.context-menu-(list|item|input)($|\\s)/)) {\n                throw new Error('Cannot bind to selector \"' + o.selector + '\" as it contains a reserved className');\n            }\n            if (!o.build && (!o.items || $.isEmptyObject(o.items))) {\n                throw new Error('No Items specified');\n            }\n            counter ++;\n            o.ns = '.contextMenu' + counter;\n            if (!_hasContext) {\n                namespaces[o.selector] = o.ns;\n            }\n            menus[o.ns] = o;\n            \n            // default to right click\n            if (!o.trigger) {\n                o.trigger = 'right';\n            }\n            \n            if (!initialized) {\n                // make sure item click is registered first\n                $document\n                    .on({\n                        'contextmenu:hide.contextMenu': handle.hideMenu,\n                        'prevcommand.contextMenu': handle.prevItem,\n                        'nextcommand.contextMenu': handle.nextItem,\n                        'contextmenu.contextMenu': handle.abortevent,\n                        'mouseenter.contextMenu': handle.menuMouseenter,\n                        'mouseleave.contextMenu': handle.menuMouseleave\n                    }, '.context-menu-list')\n                    .on('mouseup.contextMenu', '.context-menu-input', handle.inputClick)\n                    .on({\n                        'mouseup.contextMenu': handle.itemClick,\n                        'contextmenu:focus.contextMenu': handle.focusItem,\n                        'contextmenu:blur.contextMenu': handle.blurItem,\n                        'contextmenu.contextMenu': handle.abortevent,\n                        'mouseenter.contextMenu': handle.itemMouseenter,\n                        'mouseleave.contextMenu': handle.itemMouseleave\n                    }, '.context-menu-item');\n\n                initialized = true;\n            }\n            \n            // engage native contextmenu event\n            $context\n                .on('contextmenu' + o.ns, o.selector, o, handle.contextmenu);\n            \n            if (_hasContext) {\n                // add remove hook, just in case\n                $context.on('remove' + o.ns, function() {\n                    $(this).contextMenu(\"destroy\");\n                });\n            }\n            \n            switch (o.trigger) {\n                case 'hover':\n                        $context\n                            .on('mouseenter' + o.ns, o.selector, o, handle.mouseenter)\n                            .on('mouseleave' + o.ns, o.selector, o, handle.mouseleave);                    \n                    break;\n                    \n                case 'left':\n                        $context.on('click' + o.ns, o.selector, o, handle.click);\n                    break;\n                /*\n                default:\n                    // http://www.quirksmode.org/dom/events/contextmenu.html\n                    $document\n                        .on('mousedown' + o.ns, o.selector, o, handle.mousedown)\n                        .on('mouseup' + o.ns, o.selector, o, handle.mouseup);\n                    break;\n                */\n            }\n            \n            // create menu\n            if (!o.build) {\n                op.create(o);\n            }\n            break;\n        \n        case 'destroy':\n            var $visibleMenu;\n            if (_hasContext) {\n                // get proper options \n                var context = o.context;\n                $.each(menus, function(ns, o) {\n                    if (o.context !== context) {\n                        return true;\n                    }\n                    \n                    $visibleMenu = $('.context-menu-list').filter(':visible');\n                    if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))) {\n                        $visibleMenu.trigger('contextmenu:hide', {force: true});\n                    }\n\n                    try {\n                        if (menus[o.ns].$menu) {\n                            menus[o.ns].$menu.remove();\n                        }\n\n                        delete menus[o.ns];\n                    } catch(e) {\n                        menus[o.ns] = null;\n                    }\n\n                    $(o.context).off(o.ns);\n                    \n                    return true;\n                });\n            } else if (!o.selector) {\n                $document.off('.contextMenu .contextMenuAutoHide');\n                $.each(menus, function(ns, o) {\n                    $(o.context).off(o.ns);\n                });\n                \n                namespaces = {};\n                menus = {};\n                counter = 0;\n                initialized = false;\n                \n                $('#context-menu-layer, .context-menu-list').remove();\n            } else if (namespaces[o.selector]) {\n                $visibleMenu = $('.context-menu-list').filter(':visible');\n                if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is(o.selector)) {\n                    $visibleMenu.trigger('contextmenu:hide', {force: true});\n                }\n                \n                try {\n                    if (menus[namespaces[o.selector]].$menu) {\n                        menus[namespaces[o.selector]].$menu.remove();\n                    }\n                    \n                    delete menus[namespaces[o.selector]];\n                } catch(e) {\n                    menus[namespaces[o.selector]] = null;\n                }\n                \n                $document.off(namespaces[o.selector]);\n            }\n            break;\n        \n        case 'html5':\n            // if <command> or <menuitem> are not handled by the browser,\n            // or options was a bool true,\n            // initialize $.contextMenu for them\n            if ((!$.support.htmlCommand && !$.support.htmlMenuitem) || (typeof options == \"boolean\" && options)) {\n                $('menu[type=\"context\"]').each(function() {\n                    if (this.id) {\n                        $.contextMenu({\n                            selector: '[contextmenu=' + this.id +']',\n                            items: $.contextMenu.fromMenu(this)\n                        });\n                    }\n                }).css('display', 'none');\n            }\n            break;\n        \n        default:\n            throw new Error('Unknown operation \"' + operation + '\"');\n    }\n    \n    return this;\n};\n\n// import values into <input> commands\n$.contextMenu.setInputValues = function(opt, data) {\n    if (data === undefined) {\n        data = {};\n    }\n    \n    $.each(opt.inputs, function(key, item) {\n        switch (item.type) {\n            case 'text':\n            case 'textarea':\n                item.value = data[key] || \"\";\n                break;\n\n            case 'checkbox':\n                item.selected = data[key] ? true : false;\n                break;\n                \n            case 'radio':\n                item.selected = (data[item.radio] || \"\") == item.value ? true : false;\n                break;\n            \n            case 'select':\n                item.selected = data[key] || \"\";\n                break;\n        }\n    });\n};\n\n// export values from <input> commands\n$.contextMenu.getInputValues = function(opt, data) {\n    if (data === undefined) {\n        data = {};\n    }\n    \n    $.each(opt.inputs, function(key, item) {\n        switch (item.type) {\n            case 'text':\n            case 'textarea':\n            case 'select':\n                data[key] = item.$input.val();\n                break;\n\n            case 'checkbox':\n                data[key] = item.$input.prop('checked');\n                break;\n                \n            case 'radio':\n                if (item.$input.prop('checked')) {\n                    data[item.radio] = item.value;\n                }\n                break;\n        }\n    });\n    \n    return data;\n};\n\n// find <label for=\"xyz\">\nfunction inputLabel(node) {\n    return (node.id && $('label[for=\"'+ node.id +'\"]').val()) || node.name;\n}\n\n// convert <menu> to items object\nfunction menuChildren(items, $children, counter) {\n    if (!counter) {\n        counter = 0;\n    }\n    \n    $children.each(function() {\n        var $node = $(this),\n            node = this,\n            nodeName = this.nodeName.toLowerCase(),\n            label,\n            item;\n        \n        // extract <label><input>\n        if (nodeName == 'label' && $node.find('input, textarea, select').length) {\n            label = $node.text();\n            $node = $node.children().first();\n            node = $node.get(0);\n            nodeName = node.nodeName.toLowerCase();\n        }\n        \n        /*\n         * <menu> accepts flow-content as children. that means <embed>, <canvas> and such are valid menu items.\n         * Not being the sadistic kind, $.contextMenu only accepts:\n         * <command>, <menuitem>, <hr>, <span>, <p> <input [text, radio, checkbox]>, <textarea>, <select> and of course <menu>.\n         * Everything else will be imported as an html node, which is not interfaced with contextMenu.\n         */\n        \n        // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#concept-command\n        switch (nodeName) {\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-menu-element\n            case 'menu':\n                item = {name: $node.attr('label'), items: {}};\n                counter = menuChildren(item.items, $node.children(), counter);\n                break;\n            \n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-a-element-to-define-a-command\n            case 'a':\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-button-element-to-define-a-command\n            case 'button':\n                item = {\n                    name: $node.text(),\n                    disabled: !!$node.attr('disabled'),\n                    callback: (function(){ return function(){ $node.click(); }; })()\n                };\n                break;\n            \n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-command-element-to-define-a-command\n\n            case 'menuitem':\n            case 'command':\n                switch ($node.attr('type')) {\n                    case undefined:\n                    case 'command':\n                    case 'menuitem':\n                        item = {\n                            name: $node.attr('label'),\n                            disabled: !!$node.attr('disabled'),\n                            callback: (function(){ return function(){ $node.click(); }; })()\n                        };\n                        break;\n                        \n                    case 'checkbox':\n                        item = {\n                            type: 'checkbox',\n                            disabled: !!$node.attr('disabled'),\n                            name: $node.attr('label'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n                        \n                    case 'radio':\n                        item = {\n                            type: 'radio',\n                            disabled: !!$node.attr('disabled'),\n                            name: $node.attr('label'),\n                            radio: $node.attr('radiogroup'),\n                            value: $node.attr('id'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n                        \n                    default:\n                        item = undefined;\n                }\n                break;\n \n            case 'hr':\n                item = '-------';\n                break;\n                \n            case 'input':\n                switch ($node.attr('type')) {\n                    case 'text':\n                        item = {\n                            type: 'text',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            value: $node.val()\n                        };\n                        break;\n                        \n                    case 'checkbox':\n                        item = {\n                            type: 'checkbox',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n                        \n                    case 'radio':\n                        item = {\n                            type: 'radio',\n                            name: label || inputLabel(node),\n                            disabled: !!$node.attr('disabled'),\n                            radio: !!$node.attr('name'),\n                            value: $node.val(),\n                            selected: !!$node.attr('checked')\n                        };\n                        break;\n                    \n                    default:\n                        item = undefined;\n                        break;\n                }\n                break;\n                \n            case 'select':\n                item = {\n                    type: 'select',\n                    name: label || inputLabel(node),\n                    disabled: !!$node.attr('disabled'),\n                    selected: $node.val(),\n                    options: {}\n                };\n                $node.children().each(function(){\n                    item.options[this.value] = $(this).text();\n                });\n                break;\n                \n            case 'textarea':\n                item = {\n                    type: 'textarea',\n                    name: label || inputLabel(node),\n                    disabled: !!$node.attr('disabled'),\n                    value: $node.val()\n                };\n                break;\n            \n            case 'label':\n                break;\n            \n            default:\n                item = {type: 'html', html: $node.clone(true)};\n                break;\n        }\n        \n        if (item) {\n            counter++;\n            items['key' + counter] = item;\n        }\n    });\n    \n    return counter;\n}\n\n// convert html5 menu\n$.contextMenu.fromMenu = function(element) {\n    var $this = $(element),\n        items = {};\n        \n    menuChildren(items, $this.children());\n    \n    return items;\n};\n\n// make defaults accessible\n$.contextMenu.defaults = defaults;\n$.contextMenu.types = types;\n// export internal functions - undocumented, for hacking only!\n$.contextMenu.handle = handle;\n$.contextMenu.op = op;\n$.contextMenu.menus = menus;\n\n})(jQuery);\n\ndefine(\"jqContextMenu\", [\"jquery\",\"position\"], function(){});\n\n",
    "\n",
    "/*!\n * jQuery UI Touch Punch 0.2.2\n *\n * Copyright 2011, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\n(function ($) {\n\n  // Detect touch support\n  $.support.touch = 'ontouchend' in document;\n\n  // Ignore browsers without touch support\n  if (!$.support.touch) {\n    return;\n  }\n\n  var mouseProto = $.ui.mouse.prototype,\n      _mouseInit = mouseProto._mouseInit,\n      touchHandled;\n\n  /**\n   * Simulate a mouse event based on a corresponding touch event\n   * @param {Object} event A touch event\n   * @param {String} simulatedType The corresponding mouse event\n   */\n  function simulateMouseEvent (event, simulatedType) {\n\n    // Ignore multi-touch events\n    if (event.originalEvent.touches.length > 1) {\n      return;\n    }\n\n    event.preventDefault();\n\n    var touch = event.originalEvent.changedTouches[0],\n        simulatedEvent = document.createEvent('MouseEvents');\n    \n    // Initialize the simulated mouse event using the touch event's coordinates\n    simulatedEvent.initMouseEvent(\n      simulatedType,    // type\n      true,             // bubbles                    \n      true,             // cancelable                 \n      window,           // view                       \n      1,                // detail                     \n      touch.screenX,    // screenX                    \n      touch.screenY,    // screenY                    \n      touch.clientX,    // clientX                    \n      touch.clientY,    // clientY                    \n      false,            // ctrlKey                    \n      false,            // altKey                     \n      false,            // shiftKey                   \n      false,            // metaKey                    \n      0,                // button                     \n      null              // relatedTarget              \n    );\n\n    // Dispatch the simulated event to the target element\n    event.target.dispatchEvent(simulatedEvent);\n  }\n\n  /**\n   * Handle the jQuery UI widget's touchstart events\n   * @param {Object} event The widget element's touchstart event\n   */\n  mouseProto._touchStart = function (event) {\n\n    var self = this;\n\n    // Ignore the event if another widget is already being handled\n    if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\n      return;\n    }\n\n    // Set the flag to prevent other widgets from inheriting the touch event\n    touchHandled = true;\n\n    // Track movement to determine if interaction was a click\n    self._touchMoved = false;\n\n    // Simulate the mouseover event\n    simulateMouseEvent(event, 'mouseover');\n\n    // Simulate the mousemove event\n    simulateMouseEvent(event, 'mousemove');\n\n    // Simulate the mousedown event\n    simulateMouseEvent(event, 'mousedown');\n  };\n\n  /**\n   * Handle the jQuery UI widget's touchmove events\n   * @param {Object} event The document's touchmove event\n   */\n  mouseProto._touchMove = function (event) {\n\n    // Ignore event if not handled\n    if (!touchHandled) {\n      return;\n    }\n\n    // Interaction was not a click\n    this._touchMoved = true;\n\n    // Simulate the mousemove event\n    simulateMouseEvent(event, 'mousemove');\n  };\n\n  /**\n   * Handle the jQuery UI widget's touchend events\n   * @param {Object} event The document's touchend event\n   */\n  mouseProto._touchEnd = function (event) {\n\n    // Ignore event if not handled\n    if (!touchHandled) {\n      return;\n    }\n\n    // Simulate the mouseup event\n    simulateMouseEvent(event, 'mouseup');\n\n    // Simulate the mouseout event\n    simulateMouseEvent(event, 'mouseout');\n\n    // If the touch interaction did not move, it should trigger a click\n    if (!this._touchMoved) {\n\n      // Simulate the click event\n      simulateMouseEvent(event, 'click');\n    }\n\n    // Unset the flag to allow other widgets to inherit the touch event\n    touchHandled = false;\n  };\n\n  /**\n   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\n   * This method extends the widget with bound touch event handlers that\n   * translate touch events to mouse events and pass them to the widget's\n   * original mouse event handling methods.\n   */\n  mouseProto._mouseInit = function () {\n    \n    var self = this;\n\n    // Delegate the touch handlers to the widget's element\n    self.element\n      .bind('touchstart', $.proxy(self, '_touchStart'))\n      .bind('touchmove', $.proxy(self, '_touchMove'))\n      .bind('touchend', $.proxy(self, '_touchEnd'));\n\n    // Call the original $.ui.mouse init method\n    _mouseInit.call(self);\n  };\n\n})(jQuery);\ndefine(\"touchpunch\", [\"jquery\",\"jqueryui\"], function(){});\n\n",
    "/**\n * Add dataset support to elements\n * No globals, no overriding prototype with non-standard methods, \n *   handles CamelCase properly, attempts to use standard \n *   Object.defineProperty() (and Function bind()) methods, \n *   falls back to native implementation when existing\n * Inspired by http://code.eligrey.com/html5/dataset/ \n *   (via https://github.com/adalgiso/html5-dataset/blob/master/html5-dataset.js )\n * Depends on Function.bind and Object.defineProperty/Object.getOwnPropertyDescriptor (shims below)\n * Licensed under the X11/MIT License\n*/\n \n// Inspired by https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function (oThis) {\n        'use strict';\n        if (typeof this !== \"function\") {\n            // closest thing possible to the ECMAScript 5 internal IsCallable function\n            throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n        }\n \n        var aArgs = Array.prototype.slice.call(arguments, 1),\n            fToBind = this,\n            FNOP = function () {},\n            fBound = function () {\n                return fToBind.apply(\n                    this instanceof FNOP && oThis ? this : oThis,\n                   aArgs.concat(Array.prototype.slice.call(arguments))\n               );\n            };\n \n        FNOP.prototype = this.prototype;\n        fBound.prototype = new FNOP();\n \n        return fBound;\n    };\n}\n \n/*\n * Xccessors Standard: Cross-browser ECMAScript 5 accessors\n * http://purl.eligrey.com/github/Xccessors\n * \n * 2010-06-21\n * \n * By Eli Grey, http://eligrey.com\n * \n * A shim that partially implements Object.defineProperty,\n * Object.getOwnPropertyDescriptor, and Object.defineProperties in browsers that have\n * legacy __(define|lookup)[GS]etter__ support.\n * \n * Licensed under the X11/MIT License\n *   See LICENSE.md\n*/\n \n// Removed a few JSLint options as Notepad++ JSLint validator complaining and \n//   made comply with JSLint; also moved 'use strict' inside function\n/*jslint white: true, undef: true, plusplus: true,\n  bitwise: true, regexp: true, newcap: true, maxlen: 90 */\n \n/*! @source http://purl.eligrey.com/github/Xccessors/blob/master/xccessors-standard.js*/\n \n(function () {\n    'use strict';\n    var ObjectProto = Object.prototype,\n    defineGetter = ObjectProto.__defineGetter__,\n    defineSetter = ObjectProto.__defineSetter__,\n    lookupGetter = ObjectProto.__lookupGetter__,\n    lookupSetter = ObjectProto.__lookupSetter__,\n    hasOwnProp = ObjectProto.hasOwnProperty;\n    \n    if (defineGetter && defineSetter && lookupGetter && lookupSetter) {\n \n        if (!Object.defineProperty) {\n            Object.defineProperty = function (obj, prop, descriptor) {\n                if (arguments.length < 3) { // all arguments required\n                    throw new TypeError(\"Arguments not optional\");\n                }\n                \n                prop += \"\"; // convert prop to string\n \n                if (hasOwnProp.call(descriptor, \"value\")) {\n                    if (!lookupGetter.call(obj, prop) && !lookupSetter.call(obj, prop)) {\n                        // data property defined and no pre-existing accessors\n                        obj[prop] = descriptor.value;\n                    }\n \n                    if ((hasOwnProp.call(descriptor, \"get\") ||\n                         hasOwnProp.call(descriptor, \"set\"))) \n                    {\n                        // descriptor has a value prop but accessor already exists\n                        throw new TypeError(\"Cannot specify an accessor and a value\");\n                    }\n                }\n \n                // can't switch off these features in ECMAScript 3\n                // so throw a TypeError if any are false\n                if (!(descriptor.writable && descriptor.enumerable && \n                    descriptor.configurable))\n                {\n                    throw new TypeError(\n                        \"This implementation of Object.defineProperty does not support\" +\n                        \" false for configurable, enumerable, or writable.\"\n                    );\n                }\n                \n                if (descriptor.get) {\n                    defineGetter.call(obj, prop, descriptor.get);\n                }\n                if (descriptor.set) {\n                    defineSetter.call(obj, prop, descriptor.set);\n                }\n            \n                return obj;\n            };\n        }\n \n        if (!Object.getOwnPropertyDescriptor) {\n            Object.getOwnPropertyDescriptor = function (obj, prop) {\n                if (arguments.length < 2) { // all arguments required\n                    throw new TypeError(\"Arguments not optional.\");\n                }\n                \n                prop += \"\"; // convert prop to string\n \n                var descriptor = {\n                    configurable: true,\n                    enumerable  : true,\n                    writable    : true\n                },\n                getter = lookupGetter.call(obj, prop),\n                setter = lookupSetter.call(obj, prop);\n \n                if (!hasOwnProp.call(obj, prop)) {\n                    // property doesn't exist or is inherited\n                    return descriptor;\n                }\n                if (!getter && !setter) { // not an accessor so return prop\n                    descriptor.value = obj[prop];\n                    return descriptor;\n                }\n \n                // there is an accessor, remove descriptor.writable;\n                // populate descriptor.get and descriptor.set (IE's behavior)\n                delete descriptor.writable;\n                descriptor.get = descriptor.set = undefined;\n                \n                if (getter) {\n                    descriptor.get = getter;\n                }\n                if (setter) {\n                    descriptor.set = setter;\n                }\n                \n                return descriptor;\n            };\n        }\n \n        if (!Object.defineProperties) {\n            Object.defineProperties = function (obj, props) {\n                var prop;\n                for (prop in props) {\n                    if (hasOwnProp.call(props, prop)) {\n                        Object.defineProperty(obj, prop, props[prop]);\n                    }\n                }\n            };\n        }\n    }\n}());\n \n// Begin dataset code\n \nif (!document.documentElement.dataset && \n         // FF is empty while IE gives empty object\n        (!Object.getOwnPropertyDescriptor(Element.prototype, 'dataset')  ||\n        !Object.getOwnPropertyDescriptor(Element.prototype, 'dataset').get)\n    ) {\n    var propDescriptor = {\n        enumerable: true,\n        get: function () {\n            'use strict';\n            var i, \n                that = this,\n                HTML5_DOMStringMap, \n                attrVal, attrName, propName,\n                attribute,\n                attributes = this.attributes,\n                attsLength = attributes.length,\n                toUpperCase = function (n0) {\n                    return n0.charAt(1).toUpperCase();\n                },\n                getter = function () {\n                    return this;\n                },\n                setter = function (attrName, value) {\n                    return (typeof value !== 'undefined') ? \n                        this.setAttribute(attrName, value) : \n                        this.removeAttribute(attrName);\n                };\n            try { // Simulate DOMStringMap w/accessor support\n                // Test setting accessor on normal object\n                ({}).__defineGetter__('test', function () {});\n                HTML5_DOMStringMap = {};\n            }\n            catch (e1) { // Use a DOM object for IE8\n                HTML5_DOMStringMap = document.createElement('div');\n            }\n            for (i = 0; i < attsLength; i++) {\n                attribute = attributes[i];\n                // Fix: This test really should allow any XML Name without \n                //         colons (and non-uppercase for XHTML)\n                if (attribute && attribute.name && \n                    (/^data-\\w[\\w\\-]*$/).test(attribute.name)) {\n                    attrVal = attribute.value;\n                    attrName = attribute.name;\n                    // Change to CamelCase\n                    propName = attrName.substr(5).replace(/-./g, toUpperCase);\n                    try {\n                        Object.defineProperty(HTML5_DOMStringMap, propName, {\n                            enumerable: this.enumerable,\n                            get: getter.bind(attrVal || ''),\n                            set: setter.bind(that, attrName)\n                        });\n                    }\n                    catch (e2) { // if accessors are not working\n                        HTML5_DOMStringMap[propName] = attrVal;\n                    }\n                }\n            }\n            return HTML5_DOMStringMap;\n        }\n    };\n    try {\n        // FF enumerates over element's dataset, but not \n        //   Element.prototype.dataset; IE9 iterates over both\n        Object.defineProperty(Element.prototype, 'dataset', propDescriptor);\n    } catch (e) {\n        propDescriptor.enumerable = false; // IE8 does not allow setting to true\n        Object.defineProperty(Element.prototype, 'dataset', propDescriptor);\n    }\n};\ndefine(\"preview_export/scripts/dataset-shim\", function(){});\n\n",
    "require.config({\n    paths: {\n        libs: \"../scripts/libs\",\n        preview_export: \"../preview_export\",\n\n        jquery: \"../scripts/libs/jQuery\",\n        jqueryui: \"../scripts/libs/jquery-ui\",\n        touchpunch: \"../scripts/libs/jquery-ui-touch-punch\",\n        \"jquery.multisortable\": \"../scripts/libs/jquery.multisortable\",\n        position: \"../components/jq-contextmenu/jquery.ui.position\",\n        jqContextMenu: \"../components/jq-contextmenu/jquery.contextMenu\",\n        lodash: \"../scripts/libs/lodash\",\n        backbone: \"../scripts/libs/backbone\",\n        css: \"../scripts/libs/css\",\n        bootstrap: \"../components/bootstrap/bootstrap\",\n        colorpicker: \"../components/spectrum/spectrum\",\n        handlebars: '../scripts/libs/Handlebars',\n        lang: \"../locales/lang\",\n        lexed: '../components/lexed/lexed',\n        codemirror: '../components/codemirror',\n        marked: '../components/marked/marked',\n        lls: '../components/lls/dist',\n        Q: '../components/q/q',\n\n        // build - rmap\n        'strut/presentation_generator/bespoke': '../bundles/app/strut.presentation_generator.bespoke',\n        'strut/presentation_generator/reveal': '../bundles/app/strut.presentation_generator.reveal',\n        'strut/presentation_generator/handouts': '../bundles/app/strut.presentation_generator.handouts',\n        'strut/deck': '../bundles/app/strut.deck',\n        'strut/startup': '../bundles/app/strut.startup',\n        'strut/editor': '../bundles/app/strut.editor',\n        'strut/etch_extension': '../bundles/app/strut.etch_extension',\n        'strut/exporter/zip/browser': '../bundles/app/strut.exporter.zip.browser',\n        'strut/exporter': '../bundles/app/strut.exporter',\n        'strut/exporter/json': '../bundles/app/strut.exporter.json',\n        'strut/header': '../bundles/app/strut.header',\n        'strut/importer': '../bundles/app/strut.importer',\n        'strut/importer/json': '../bundles/app/strut.importer.json',\n        'strut/exit': '../bundles/app/strut.exit',\n        'strut/presentation_generator/impress': '../bundles/app/strut.presentation_generator.impress',\n        'strut/presentation_generator/impress-mobile': '../bundles/app/strut.presentation_generator.impress-mobile',\n        'strut/logo_button': '../bundles/app/strut.logo_button',\n        'strut/presentation_generator': '../bundles/app/strut.presentation_generator',\n        'strut/slide_components': '../bundles/app/strut.slide_components',\n        'strut/slide_editor': '../bundles/app/strut.slide_editor',\n        'strut/slide_snapshot': '../bundles/app/strut.slide_snapshot',\n        'strut/storage': '../bundles/app/strut.storage',\n        'strut/themes': '../bundles/app/strut.themes',\n        'strut/well_context_buttons': '../bundles/app/strut.well_context_buttons',\n        'strut/config': '../bundles/app/strut.config',\n        'strut/transition_editor': '../bundles/app/strut.transition_editor',\n\n        'tantaman/web': '../bundles/common/tantaman.web',\n        'tantaman/web/local_storage': '../bundles/common/tantaman.web.local_storage',\n        'tantaman/web/remote_storage': '../bundles/common/tantaman.web.remote_storage',\n        'tantaman/web/saver': '../bundles/common/tantaman.web.saver',\n        'tantaman/web/storage': '../bundles/common/tantaman.web.storage',\n        'tantaman/web/undo_support': '../bundles/common/tantaman.web.undo_support',\n        'tantaman/web/interactions': '../bundles/common/tantaman.web.interactions',\n        'tantaman/web/widgets': '../bundles/common/tantaman.web.widgets',\n        'tantaman/web/css_manip': '../bundles/common/tantaman.web.css_manip'\n        // end build - rmap\n    },\n\n    shim: {\n        bootstrap: {\n            deps: [\"jquery\"]\n        },\n\n        \"jquery.multisortable\": {\n            deps: [\"jquery\", \"jqueryui\"]\n        },\n\n        touchpunch: {\n            deps: [\"jquery\", \"jqueryui\"]\n        },\n\n        jqueryui: {\n            deps: [\"jquery\"]\n        },\n\n        colorpicker: {\n            deps: [\"jquery\"]\n        },\n\n        gradientPicker: {\n            deps: [\"jquery\", \"colorpicker\"]\n        },\n\n        position: {\n            deps: [\"jquery\"]\n        },\n\n        jqContextMenu: {\n            deps: [\"jquery\", \"position\"]\n        },\n\n        \"codemirror/codemirror\": {\n            deps: [\"css!../components/codemirror/codemirror.css\"],\n            exports: 'CodeMirror'\n        },\n\n        'codemirror/modes/css': {\n            deps: ['codemirror/codemirror']\n        },\n\n        'codemirror/modes/markdown': {\n            deps: ['codemirror/codemirror']\n        }\n    }\n});\n\nfunction getSelectionBoundaryElement(win, isStart) {\n    var range, sel, container = null;\n    var doc = win.document;\n\n    if (doc.selection) {\n        // IE branch\n        range = doc.selection.createRange();\n        range.collapse(isStart);\n        return range.parentElement();\n    } else if (win.getSelection) {\n        // Other browsers\n        sel = win.getSelection();\n\n        if (sel.rangeCount > 0) {\n            range = sel.getRangeAt(0);\n            container = range[isStart ? \"startContainer\" : \"endContainer\"];\n\n            // Check if the container is a text node and return its parent if so\n            if (container.nodeType === 3) {\n                container = container.parentNode;\n            }\n        }\n    }\n    return container;\n}\n\nvar __hasProp = {}.hasOwnProperty,\n    __extends = function (child, parent) {\n        for (var key in parent) {\n            if (__hasProp.call(parent, key)) child[key] = parent[key];\n        }\n        function ctor() {\n            this.constructor = child;\n        }\n\n        ctor.prototype = parent.prototype;\n        child.prototype = new ctor();\n        child.__super__ = parent.prototype;\n        return child;\n    };\n\nwindow.__extends = __extends;\n\nwindow.zTracker = {\n    z: 0,\n    next: function () {\n        return ++this.z;\n    }\n};\n\n// TODO: we'll have to make a more generic one that hooks into\n// the storage providers...\nwindow.clearPresentations = function () {\n    var len = localStorage.length;\n    for (var i = 0; i < len; ++i) {\n        var key = localStorage.key(i);\n        if (key && key.indexOf(\".strut\") != -1) {\n            console.log('Removing: ' + key);\n            localStorage.removeItem(key);\n        }\n    }\n};\n\nwindow.log = function (msg) {\n    if (log.enabled.log)\n        console.log(msg);\n};\n\nlog.enabled = {\n    notice: true,\n    err: true,\n    log: true\n};\n\nlog.err = function (msg) {\n    if (log.enabeld.err)\n        console.error(msg);\n};\n\nlog.notice = function (msg) {\n    if (log.enabled.notice)\n        console.log(msg);\n}\n\nwindow.URL = window.URL || window.webkitURL;\n\n// reassigning rquire to r for\n// the \"preview\" includes so they don't get built into the actual\n// amd app.\n// TODO: move this stuff into index.html\n// so we don't have to include the actual amd-app when\n// we go to present.\nrequire([\n        'handlebars',\n        'lang',\n        'compiled-templates',\n        'colorpicker',\n        'strut/config/config',\n        'features',\n        './StrutLoader',\n        'bootstrap',\n        'jqContextMenu',\n        'css!components/jq-contextmenu/jquery.contextMenu.css',\n        'touchpunch',\n        'preview_export/scripts/dataset-shim'\n    ],\n    function (Handlebars, lang, empt, empty, config, registry, StrutLoader, bootstrap, ContextMenu, css, tp, dss) {\n        'use strict';\n        window._gaq = window._gaq || [];\n\n        var agent = window.navigator.userAgent;\n        if (agent.indexOf('WebKit') >= 0)\n            window.browserPrefix = \"-webkit-\"\n        else if (agent.indexOf('MSIE') >= 0)\n            window.browserPrefix = \"-ms-\"\n        else if (agent.indexOf('Mozilla') >= 0)\n            window.browserPrefix = \"-moz-\"\n        else\n            window.browserPrefix = \"\"\n\n        Handlebars.registerHelper(\"either\", function (a, b) {\n            return b != null ? b : a;\n        });\n\n        $.event.special.destroyed = {\n            remove: function (o) {\n                if (o.handler)\n                    o.handler();\n            }\n        };\n\n        window.addEventListener(\"dragover\", function (e) {\n            e = e || event;\n            e.preventDefault();\n        }, false);\n        window.addEventListener(\"drop\", function (e) {\n            e = e || event;\n            e.preventDefault();\n        }, false);\n\n        window.serviceRegistry = registry;\n        StrutLoader.start(registry, function () {\n        }, function () {\n        });\n    });\n\ndefine(\"main\", function(){});\n\n"
  ]
}